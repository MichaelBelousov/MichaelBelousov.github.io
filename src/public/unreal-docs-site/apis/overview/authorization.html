<!DOCTYPE html><html class="iui-theme-light" lang="en"><head><meta charSet="utf-8"/><meta name="author" content="Bentley Systems"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/favicon.ico"/><title>APIs | Authorization | iTwin Platform</title><meta name="next-head-count" content="6"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K95F6GW');</script><style>@layer global-overrides, itwinui;</style><link rel="preload" href="/unreal-docs-site/static/css/6a68c8a7b2a77f53.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/6a68c8a7b2a77f53.css" data-n-g=""/><link rel="preload" href="/unreal-docs-site/static/css/99338c7953687cf2.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/99338c7953687cf2.css" data-n-g=""/><link rel="preload" href="/unreal-docs-site/static/css/e34bb7039b877082.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/e34bb7039b877082.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/unreal-docs-site/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/unreal-docs-site/static/chunks/webpack-5260ea72744590ab.js" defer=""></script><script src="/unreal-docs-site/static/chunks/framework-79bce4a3a540b080.js" defer=""></script><script src="/unreal-docs-site/static/chunks/main-557073a0905b564b.js" defer=""></script><script src="/unreal-docs-site/static/chunks/pages/_app-6b8898c21a2e4b95.js" defer=""></script><script src="/unreal-docs-site/static/chunks/8670-b234e6d64ae1c03d.js" defer=""></script><script src="/unreal-docs-site/static/chunks/9149-291b03257a78519e.js" defer=""></script><script src="/unreal-docs-site/static/chunks/747-0423056447444b08.js" defer=""></script><script src="/unreal-docs-site/static/chunks/pages/apis/overview/%5Btopic%5D-c10f678f685f50a5.js" defer=""></script><script src="/unreal-docs-site/static/4I2YaoF9Uf026tEb78Qcd/_buildManifest.js" defer=""></script><script src="/unreal-docs-site/static/4I2YaoF9Uf026tEb78Qcd/_ssgManifest.js" defer=""></script></head><body class="iui-body portal-root"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K95F6GW"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div data-theme="light"><div class="iui-layouts-page"><div class="iui-layouts-page-header"><div class="portal-header dark-blue" data-theme="dark"><header class="iui-page-header page-header"><div class="iui-left"><a id="itwin-platform-header-logo-link" href="/"><div class="iui-header-logo" role="button" tabindex="0"><svg id="header-logo-icon" class="iui-header-button-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.997 3.95a1.405 1.405 0 0 0-.682-1.122L11.901.802a1.397 1.397 0 0 0-1.427 0L10.3.906l-1.017.604L7.06 2.828a1.404 1.404 0 0 0-.684 1.202v1.113l-.85-.504a1.397 1.397 0 0 0-1.427 0l-2.157 1.28-.995.59-.262.156A1.404 1.404 0 0 0 0 7.867v4.103c0 .027.001.054.003.08a1.405 1.405 0 0 0 .682 1.122l3.414 2.026a1.397 1.397 0 0 0 1.427 0l.175-.104 1.017-.604 2.222-1.318a1.404 1.404 0 0 0 .685-1.202v-1.113l.85.504a1.397 1.397 0 0 0 1.426 0l2.157-1.28.996-.59.262-.156A1.404 1.404 0 0 0 16 8.133V4.03c0-.027-.001-.054-.003-.08zM4.82 6.619a.744.744 0 1 1-.744.744.744.744 0 0 1 .744-.744zm2.037 6.375-.3.184-1.071.66-.367.227-.19.117a.174.174 0 0 1-.043.02.253.253 0 0 1-.173-.012l-.017-.008-.103-.064-1.825-1.124V11.86s.006-.244.316-.067l1.126.692v-2.428l-.701-.433V8.492s.006-.244.317-.066l1.582.973v3.091l1.132-.696c.31-.177.317.067.317.067zm8.548-7.889v3.028a.807.807 0 0 1-.393.69l-.262.156-.996.591-2.156 1.28a.802.802 0 0 1-.82 0l-1.153-.685V7.867a1.404 1.404 0 0 0-.685-1.202l-1.124-.667-.846-.502V4.03a.807.807 0 0 1 .393-.69L9.585 2.02l1.018-.604.175-.103a.803.803 0 0 1 .82 0l3.414 2.025a.814.814 0 0 1 .392.645l.001.046zm-3.958-2.713 2.157 1.329V5.06s-.008.288-.375.078L11.9 4.32v2.87l.829.511v1.34s-.007.288-.374.078l-1.87-1.15V4.316l-1.338.822c-.367.21-.374-.078-.374-.078V3.72l.354-.217 1.266-.78.434-.268.224-.138a.205.205 0 0 1 .05-.025.299.299 0 0 1 .205.016l.02.01z"></path></svg><span class="iui-label"><strong>iTwin Platform</strong></span></div></a></div><div class="iui-right"><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/get-started"><span class="iui-button-label"><div>Get Started</div></span></a><a class="iui-button iui-borderless iui-header-button iui-active desktop-header-button" type="button" aria-current="location" href="/apis"><span class="iui-button-label"><div>Documentation</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button desktop-header-button" type="button" aria-label="Dropdown"><span class="iui-button-label"><div>Learning</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/samples"><span class="iui-button-label"><div>Samples</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button desktop-header-button" type="button" aria-label="Dropdown"><span class="iui-button-label"><div>Support</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><button class="iui-button iui-borderless" type="button" id="mobile-header-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="iui-button-icon" aria-hidden="true"><g fill-rule="evenodd"><path d="M0,12h16v2H0V12z"></path><path d="M0,7h16v2H0V7z"></path><path d="M0,2h16v2H0V2z"></path></g></svg></button><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></header><div class="header-menu-backdrop" style="display:none"><div class="collapsible-menu"><div class="collapsible-menu-close-area"><button class="iui-button iui-borderless iui-small header-close-button" type="button"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon" aria-hidden="true"><path d="m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"></path></svg></button></div><a class="hamburger-nav-link" href="/get-started/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Started</div></span></button></a><a class="hamburger-nav-link" href="/apis/"><button class="iui-button iui-borderless iui-header-button iui-active hamburger-button" type="button" aria-current="location"><span class="iui-button-label"><div>Documentation</div></span></button></a><a class="hamburger-nav-link" href="/tutorials/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Tutorials</div></span></button></a><a class="hamburger-nav-link" href="/accreditation/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Accreditation</div></span></button></a><a class="hamburger-nav-link" href="/powered-by-itwin/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Powered by iTwin</div></span></button></a><a class="hamburger-nav-link" href="/samples/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Samples</div></span></button></a><a class="hamburger-nav-link" href="/support/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Support</div></span></button></a><a class="hamburger-nav-link" href="https://itwinplatform.ideas.aha.io/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Submit an Idea</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon"><path d="m16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4-1.9-1.9m5.4 16v-9h-1v8h-14v-14h8v-1h-9v16z"></path></svg></button></a><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></div></div></div><div class="iui-layouts-page-sidenav left-side-nav expanded"><div class="iui-root transparent-container" data-iui-theme="light" data-iui-contrast="default"><div class="left-side-nav-header expanded"><div class="left-side-nav-title-container"><div class="left-side-nav-title-section"><div class="iui-text-title left-side-nav-title">Table of contents</div><button class="iui-button left-side-nav-expander" data-iui-variant="borderless" data-iui-size="small" type="button"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill-rule="evenodd"><path d="M0,12h16v2H0V12z"></path><path d="M0,7h16v2H0V7z"></path><path d="M0,2h16v2H0V2z"></path></g></svg></span></button></div><div class="iui-input-container iui-inline-icon iui-with-message left-side-nav-header-item"><input class="iui-input" id="search-input" role="searchbox" placeholder="Search..."/><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-input-icon"><path d="m11 9.7c.7-1 1.1-2.2 1.1-3.5.1-3.5-2.7-6.2-6-6.2-3.4 0-6.1 2.7-6.1 6.1s2.7 6.1 6.1 6.1c1.3 0 2.5-.4 3.5-1.1l4.9 4.9 1.4-1.4zm-5 .5c-2.3 0-4.1-1.8-4.1-4.1s1.8-4.1 4.1-4.1 4.1 1.8 4.1 4.1-1.8 4.1-4.1 4.1"></path></svg></div></div></div><div class="nav-item-container"><div class="left-side-nav-section"><div class="left-side-nav-section-content"><div class="iui-expandable-block iui-expanded iui-borderless left-side-nav-expandable level-1"><div role="button" aria-expanded="true" class="iui-header" aria-disabled="false" tabindex="0"><svg viewBox="0 0 16 16" class="iui-icon" aria-hidden="true"><path d="m4.7 0-1.4 1.4 6.6 6.6-6.6 6.6 1.4 1.4 8-8z"></path></svg><span class="iui-expandable-block-label"><div class="iui-title"><div class="left-side-nav-expandable-title">REST API Overview</div></div></span></div><div class="iui-expandable-content"><div><div class="nav-expandable-content"><div class="left-side-nav-item level-2"><a href="/apis/overview/api-fundamentals/">API fundamentals</a></div><div class="left-side-nav-item level-2"><a href="/apis/overview/error-codes/">Error codes</a></div><div class="left-side-nav-item active level-2"><a href="/apis/overview/authorization/">Authorization</a></div><div class="left-side-nav-item level-2"><a href="/apis/overview/lifecycle/">Lifecycle</a></div><div class="left-side-nav-item level-2"><a href="/apis/overview/rate-limits/">Rate limits</a></div></div></div></div></div></div></div></div></div></div><div class="iui-layouts-page-content content-container-base transparent-container"><div class="iui-layouts-page-content-title-area page-title-area padded"><div class="iui-layouts-page-content iui-layouts-page-content-padded transparent-container page-title-area-content"><div class="iui-layouts-page-content-centered"><div class="iui-root transparent-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-text-headline">REST API Overview</div></div></div></div></div><div class="content-container-body"><div class="iui-layouts-page-content iui-layouts-page-content-padded transparent-container content-container"><div class="iui-layouts-page-content-centered"><div>
<!-- -->
<h1 class="iui-text-headline iui-text-spacing documentation-headline" id="oauth2-authorization">OAUTH2 AUTHORIZATION</h1>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#overview" id="overview">OVERVIEW</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Bentley iTwin APIs and SDKs require the end user to give consent to your application to retrieve and use data on user&#x27;s behalf. Our APIs use OAuth 2.0 to allow applications access to the data. The following instructions contain information on how to setup your application to use OAuth 2.0. You can find the detailed specification for OAuth 2.0 at <a href="https://tools.ietf.org/html/rfc6749" rel="noopener noreferrer" target="_blank">rfc6749</a>.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Before you can begin the OAuth process, you must first register a new app with the iTwin Platform. When registering a new app, you will need to provide basic information including the application name, and redirect URI to be used for redirecting users back to the appropriate web server / browser / native app. If you haven&#x27;t already, click <a href="https://developer.bentley.com/register" rel="noopener noreferrer" target="_blank">here</a> to register a new application before proceeding.</p>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#key-terminology" id="key-terminology">KEY TERMINOLOGY</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The following key terms are important to know when using OAuth 2.0:</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Access Token – a token which contains a string that can be used to make authenticated requests to an API to access protect resources. The string has no meaning to the application using it, but represents that the user has authorized the application to access their account. The token is bounded by an appropriate lifetime, scopes, and other information that the server may require.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Authorization Server – the authorization server validates the identity of the user and then issues access tokens to the app to grant access to protected resources on the user&#x27;s behalf.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Client – an application which is attempting to access protected resources on behalf of the resource owner (such as the end user). The client can be hosted on a server, desktop, or mobile device.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Client ID – a unique public identifier for an app.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Client Secret – a random string that is known only to the application and the authorization server. The client secret is required for authorizing confidential clients for preventing the authorization server from providing tokens to rogue apps.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Confidential Client – Clients which have the ability to maintain the confidentiality of the Client Secret. Typically, these clients run on a server under the control of the developer, where the source code and configuration is not accessible to users (web server application).</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Public Client – Clients that do not have the ability to maintain the confidentiality of the Client Secret. Mobile, desktop and browser apps are typically considered public clients. In all of these cases, the secret should not be used because it can be easily discovered by other developers.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Redirect URI – the Redirect URI is used by the authorization server to redirect the user back to the application with authorization code after the user has successfully authorized the app.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Refresh Token – a token which contains a string that can be used to get a new access token (and optionally a new refresh token) when the current access token expires. A refresh token is needed for making authorized requests without user interaction (for background jobs or long-running tasks). Refresh token is requested with a special <em>offline</em>access_ scope, and such a request will always present a permissions consent page for end user.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Scope – OAuth 2.0 scopes provide a way to limit the amount of access that is granted to an access token. This can include limiting which protected resources can be access and what level of access (i.e. READ / WRITE) is granted. If a client tries to call an API endpoint and does not include the appropriate scopes, the call will fail with a 401 Unauthorized response.</p>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#authorizing-web-applications" id="authorizing-web-applications">AUTHORIZING WEB APPLICATIONS</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Web apps are written in a server-side framework and run on a server where the source code or configuration of the application is not available to the public. This allows the use of a client secret when communicating with the authorization server to help improve security.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph"><strong>NOTE:</strong> Your client credentials carry many privileges, so be sure to keep them secure!</p>
<ul class="documentation-ul">
<li>Do not put your client credential information (clientid, client secret or access tokens) in publicly accessible code where they can be discovered.</li>
<li>Store them in a safe place on the backend (server).</li>
</ul>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#authorization-code-flow" id="authorization-code-flow">Authorization Code Flow</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Most Bentley APIs support the OAuth 2.0 Authorization Code Flow. This flow provides the ability for a resource owner (owner of the data to access) to authorize applications to access their personal data on their behalf. Your application can use this flow including all built-in features like customer login and consent handling in order to get the authorization by the resource owner.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">These are the steps that the flow executes:</p>
<ol class="documentation-ol">
<li>Redirect the end user&#x27;s (resource owner&#x27;s) browser to the authorization server endpoint</li>
<li>Authenticate the end user and ask for consent</li>
<li>Redirect the end user to your application&#x27;s callback URL with an authorization code</li>
<li>Exchange the authorization code for an access token</li>
<li>Use the access token to call the API on behalf of the end user</li>
</ol>
<div class="mermaid">
sequenceDiagram
    participant ro as Resource Owner
    participant app as Application
    participant as as Authorization Server
    participant api as iTwin API

    ro-&gt;&gt;+app: Connect to application
    app-&gt;&gt;+as: Request authorization code
    as-&gt;&gt;ro: Redirect to login and consent
    ro-&gt;&gt;as: Sign in and consent
    as-&gt;&gt;-app: Authorization code
    app-&gt;&gt;+as: Exchange authorization code for an access_token
    as-&gt;&gt;as: Validate client_id, client_secret, scope and redirect_uri
    as-&gt;&gt;-app: Granted access token
    app-&gt;&gt;-ro: Signed in

    ro-&gt;&gt;+app: Perform action
    app-&gt;&gt;+api: API request with the access token
    api-&gt;&gt;-app: API response
    app-&gt;&gt;-ro: Render content

</div>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The following steps outline how to implement the authorization code flow in your application:</p>
<ol class="documentation-ol">
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Redirect the end user&#x27;s browser to the authorization endpoint</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">In order to initiate the end user&#x27;s authorization, you must redirect the end user&#x27;s browser to Bentley&#x27;s authorize endpoint. This will provide a login screen to the end user for authentication. After successful authentication, the consent screen is displayed, if the user has not given the consent yet.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Authorization endpoint: <a href="https://ims.bentley.com/connect/authorize" rel="noopener noreferrer" target="_blank">https://ims.bentley.com/connect/authorize</a></p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The URL requires the following parameters:</p>
<ul class="documentation-ul">
<li>response_type=code: Request an authorization code as the result of the end user authorization process.</li>
<li>client_id=&lt;insert_your_client_id_here&gt;: Provide the client ID of your application.</li>
<li>redirect_uri=&lt;insert_redirect_uri_here&gt;: This is the callback URL that is registered for you application in order to receive the authorization code.</li>
<li>scope=&lt;insert_scopes_of_API_here&gt;: Include the scopes for the API, which are the permissions to request the end users consent for. For each API, you can find the required scopes in the additional API specific documentation. Please note that you will have to request an additional scope &quot;offline_access&quot; to receive a refresh token.</li>
<li>state=&lt;insert_client_state_here&gt;: (optional) An opaque value used by the client to maintain state between the request and callback. The authorization server includes this value when redirecting the user-agent back to the client. The parameter SHOULD be used for preventing cross-site request forgery.</li></ul></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Authenticate the end user and ask for consent</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">This step will be performed by Bentley&#x27;s authorization server and does not require anything to be implemented in your application.</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Redirect the end user to your application&#x27;s callback URL with an authorization code</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">After the end user provides consent for your application, Bentley&#x27;s authorization server will redirect the end user with an authorization code to the redirect URL registered with your application.</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Exchange the authorization code for an access token</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">After your application has received the authorization code you can exchange it for an access token. The client must authenticate using the HTTP Basic method and provide the url-encoded clientId and the clientSecret (&lt;insert_your_url_encoded_client_id_here&gt;:&lt;insert_your_url_encoded_client_secret_here&gt;) encoded with BASE64 in the HTTP Authorization header.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Token Endpoint: <a href="https://ims.bentley.com/connect/token" rel="noopener noreferrer" target="_blank">https://ims.bentley.com/connect/token</a></p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The following parameters are used in the request payload using the &quot;application/x-www-form-urlencoded&quot; format:</p>
<ul class="documentation-ul">
<li>grant_type=authorization_code: Tells the token endpoint to use the OAuth 2.0 Authorization Code Flow for this request.</li>
<li>code=&lt;authorization_code&gt;: Provide your one-time use authorization code that you received in step 3.</li>
<li>redirect_uri=&lt;insert_redirect_uri_here&gt;: This is the callback URL that is registered for your application in order to receive the authorization code. The URL must also match the URL that you have provided in the authorization request (see step 1).</li></ul>
<p class="iui-text-block iui-text-spacing documentation-paragraph">You will then receive the OAuth access token in the server response access_token field. Note that the expires_in field in the response represents the validity period of the access token in seconds and it is equal to 3600s.</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Use the access token to call the API on behalf of the end user</p></li>
</ol>
<p class="iui-text-block iui-text-spacing documentation-paragraph">You can now use the access token to call the API as long as it is not expired. Add the provided token to the Authorization header of your API request, using <em>Bearer</em> scheme</p>
<hr class="documentation-divider hidden"/>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#authorization-request-example" id="authorization-request-example">Authorization request example</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<div class="iui-text-block documentation-paragraph"><pre class="documentation-codeblock"><code class="iui-code">https://ims.bentley.com/connect/authorize?response_type=code&amp;client_id=&lt;client_id&gt;&amp;redirect_uri=&lt;redirect_uri&gt;&amp;scope=&lt;scope&gt;&amp;state=&lt;state&gt;
</code></pre></div>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#token-request-example" id="token-request-example">Token request example</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<div class="iui-text-block documentation-paragraph"><pre class="documentation-codeblock"><code class="iui-code bash language-bash">curl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=authorization_code --data-urlencode code=&lt;authorization_code&gt; --data-urlencode client_id=&lt;client_id&gt; --data-urlencode client_secret=&lt;client_secret&gt; --data-urlencode redirect_uri=&lt;redirect_uri&gt; --data-urlencode scope=&lt;scope&gt;
</code></pre></div>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#authorize-single-page-applications-spa-and-desktopmobile-applications-native" id="authorize-single-page-applications-spa-and-desktopmobile-applications-native">AUTHORIZE SINGLE-PAGE APPLICATIONS (SPA) AND DESKTOP/MOBILE APPLICATIONS (NATIVE)</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Native and single-page applications are public clients without a dedicated backend server. The implication of this is that these application types cannot securely store a client secret.</p>
<ul class="documentation-ul">
<li>In a native application, the code can be decompiled to reveal the client secret, which is bound to the app and is the same for all users and devices.</li>
<li>In the case of a single page application, the client secret cannot be stored securely because the entire source is available to the browser.</li>
</ul>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#authorization-code-flow-with-proof-key-for-code-exchange-pkce" id="authorization-code-flow-with-proof-key-for-code-exchange-pkce">Authorization Code Flow with Proof Key for Code Exchange (PKCE)</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">In order to mitigate issues outlined in <a href="#authorize-single-page-applications-spa-and-desktopmobile-applications-native">previous section</a>, OAuth 2.0 provides an option for Proof Key for Code Exchange (PKCE) by OAuth Public Clients (see OAuth 2.0 <a href="https://tools.ietf.org/html/rfc7636" rel="noopener noreferrer" target="_blank">RFC 7636</a>). PKCE allows the calling application to dynamically generate a random, one -time key called a &quot;code verifier&quot;. Additionally, the calling app creates a transform of the &quot;code verifier&quot; called the &quot;code challenge&quot; and sends it to the authorization server when obtaining an authorization code. The authorization code obtained is then sent to the token endpoint with the &quot;code verifier &quot;and the server compares it with the previously received request code so that it can perform the proof of the &quot;code verifier&quot; by the client application. This provides a mitigation as the &quot;code verifier&quot; would be unknown to the attacker and cannot be intercepted as it is sent over TLS.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">These are the steps for executing the Authorization Code flow with PKCE. Note these steps are very similar to the standard Authorization Code flow with the following additions:</p>
<ol class="documentation-ol">
<li>Application generates a cryptographically random code_verifier and from this generates a code_challenge</li>
<li>Redirect the end user&#x27;s (resource owner&#x27;s) browser to the authorization server endpoint</li>
<li>Authenticate the end user and ask for consent</li>
<li>The authorization server stores the code_challenge and redirects the end user to your application&#x27;s callback URL with an authorization code</li>
<li>Exchange the authorization code and the code_verifier for an access token</li>
<li>Use the access token to call the API on behalf of the end user</li>
</ol>
<div class="mermaid">
sequenceDiagram
    participant ro as Resource Owner
    participant app as Application
    participant as as Authorization Server
    participant api as iTwin API

    ro-&gt;&gt;+app: Connect to application
    app-&gt;&gt;app: Generate code_verifier and code_challenge
    app-&gt;&gt;+as: Request authorization code with code_challenge
    as-&gt;&gt;ro: Redirect to login and consent
    ro-&gt;&gt;as: Sign in and consent
    as-&gt;&gt;-app: Authorization code
    app-&gt;&gt;+as: Exchange authorization code and code_verifier for an access_token
    as-&gt;&gt;as: Validate client_id, code_verifier, code_challenge, scope and redirect_uri
    as-&gt;&gt;-app: Granted access token
    app-&gt;&gt;-ro: Signed in

    ro-&gt;&gt;+app: Perform action
    app-&gt;&gt;+api: API request with the access token
    api-&gt;&gt;-app: API response
    app-&gt;&gt;-ro: Render content

</div>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The following steps outline how to implement the authorization code flow in your application:</p>
<ol class="documentation-ol">
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Application generates a cryptographically random code_verifier and from this generates a code_challenge</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">This step needs to be completed within your application. There are several libraries available for generating the code_verifier and code_challenge.</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Redirect the end user&#x27;s browser to the authorization endpoint</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">In order to initiate the end user&#x27;s authorization, you must redirect the end user&#x27;s browser to Bentley&#x27;s authorize endpoint. This will provide a login screen to the end user for authentication. After successful authentication, the consent screen is displayed, if the user has not given the consent yet.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Authorization endpoint: <a href="https://ims.bentley.com/connect/authorize" rel="noopener noreferrer" target="_blank">https://ims.bentley.com/connect/authorize</a></p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The URL requires the following parameters:</p>
<ul class="documentation-ul">
<li>response_type=code: Request an authorization code as the result of the end user authorization process.</li>
<li>code_challenge=&lt;code_challenge&gt;: Provide the code generated from the code_verifier</li>
<li>code_challenge_method=S256: Provide the method used to generate the challenge, we only support S256.</li>
<li>client_id=&lt;insert_your_client_id_here&gt;: Provide the client ID of your application.</li>
<li>redirect_uri=&lt;insert_redirect_uri_here&gt;: This is the callback URL that is registered for you application in order to receive the authorization code.</li>
<li>scope=&lt;insert_scopes_of_API_here&gt;: Include the scopes for the API, which are the permissions to request the end users consent for. For each API, you can find the required scopes in the additional API specific documentation. Please note that you will have to request an additional scope &quot;offline_access&quot; to receive a refresh token.</li>
<li>state=&lt;insert_client_state_here&gt;: (optional) An opaque value used by the client to maintain state between the request and callback. The authorization server includes this value when redirecting the user-agent back to the client. The parameter SHOULD be used for preventing cross-site request forgery.</li></ul></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Authenticate the end user and ask for consent</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">This step will be performed by Bentley&#x27;s authorization server and does not require anything to be implemented in your application. Redirect the end user to your application&#x27;s callback URL with an authorization code</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">The authorization server stores the code_challenge and redirects the end user to your application&#x27;s callback URL with an authorization code</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">After the end user provides consent for your application, Bentley&#x27;s authorization server will store the code_challenge and redirect the end user with an authorization code to the redirect URL registered with your application.</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Exchange the authorization code for an access token</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">After your application has received the authorization code you can exchange it for an access token. The client must authenticate using the HTTP Basic method and provide the clientId (there is no clientSecret as this is a public client) (&lt;insert_your_client_id_here&gt;:) encoded with BASE64 in the HTTP Authorization header.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Token Endpoint: <a href="https://ims.bentley.com/connect/token" rel="noopener noreferrer" target="_blank">https://ims.bentley.com/connect/token</a></p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The following parameters are used in the request payload using the &quot;application/x-www-form-urlencoded&quot; format:</p>
<ul class="documentation-ul">
<li>grant_type=authorization_code: Tells the token endpoint to use the OAuth 2.0 Authorization Code Flow for this request.</li>
<li>code=&lt;authorization_code&gt;: Provide your one-time use authorization code that you received in step 3.</li>
<li>redirect_uri=&lt;insert_redirect_uri_here&gt;: This is the callback URL that is registered for your application in order to receive the authorization code. The URL must also match the URL that you have provided in the authorization request (see step 1). Note: The redirect URL needs to be URL encoded, otherwise an error is thrown.</li>
<li>code_verifer: The one-time use code verifier generated by your application in Step 1.</li></ul>
<p class="iui-text-block iui-text-spacing documentation-paragraph">You will then receive the OAuth access token in the server response. Note that the expires_in field in the response represents the validity period of the access token in seconds and it is equal to 3600s.</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Use the access token to call the API on behalf of the end user</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">You can now use the access token to call the API as long as it is not expired. Add the provided token to the authorization header of your API request.</p></li>
</ol>
<hr class="documentation-divider hidden"/>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#authorization-request-example-1" id="authorization-request-example-1">Authorization request example</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<div class="iui-text-block documentation-paragraph"><pre class="documentation-codeblock"><code class="iui-code">https://ims.bentley.com/connect/authorize?response_type=code&amp;client_id=&lt;client_id&gt;&amp;redirect_uri=&lt;redirect_uri&gt;&amp;scope=&lt;scope&gt;&amp;state=&lt;state&gt;&amp;code_challenge=&lt;code_challenge&gt;&amp;code_challenge_method=S256
</code></pre></div>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#token-request-example-1" id="token-request-example-1">Token request example</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<div class="iui-text-block documentation-paragraph"><pre class="documentation-codeblock"><code class="iui-code bash language-bash">curl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=authorization_code --data-urlencode code=&lt;authorization_code&gt; --data-urlencode client_id=&lt;client_id&gt; --data-urlencode redirect_uri=&lt;redirect_uri&gt; --data-urlencode scope=&lt;scope&gt; --data-urlencode code_verifier=&lt;code_verifier&gt;
</code></pre></div>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#using-refresh-tokens" id="using-refresh-tokens">USING REFRESH TOKENS</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">To receive a refresh token, you need to request an additional scope &quot;offline_access&quot; in the authorization request. See step 1 in the Authorization Code Flow / Authorization Code Flow with PKCE section for more details of how to pass this scope.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">When the offline_access scope is passed, the response from the authorization server will include both an authorization_token and a refresh_token.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">When the access token expires, you can use the refresh token in order to obtain a new access token. This way it is not required to request a new authentication/consent from the end user. In addition to the refresh token your client must authenticate using the HTTP Basic method again.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">In order to exchange the refresh_token for an access token the following parameters are used in the request payload using the &quot;application/x-www-form-urlencoded&quot; format:</p>
<ul class="documentation-ul">
<li>grant_type=refresh_token: This indicates for the token endpoint to refresh an access token for this request. So, it&#x27;ll expect a refresh token as part of the parameters.</li>
<li>refresh_token=&lt;insert_your_refresh_token_received_in_step_4_here&gt;: Provide your one-time token in order to refresh your access token without having to go through the authorization process again.</li>
</ul>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Our authorization server will give you a new OAuth access token together with a new refresh token.</p>
<hr class="documentation-divider hidden"/>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#token-refresh-request-example" id="token-refresh-request-example">Token refresh request example</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<div class="iui-text-block documentation-paragraph"><pre class="documentation-codeblock"><code class="iui-code bash language-bash">curl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=refresh_token --data-urlencode refresh_token=&lt;refresh_token&gt; --data-urlencode client_id=&lt;client_id&gt; --data-urlencode client_secret=&lt;client_secret&gt; --data-urlencode scope=&lt;scope&gt;
</code></pre></div>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#authorizing-service-machine-to-machine" id="authorizing-service-machine-to-machine">AUTHORIZING SERVICE (MACHINE-TO-MACHINE)</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Service apps are designed to operate without user interaction (sometimes called two-legged OAuth) in order to access web-hosted resourced by using the identity of an application. Services run on a server where the source code or configuration of the application is not available to the public. This allows the use of a client secret when communicating with the authorization server to help improve security.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph"><strong>NOTE:</strong> Your client credentials carry many privileges, so be sure to keep them secure!</p>
<ul class="documentation-ul">
<li>Do not put your client credential information (clientid, client secret or access tokens) in publicly accessible code where they can be discovered.</li>
<li>Store them in a safe place on the backend (server).</li>
</ul>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The service app type does not represent any user or organization and does not have access to anything by default. If you want to provide access to projects for that application, you need to invite it to the projects using client email, provided in App details page.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#client-credential-flow" id="client-credential-flow">Client Credential Flow</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The Client Credential flow provides the ability for a web service (confidential client) to use it&#x27;s own credentials, instead of impersonating a user, to authenticate when calling a web service. Permissions are granted directly to the application itself by an administrator. When the app presents a token to a resource, the resource enforces that the app itself has authorization to perform an action since there is no user involved in the authentication.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">These are the steps that the Client Credential flow executes:</p>
<ol class="documentation-ol">
<li>Redirect the web server to the authorization server endpoint with Client ID and Client Secret</li>
<li>Authorization server validates the Client ID and Client Secret and returns Access Token</li>
<li>Client uses the access token to call the API</li>
</ol>
<div class="mermaid">
sequenceDiagram
    participant app as Application
    participant as as Authorization Server
    participant api as iTwin API

    app-&gt;&gt;+as: Authenticate using client_id and client_secret
    as-&gt;&gt;as: Validate client_id, client_secret and scopes
    as-&gt;&gt;-app: Granted access token

    app-&gt;&gt;+api: API request with the access token
    api-&gt;&gt;-app: API response

</div>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The following steps outline how to implement the authorization code flow in your application:</p>
<ol class="documentation-ol">
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Redirect the web server to the authorization server endpoint with Client ID and Client Secret</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">In order to initiate the client credential flow, you need to call Bentley&#x27;s token endpoint: <a href="https://ims.bentley.com/connect/token" rel="noopener noreferrer" target="_blank">https://ims.bentley.com/connect/token</a></p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The URL requires the following parameters:</p>
<ul class="documentation-ul">
<li>grant_type=client_credentials: Must be set to client_credentials</li>
<li>client_id=&lt;insert_your_client_id_here&gt;: Provide the client ID of your application.</li>
<li>client_secret=&lt;insert_your_client_secret_here&gt;: Provide the client secret that was provided when you registered your app. The client secret must be url-encoded before being sent.</li>
<li>scope=&lt;insert_scopes_of_API_here&gt;: Include the scopes for the API, which are the permissions to request the end users consent for. For each API, you can find the required scopes in the additional API specific documentation. Please note that you will have to request an additional scope &quot;offline_access&quot; to receive a refresh token.</li></ul></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Authorization server validates the Client ID and Client Secret and returns Access Token</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">This step will be performed by Bentley&#x27;s authorization server and does not require anything to be implemented in your application. A successful response will include an access token.</p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">App uses the access token to call the API</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">You can now use the access token to call the API as long as it is not expired. Add the provided token to the Authorization header of your API request, using <em>Bearer</em> scheme</p></li>
</ol>
<hr class="documentation-divider hidden"/>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#token-request-example-2" id="token-request-example-2">Token request example</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<div class="iui-text-block documentation-paragraph"><pre class="documentation-codeblock"><code class="iui-code bash language-bash">curl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=client_credentials --data-urlencode client_id=&lt;client_id&gt; --data-urlencode client_secret=&lt;client_secret&gt; --data-urlencode scope=&lt;scope&gt;
</code></pre></div>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#error-responses" id="error-responses">ERROR RESPONSES</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The Authorization Server provides standard HTTP status response codes in the response header.</p>
<ul class="documentation-ul">
<li>A 2xx type response typically represents a successful response.</li>
<li>A 4xx type response typically represents a client error.</li>
<li>A 5xx type response typically represents a server error.</li>
</ul>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The following errors may occur when submitting a request for an access token:</p>
<ul class="documentation-ul">
<li>400 – Bad request. Common causes include:<ul class="documentation-ul">
<li>The given authorization code is not valid or was already used.</li>
<li>The redirect_uri differs from the one registered for your client..</li></ul></li>
<li>401 – Unauthorized. Common causes include:<ul class="documentation-ul">
<li>The specified client ID is invalid.</li>
<li>The token is not valid (has expired).</li></ul></li>
<li>403 – Forbidden. The client down not have access rights to the resource.</li>
<li>429 – Too many requests. The application&#x27;s rate limit for the resource has been exhausted.</li>
<li>500 – Internal Server Error. This is typically indicative that the endpoint is temporarily unavailable.</li>
<li>502 – Bad Gateway. This indicates that the server got an invalid response.</li>
</ul>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Other OAuth protocol errors can be returned to redirect_uri in an &quot;error&quot; parameter:</p>
<ul class="documentation-ul">
<li>invalid_request - The request is missing a required parameter, includes an invalid parameter value, includes a parameter more than once, or is otherwise malformed.</li>
<li>unauthorized_client - The client is not authorized to request an authorization code using this method.</li>
<li>access_denied - The resource owner or authorization server denied the request.</li>
<li>unsupported_response_type - The authorization server does not support obtaining an authorization code using this method.</li>
<li>invalid_scope - The requested scope is invalid, unknown, or malformed.</li>
</ul></div></div></div><div class="iui-root transparent-container" data-iui-theme="light" data-iui-contrast="default"><footer class="iui-legal-footer footer"><ul class="iui-legal-footer-list"><li class="iui-legal-footer-item">© 2024 Bentley Systems, Incorporated</li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="/terms-of-service" target="_blank" rel="noreferrer">Terms of service</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/privacy-policy" target="_blank" rel="noreferrer">Privacy</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/terms-of-use-and-select-online-agreement" target="_blank" rel="noreferrer">Terms of use</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/cookie-policy" target="_blank" rel="noreferrer">Cookies</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://connect.bentley.com/Legal" target="_blank" rel="noreferrer">Legal notices</a></li></ul></footer></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"topic":"authorization","content":"\u003c!-- Copyright (c) Bentley Systems, Incorporated. All rights reserved.            --\u003e\n\u003c!-- See LICENSE in the project root for license terms and full copyright notice. --\u003e\n\n# OAUTH2 AUTHORIZATION\n\n## OVERVIEW\n\nBentley iTwin APIs and SDKs require the end user to give consent to your application to retrieve and use data on user\u0026#39;s behalf. Our APIs use OAuth 2.0 to allow applications access to the data. The following instructions contain information on how to setup your application to use OAuth 2.0. You can find the detailed specification for OAuth 2.0 at [rfc6749](https://tools.ietf.org/html/rfc6749).\n\nBefore you can begin the OAuth process, you must first register a new app with the iTwin Platform. When registering a new app, you will need to provide basic information including the application name, and redirect URI to be used for redirecting users back to the appropriate web server / browser / native app. If you haven\u0026#39;t already, click [here](https://developer.bentley.com/register) to register a new application before proceeding.\n\n## KEY TERMINOLOGY\n\nThe following key terms are important to know when using OAuth 2.0:\n\nAccess Token – a token which contains a string that can be used to make authenticated requests to an API to access protect resources. The string has no meaning to the application using it, but represents that the user has authorized the application to access their account. The token is bounded by an appropriate lifetime, scopes, and other information that the server may require.\n\nAuthorization Server – the authorization server validates the identity of the user and then issues access tokens to the app to grant access to protected resources on the user\u0026#39;s behalf.\n\nClient – an application which is attempting to access protected resources on behalf of the resource owner (such as the end user). The client can be hosted on a server, desktop, or mobile device.\n\nClient ID – a unique public identifier for an app.\n\nClient Secret – a random string that is known only to the application and the authorization server. The client secret is required for authorizing confidential clients for preventing the authorization server from providing tokens to rogue apps.\n\nConfidential Client – Clients which have the ability to maintain the confidentiality of the Client Secret. Typically, these clients run on a server under the control of the developer, where the source code and configuration is not accessible to users (web server application).\n\nPublic Client – Clients that do not have the ability to maintain the confidentiality of the Client Secret. Mobile, desktop and browser apps are typically considered public clients. In all of these cases, the secret should not be used because it can be easily discovered by other developers.\n\nRedirect URI – the Redirect URI is used by the authorization server to redirect the user back to the application with authorization code after the user has successfully authorized the app.\n\nRefresh Token – a token which contains a string that can be used to get a new access token (and optionally a new refresh token) when the current access token expires. A refresh token is needed for making authorized requests without user interaction (for background jobs or long-running tasks). Refresh token is requested with a special _offline_access_ scope, and such a request will always present a permissions consent page for end user.\n\nScope – OAuth 2.0 scopes provide a way to limit the amount of access that is granted to an access token. This can include limiting which protected resources can be access and what level of access (i.e. READ / WRITE) is granted. If a client tries to call an API endpoint and does not include the appropriate scopes, the call will fail with a 401 Unauthorized response.\n\n## AUTHORIZING WEB APPLICATIONS\n\nWeb apps are written in a server-side framework and run on a server where the source code or configuration of the application is not available to the public. This allows the use of a client secret when communicating with the authorization server to help improve security.\n\n**NOTE:** Your client credentials carry many privileges, so be sure to keep them secure!\n\n- Do not put your client credential information (clientid, client secret or access tokens) in publicly accessible code where they can be discovered.\n- Store them in a safe place on the backend (server).\n\n### Authorization Code Flow\n\nMost Bentley APIs support the OAuth 2.0 Authorization Code Flow. This flow provides the ability for a resource owner (owner of the data to access) to authorize applications to access their personal data on their behalf. Your application can use this flow including all built-in features like customer login and consent handling in order to get the authorization by the resource owner.\n\nThese are the steps that the flow executes:\n\n1. Redirect the end user\u0026#39;s (resource owner\u0026#39;s) browser to the authorization server endpoint\n1. Authenticate the end user and ask for consent\n1. Redirect the end user to your application\u0026#39;s callback URL with an authorization code\n1. Exchange the authorization code for an access token\n1. Use the access token to call the API on behalf of the end user\n\n\u003cdiv class=\"mermaid\"\u003e\nsequenceDiagram\n    participant ro as Resource Owner\n    participant app as Application\n    participant as as Authorization Server\n    participant api as iTwin API\n\n    ro-\u003e\u003e+app: Connect to application\n    app-\u003e\u003e+as: Request authorization code\n    as-\u003e\u003ero: Redirect to login and consent\n    ro-\u003e\u003eas: Sign in and consent\n    as-\u003e\u003e-app: Authorization code\n    app-\u003e\u003e+as: Exchange authorization code for an access_token\n    as-\u003e\u003eas: Validate client_id, client_secret, scope and redirect_uri\n    as-\u003e\u003e-app: Granted access token\n    app-\u003e\u003e-ro: Signed in\n\n    ro-\u003e\u003e+app: Perform action\n    app-\u003e\u003e+api: API request with the access token\n    api-\u003e\u003e-app: API response\n    app-\u003e\u003e-ro: Render content\n\n\u003c/div\u003e\n\nThe following steps outline how to implement the authorization code flow in your application:\n\n1. Redirect the end user\u0026#39;s browser to the authorization endpoint\n\n    In order to initiate the end user\u0026#39;s authorization, you must redirect the end user\u0026#39;s browser to Bentley\u0026#39;s authorize endpoint. This will provide a login screen to the end user for authentication. After successful authentication, the consent screen is displayed, if the user has not given the consent yet.\n\n    Authorization endpoint: [https://ims.bentley.com/connect/authorize](https://ims.bentley.com/connect/authorize)\n\n    The URL requires the following parameters:\n\n    - response\\_type=code: Request an authorization code as the result of the end user authorization process.\n    - client\\_id=\u0026lt;insert\\_your\\_client\\_id\\_here\u0026gt;: Provide the client ID of your application.\n    - redirect\\_uri=\u0026lt;insert\\_redirect\\_uri\\_here\u0026gt;: This is the callback URL that is registered for you application in order to receive the authorization code.\n    - scope=\u0026lt;insert\\_scopes\\_of\\_API\\_here\u0026gt;: Include the scopes for the API, which are the permissions to request the end users consent for. For each API, you can find the required scopes in the additional API specific documentation. Please note that you will have to request an additional scope \u0026quot;offline\\_access\u0026quot; to receive a refresh token.\n    - state=\u0026lt;insert\\_client\\_state\\_here\u0026gt;: (optional) An opaque value used by the client to maintain state between the request and callback. The authorization server includes this value when redirecting the user-agent back to the client. The parameter SHOULD be used for preventing cross-site request forgery.\n\n1. Authenticate the end user and ask for consent\n\n    This step will be performed by Bentley\u0026#39;s authorization server and does not require anything to be implemented in your application.\n\n1. Redirect the end user to your application\u0026#39;s callback URL with an authorization code\n\n    After the end user provides consent for your application, Bentley\u0026#39;s authorization server will redirect the end user with an authorization code to the redirect URL registered with your application.\n\n1. Exchange the authorization code for an access token\n\n    After your application has received the authorization code you can exchange it for an access token. The client must authenticate using the HTTP Basic method and provide the url-encoded clientId and the clientSecret (\u0026lt;insert\\_your\\_url\\_encoded\\_client\\_id\\_here\u0026gt;:\u0026lt;insert\\_your\\_url\\_encoded\\_client\\_secret\\_here\u0026gt;) encoded with BASE64 in the HTTP Authorization header.\n\n    Token Endpoint: [https://ims.bentley.com/connect/token](https://ims.bentley.com/connect/token)\n\n    The following parameters are used in the request payload using the \u0026quot;application/x-www-form-urlencoded\u0026quot; format:\n\n    - grant\\_type=authorization\\_code: Tells the token endpoint to use the OAuth 2.0 Authorization Code Flow for this request.\n    - code=\u0026lt;authorization\\_code\u0026gt;: Provide your one-time use authorization code that you received in step 3.\n    - redirect\\_uri=\u0026lt;insert\\_redirect\\_uri\\_here\u0026gt;: This is the callback URL that is registered for your application in order to receive the authorization code. The URL must also match the URL that you have provided in the authorization request (see step 1).\n\n    You will then receive the OAuth access token in the server response access\\_token field. Note that the expires\\_in field in the response represents the validity period of the access token in seconds and it is equal to 3600s.\n\n1. Use the access token to call the API on behalf of the end user\n\nYou can now use the access token to call the API as long as it is not expired. Add the provided token to the Authorization header of your API request, using _Bearer_ scheme\n\n---\n\n### Authorization request example\n\n```\nhttps://ims.bentley.com/connect/authorize?response_type=code\u0026client_id=\u003cclient_id\u003e\u0026redirect_uri=\u003credirect_uri\u003e\u0026scope=\u003cscope\u003e\u0026state=\u003cstate\u003e\n```\n\n### Token request example\n\n```bash\ncurl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=authorization_code --data-urlencode code=\u003cauthorization_code\u003e --data-urlencode client_id=\u003cclient_id\u003e --data-urlencode client_secret=\u003cclient_secret\u003e --data-urlencode redirect_uri=\u003credirect_uri\u003e --data-urlencode scope=\u003cscope\u003e\n```\n\n## AUTHORIZE SINGLE-PAGE APPLICATIONS (SPA) AND DESKTOP/MOBILE APPLICATIONS (NATIVE)\n\nNative and single-page applications are public clients without a dedicated backend server. The implication of this is that these application types cannot securely store a client secret.\n\n- In a native application, the code can be decompiled to reveal the client secret, which is bound to the app and is the same for all users and devices.\n- In the case of a single page application, the client secret cannot be stored securely because the entire source is available to the browser.\n\n### Authorization Code Flow with Proof Key for Code Exchange (PKCE)\n\nIn order to mitigate issues outlined in [previous section](#authorize-single-page-applications-spa-and-desktopmobile-applications-native), OAuth 2.0 provides an option for Proof Key for Code Exchange (PKCE) by OAuth Public Clients (see OAuth 2.0 [RFC 7636](https://tools.ietf.org/html/rfc7636)). PKCE allows the calling application to dynamically generate a random, one -time key called a \u0026quot;code verifier\u0026quot;. Additionally, the calling app creates a transform of the \u0026quot;code verifier\u0026quot; called the \u0026quot;code challenge\u0026quot; and sends it to the authorization server when obtaining an authorization code. The authorization code obtained is then sent to the token endpoint with the \u0026quot;code verifier \u0026quot;and the server compares it with the previously received request code so that it can perform the proof of the \u0026quot;code verifier\u0026quot; by the client application. This provides a mitigation as the \u0026quot;code verifier\u0026quot; would be unknown to the attacker and cannot be intercepted as it is sent over TLS.\n\nThese are the steps for executing the Authorization Code flow with PKCE. Note these steps are very similar to the standard Authorization Code flow with the following additions:\n\n1. Application generates a cryptographically random code\\_verifier and from this generates a code\\_challenge\n1. Redirect the end user\u0026#39;s (resource owner\u0026#39;s) browser to the authorization server endpoint\n1. Authenticate the end user and ask for consent\n1. The authorization server stores the code_challenge and redirects the end user to your application\u0026#39;s callback URL with an authorization code\n1. Exchange the authorization code and the code_verifier for an access token\n1. Use the access token to call the API on behalf of the end user\n\n\u003cdiv class=\"mermaid\"\u003e\nsequenceDiagram\n    participant ro as Resource Owner\n    participant app as Application\n    participant as as Authorization Server\n    participant api as iTwin API\n\n    ro-\u003e\u003e+app: Connect to application\n    app-\u003e\u003eapp: Generate code_verifier and code_challenge\n    app-\u003e\u003e+as: Request authorization code with code_challenge\n    as-\u003e\u003ero: Redirect to login and consent\n    ro-\u003e\u003eas: Sign in and consent\n    as-\u003e\u003e-app: Authorization code\n    app-\u003e\u003e+as: Exchange authorization code and code_verifier for an access_token\n    as-\u003e\u003eas: Validate client_id, code_verifier, code_challenge, scope and redirect_uri\n    as-\u003e\u003e-app: Granted access token\n    app-\u003e\u003e-ro: Signed in\n\n    ro-\u003e\u003e+app: Perform action\n    app-\u003e\u003e+api: API request with the access token\n    api-\u003e\u003e-app: API response\n    app-\u003e\u003e-ro: Render content\n\n\u003c/div\u003e\n\nThe following steps outline how to implement the authorization code flow in your application:\n\n1. Application generates a cryptographically random code\\_verifier and from this generates a code\\_challenge\n\n    This step needs to be completed within your application. There are several libraries available for generating the code\\_verifier and code\\_challenge.\n\n1. Redirect the end user\u0026#39;s browser to the authorization endpoint\n\n    In order to initiate the end user\u0026#39;s authorization, you must redirect the end user\u0026#39;s browser to Bentley\u0026#39;s authorize endpoint. This will provide a login screen to the end user for authentication. After successful authentication, the consent screen is displayed, if the user has not given the consent yet.\n\n    Authorization endpoint: [https://ims.bentley.com/connect/authorize](https://ims.bentley.com/connect/authorize)\n\n    The URL requires the following parameters:\n\n    - response\\_type=code: Request an authorization code as the result of the end user authorization process.\n    - code\\_challenge=\u0026lt;code\\_challenge\u0026gt;: Provide the code generated from the code\\_verifier\n    - code\\_challenge\\_method=S256: Provide the method used to generate the challenge, we only support S256.\n    - client\\_id=\u0026lt;insert\\_your\\_client\\_id\\_here\u0026gt;: Provide the client ID of your application.\n    - redirect\\_uri=\u0026lt;insert\\_redirect\\_uri\\_here\u0026gt;: This is the callback URL that is registered for you application in order to receive the authorization code.\n    - scope=\u0026lt;insert\\_scopes\\_of\\_API\\_here\u0026gt;: Include the scopes for the API, which are the permissions to request the end users consent for. For each API, you can find the required scopes in the additional API specific documentation. Please note that you will have to request an additional scope \u0026quot;offline_access\u0026quot; to receive a refresh token.\n    - state=\u0026lt;insert\\_client\\_state\\_here\u0026gt;: (optional) An opaque value used by the client to maintain state between the request and callback. The authorization server includes this value when redirecting the user-agent back to the client. The parameter SHOULD be used for preventing cross-site request forgery.\n\n1. Authenticate the end user and ask for consent\n\n    This step will be performed by Bentley\u0026#39;s authorization server and does not require anything to be implemented in your application. Redirect the end user to your application\u0026#39;s callback URL with an authorization code\n\n1. The authorization server stores the code_challenge and redirects the end user to your application\u0026#39;s callback URL with an authorization code\n\n    After the end user provides consent for your application, Bentley\u0026#39;s authorization server will store the code_challenge and redirect the end user with an authorization code to the redirect URL registered with your application.\n\n1. Exchange the authorization code for an access token\n\n    After your application has received the authorization code you can exchange it for an access token. The client must authenticate using the HTTP Basic method and provide the clientId (there is no clientSecret as this is a public client) (\u0026lt;insert\\_your\\_client\\_id\\_here\u0026gt;:) encoded with BASE64 in the HTTP Authorization header.\n\n    Token Endpoint: [https://ims.bentley.com/connect/token](https://ims.bentley.com/connect/token)\n\n    The following parameters are used in the request payload using the \u0026quot;application/x-www-form-urlencoded\u0026quot; format:\n\n    - grant\\_type=authorization\\_code: Tells the token endpoint to use the OAuth 2.0 Authorization Code Flow for this request.\n    - code=\u0026lt;authorization\\_code\u0026gt;: Provide your one-time use authorization code that you received in step 3.\n    - redirect\\_uri=\u0026lt;insert\\_redirect\\_uri\\_here\u0026gt;: This is the callback URL that is registered for your application in order to receive the authorization code. The URL must also match the URL that you have provided in the authorization request (see step 1). Note: The redirect URL needs to be URL encoded, otherwise an error is thrown.\n    - code_verifer: The one-time use code verifier generated by your application in Step 1.\n\n    You will then receive the OAuth access token in the server response. Note that the expires_in field in the response represents the validity period of the access token in seconds and it is equal to 3600s.\n\n1. Use the access token to call the API on behalf of the end user\n\n    You can now use the access token to call the API as long as it is not expired. Add the provided token to the authorization header of your API request.\n\n---\n\n### Authorization request example\n\n```\nhttps://ims.bentley.com/connect/authorize?response_type=code\u0026client_id=\u003cclient_id\u003e\u0026redirect_uri=\u003credirect_uri\u003e\u0026scope=\u003cscope\u003e\u0026state=\u003cstate\u003e\u0026code_challenge=\u003ccode_challenge\u003e\u0026code_challenge_method=S256\n```\n\n### Token request example\n\n```bash\ncurl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=authorization_code --data-urlencode code=\u003cauthorization_code\u003e --data-urlencode client_id=\u003cclient_id\u003e --data-urlencode redirect_uri=\u003credirect_uri\u003e --data-urlencode scope=\u003cscope\u003e --data-urlencode code_verifier=\u003ccode_verifier\u003e\n```\n\n## USING REFRESH TOKENS\n\nTo receive a refresh token, you need to request an additional scope \u0026quot;offline_access\u0026quot; in the authorization request. See step 1 in the Authorization Code Flow / Authorization Code Flow with PKCE section for more details of how to pass this scope.\n\nWhen the offline\\_access scope is passed, the response from the authorization server will include both an authorization\\_token and a refresh\\_token.\n\nWhen the access token expires, you can use the refresh token in order to obtain a new access token. This way it is not required to request a new authentication/consent from the end user. In addition to the refresh token your client must authenticate using the HTTP Basic method again.\n\nIn order to exchange the refresh_token for an access token the following parameters are used in the request payload using the \u0026quot;application/x-www-form-urlencoded\u0026quot; format:\n\n- grant\\_type=refresh\\_token: This indicates for the token endpoint to refresh an access token for this request. So, it\u0026#39;ll expect a refresh token as part of the parameters.\n- refresh\\_token=\u0026lt;insert\\_your\\_refresh\\_token\\_received\\_in\\_step\\_4\\_here\u0026gt;: Provide your one-time token in order to refresh your access token without having to go through the authorization process again.\n\nOur authorization server will give you a new OAuth access token together with a new refresh token.\n\n---\n\n### Token refresh request example\n\n```bash\ncurl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=refresh_token --data-urlencode refresh_token=\u003crefresh_token\u003e --data-urlencode client_id=\u003cclient_id\u003e --data-urlencode client_secret=\u003cclient_secret\u003e --data-urlencode scope=\u003cscope\u003e\n```\n\n## AUTHORIZING SERVICE (MACHINE-TO-MACHINE)\n\nService apps are designed to operate without user interaction (sometimes called two-legged OAuth) in order to access web-hosted resourced by using the identity of an application. Services run on a server where the source code or configuration of the application is not available to the public. This allows the use of a client secret when communicating with the authorization server to help improve security.\n\n**NOTE:** Your client credentials carry many privileges, so be sure to keep them secure!\n\n- Do not put your client credential information (clientid, client secret or access tokens) in publicly accessible code where they can be discovered.\n- Store them in a safe place on the backend (server).\n\nThe service app type does not represent any user or organization and does not have access to anything by default. If you want to provide access to projects for that application, you need to invite it to the projects using client email, provided in App details page.\n\n### Client Credential Flow\n\nThe Client Credential flow provides the ability for a web service (confidential client) to use it\u0026#39;s own credentials, instead of impersonating a user, to authenticate when calling a web service. Permissions are granted directly to the application itself by an administrator. When the app presents a token to a resource, the resource enforces that the app itself has authorization to perform an action since there is no user involved in the authentication.\n\nThese are the steps that the Client Credential flow executes:\n\n1. Redirect the web server to the authorization server endpoint with Client ID and Client Secret\n1. Authorization server validates the Client ID and Client Secret and returns Access Token\n1. Client uses the access token to call the API\n\n\u003cdiv class=\"mermaid\"\u003e\nsequenceDiagram\n    participant app as Application\n    participant as as Authorization Server\n    participant api as iTwin API\n\n    app-\u003e\u003e+as: Authenticate using client_id and client_secret\n    as-\u003e\u003eas: Validate client_id, client_secret and scopes\n    as-\u003e\u003e-app: Granted access token\n\n    app-\u003e\u003e+api: API request with the access token\n    api-\u003e\u003e-app: API response\n\n\u003c/div\u003e\n\nThe following steps outline how to implement the authorization code flow in your application:\n\n1. Redirect the web server to the authorization server endpoint with Client ID and Client Secret\n\n    In order to initiate the client credential flow, you need to call Bentley\u0026#39;s token endpoint: [https://ims.bentley.com/connect/token](https://ims.bentley.com/connect/token)\n\n    The URL requires the following parameters:\n\n    - grant\\_type=client\\_credentials: Must be set to client\\_credentials\n    - client\\_id=\u0026lt;insert\\_your\\_client\\_id\\_here\u0026gt;: Provide the client ID of your application.\n    - client\\_secret=\u0026lt;insert\\_your\\_client\\_secret\\_here\u0026gt;: Provide the client secret that was provided when you registered your app. The client secret must be url-encoded before being sent.\n    - scope=\u0026lt;insert\\_scopes\\_of\\_API\\_here\u0026gt;: Include the scopes for the API, which are the permissions to request the end users consent for. For each API, you can find the required scopes in the additional API specific documentation. Please note that you will have to request an additional scope \u0026quot;offline\\_access\u0026quot; to receive a refresh token.\n\n1. Authorization server validates the Client ID and Client Secret and returns Access Token\n\n    This step will be performed by Bentley\u0026#39;s authorization server and does not require anything to be implemented in your application. A successful response will include an access token.\n\n1. App uses the access token to call the API\n\n    You can now use the access token to call the API as long as it is not expired. Add the provided token to the Authorization header of your API request, using _Bearer_ scheme\n\n---\n\n### Token request example\n\n```bash\ncurl https://ims.bentley.com/connect/token -X POST --data-urlencode grant_type=client_credentials --data-urlencode client_id=\u003cclient_id\u003e --data-urlencode client_secret=\u003cclient_secret\u003e --data-urlencode scope=\u003cscope\u003e\n```\n\n## ERROR RESPONSES\n\nThe Authorization Server provides standard HTTP status response codes in the response header.\n\n- A 2xx type response typically represents a successful response.\n- A 4xx type response typically represents a client error.\n- A 5xx type response typically represents a server error.\n\nThe following errors may occur when submitting a request for an access token:\n\n- 400 – Bad request. Common causes include:\n  - The given authorization code is not valid or was already used.\n  - The redirect\\_uri differs from the one registered for your client..\n- 401 – Unauthorized. Common causes include:\n  - The specified client ID is invalid.\n  - The token is not valid (has expired).\n- 403 – Forbidden. The client down not have access rights to the resource.\n- 429 – Too many requests. The application\u0026#39;s rate limit for the resource has been exhausted.\n- 500 – Internal Server Error. This is typically indicative that the endpoint is temporarily unavailable.\n- 502 – Bad Gateway. This indicates that the server got an invalid response.\n\nOther OAuth protocol errors can be returned to redirect\\_uri in an \u0026quot;error\u0026quot; parameter:\n\n- invalid\\_request - The request is missing a required parameter, includes an invalid parameter value, includes a parameter more than once, or is otherwise malformed.\n- unauthorized\\_client - The client is not authorized to request an authorization code using this method.\n- access\\_denied - The resource owner or authorization server denied the request.\n- unsupported\\_response\\_type - The authorization server does not support obtaining an authorization code using this method.\n- invalid\\_scope - The requested scope is invalid, unknown, or malformed.\n","menuItems":[{"navItems":[{"id":"rest-api-overview","title":"REST API Overview","subItems":[{"id":"api-fundamentals","title":"API fundamentals","href":"/apis/overview/api-fundamentals"},{"id":"error-codes","title":"Error codes","href":"/apis/overview/error-codes"},{"id":"authorization","title":"Authorization","href":"/apis/overview/authorization"},{"id":"lifecycle","title":"Lifecycle","href":"/apis/overview/lifecycle"},{"id":"rate-limits","title":"Rate limits","href":"/apis/overview/rate-limits"}]}]}]},"__N_SSG":true},"page":"/apis/overview/[topic]","query":{"topic":"authorization"},"buildId":"4I2YaoF9Uf026tEb78Qcd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>