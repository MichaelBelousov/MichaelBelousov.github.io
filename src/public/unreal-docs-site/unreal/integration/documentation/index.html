<!DOCTYPE html><html class="iui-theme-light" lang="en"><head><meta charSet="utf-8"/><meta name="author" content="Bentley Systems"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/favicon.ico"/><title>Documentation - iTwin Unreal Integration | iTwin Platform</title><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/fdfd5e95539ee4cf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fdfd5e95539ee4cf.css" data-n-g=""/><link rel="preload" href="/_next/static/css/33913c869ee1ac51.css" as="style"/><link rel="stylesheet" href="/_next/static/css/33913c869ee1ac51.css" data-n-p=""/><link rel="preload" href="/_next/static/css/aaf904c8279e287f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aaf904c8279e287f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-671c70ce128523ae.js" defer=""></script><script src="/_next/static/chunks/framework-47503b8bb4de6bb8.js" defer=""></script><script src="/_next/static/chunks/main-bf2559c32c399cd5.js" defer=""></script><script src="/_next/static/chunks/pages/_app-76d2c8ca7cd6b913.js" defer=""></script><script src="/_next/static/chunks/8273-b3fdb32d13755acb.js" defer=""></script><script src="/_next/static/chunks/508-344237facbbe8d27.js" defer=""></script><script src="/_next/static/chunks/271-f512ee232c968e8b.js" defer=""></script><script src="/_next/static/chunks/862-f76af205cba1f7d7.js" defer=""></script><script src="/_next/static/chunks/1890-2c73ee6f254ba545.js" defer=""></script><script src="/_next/static/chunks/6198-f7808716d94ce49f.js" defer=""></script><script src="/_next/static/chunks/1086-0e1a0c360fff4cf6.js" defer=""></script><script src="/_next/static/chunks/2485-0db1cdb3cdc13c98.js" defer=""></script><script src="/_next/static/chunks/8865-712d299d4084067d.js" defer=""></script><script src="/_next/static/chunks/3493-4a3291603e8c7476.js" defer=""></script><script src="/_next/static/chunks/6100-a747e53d4e3e7cc8.js" defer=""></script><script src="/_next/static/chunks/5200-61e2324c556185f7.js" defer=""></script><script src="/_next/static/chunks/4922-c04fcad0c0381962.js" defer=""></script><script src="/_next/static/chunks/372-6f8747a2c547addf.js" defer=""></script><script src="/_next/static/chunks/5016-160b088fdff5b7cb.js" defer=""></script><script src="/_next/static/chunks/4746-d20e5c3d65705625.js" defer=""></script><script src="/_next/static/chunks/115-34e963d39ef28725.js" defer=""></script><script src="/_next/static/chunks/pages/unreal/integration/%5Btab%5D-744afb2573deed59.js" defer=""></script><script src="/_next/static/V0kply8eojqLiVuR5gLk1/_buildManifest.js" defer=""></script><script src="/_next/static/V0kply8eojqLiVuR5gLk1/_ssgManifest.js" defer=""></script><script src="/_next/static/V0kply8eojqLiVuR5gLk1/_middlewareManifest.js" defer=""></script></head><body class="iui-body"><div id="__next" data-reactroot=""><div class="app"><div class="sticky-top" style="z-index:10"><div class="portal-header"><header class="iui-page-header"><div class="iui-left"><a id="itwin-platform-header-logo-link" href="/"><div class="iui-header-logo" role="button" tabindex="0"><svg id="header-logo-icon" class="iui-header-button-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M6.341 8.712a.085.085 0 0 0-.062.012c-.03.022-.037.07-.04.137-.006.342-.013.342-.013.678.008.202.05.194.141.242l.394.222c.083.053.11.051.102.196l.01 1.759-.921-.534a.348.348 0 0 0-.112-.046c-.1-.019-.163.048-.16.217-.007.342-.013.25-.013.587.014.226.092.212.27.345l1.173.7a.953.953 0 0 0 .134.063l.087.01v.001h.004l.086-.01a.95.95 0 0 0 .135-.063l1.173-.701c.178-.133.256-.12.27-.345 0-.337-.006-.245-.013-.587.004-.225-.109-.269-.272-.171l-.981.569V9.608c0-.079-.015-.143-.186-.228l-.154-.088-.943-.548a.415.415 0 0 0-.109-.032zm.962-1.332a.535.535 0 1 0 .536.535.535.535 0 0 0-.536-.535zM5.762 2.308a2.98 2.98 0 0 0-3.258 3.32c-2.57.83-2.442 4.505.771 4.531h.253L3.52 8.278c.019-.461.009-.67.62-1.018l2.524-1.508a1.195 1.195 0 0 1 .631-.233 1.72 1.72 0 0 1 .643.233L10.46 7.26c.648.413.578.553.606 1.005-.002.563-.008 1.084-.014 1.613l-.003.28 2.22-.001c3.365 0 2.397-4.517-.785-3.247.113-2.842-2.416-2.806-3.444-1.893.02-1.003-.684-2.739-3.28-2.71zM5.71 1.75c2.477-.037 3.736 1.506 3.795 2.444.437-.406 3.39-.934 3.502 2.01 3.032-.958 4.772 4.57.18 4.57h-2.144l-.005.764v.113a.767.767 0 0 1-.017.132l-.013.044-.018.09a.701.701 0 0 1-.123.249l-.172.154-.02.018-.02.012-.139.1-.151.09v.004l-.176.1-.981.58c-.435.26-1.03.611-1.309.771a3.268 3.268 0 0 1-.362.19.474.474 0 0 1-.394.035 4.222 4.222 0 0 1-.46-.224c-.222-.125-.603-.35-.963-.565l-.32-.192v.006l-1.341-.79c-.32-.226-.51-.347-.523-.8l-.005-.879h-.383c-3.965-.033-3.962-4.67-1.233-5.493A3.545 3.545 0 0 1 5.71 1.751z"></path></svg><span class="iui-label">iTwin Platform</span></div></a></div><div class="iui-right"><a style="text-decoration:none;height:100%" class="desktop-header-button" href="/get-started/"><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-label"><div>Get Started</div></span></button></a><a style="text-decoration:none;height:100%" class="desktop-header-button" href="/apis/"><button class="iui-button iui-borderless iui-header-button iui-active desktop-header-button" type="button" aria-current="location"><span class="iui-label"><div>Documentation</div></span></button></a><button class="iui-button iui-borderless iui-dropdown iui-header-button desktop-header-button" type="button" aria-label="Dropdown"><span class="iui-label"><div>Learning</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><a style="text-decoration:none;height:100%" class="desktop-header-button" href="/samples/"><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-label"><div>Samples</div></span></button></a><a style="text-decoration:none;height:100%" class="desktop-header-button" href="/support/"><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-label"><div>Support</div></span></button></a><button class="iui-button iui-borderless" type="button" id="mobile-header-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="iui-icon" aria-hidden="true"><g fill-rule="evenodd"><path d="M0,12h16v2H0V12z"></path><path d="M0,7h16v2H0V7z"></path><path d="M0,2h16v2H0V2z"></path></g></svg></button><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-label"><div>Sign In</div></span></button></div></header><div class="header-menu-backdrop" style="display:none"><div class="collapsible-menu"><div class="collapsible-menu-close-area"><button class="iui-button iui-small iui-borderless header-close-button" type="button"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-icon" aria-hidden="true"><path d="m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"></path></svg></button></div><a style="text-decoration:none" href="/get-started/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-label"><div>Get Started</div></span></button></a><a style="text-decoration:none" href="/apis/"><button class="iui-button iui-borderless iui-header-button iui-active hamburger-button" type="button" aria-current="location"><span class="iui-label"><div>Documentation</div></span></button></a><a style="text-decoration:none" href="/tutorials/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-label"><div>Tutorials</div></span></button></a><a style="text-decoration:none" href="/accreditation/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-label"><div>Accreditation</div></span></button></a><a style="text-decoration:none" href="/powered-by-itwin/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-label"><div>Powered by iTwin</div></span></button></a><a style="text-decoration:none" href="/samples/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-label"><div>Samples</div></span></button></a><a style="text-decoration:none" href="/support/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-label"><div>Support</div></span></button></a><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-label"><div>Sign In</div></span></button></div></div></div></div><main class="content"><div id="page" class="api-documentation page-content-container"><div id="page-header-with-breadcrumbs"><div class="page-header-content-container"><nav class="iui-breadcrumbs breadcrumbs" aria-label="Breadcrumb"><ol class="iui-breadcrumbs-list"><li class="iui-breadcrumbs-item"><a style="text-decoration:none" href="/apis/">Documentation</a></li><li class="iui-breadcrumbs-separator" aria-hidden="true"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m4.7 0-1.4 1.4 6.6 6.6-6.6 6.6 1.4 1.4 8-8z"></path></svg></li><li class="iui-breadcrumbs-item"><a style="text-decoration:none" href="/unreal/">iTwin for Unreal</a></li><li class="iui-breadcrumbs-separator" aria-hidden="true"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m4.7 0-1.4 1.4 6.6 6.6-6.6 6.6 1.4 1.4 8-8z"></path></svg></li><li class="iui-breadcrumbs-item iui-current"><span aria-current="location">iTwin Unreal Integration</span></li></ol></nav><div class="page-header-content"><div class="api-documentation-header"><h1 class="iui-text-headline iui-text-spacing">Documentation</h1></div></div></div></div><div id="page-body"><div id="menu-button" data-testid="menu-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 11.3-1.4 1.4L8 6.1l-6.6 6.6L0 11.3l8-8"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 4.7-1.4-1.4L8 9.9 1.4 3.3 0 4.7l8 8z"></path></svg></div><div id="api-documentation-side-navigation-pane" class="sticky-containerfalse"><div class="sideMenu sticky-element"><div class="sideMenu-large"><div class="sideMenu-1"><div class="menuItem-container"><a href="/unreal/integration/overview/"><span class="sideMenuItem-1"><span>Overview</span></span></a></div></div><div class="sideMenu-1"><div class="menuItem-container"><a href="/unreal/integration/documentation/"><span class="sideMenuItem-1 active"><span>Documentation</span></span></a></div></div><div class="sideMenu-1"><div class="menuItem-container"><a href="/unreal/integration/tutorials/"><span class="sideMenuItem-1"><span>Tutorials</span></span></a></div></div><div class="sideMenu-1"><div class="menuItem-container"><a href="/unreal/integration/blueprint-api-reference/"><span class="sideMenuItem-1"><span>Blueprint API Reference</span></span></a></div></div></div></div></div><div id="api-documentation-page-content"><div><h1 class="iui-text-headline iui-text-spacing documentation-headline" id="itwinexporterfordatasmith">iTwin Exporter for Datasmith</h1>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The iTwin Exporter for Datasmith provides a viewer interface and
tools to load and export iTwin data as a <code class="iui-code">.udatasmith</code> file and
the corresponding Datasmith <code class="iui-code">_Assets</code> directory. Use Unreal Engine&#x27;s Datasmith importer plugin
and our iTwin Datasmith plugin to import the exported datasmith content.
The Datasmith scene can be created with all of your metadata embedded for accessing
at runtime in Unreal Engine and at import time when using Visual Dataprep to process the scene during import.</p>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#tableofcontents" id="tableofcontents">Table of Contents</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<ol>
<li><a href="#itwinunrealdatasmithplugin">iTwin Unreal Datasmith Plugin</a><ol>
<li><a href="#plugincompatibility">Plugin compatibility</a></li></ol></li>
<li><a href="#animationsandschedulescripts">Animations and schedule scripts</a><ol>
<li><a href="#combinedmeshexportanimationsupport">Combined-mesh export animation support</a></li>
<li><a href="#noncombinedmeshexportanimationsupport">Non-combined-mesh export animation support</a></li></ol></li>
<li><a href="#performanceconsiderations">Performance considerations</a><ol>
<li><a href="#combinedmeshexportisthedefault">Combined-mesh export is the default</a></li>
<li><a href="#noncombinedmeshexportdoesnotpreservetheelementhierarchy">Non-combined-mesh export does not preserve the element hierarchy</a></li>
<li><a href="#filteringexportedelements">Filtering exported elements</a></li>
<li><a href="#filteringwithvisualdataprep">Filtering with Visual Dataprep</a></li></ol></li>
<li><a href="#materials">Materials</a><ol>
<li><a href="#custommaterialswithvisibilityanimatedcombinedmeshexports">Custom materials with visibility-animated combined-mesh exports</a></li></ol></li>
</ol>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#itwinunrealdatasmithplugin" id="itwinunrealdatasmithplugin">iTwin Unreal Datasmith Plugin</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The iTwin Exporter for Datasmith helps you install
the <em>iTwin Unreal Datasmith Plugin</em> providing C++ and Blueprint
APIs for controlling the animations of your iTwin. This plugin
also provides the default materials for your scene. See the
<a href="/unreal/integration/blueprint-api-reference" rel="noopener noreferrer" target="_blank">Blueprint API reference</a>.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#plugincompatibility" id="plugincompatibility">Plugin compatibility</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">The plugin is compatible with Unreal Engine versions 4.26.1 and later; earlier versions
may compile but contain a bug in the Datasmith importer that could impact some animations.</p>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#animationsandschedulescripts" id="animationsandschedulescripts">Animations and schedule scripts</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#combinedmeshexportanimationsupport" id="combinedmeshexportanimationsupport">Combined-mesh export animation support</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">In combined-mesh exports we currently support</p>
<ul>
<li>cutting plane (growing) animations</li>
<li>color animations (such as SYNCHRO appearance profiles)</li>
<li>visibility animations</li>
<li>transformation animations such as rotation, translation, and scaling</li>
<li>transformation-animated (moving) objects do <em>not</em> support color or cutting plane animations</li>
</ul>
<p class="iui-text-block iui-text-spacing documentation-paragraph">All non-transformation animations for combined-mesh scenes are performed by special dynamic materials applied to your meshes by the
<a href="/unreal/integration/blueprint-api-reference/#AScheduledActor" rel="noopener noreferrer" target="_blank">ScheduledActor</a> class from the iTwin Unreal Datasmith Plugin, which exposes a <a href="/unreal/integration/blueprint-api-reference" rel="noopener noreferrer" target="_blank">Blueprint and C++ API</a> for managing
the animation state. All transformation-animated objects are exported as separated objects and animated using an Unreal
<a href="https://docs.unrealengine.com/4.27/en-US/AnimatingObjects/Sequencer/Overview/" rel="noopener noreferrer" target="_blank">Level Sequence</a> which you
must add to the scene and manually manage due to limitations in the Datasmith API.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#noncombinedmeshexportanimationsupport" id="noncombinedmeshexportanimationsupport">Non-combined-mesh export animation support</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">We do not currently support cutting plane (growing) animations or color animations in
non-combined mesh exports due to limitations in the Datasmith API. Visibility and transform animations are supported.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">An Unreal <a href="https://docs.unrealengine.com/4.27/en-US/AnimatingObjects/Sequencer/Overview/" rel="noopener noreferrer" target="_blank">Level Sequence</a>
provides animations for non-combined mesh scenes. You must add a level sequence actor to the scene yourself
and control it using Unreal&#x27;s sequencer.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">You may notice useless visibility tracks on some static meshes, this is an issue in Datasmith, and we are working closely
with Epic to resolve it.</p>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#performanceconsiderations" id="performanceconsiderations">Performance considerations</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Consider the following when trying to improve the performance of your scene.
But always be aware that hardware is often a significant bottleneck when performing intense graphical work, such as working with scenes in Unreal Engine.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#combinedmeshexportisthedefault" id="combinedmeshexportisthedefault">Combined-mesh export is the default</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Many scenes are too large to handle directly in Unreal without manually processing them. As such, we
recommend using the &quot;combined meshes&quot; feature during export. Combined-mesh exports combines all of the geometry in
your scene into one static mesh. You can then apply high-fidelity materials to your material slots; see the <a href="#Materials">Materials</a> section
for limitations.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">If you have an extremely high amount of instanced geometry or pieces of your geometry are too distant to be visible together, you may benefit from performing a separate or non-combined mesh export. Non-combined mesh export enables frustum culling of separate objects in the scene
which generally increases performance in those cases, and makes it easier to edit your objects in Unreal.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#noncombinedmeshexportdoesnotpreservetheelementhierarchy" id="noncombinedmeshexportdoesnotpreservetheelementhierarchy">Non-combined-mesh export does not preserve the element hierarchy</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">iModels meticulously split geometry into a sprawling hierarchy of elements. While this is great for your data and its organization,
translating them into Unreal actors can be much less performant than collapsing the hierarchy. As such, the hierarchy of elements in your iModel
is not preserved since it would require a lot of empty actors; it is instead flattened into a list of geometry-containing elements.
This ensures speedier imports and the best runtime performance possible, even when using a non-combined-mesh export.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">To use the hierarchy information when writing your own Visual Dataprep recipes,
every mesh element of the actor scene has a metadata property <code class="iui-code">ElementPathByLabel</code>,
a forward-slash delimited string of User Labels (or Ids) of parent elements and models to reach your element in the scene.
For instance, <code class="iui-code">/0x1/0x20000000003/Site.dwfx/Walls (13)/Basic Wall (13)/Site Perimeter Fence (13)/Basic Wall [613789]</code>.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#filteringexportedelements" id="filteringexportedelements">Filtering exported elements</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Hide elements, models, and categories in the viewport using the element tree on the right or, once an element is selected,
with the visibility tools in the top-left horizontal toolbar. Once you&#x27;ve hidden the objects you want to filter, use the &quot;Export Current View&quot;
tool in the top-left horizontal toolbar to export and filter those elements.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Use the <strong>Saved-Views Widget</strong> to save your viewport state if you want to re-export the scene again with these parts hidden.
Use advanced export to write <a href="https://www.itwinjs.org/learning/ecsql/" rel="noopener noreferrer" target="_blank">ECSQL</a> queries to customize which elements are
filtered using custom logic such as geometric queries.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#filteringwithvisualdataprep" id="filteringwithvisualdataprep">Filtering with Visual Dataprep</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Another technique for getting more performance out of your iModel geometry in Unreal is using Datasmith&#x27;s Visual Dataprep to process your scene.
Use Dataprep recipes to filter out obscured and unnecessary actors and to optimize geometry with Datasmith&#x27;s support for the <a href="https://docs.unrealengine.com/4.27/en-US/TestingAndOptimization/ProxyGeoTool/" rel="noopener noreferrer" target="_blank">proxy geometry tool</a>.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Reducing your actor count, getting rid of any unnecessary geometry, and optimizing unnecessarily dense geometry will all help lower the runtime costs of your scene.</p>
<h2 class="iui-text-title iui-text-spacing documentation-title"><a href="#materials" id="materials">Materials</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2>
<p class="iui-text-block iui-text-spacing documentation-paragraph">In the combined-mesh export, differently colored or textured parts of your iModel will be split into different material slots; geometry with
the same underlying color but different textures in the
All meshes, combined or not, store the original color of underlying graphics in the corresponding mesh vertices for use in materials.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph">If dividing material slots further would improve your workflow, either by category and model or by using ECSQL,
please vote for that feature on our <a href="https://itwinplatform.ideas.aha.io/?category=7010781758179112615" rel="noopener noreferrer" target="_blank">ideas portal</a>.</p>
<h3 class="iui-text-subheading iui-text-spacing documentation-subheading"><a href="#custommaterialswithvisibilityanimatedcombinedmeshexports" id="custommaterialswithvisibilityanimatedcombinedmeshexports">Custom materials with visibility-animated combined-mesh exports</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3>
<p class="iui-text-block iui-text-spacing documentation-paragraph">Materials need to opt-in to the visibility animation if controlled by the <a href="/unreal/integration/blueprint-api-reference#AScheduledActor" rel="noopener noreferrer" target="_blank">ScheduledActor</a>. To do so:</p>
<ol>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">In the lower right corner of the <strong>Content Browser</strong>, press <strong>View Options</strong>, and mark the <strong>Show Plugin Content</strong> checkbox.</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph"><img alt="in the bottom right of the Content Browser open View Options and make sure &quot;Show Plugin Content&quot; is checked" src="/images/unreal-export-show-plugin-content.png" style="max-width:100%;max-height:350px"/></p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Open the the offending material in the material editor, set its blend mode to &quot;Masked&quot; (or if it&#x27;s transparent, keep it).</p>
<p class="iui-text-block iui-text-spacing documentation-paragraph"><img alt="material details Blend Mode" src="/images/unreal-export-set-material-blend-mode.png" style="max-width:100%;max-height:350px"/></p></li>
<li><p class="iui-text-block iui-text-spacing documentation-paragraph">Add a material function node, set it to use the iTwin Datasmith Importer Plugin&#x27;s <code class="iui-code">MF_SynchroVisibilityAnimate</code> material function,
and connect it to your material&#x27;s opacity. You may want to blend (e.g. with a multiply node) the visibility animation&#x27;s opacity with any
other opacity your material is already using.</p></li>
</ol></div></div></div></div></main><footer class="iui-legal-footer"><ul><li>Â© <!-- -->2022<!-- --> Bentley Systems, Incorporated</li><li><span class="iui-separator"></span><a href="https://connect-agreementportal.bentley.com/AgreementApp/Home/Eula/view/readonly/BentleyConnect" target="_blank" rel="noreferrer">Terms of service</a></li><li><span class="iui-separator"></span><a href="https://www.bentley.com/en/privacy-policy" target="_blank" rel="noreferrer">Privacy</a></li><li><span class="iui-separator"></span><a href="https://www.bentley.com/en/terms-of-use-and-select-online-agreement" target="_blank" rel="noreferrer">Terms of use</a></li><li><span class="iui-separator"></span><a href="https://www.bentley.com/en/cookie-policy" target="_blank" rel="noreferrer">Cookies</a></li><li><span class="iui-separator"></span><a href="https://connect.bentley.com/Legal" target="_blank" rel="noreferrer">Legal notices</a></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"tab":"documentation","overview":"# iTwin for Unreal Engine\n\nBring your iTwin data into Unreal Engine using the iTwin Exporter for Datasmith application.\nWith it, you can export iModel data into the Datasmith format and import it into\nyour Unreal project.\n\nThe iTwin Exporter for Datasmith offers the following features:\n\n- Export your model's geometry and element metadata into Unreal Engine\n- Export animation data such as schedules in your iTwin as level sequences in Unreal Engine\n- Use existing iTwin saved views to filter exports by models, categories, elements\n- In advanced use cases, leverage the power of [ECSQL](https://www.itwinjs.org/learning/ecsql/) for filtering exports.\n\n\u003ca href=\"https://autoupdatecdn.bentley.com/itwinexporterdatasmith/iTwinDatasmithExporterSetup.exe\" download\u003e\n  \u003cbutton class=\"iui-button iui-high-visibility download-button\" type=\"button\"\u003e\n    \u003cspan class=\"iui-label\"\u003e\n      Download now\n    \u003c/span\u003e\n  \u003c/button\u003e\n\u003c/a\u003e\n\nDownload the iTwin Exporter for Datasmith and get started with our\n[step-by-step tutorials](/unreal/integration/tutorials).\nBe sure to check the [documentation](/unreal/integration/overview) for troubleshooting and questions.\n\n\u003cimg src=\"/images/unreal-export-app-fullscreen.png\" alt=\"iTwinViewer\" title=\"iTwin Viewer\" style=\"max-width:100%;max-height:500px;\"/\u003e\n","documentation":"# iTwin Exporter for Datasmith\n\nThe iTwin Exporter for Datasmith provides a viewer interface and\ntools to load and export iTwin data as a `.udatasmith` file and\nthe corresponding Datasmith `_Assets` directory. Use Unreal Engine's Datasmith importer plugin\nand our iTwin Datasmith plugin to import the exported datasmith content.\nThe Datasmith scene can be created with all of your metadata embedded for accessing\nat runtime in Unreal Engine and at import time when using Visual Dataprep to process the scene during import.\n\n## Table of Contents\n\n1. [iTwin Unreal Datasmith Plugin](#itwinunrealdatasmithplugin)\n    1. [Plugin compatibility](#plugincompatibility)\n1. [Animations and schedule scripts](#animationsandschedulescripts)\n    1. [Combined-mesh export animation support](#combinedmeshexportanimationsupport)\n    1. [Non-combined-mesh export animation support](#noncombinedmeshexportanimationsupport)\n1. [Performance considerations](#performanceconsiderations)\n    1. [Combined-mesh export is the default](#combinedmeshexportisthedefault)\n    1. [Non-combined-mesh export does not preserve the element hierarchy](#noncombinedmeshexportdoesnotpreservetheelementhierarchy)\n    1. [Filtering exported elements](#filteringexportedelements)\n    1. [Filtering with Visual Dataprep](#filteringwithvisualdataprep)\n1. [Materials](#materials)\n    1. [Custom materials with visibility-animated combined-mesh exports](#custommaterialswithvisibilityanimatedcombinedmeshexports)\n\n## iTwin Unreal Datasmith Plugin\n\nThe iTwin Exporter for Datasmith helps you install\nthe _iTwin Unreal Datasmith Plugin_ providing C++ and Blueprint\nAPIs for controlling the animations of your iTwin. This plugin\nalso provides the default materials for your scene. See the\n[Blueprint API reference](/unreal/integration/blueprint-api-reference).\n\n### Plugin compatibility\n\nThe plugin is compatible with Unreal Engine versions 4.26.1 and later; earlier versions\nmay compile but contain a bug in the Datasmith importer that could impact some animations.\n\n## Animations and schedule scripts\n\n### Combined-mesh export animation support\n\nIn combined-mesh exports we currently support\n\n- cutting plane (growing) animations\n- color animations (such as SYNCHRO appearance profiles)\n- visibility animations\n- transformation animations such as rotation, translation, and scaling\n  - transformation-animated (moving) objects do _not_ support color or cutting plane animations\n\nAll non-transformation animations for combined-mesh scenes are performed by special dynamic materials applied to your meshes by the\n[ScheduledActor](/unreal/integration/blueprint-api-reference/#AScheduledActor) class from the iTwin Unreal Datasmith Plugin, which exposes a [Blueprint and C++ API](/unreal/integration/blueprint-api-reference) for managing\nthe animation state. All transformation-animated objects are exported as separated objects and animated using an Unreal\n[Level Sequence](https://docs.unrealengine.com/4.27/en-US/AnimatingObjects/Sequencer/Overview/) which you\nmust add to the scene and manually manage due to limitations in the Datasmith API.\n\n### Non-combined-mesh export animation support\n\nWe do not currently support cutting plane (growing) animations or color animations in\nnon-combined mesh exports due to limitations in the Datasmith API. Visibility and transform animations are supported.\n\nAn Unreal [Level Sequence](https://docs.unrealengine.com/4.27/en-US/AnimatingObjects/Sequencer/Overview/)\nprovides animations for non-combined mesh scenes. You must add a level sequence actor to the scene yourself\nand control it using Unreal's sequencer.\n\nYou may notice useless visibility tracks on some static meshes, this is an issue in Datasmith, and we are working closely\nwith Epic to resolve it.\n\n## Performance considerations\n\nConsider the following when trying to improve the performance of your scene.\nBut always be aware that hardware is often a significant bottleneck when performing intense graphical work, such as working with scenes in Unreal Engine.\n\n### Combined-mesh export is the default\n\nMany scenes are too large to handle directly in Unreal without manually processing them. As such, we\nrecommend using the \"combined meshes\" feature during export. Combined-mesh exports combines all of the geometry in\nyour scene into one static mesh. You can then apply high-fidelity materials to your material slots; see the [Materials](#Materials) section\nfor limitations.\n\nIf you have an extremely high amount of instanced geometry or pieces of your geometry are too distant to be visible together, you may benefit from performing a separate or non-combined mesh export. Non-combined mesh export enables frustum culling of separate objects in the scene\nwhich generally increases performance in those cases, and makes it easier to edit your objects in Unreal.\n\n### Non-combined-mesh export does not preserve the element hierarchy\n\niModels meticulously split geometry into a sprawling hierarchy of elements. While this is great for your data and its organization,\ntranslating them into Unreal actors can be much less performant than collapsing the hierarchy. As such, the hierarchy of elements in your iModel\nis not preserved since it would require a lot of empty actors; it is instead flattened into a list of geometry-containing elements.\nThis ensures speedier imports and the best runtime performance possible, even when using a non-combined-mesh export.\n\nTo use the hierarchy information when writing your own Visual Dataprep recipes,\nevery mesh element of the actor scene has a metadata property `ElementPathByLabel`,\na forward-slash delimited string of User Labels (or Ids) of parent elements and models to reach your element in the scene.\nFor instance, `/0x1/0x20000000003/Site.dwfx/Walls (13)/Basic Wall (13)/Site Perimeter Fence (13)/Basic Wall [613789]`.\n\n### Filtering exported elements\n\nHide elements, models, and categories in the viewport using the element tree on the right or, once an element is selected,\nwith the visibility tools in the top-left horizontal toolbar. Once you've hidden the objects you want to filter, use the \"Export Current View\"\ntool in the top-left horizontal toolbar to export and filter those elements.\n\nUse the **Saved-Views Widget** to save your viewport state if you want to re-export the scene again with these parts hidden.\nUse advanced export to write [ECSQL](https://www.itwinjs.org/learning/ecsql/) queries to customize which elements are\nfiltered using custom logic such as geometric queries.\n\n### Filtering with Visual Dataprep\n\nAnother technique for getting more performance out of your iModel geometry in Unreal is using Datasmith's Visual Dataprep to process your scene.\nUse Dataprep recipes to filter out obscured and unnecessary actors and to optimize geometry with Datasmith's support for the [proxy geometry tool](https://docs.unrealengine.com/4.27/en-US/TestingAndOptimization/ProxyGeoTool/).\n\nReducing your actor count, getting rid of any unnecessary geometry, and optimizing unnecessarily dense geometry will all help lower the runtime costs of your scene.\n\n## Materials\n\nIn the combined-mesh export, differently colored or textured parts of your iModel will be split into different material slots; geometry with\nthe same underlying color but different textures in the\nAll meshes, combined or not, store the original color of underlying graphics in the corresponding mesh vertices for use in materials.\n\nIf dividing material slots further would improve your workflow, either by category and model or by using ECSQL,\nplease vote for that feature on our [ideas portal](https://itwinplatform.ideas.aha.io/?category=7010781758179112615).\n\n### Custom materials with visibility-animated combined-mesh exports\n\nMaterials need to opt-in to the visibility animation if controlled by the [ScheduledActor](/unreal/integration/blueprint-api-reference#AScheduledActor). To do so:\n\n1. In the lower right corner of the **Content Browser**, press **View Options**, and mark the **Show Plugin Content** checkbox.\n\n   \u003cimg alt='in the bottom right of the Content Browser open View Options and make sure \"Show Plugin Content\" is checked'\n        src=\"/images/unreal-export-show-plugin-content.png\" style=\"max-width:100%;max-height:350px\"\u003e\n\n1. Open the the offending material in the material editor, set its blend mode to \"Masked\" (or if it's transparent, keep it).\n\n   \u003cimg alt=\"material details Blend Mode\"\n        src=\"/images/unreal-export-set-material-blend-mode.png\"\n        style=\"max-width:100%;max-height:350px\"\u003e\n\n1. Add a material function node, set it to use the iTwin Datasmith Importer Plugin's `MF_SynchroVisibilityAnimate` material function,\n   and connect it to your material's opacity. You may want to blend (e.g. with a multiply node) the visibility animation's opacity with any\n   other opacity your material is already using.\n"},"__N_SSG":true},"page":"/unreal/integration/[tab]","query":{"tab":"documentation"},"buildId":"V0kply8eojqLiVuR5gLk1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>