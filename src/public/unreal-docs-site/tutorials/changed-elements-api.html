<!DOCTYPE html><html class="iui-theme-light" lang="en"><head><meta charSet="utf-8"/><meta name="author" content="Bentley Systems"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/favicon.ico"/><title>Changed Elements API Tutorial - Tutorials | iTwin Platform</title><meta name="next-head-count" content="6"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K95F6GW');</script><style>@layer global-overrides, itwinui;</style><link rel="preload" href="/_next/static/css/6a68c8a7b2a77f53.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6a68c8a7b2a77f53.css" data-n-g=""/><link rel="preload" href="/_next/static/css/99338c7953687cf2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/99338c7953687cf2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/94b5429e8bb99082.css" as="style"/><link rel="stylesheet" href="/_next/static/css/94b5429e8bb99082.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-5260ea72744590ab.js" defer=""></script><script src="/_next/static/chunks/framework-79bce4a3a540b080.js" defer=""></script><script src="/_next/static/chunks/main-557073a0905b564b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6b8898c21a2e4b95.js" defer=""></script><script src="/_next/static/chunks/fec483df-6230579d5d828573.js" defer=""></script><script src="/_next/static/chunks/8670-b234e6d64ae1c03d.js" defer=""></script><script src="/_next/static/chunks/9734-f7fe5072f2fe3007.js" defer=""></script><script src="/_next/static/chunks/9102-f9e23c377aca5fcd.js" defer=""></script><script src="/_next/static/chunks/8764-dbd95fd81c44c3e6.js" defer=""></script><script src="/_next/static/chunks/1706-7c6deda01944d83c.js" defer=""></script><script src="/_next/static/chunks/4009-a6bb264a9deaef6d.js" defer=""></script><script src="/_next/static/chunks/1610-62049d841aecaa9e.js" defer=""></script><script src="/_next/static/chunks/6638-64bc76b8941aa5e8.js" defer=""></script><script src="/_next/static/chunks/6198-937305f2e4c7e571.js" defer=""></script><script src="/_next/static/chunks/pages/tutorials/changed-elements-api-cbf41ac711dda29d.js" defer=""></script><script src="/_next/static/4I2YaoF9Uf026tEb78Qcd/_buildManifest.js" defer=""></script><script src="/_next/static/4I2YaoF9Uf026tEb78Qcd/_ssgManifest.js" defer=""></script></head><body class="iui-body portal-root"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K95F6GW"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="app"><div class="sticky-top" style="z-index:10"><div class="portal-header dark-blue" data-theme="dark"><header class="iui-page-header page-header"><div class="iui-left"><a id="itwin-platform-header-logo-link" href="/"><div class="iui-header-logo" role="button" tabindex="0"><svg id="header-logo-icon" class="iui-header-button-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.997 3.95a1.405 1.405 0 0 0-.682-1.122L11.901.802a1.397 1.397 0 0 0-1.427 0L10.3.906l-1.017.604L7.06 2.828a1.404 1.404 0 0 0-.684 1.202v1.113l-.85-.504a1.397 1.397 0 0 0-1.427 0l-2.157 1.28-.995.59-.262.156A1.404 1.404 0 0 0 0 7.867v4.103c0 .027.001.054.003.08a1.405 1.405 0 0 0 .682 1.122l3.414 2.026a1.397 1.397 0 0 0 1.427 0l.175-.104 1.017-.604 2.222-1.318a1.404 1.404 0 0 0 .685-1.202v-1.113l.85.504a1.397 1.397 0 0 0 1.426 0l2.157-1.28.996-.59.262-.156A1.404 1.404 0 0 0 16 8.133V4.03c0-.027-.001-.054-.003-.08zM4.82 6.619a.744.744 0 1 1-.744.744.744.744 0 0 1 .744-.744zm2.037 6.375-.3.184-1.071.66-.367.227-.19.117a.174.174 0 0 1-.043.02.253.253 0 0 1-.173-.012l-.017-.008-.103-.064-1.825-1.124V11.86s.006-.244.316-.067l1.126.692v-2.428l-.701-.433V8.492s.006-.244.317-.066l1.582.973v3.091l1.132-.696c.31-.177.317.067.317.067zm8.548-7.889v3.028a.807.807 0 0 1-.393.69l-.262.156-.996.591-2.156 1.28a.802.802 0 0 1-.82 0l-1.153-.685V7.867a1.404 1.404 0 0 0-.685-1.202l-1.124-.667-.846-.502V4.03a.807.807 0 0 1 .393-.69L9.585 2.02l1.018-.604.175-.103a.803.803 0 0 1 .82 0l3.414 2.025a.814.814 0 0 1 .392.645l.001.046zm-3.958-2.713 2.157 1.329V5.06s-.008.288-.375.078L11.9 4.32v2.87l.829.511v1.34s-.007.288-.374.078l-1.87-1.15V4.316l-1.338.822c-.367.21-.374-.078-.374-.078V3.72l.354-.217 1.266-.78.434-.268.224-.138a.205.205 0 0 1 .05-.025.299.299 0 0 1 .205.016l.02.01z"></path></svg><span class="iui-label"><strong>iTwin Platform</strong></span></div></a></div><div class="iui-right"><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/get-started"><span class="iui-button-label"><div>Get Started</div></span></a><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/apis"><span class="iui-button-label"><div>Documentation</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button iui-active desktop-header-button" type="button" aria-label="Dropdown" aria-current="location"><span class="iui-button-label"><div>Learning</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/samples"><span class="iui-button-label"><div>Samples</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button desktop-header-button" type="button" aria-label="Dropdown"><span class="iui-button-label"><div>Support</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><button class="iui-button iui-borderless" type="button" id="mobile-header-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="iui-button-icon" aria-hidden="true"><g fill-rule="evenodd"><path d="M0,12h16v2H0V12z"></path><path d="M0,7h16v2H0V7z"></path><path d="M0,2h16v2H0V2z"></path></g></svg></button><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></header><div class="header-menu-backdrop" style="display:none"><div class="collapsible-menu"><div class="collapsible-menu-close-area"><button class="iui-button iui-borderless iui-small header-close-button" type="button"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon" aria-hidden="true"><path d="m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"></path></svg></button></div><a class="hamburger-nav-link" href="/get-started/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Started</div></span></button></a><a class="hamburger-nav-link" href="/apis/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Documentation</div></span></button></a><a class="hamburger-nav-link" href="/tutorials/"><button class="iui-button iui-borderless iui-header-button iui-active hamburger-button" type="button" aria-current="location"><span class="iui-button-label"><div>Tutorials</div></span></button></a><a class="hamburger-nav-link" href="/accreditation/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Accreditation</div></span></button></a><a class="hamburger-nav-link" href="/powered-by-itwin/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Powered by iTwin</div></span></button></a><a class="hamburger-nav-link" href="/samples/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Samples</div></span></button></a><a class="hamburger-nav-link" href="/support/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Support</div></span></button></a><a class="hamburger-nav-link" href="https://itwinplatform.ideas.aha.io/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Submit an Idea</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon"><path d="m16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4-1.9-1.9m5.4 16v-9h-1v8h-14v-14h8v-1h-9v16z"></path></svg></button></a><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></div></div></div><main class="content"><div id="page" class="container tutorial-container"><div id="tutorial-header"><h1 class="iui-text-headline iui-text-spacing">Changed Elements API Tutorial</h1></div><div id="tutorial-content"><div id="menu-button" data-testid="menu-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 11.3-1.4 1.4L8 6.1l-6.6 6.6L0 11.3l8-8"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 4.7-1.4-1.4L8 9.9 1.4 3.3 0 4.7l8 8z"></path></svg></div><div id="tutorial-side-navigation-pane" class="sticky-container"><div class="sideMenu sticky-element"><div class="sideMenu-large"><div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#introduction"><span class="sideMenuItem">Introduction</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#1-set-up-your-environment"><span class="sideMenuItem">1. Set up your environment</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#11-required-materials"><span class="sideMenuItem sideMenuSubItem">1.1 Required materials</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#12-suggested-materials"><span class="sideMenuItem sideMenuSubItem">1.2 Suggested materials</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#2-overview-of-changed-elements-api"><span class="sideMenuItem">2. Overview of Changed Elements API</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#21-enabling-change-tracking"><span class="sideMenuItem sideMenuSubItem">2.1 Enabling Change Tracking</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#22-getting-changed-elements"><span class="sideMenuItem sideMenuSubItem">2.2 Getting Changed Elements</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#3-putting-it-to-work"><span class="sideMenuItem">3. Putting it to work</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#31-creating-the-widget"><span class="sideMenuItem sideMenuSubItem">3.1 Creating the widget</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#32-adding-the-widget-to-the-application"><span class="sideMenuItem sideMenuSubItem">3.2 Adding the widget to the application</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#33-writing-a-client-for-the-api"><span class="sideMenuItem sideMenuSubItem">3.3 Writing a client for the API</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#34-using-the-client"><span class="sideMenuItem sideMenuSubItem">3.4 Using the client</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#35-enhancing-the-change-visualization"><span class="sideMenuItem sideMenuSubItem">3.5 Enhancing the change visualization</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#36-about-changed-properties"><span class="sideMenuItem sideMenuSubItem">3.6 About changed properties</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#4-making-sense-of-changed-elements-data"><span class="sideMenuItem">4. Making sense of Changed Elements data</span></a></div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#41-changed-elements-json"><span class="sideMenuItem sideMenuSubItem">4.1 Changed Elements JSON</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#conclusion"><span class="sideMenuItem">Conclusion</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/changed-elements-api/#more-resources-that-you-may-like"><span class="sideMenuItem">More resources that you may like</span></a></div></div></div></div></div><div id="tutorial-content-body"><div id="tutorial-summary-graphical-content"><div class="graphical-content-placeholder"><img src="/images/changed-elements-header.png"/></div></div><div id="tutorial-introduction"><div class="tutorial-introduction-content"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#introduction" id="introduction">Introduction</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">The Changed Elements API is a REST API that allows the consumer to inspect what elements have changed in an iModel between two versions of the iModel. In this tutorial, we will explore using the API operations and we will write an iTwin.js application to visualize change.</p></div><div class="tutorial-summary"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#info" id="info">Info</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><div id="tutorial-summary-skill-level"><p class="iui-text-block iui-text-spacing label">Skill level:</p><p class="iui-text-block iui-text-spacing">Basic</p></div><div id="tutorial-summary-duration"><p class="iui-text-block iui-text-spacing label">Duration:</p><p class="iui-text-block iui-text-spacing">45<!-- --> minutes</p></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#1-set-up-your-environment" id="1-set-up-your-environment">1. Set up your environment</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">To do this tutorial, it is recommended that you do the <a href="/tutorials/web-application-quick-start/" target="_blank">Web Application Quick Start tutorial</a> first. This tutorial expects that you have a registered application as shown in the quick start tutorial.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#11-required-materials" id="11-required-materials">1.1 Required materials</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><span id="a-hrefhttpsnodejsorg-target_blanknodejs-14x-lts-versiona"><a href="https://nodejs.org" target="_blank">Node.js (14.x LTS version)</a></span><p class="iui-text-block iui-text-spacing">This tool provides the backend JavaScript runtime necessary for your computer to read and render code appropriately. It also allows you to run NPM command line (required for every iTwin project).</p><span id="a-hrefhttpsgit-scmcomdownloads-target_blankgita"><a href="https://git-scm.com/downloads" target="_blank">Git</a></span><p class="iui-text-block iui-text-spacing">This is the source code control system for the iTwin repositories.</p><span id="a-hrefhttpsgithubcomitwinchanged-elements-tutorial-target_blanktutorial-repositorya"><a href="https://github.com/iTwin/changed-elements-tutorial" target="_blank">Tutorial Repository</a></span><p class="iui-text-block iui-text-spacing">This is the github repository that you will use in this tutorial. You should clone the <code>start</code> branch as a starting point to follow along. If at any point you are unsure on how to setup the code demonstrated in the snippets, or just want to take a shortcut, the repository’s <code>main</code> branch contains the finished tutorial application.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="materials-link-area"><div class="materials-link-icon-area"><img src="/_next/static/images/node-js-icon-cd0aa57be0be48e9363dd607b99abd96.png" alt="Node js icon"/></div><div class="materials-link-content-area"><h3 class="iui-text-leading iui-text-spacing">Node.js</h3><a type="button" target="_blank" href="https://nodejs.org"><button class="iui-button iui-high-visibility" type="button"><span class="iui-button-label">Get</span></button></a></div></div></div><div class="action"><div class="materials-link-area"><div class="materials-link-icon-area"><img src="/_next/static/images/Git_icon-305be34a91099bc3c99973b49684d23b.png" alt="Git icon"/></div><div class="materials-link-content-area"><h3 class="iui-text-leading iui-text-spacing">Git</h3><a type="button" target="_blank" href="https://git-scm.com/downloads"><button class="iui-button iui-high-visibility" type="button"><span class="iui-button-label">Get</span></button></a></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Clone starting point for tutorial</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">BASH</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token function">git</span><span> clone https://github.com/iTwin/changed-elements-tutorial -b start</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Finished tutorial application</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">BASH</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token function">git</span><span> clone https://github.com/iTwin/changed-elements-tutorial</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#12-suggested-materials" id="12-suggested-materials">1.2 Suggested materials</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><span id="a-hrefhttpswwwgooglecomchrome-target_blankgoogle-chromea"><a href="https://www.google.com/chrome/" target="_blank">Google Chrome</a></span><p class="iui-text-block iui-text-spacing">This software can help you to develop and debug frontend JavaScript problems.</p><span id="a-hrefhttpscodevisualstudiocom-target_blankvisual-studio-codea"><a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a></span><p class="iui-text-block iui-text-spacing">This is our recommended editor and debugger tool for developing iTwin.js applications. It is free, open source and includes a GUI for working with GIT.</p><span id="a-hrefhttpswwwpostmancomdownloads-target_blankpostmana"><a href="https://www.postman.com/downloads/" target="_blank">Postman</a></span><p class="iui-text-block iui-text-spacing">If you want to test the REST API calls directly, you can use <a href="https://www.postman.com/downloads/" target="_blank">Postman</a> or any other solution capable of sending HTTP requests. If you do it this way, you will require an authorization token for the requests to work.</p><p class="iui-text-block iui-text-spacing">To learn more about how authentication and authorization works in an iTwin powered application, check out the full <a href="/apis/overview/authorization/" target="_blank">documentation</a> on how to obtain the token.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="materials-link-area"><div class="materials-link-icon-area"><img src="/_next/static/images/google-chrome-icon-a50a7364b8551ddfdcf84e08fa8c2150.png" alt="Git icon"/></div><div class="materials-link-content-area"><h3 class="iui-text-leading iui-text-spacing">Google Chrome</h3><a type="button" target="_blank" href="https://www.google.com/chrome/"><button class="iui-button iui-high-visibility" type="button"><span class="iui-button-label">Get</span></button></a></div></div></div><div class="action"><div class="materials-link-area"><div class="materials-link-icon-area"><img src="/_next/static/images/vs-code-icon-4506ee5016ccc44bba4af071ac293b5b.png" alt="Node js icon"/></div><div class="materials-link-content-area"><h3 class="iui-text-leading iui-text-spacing">Visual Studio Code</h3><a type="button" target="_blank" href="https://code.visualstudio.com/"><button class="iui-button iui-high-visibility" type="button"><span class="iui-button-label">Get</span></button></a></div></div></div><div class="action"><div class="materials-link-area"><div class="materials-link-icon-area"><svg viewBox="0 0 316.55 284.52" xmlns="http://www.w3.org/2000/svg"><g fill="#ff6c37"><path d="M0 282.07v-42.94a1.72 1.72 0 0 1 .61-1.31 2.27 2.27 0 0 1 1.56-.54h12.11a14.19 14.19 0 0 1 9.84 3.32q3.69 3.32 3.69 10.47v.58q0 7.16-3.76 10.51a14.53 14.53 0 0 1-10 3.35H5.44v16.56a1.55 1.55 0 0 1-.8 1.4 3.69 3.69 0 0 1-3.77 0 1.56 1.56 0 0 1-.87-1.4zm5.36-21h8.67a8.31 8.31 0 0 0 6.24-2.28 9.31 9.31 0 0 0 2.22-6.79v-.78a9.35 9.35 0 0 0-2.19-6.8 8.29 8.29 0 0 0-6.24-2.26H5.44zM46.56 270.44V251.2q0-7.2 3.75-10.57a16.67 16.67 0 0 1 20 0q3.79 3.37 3.8 10.57v19.24q0 7.21-3.77 10.57a16.61 16.61 0 0 1-20.07 0c-2.47-2.25-3.71-5.74-3.71-10.57zm5.38 0q0 9.06 8.36 9.07a8.26 8.26 0 0 0 6.23-2.26 9.44 9.44 0 0 0 2.2-6.81V251.2a9.31 9.31 0 0 0-2.2-6.8 8.26 8.26 0 0 0-6.23-2.26c-5.58 0-8.36 3-8.36 9.06zM93.08 277.4a3.29 3.29 0 0 1 .74-2 2.06 2.06 0 0 1 1.55-1 2.57 2.57 0 0 1 1.47.81c.59.53 1.22 1.12 1.86 1.78a8.41 8.41 0 0 0 3 1.79 12.43 12.43 0 0 0 4.68.79 9.68 9.68 0 0 0 6.51-2 7.26 7.26 0 0 0 2.37-5.91 7.78 7.78 0 0 0-2.16-5.72 14.51 14.51 0 0 0-5.24-3.35c-2.06-.76-4.1-1.56-6.24-2.46a13.38 13.38 0 0 1-5.27-4 11 11 0 0 1-2.16-7 12.71 12.71 0 0 1 1.27-5.85 9 9 0 0 1 3.42-3.74 16.94 16.94 0 0 1 4.44-1.84 19.86 19.86 0 0 1 4.91-.58 25 25 0 0 1 7.58 1.14c2.4.78 3.62 1.84 3.62 3.12a3.79 3.79 0 0 1-.64 1.92 1.9 1.9 0 0 1-1.67 1 19.66 19.66 0 0 1-2.87-1.13 14.15 14.15 0 0 0-5.94-1.22 11.21 11.21 0 0 0-6.24 1.56 5.63 5.63 0 0 0-2.4 5.05 5.87 5.87 0 0 0 2.11 4.8 16.56 16.56 0 0 0 5.27 2.9c2.07.73 4.13 1.56 6.23 2.5a13.19 13.19 0 0 1 5.21 4.5 13.52 13.52 0 0 1 2.17 7.89c0 4.4-1.28 7.7-3.84 9.95a14.85 14.85 0 0 1-10.15 3.35 18.14 18.14 0 0 1-9.6-2.39c-2.68-1.54-3.99-3.06-3.99-4.66zM136.66 239.65a2.66 2.66 0 0 1 .51-1.66 1.54 1.54 0 0 1 1.4-.71h26a1.54 1.54 0 0 1 1.4.71 2.83 2.83 0 0 1 .51 1.66 2.91 2.91 0 0 1-.51 1.74 1.55 1.55 0 0 1-1.4.75h-10.2v39.93a1.57 1.57 0 0 1-.8 1.4 3.69 3.69 0 0 1-3.77 0 1.57 1.57 0 0 1-.8-1.4v-39.93h-10.35a1.55 1.55 0 0 1-1.4-.72 2.9 2.9 0 0 1-.59-1.77zM184.7 282.07V240a2.34 2.34 0 0 1 1.92-2.68 3 3 0 0 1 .84 0c1.7 0 3.12 1.12 4.29 3.39l10 19.23 10.11-19.23c1.23-2.27 2.65-3.39 4.27-3.39a2.33 2.33 0 0 1 2.66 1.93 1.89 1.89 0 0 1 0 .67V282a1.57 1.57 0 0 1-.79 1.41 3.76 3.76 0 0 1-3.78 0 1.57 1.57 0 0 1-.79-1.41v-33.48l-9.65 18.14a2.3 2.3 0 0 1-2.1 1.56 2.22 2.22 0 0 1-2-1.56l-9.65-18.45v33.86a1.57 1.57 0 0 1-.8 1.4 3.25 3.25 0 0 1-1.81.59 3.37 3.37 0 0 1-1.88-.51 1.56 1.56 0 0 1-.84-1.48zM237.16 281.77a1.59 1.59 0 0 1 .13-.52l13.08-42.09c.37-1.23 1.45-1.85 3.25-1.85s2.89.62 3.26 1.85l13.12 42.3a.88.88 0 0 0 0 .23.31.31 0 0 1 0 .19 1.82 1.82 0 0 1-1 1.56 4.2 4.2 0 0 1-2.34.62 1.78 1.78 0 0 1-1.92-1.2l-2.8-9.35h-16.8l-2.8 9.35a1.78 1.78 0 0 1-2 1.23 4 4 0 0 1-2.17-.64 1.83 1.83 0 0 1-1.01-1.68zm9.28-12.8h14.29l-7.15-23.88zM288.53 282.07v-42.94c0-1.23.89-1.85 2.68-1.85a3.44 3.44 0 0 1 2.28.79 8.49 8.49 0 0 1 1.8 2.59l15.92 31.18V239.1a1.56 1.56 0 0 1 .8-1.37 3.94 3.94 0 0 1 3.77 0 1.55 1.55 0 0 1 .79 1.37v43a1.56 1.56 0 0 1-.79 1.4 3.38 3.38 0 0 1-1.89.51 3.84 3.84 0 0 1-3.38-2.43l-16.62-32.13v32.65a1.56 1.56 0 0 1-.79 1.4 3.71 3.71 0 0 1-3.78 0 1.56 1.56 0 0 1-.79-1.43zM257.48 112.74a100 100 0 1 0-111.91 86.45 100 100 0 0 0 111.91-86.45z"></path></g><path d="m194.36 64.27-42.16 42.16-11.95-11.94c41.51-41.49 45.63-37.84 54.11-30.22z" fill="#fff"></path><path d="M152.2 107.44a1 1 0 0 1-.71-.3l-12-12a1 1 0 0 1 0-1.41c42.2-42.2 46.64-38.21 55.49-30.26a1 1 0 0 1 .33.72 1 1 0 0 1-.29.74l-42.12 42.21a1 1 0 0 1-.7.3zm-10.53-13L152.2 105l40.71-40.71c-7.39-6.53-12.41-8.56-51.24 30.2z" fill="#ff6c37"></path><path d="M164.28 118.52 152.76 107l42.17-42.17c11.35 11.36-5.48 29.88-30.65 53.69z" fill="#fff"></path><path d="M164.28 119.52h-.05a1.07 1.07 0 0 1-.67-.31l-11.51-11.5a1.05 1.05 0 0 1-.29-.71 1 1 0 0 1 .29-.71l42.17-42.16a1 1 0 0 1 1.41 0 12.57 12.57 0 0 1 3.91 9.33c-.16 11.09-12.79 25.18-34.57 45.78a1 1 0 0 1-.69.28zM154.18 107c6.45 6.46 9.06 9.06 10.12 10.12 16.84-16 33.08-32.39 33.24-43.68a10.34 10.34 0 0 0-2.64-7.17z" fill="#ff6c37"></path><path d="m140.54 94.78 8.51 8.5a.41.41 0 0 1-.21.69l-17.55 3.78a1.65 1.65 0 0 1-1.52-2.78L140 94.78a.41.41 0 0 1 .54 0z" fill="#fff"></path><path d="M130.93 108.79a2.65 2.65 0 0 1-1.86-4.53l10.18-10.19a1.42 1.42 0 0 1 2 0l8.5 8.51a1.4 1.4 0 0 1-.7 2.37l-17.55 3.78a2.76 2.76 0 0 1-.57.06zm9.32-12.89-9.77 9.77a.63.63 0 0 0-.11.78.61.61 0 0 0 .71.32l16.49-3.55z" fill="#ff6c37"></path><path d="M216.72 40.86a16.18 16.18 0 1 0-2.85 25.52l-11.34-11.33z" fill="#fff"></path><path d="M205.5 69.72a17.19 17.19 0 1 1 11.91-29.58 1 1 0 0 1 .31.71 1 1 0 0 1-.29.72L204 55.05l10.63 10.62a1 1 0 0 1 .28.83 1 1 0 0 1-.48.74 17.21 17.21 0 0 1-8.93 2.48zm0-32.34a15.16 15.16 0 1 0 6.71 28.76l-10.38-10.39a1 1 0 0 1-.3-.7 1 1 0 0 1 .3-.71l13.44-13.44a15.19 15.19 0 0 0-9.76-3.52z" fill="#ff6c37"></path><path d="m217 41.08-.25-.22-14.22 14.19 11.34 11.33A16 16 0 0 0 217 64a16.2 16.2 0 0 0 0-22.92z" fill="#fff"></path><path d="M213.87 67.38a1 1 0 0 1-.71-.29l-11.33-11.34a1 1 0 0 1-.3-.7 1 1 0 0 1 .3-.71L216 40.15a1 1 0 0 1 1.4 0l.26.23a17.15 17.15 0 0 1-3.29 26.87 1 1 0 0 1-.5.13zM204 55.05l10 10.06a15.79 15.79 0 0 0 2.25-1.84 15.19 15.19 0 0 0 .46-21z" fill="#ff6c37"></path><path d="M196.1 66a6.17 6.17 0 0 0-8.71 0l-37.71 37.72L156 110l39.86-35a6.16 6.16 0 0 0 .24-9z" fill="#fff"></path><path d="M156 111a1 1 0 0 1-.71-.29l-6.29-6.28a1 1 0 0 1 0-1.42l37.68-37.71a7.18 7.18 0 0 1 10.13 0 7.15 7.15 0 0 1-.34 10.43l-39.86 35a1 1 0 0 1-.61.27zm-4.86-7.27 4.9 4.9 39.16-34.39a5.16 5.16 0 1 0-7.05-7.52z" fill="#ff6c37"></path><path d="M120.76 146.58a.91.91 0 0 0-.47 1l1.69 7.22a2 2 0 0 1-3.44 1.91l-10.93-10.93 35.89-35.88 12.35.19 8.43 8.42c-2.09 1.75-14.18 13.36-43.52 28.07z" fill="#fff"></path><path d="M120 158.33a3 3 0 0 1-2.14-.9l-10.96-10.94a1 1 0 0 1-.29-.7 1 1 0 0 1 .29-.71l35.89-35.89a1 1 0 0 1 .72-.29l12.36.19a1 1 0 0 1 .69.29l8.42 8.43a1 1 0 0 1 .3.75 1 1 0 0 1-.36.72l-.71.62c-10.58 9.29-25 18.55-42.93 27.53l1.68 7.15a3 3 0 0 1-1.49 3.36 3.07 3.07 0 0 1-1.47.39zm-11-12.54L119.25 156a1 1 0 0 0 1.76-1l-1.69-7.22a1.9 1.9 0 0 1 1-2.13c17.74-8.9 32-18.06 42.5-27.23l-7.38-7.38-11.53-.18z" fill="#ff6c37"></path><path d="m99 154.38 8.59-8.59 12.77 12.77-20.4-1.4a1.63 1.63 0 0 1-.96-2.78z" fill="#fff"></path><path d="M120.38 159.56h-.06l-20.41-1.4a2.64 2.64 0 0 1-1.6-4.49l8.59-8.59a1 1 0 0 1 1.42 0l12.77 12.77a1 1 0 0 1 .21 1.13 1 1 0 0 1-.92.58zm-12.77-12.36-7.88 7.88a.62.62 0 0 0-.16.66.63.63 0 0 0 .53.43l17.69 1.21zM139.86 114.53a1 1 0 0 1-.71-1.7l9.72-9.72a1 1 0 0 1 1.42 0l6.26 6.27a1 1 0 0 1 .26 1 1 1 0 0 1-.75.69l-16 3.45a.75.75 0 0 1-.2.01zm9.72-9.3-6.58 6.61 10.87-2.35z" fill="#ff6c37"></path><path d="m155.85 110.09-11 2.36a1.51 1.51 0 0 1-1.39-2.55l6.08-6.08z" fill="#fff"></path><g fill="#ff6c37"><path d="M144.56 113.48a2.51 2.51 0 0 1-1.77-4.29l6.08-6.08a1 1 0 0 1 1.42 0l6.26 6.27a1 1 0 0 1 .26 1 1 1 0 0 1-.75.69l-11 2.37a2.47 2.47 0 0 1-.5.04zm5-8.25-5.38 5.37a.49.49 0 0 0-.08.61.46.46 0 0 0 .56.26l9.16-2zM217.07 50.69a1.16 1.16 0 1 0-2.07 1 3.49 3.49 0 0 1-.43 3.76 1.16 1.16 0 0 0 .15 1.63 1.17 1.17 0 0 0 1.63-.16 5.79 5.79 0 0 0 .72-6.23z"></path></g></svg></div><div class="materials-link-content-area"><h3 class="iui-text-leading iui-text-spacing">Postman</h3><a type="button" target="_blank" href="https://www.postman.com/downloads/"><button class="iui-button iui-high-visibility" type="button"><span class="iui-button-label">Get</span></button></a></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#2-overview-of-changed-elements-api" id="2-overview-of-changed-elements-api">2. Overview of Changed Elements API</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">Before diving into writing code to leverage the changed elements API with an iTwin.js application, let’s take a look at the operations that are available in the API first</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#21-enabling-change-tracking" id="21-enabling-change-tracking">2.1 Enabling Change Tracking</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">This is the first operation of the API and is used to enable change tracking of an iModel.</p><p class="iui-text-block iui-text-spacing">The API requires the <code>changedelements:modify</code> scope to be added to your App. It can be added to your apps in the <a href="/my-apps/" target="_blank">Developer Portal</a>.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#211-what-is-change-tracking-and-why-do-we-need-it" id="211-what-is-change-tracking-and-why-do-we-need-it">2.1.1 What is change tracking and why do we need it?</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">An iModel evolves over time. Every time a design file is changed and the iModel is synchronized, new <a href="https://www.itwinjs.org/learning/imodelhub/briefcases/#changesets" target="_blank">Changesets</a> are published to the iModel, updating the iModel data.</p><p class="iui-text-block iui-text-spacing">An iModel may contain graphical elements that are related to business data. For example, let’s think about a piece of equipment:</p><div style="margin-top:16px;margin-bottom:16px"><img src="../../images/changed-elements-related-property.png" style="margin:auto"/></div><p class="iui-text-block iui-text-spacing">This equipment may be displayed in an iModel with a bare-bones <a href="https://www.itwinjs.org/reference/core-backend/elements/geometricelement/?term=geometric+element" target="_blank">Geometric Element</a>, however, business data that relates to it (like the pump diameter in the image above), exists under the properties of a different non-graphical element.</p><p class="iui-text-block iui-text-spacing">A changeset may contain changes to the equipment’s related pump diameter property, but the geometric counterpart of the equipment will not contain a change. To be able to find which elements relate to which change, you can use the Changed Elements API.</p><p class="iui-text-block iui-text-spacing">The Changed Elements API will track the iModel for changes, and when a <a href="https://www.itwinjs.org/learning/imodelhub/versions/?term=named+version" target="_blank">Named Version</a> is created, the API will find all related elements that have changed in each of the changesets and store a summary of them in the cloud.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#212-how-do-i-enable-tracking-in-the-changed-elements-api" id="212-how-do-i-enable-tracking-in-the-changed-elements-api">2.1.2 How do I enable tracking in the Changed Elements API?</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">The API has an operation to enable the changed elements feature for an iModel. As mentioned before, for this operation to work, your App needs to have the scope: <code>changedelements:modify</code>.</p><p class="iui-text-block iui-text-spacing">Here is an example request that shows how to enable the APIs change tracking for an iModel, you would just need to replace the iTwin Id, iModel Id and authorization token with your own.</p><p class="iui-text-block iui-text-spacing">The body should contain a JSON object with a <code>enable</code> property, and it must be either true or false as shown in the example above.</p><p class="iui-text-block iui-text-spacing">Here is the <a href="/apis/changed-elements/operations/enable-change-tracking/" target="_blank">documentation</a> for this operation.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Example HTTP Request for Enable Change Tracking Operation</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">HTTP</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span class="token application/json"><span class="token request-line token property">PUT</span><span class="token request-line"> https://api.bentley.com/changedelements/tracking HTTP/1.1</span><span>
</span></span><span class="token application/json"><span></span><span class="token header-name keyword">Authorization:</span><span> Bearer JWT_TOKEN
</span></span><span class="token application/json"><span></span><span class="token header-name keyword">Content-Type:</span><span> application/json</span><span class="token application/json">
</span></span><span class="token application/json">
</span><span class="token application/json"><span class="token application/json"></span><span class="token application/json token punctuation">{</span><span class="token application/json">
</span></span><span class="token application/json"><span class="token application/json">  </span><span class="token application/json token string">&quot;enable&quot;</span><span class="token application/json token punctuation">:</span><span class="token application/json token boolean">true</span><span class="token application/json token punctuation">,</span><span class="token application/json">
</span></span><span class="token application/json"><span class="token application/json">  </span><span class="token application/json token string">&quot;iModelId&quot;</span><span class="token application/json token punctuation">:</span><span class="token application/json token string">&quot;myIModelId&quot;</span><span class="token application/json token punctuation">,</span><span class="token application/json">
</span></span><span class="token application/json"><span class="token application/json">  </span><span class="token application/json token string">&quot;iTwinId&quot;</span><span class="token application/json token punctuation">:</span><span class="token application/json token string">&quot;myITwinId&quot;</span><span class="token application/json">
</span></span><span class="token application/json"><span class="token application/json"></span><span class="token application/json token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#213-my-imodel-is-being-tracked-for-change-now-what" id="213-my-imodel-is-being-tracked-for-change-now-what">2.1.3 My iModel is being tracked for change, now what?</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Once change tracking is enabled for your iModel, whenever a new <a href="https://www.itwinjs.org/learning/imodelhub/versions/?term=named+version" target="_blank">Named Version</a> gets created, either by a design application or a <a href="https://www.itwinjs.org/learning/imodel-connectors/?term=connector" target="_blank">Connector</a>, the API will process the changesets and store the results of what elements have changed in your iModel.</p><p class="iui-text-block iui-text-spacing">This operation can take time, and the time it takes is dependent on data complexity and size. It is recommended to use a small iModel to do this tutorial if you are following along, as a very large iModel may take hours to process if it has never been processed and has a lot of data.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#22-getting-changed-elements" id="22-getting-changed-elements">2.2 Getting Changed Elements</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">The next operation allows us to query the API to get the elements that have changed after processing is ready. To use this operation, you must provide the start and end changeset Ids that you want to obtain results for. To get changeset Ids, you can use <a href="/apis/imodels/operations/get-imodel-changesets/" target="_blank">Get iModel Changesets API</a>.</p><p class="iui-text-block iui-text-spacing">The API requires the <code>changedelements:read</code> scope to be added to your App. It can be added to your apps in the <a href="/my-apps/" target="_blank">Developer Portal</a></p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#221-using-the-api-to-get-changed-elements" id="221-using-the-api-to-get-changed-elements">2.2.1 Using the API to get changed elements</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Here is an example request that shows how to get the changed elements between two changesets, ensure to replace the iTwin Id, iModel Id, start changeset Id, end changeset Id and authorization token with your own.</p><p class="iui-text-block iui-text-spacing">This operation will return a JSON object that contains which elements have changed between the two given changeset Ids. The returned JSON corresponds to the <a href="https://www.itwinjs.org/reference/core-common/entities/changedelements/" target="_blank">ChangedElements</a> interface. We will explore the format a bit more in the <a href="#41-changed-elements-json" target="_blank">Changed Elements JSON Section</a>. Here’s an example of the data returned for a single element that changed:</p><div class="iui-alert iui-informational" style="margin-bottom:22px"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-alert-icon"><path d="m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8zm1.2 3.2a.92336.92336 0 0 1 .997.8433q.00235.02829.003.0567a1.30936 1.30936 0 0 1 -1.3 1.2.94477.94477 0 0 1 -1-1 1.22815 1.22815 0 0 1 1.3-1.1zm-2 9.6c-.5 0-.9-.3-.5-1.7l.6-2.4c.1-.4.1-.5 0-.5-.2-.1-.9.2-1.3.5l-.2-.5a6.49722 6.49722 0 0 1 3.3-1.6c.5 0 .6.6.3 1.6l-.7 2.6c-.1.5-.1.6.1.6a2.00287 2.00287 0 0 0 1.1-.6l.3.4a5.76881 5.76881 0 0 1 -3 1.6z"></path></svg><span class="iui-alert-message">The results are inclusive to both start and end changesets. This means that the changes found in both changesets will be contained in the results. This is important to think about because if you have an iModel with 2 Named Versions, A and B, and you want to get what has changed between A and B, you should *not* include A&#x27;s changeset in the query. Consider the following example:<div style="margin-top:16px;margin-bottom:16px"><img src="../../images/changed-elements-changeset-example.png" style="margin:auto"/></div><p class="iui-text-block iui-text-spacing">In the example above, even though Changeset 2 is the changeset related to Named Version A, to get what has changed between A and B, start changeset should be Changeset 3 and end changeset should be Changeset 4, as Changeset 2 is already applied to the iModel in Named Version A.</p><p class="iui-text-block iui-text-spacing">Another thing to keep in mind is that if you want to obtain changed elements for a single changeset, since the range is inclusive, you can provide the same changeset Id for start and end changesets, and it will return the elements for the given changeset.</p><p class="iui-text-block iui-text-spacing">Here’s the <a style="text-decoration:underline" href="/apis/changed-elements/operations/get-comparison/" target="_blank">documentation</a> for this operation.</p></span></div></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Example HTTP Request for Get Comparison Operation</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">HTTP</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token request-line token property">GET</span><span class="token request-line"> https://api.bentley.com/changedelements/comparison?iTwinId=myITwinId&amp;iModelId=myIModelId&amp;startChangesetId=myStartChangesetId&amp;endChangesetId=myEndChangesetId HTTP/1.1</span><span>
</span></span><span><span></span><span class="token header-name keyword">Authorization:</span><span> Bearer JWT_TOKEN
</span></span><span><span></span><span class="token header-name keyword">Content-Type:</span><span> application/json</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Example result from the Get Comparison Operation</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">JSON</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token property">&quot;changedElements&quot;</span><span class="token operator">:</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token property">&quot;elements&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;0x30000000f69&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;classIds&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;0x670&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;opcodes&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;modelIds&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;0x20000000002&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;UserLabel&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;oldChecksums&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1448094486</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;newChecksums&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">362149254</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;parentIds&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token property">&quot;parentClassIds&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">]</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#3-putting-it-to-work" id="3-putting-it-to-work">3. Putting it to work</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">Now that we have covered how the API works, we will use it to create a simple application that can visualize change.</p><p class="iui-text-block iui-text-spacing">We will implement a simple widget that will allow us to use both operations of the changed elements API. It will have a button to enable change tracking, a dropdown that will allow us to pick a named version and another button to visualize the differences between the current version and the one selected in the dropdown.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#31-creating-the-widget" id="31-creating-the-widget">3.1 Creating the widget</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">After cloning the <code>main</code> branch of the repository, create a new .tsx file and call it <code>ChangedElementsWidget.tsx</code>. We are going to write a react hook that will allow us to query the named versions of the iModel, so that we can populate the dropdown list to select our version to compare against.</p><p class="iui-text-block iui-text-spacing">The named versions object also contains the Id of the changesets, which we will use later on to do the API calls.</p><p class="iui-text-block iui-text-spacing">Now that we have a working react hook for that purpose, we can write our widget component. The widget will have a label, a react select dropdown and two buttons. We will write the button’s onClick handlers later on in the tutorial, so we will leave them empty for now.</p><p class="iui-text-block iui-text-spacing">To stylize the UI component a little bit, create a <code>ChangedElementsWidget.scss</code> file and add the styles shown in the code snippet.</p><p class="iui-text-block iui-text-spacing">We can now proceed to add the widget to the viewer application.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Necessary imports</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span class="token doc-comment comment token doc-comment comment"><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">IModelConnection</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">IModelsClient</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">NamedVersion</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">NamedVersionState</span><span class="token punctuation">,</span><span> toArray </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/imodels-client-management&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">Button</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">LabeledSelect</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">SelectOption</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/itwinui-react&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token maybe-class-name">React</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">{</span><span> useEffect</span><span class="token punctuation">,</span><span> useState </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> useCallback </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ChangedElementsFeatureOverrides</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./ChangedElemensFeatureOverrides&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ChangedElementsClient</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./ChangedElementsClient&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token string">&quot;./ChangedElementsWidget.scss&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token doc-comment comment">
</span></span><span class="token doc-comment comment token doc-comment comment">/**
</span><span class="token doc-comment comment token doc-comment comment"> * React hook to query named versions
</span><span class="token doc-comment comment token doc-comment comment"><span class="token doc-comment comment"> * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">props</span><span class="token doc-comment comment"> 
</span></span><span class="token doc-comment comment token doc-comment comment"><span class="token doc-comment comment"> * </span><span class="token doc-comment comment token keyword">@returns</span><span class="token doc-comment comment"> 
</span></span><span class="token doc-comment comment token doc-comment comment"><span class="token doc-comment comment"> */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">function</span><span> </span><span class="token function">useNamedVersions</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token punctuation">{</span><span class="token parameter"> iModel</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">IModelConnection</span><span class="token parameter"> </span><span class="token parameter token operator">|</span><span class="token parameter"> undefined </span><span class="token parameter token punctuation">}</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">const</span><span> </span><span class="token punctuation">[</span><span>versions</span><span class="token punctuation">,</span><span> setVersions</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> useState</span><span class="token operator">&lt;</span><span class="token maybe-class-name">NamedVersion</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment"><span>  </span><span class="token comment">// Load named versions that can be used for comparison</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>  </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> </span><span class="token function-variable function">loadChangesets</span><span> </span><span class="token operator">=</span><span> </span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Ensure we have a proper iModel with an iModel Id</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">iModelId</span><span> </span><span class="token operator">===</span><span> undefined</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>        </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;iModel is not valid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>        </span><span class="token keyword">return</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>     </span><span class="token doc-comment comment"> /** Uses the IModelClient to the request the Named Version of the IModel. Only selects name and changeset id.  Limited to top 10 Named Versions. */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> client </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">IModelsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> iModelIterator </span><span class="token operator">=</span><span> client</span><span class="token punctuation">.</span><span class="token property-access">namedVersions</span><span class="token punctuation">.</span><span class="token method function property-access">getRepresentationList</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>        urlParams</span><span class="token punctuation">:</span><span> </span><span class="token punctuation">{</span><span> $top</span><span class="token punctuation">:</span><span> </span><span class="token number">10</span><span> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>        iModelId</span><span class="token punctuation">:</span><span> props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">.</span><span class="token property-access">iModelId</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>        authorization</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">ChangedElementsClient</span><span class="token punctuation">.</span><span class="token property-access">getAuthorization</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Get the versions and set them to our state</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> namedVersions </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token keyword">await</span><span> </span><span class="token function">toArray</span><span class="token punctuation">(</span><span>iModelIterator</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">version</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> version</span><span class="token punctuation">.</span><span class="token property-access">state</span><span> </span><span class="token operator">===</span><span> </span><span class="token maybe-class-name">NamedVersionState</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Visible</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>      </span><span class="token function">setVersions</span><span class="token punctuation">(</span><span>namedVersions</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Call the asynchronous function to load named versions</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>    </span><span class="token function">loadChangesets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">return</span><span> versions</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment"><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Write the widget UI component</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">export</span><span> </span><span class="token keyword">interface</span><span> </span><span class="token class-name">ChangedElementsWidgetProps</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  iModel</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">IModelConnection</span><span> </span><span class="token operator">|</span><span> undefined</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">function</span><span> </span><span class="token function token maybe-class-name">ChangedElementsWidget</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">ChangedElementsWidgetProps</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token comment">// Named versions of the iModel</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> versions </span><span class="token operator">=</span><span> </span><span class="token function">useNamedVersions</span><span class="token punctuation">(</span><span>props</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token comment">// Named version selected in dropdown</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> </span><span class="token punctuation">[</span><span>selectedVersion</span><span class="token punctuation">,</span><span> setSelectedVersion</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> useState</span><span class="token operator">&lt;</span><span class="token maybe-class-name">NamedVersion</span><span> </span><span class="token operator">|</span><span> undefined</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token comment">// Callback for when clicking the &#x27;Visualize Changed Elements&#x27; button</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> onVisualizeChangedElements </span><span class="token operator">=</span><span> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token comment">// We will implement this later in the tutorial</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token comment">// Callback for when clicking the &#x27;Enable Change Tracking&#x27; button</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> onEnableTracking </span><span class="token operator">=</span><span> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>     </span><span class="token comment">// We will implement this later in the tutorial</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">const</span><span> selectOptions</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">SelectOption</span><span class="token operator">&lt;</span><span class="token maybe-class-name">NamedVersion</span><span> </span><span class="token operator">|</span><span> undefined</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>versions</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">for</span><span> </span><span class="token punctuation">(</span><span class="token keyword">const</span><span> version </span><span class="token keyword">of</span><span> versions</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      selectOptions</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span><span>        value</span><span class="token punctuation">:</span><span> version</span><span class="token punctuation">,</span><span>
</span></span><span><span>        label</span><span class="token punctuation">:</span><span> version</span><span class="token punctuation">.</span><span class="token property-access">name</span><span> </span><span class="token operator">?</span><span class="token operator">?</span><span> </span><span class="token string">&quot;Unknown Named Version&quot;</span><span>
</span></span><span><span>      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token comment">// On react select change set the new selected version</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> </span><span class="token function-variable function">onReactSelectChange</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token parameter">option</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">any</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token function">setSelectedVersion</span><span class="token punctuation">(</span><span>option</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">return</span><span> </span><span class="token punctuation">(</span><span>
</span></span><span><span>    </span><span class="token operator">&lt;</span><span>div className</span><span class="token operator">=</span><span class="token string">&quot;widget-container&quot;</span><span class="token operator">&gt;</span><span>
</span></span><span><span>      </span><span class="token operator">&lt;</span><span>div className</span><span class="token operator">=</span><span class="token string">&quot;widget-label&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Select</span><span> </span><span class="token maybe-class-name">Named</span><span> </span><span class="token maybe-class-name">Version</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span><span>div</span><span class="token operator">&gt;</span><span>
</span></span><span><span>      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">LabeledSelect</span><span>
</span></span><span><span>        value</span><span class="token operator">=</span><span class="token punctuation">{</span><span>selectedVersion</span><span class="token punctuation">}</span><span>
</span></span><span><span>        options</span><span class="token operator">=</span><span class="token punctuation">{</span><span>selectOptions</span><span class="token punctuation">}</span><span>
</span></span><span><span>        onChange</span><span class="token operator">=</span><span class="token punctuation">{</span><span>onReactSelectChange</span><span class="token punctuation">}</span><span> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span>
</span></span><span><span>      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Button</span><span> className</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;widget-button&quot;</span><span class="token punctuation">}</span><span> onClick</span><span class="token operator">=</span><span class="token punctuation">{</span><span>onVisualizeChangedElements</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span>
</span></span><span><span>        </span><span class="token maybe-class-name">Visualize</span><span> </span><span class="token maybe-class-name">Changed</span><span> </span><span class="token maybe-class-name">Elements</span><span>
</span></span><span><span>      </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Button</span><span class="token operator">&gt;</span><span>
</span></span><span><span>      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Button</span><span> className</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;widget-button&quot;</span><span class="token punctuation">}</span><span> onClick</span><span class="token operator">=</span><span class="token punctuation">{</span><span>onEnableTracking</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span>
</span></span><span><span>        </span><span class="token maybe-class-name">Enable</span><span> </span><span class="token maybe-class-name">Change</span><span> </span><span class="token maybe-class-name">Tracking</span><span>
</span></span><span><span>      </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Button</span><span class="token operator">&gt;</span><span>
</span></span><span><span>    </span><span class="token operator">&lt;</span><span class="token operator">/</span><span>div</span><span class="token operator">&gt;</span><span>
</span></span><span><span>  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">SCSS for the UI Component</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">SCSS</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token selector">.widget-container </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token property">margin</span><span class="token punctuation">:</span><span> </span><span class="token number">8</span><span class="token unit">px</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token selector">.widget-label </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token property">color</span><span class="token punctuation">:</span><span> white</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token property">font-size</span><span class="token punctuation">:</span><span> </span><span class="token number">14</span><span class="token unit">px</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token selector">.widget-button </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token property">width</span><span class="token punctuation">:</span><span> </span><span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#32-adding-the-widget-to-the-application" id="32-adding-the-widget-to-the-application">3.2 Adding the widget to the application</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Now that we have the component ready, we need to create a <a href="https://www.itwinjs.org/reference/appui-abstract/uiitemsprovider/uiitemsprovider/" target="_blank">UiItemsProvider</a> that will feed the our widget to the viewer. Create a new file <code>ChangedElementsUiProvider.tsx</code> to put the code in. Then, import the <code>ChangedElementsUiProvider</code> in our <code>App.tsx</code> file, and add the provider to the <code>uiProviders</code> array prop of the <code>Viewer</code> react component.</p><div class="iui-alert iui-informational" style="margin-bottom:22px"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-alert-icon"><path d="m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8zm1.2 3.2a.92336.92336 0 0 1 .997.8433q.00235.02829.003.0567a1.30936 1.30936 0 0 1 -1.3 1.2.94477.94477 0 0 1 -1-1 1.22815 1.22815 0 0 1 1.3-1.1zm-2 9.6c-.5 0-.9-.3-.5-1.7l.6-2.4c.1-.4.1-.5 0-.5-.2-.1-.9.2-1.3.5l-.2-.5a6.49722 6.49722 0 0 1 3.3-1.6c.5 0 .6.6.3 1.6l-.7 2.6c-.1.5-.1.6.1.6a2.00287 2.00287 0 0 0 1.1-.6l.3.4a5.76881 5.76881 0 0 1 -3 1.6z"></path></svg><span class="iui-alert-message">If you want a more in-depth explanation on the usage of the provider, see<!-- --> <a style="text-decoration:underline" href="/tutorials/itwin-viewer-hello-world" target="_blank">iTwin Viewer Hello World tutorial</a>.</span></div><p class="iui-text-block iui-text-spacing">Then, we must pass the provider to the viewer’s react component, and it should now show in right panel like so:</p><div style="margin-top:16px;margin-bottom:16px"><img src="../../images/changed-elements-widget.png" style="margin:auto"/></div><p class="iui-text-block iui-text-spacing">If you want to verify that you have added the code in the right place, you can check the final results for <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/src/App.tsx" target="_blank">App.tsx</a>, <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/src/ChangedElementsWidget.tsx" target="_blank">ChangedElementsWidget.tsx</a> and <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/src/ChangedElementsUiProvider.tsx" target="_blank">ChangedElementsUiProvider.tsx</a>. Keep in mind that the <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/src/ChangedElementsWidget.tsx" target="_blank">ChangedElementsWidget.tsx</a> code in the repository is already in its final state, containing button handlers that we will be adding later on in this tutorial.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Create a UI Items Provider</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token maybe-class-name">AbstractWidgetProps</span><span class="token punctuation">,</span><span>
</span></span><span><span>  </span><span class="token maybe-class-name">StagePanelLocation</span><span class="token punctuation">,</span><span>
</span></span><span><span>  </span><span class="token maybe-class-name">StagePanelSection</span><span class="token punctuation">,</span><span>
</span></span><span><span>  </span><span class="token maybe-class-name">UiItemsProvider</span><span class="token punctuation">,</span><span>
</span></span><span><span></span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&#x27;@bentley/ui-abstract&#x27;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">UiFramework</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&#x27;@bentley/ui-framework&#x27;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token operator">*</span><span> </span><span class="token keyword">as</span><span> </span><span class="token maybe-class-name">React</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ChangedElementsWidget</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&#x27;./ChangedElementsWidget&#x27;</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">class</span><span> </span><span class="token class-name">ChangedElementsUiProvider</span><span> </span><span class="token keyword">implements</span><span> </span><span class="token class-name">UiItemsProvider</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">public</span><span> </span><span class="token keyword">readonly</span><span> id </span><span class="token operator">=</span><span> </span><span class="token string">&#x27;ChangedElementsProviderId&#x27;</span><span class="token punctuation">;</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token keyword">public</span><span> </span><span class="token function">provideWidgets</span><span class="token punctuation">(</span><span>
</span></span><span><span>    stageId</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span class="token punctuation">,</span><span>
</span></span><span><span>    stageUsage</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span class="token punctuation">,</span><span>
</span></span><span><span>    </span><span class="token dom variable">location</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StagePanelLocation</span><span class="token punctuation">,</span><span>
</span></span><span><span>    section</span><span class="token operator">?</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StagePanelSection</span><span>
</span></span><span><span>  </span><span class="token punctuation">)</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">ReadonlyArray</span><span class="token operator">&lt;</span><span class="token maybe-class-name">AbstractWidgetProps</span><span class="token operator">&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span>
</span><span><span>    </span><span class="token keyword">const</span><span> widgets</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">AbstractWidgetProps</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>
</span></span><span><span>      </span><span class="token dom variable">location</span><span> </span><span class="token operator">===</span><span> </span><span class="token maybe-class-name">StagePanelLocation</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Right</span><span> </span><span class="token operator">&amp;&amp;</span><span>
</span></span><span><span>      section </span><span class="token operator">===</span><span> </span><span class="token maybe-class-name">StagePanelSection</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Start</span><span>
</span></span><span><span>    </span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token keyword">const</span><span> changedElementsWidget</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">AbstractWidgetProps</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>        id</span><span class="token punctuation">:</span><span> </span><span class="token string">&#x27;ChangedElementsWidget&#x27;</span><span class="token punctuation">,</span><span>
</span></span><span><span>        label</span><span class="token punctuation">:</span><span> </span><span class="token string">&#x27;Changed Elements&#x27;</span><span class="token punctuation">,</span><span>
</span></span><span><span>        </span><span class="token function">getWidgetContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>          </span><span class="token keyword">return</span><span> </span><span class="token punctuation">(</span><span>
</span></span><span><span>            </span><span class="token operator">&lt;</span><span class="token maybe-class-name">ChangedElementsWidget</span><span> iModel</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token maybe-class-name">UiFramework</span><span class="token punctuation">.</span><span class="token method function property-access">getIModelConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span>
</span></span><span><span>          </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span><span>      </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>      widgets</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span>changedElementsWidget</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token keyword">return</span><span> widgets</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Import the ChangedElementsUiProvider in App.tsx</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ChangedElementsUiProvider</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./ChangedElementsUiProvider&quot;</span><span class="token punctuation">;</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Add the UI Items Provider to the viewer in App.tsx</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token operator">&lt;</span><span class="token maybe-class-name">Viewer</span><span>
</span></span><span><span>  contextId</span><span class="token operator">=</span><span class="token punctuation">{</span><span>contextId</span><span class="token punctuation">}</span><span>
</span></span><span><span>  iModelId</span><span class="token operator">=</span><span class="token punctuation">{</span><span>iModelId</span><span class="token punctuation">}</span><span>
</span></span><span><span>  authConfig</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span> config</span><span class="token punctuation">:</span><span> authConfig </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span>
</span></span><span><span>  onIModelAppInit</span><span class="token operator">=</span><span class="token punctuation">{</span><span>onIModelAppInit</span><span class="token punctuation">}</span><span>
</span></span><span><span>  backend</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span> buddiRegion</span><span class="token punctuation">:</span><span> </span><span class="token number">103</span><span> </span><span class="token punctuation">}</span><span class="token punctuation">}</span><span>
</span></span><span><span>  uiProviders</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token keyword">new</span><span> </span><span class="token class-name">ChangedElementsUiProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span>
</span></span><span><span></span><span class="token operator">/</span><span class="token operator">&gt;</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#33-writing-a-client-for-the-api" id="33-writing-a-client-for-the-api">3.3 Writing a client for the API</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">To use the API in our viewer, we will need to create a client class that interfaces with the API and gives us the proper results.</p><p class="iui-text-block iui-text-spacing">Create a new file called <code>ChangedElementsClient.ts</code> and create a class like shown in the code snippet. We are first going to write functions to create the correct URLs for our operations based on some input parameters, like our iModel’s Id and changeset Ids.</p><p class="iui-text-block iui-text-spacing">Now that we have the scaffolding for the client class, let’s add functions for calling the API for each operation.</p><p class="iui-text-block iui-text-spacing">The <code>getComparison</code> function will use the <a href="/apis/changed-elements/operations/get-comparison/" target="_blank">Get Comparison</a> endpoint to get the <a href="https://www.itwinjs.org/reference/core-common/entities/changedelements/" target="_blank">ChangedElements</a> that were found between the given changesets, for a given iModel.</p><p class="iui-text-block iui-text-spacing">The <code>enableChangeTracking</code> function will use the <a href="/apis/changed-elements/operations/enable-change-tracking/" target="_blank">Enable Change Tracking</a> endpoint to enable or disable tracking for an iModel.</p><p class="iui-text-block iui-text-spacing">Both operations require an authorization token. The repository comes with a simple <code>AuthorizationClient</code> class that will get the necessary tokens as long as your <code>.env</code> file is properly setup as explained in the <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/README.md" target="_blank">README</a> of the repo</p><p class="iui-text-block iui-text-spacing">Here’s what the <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/src/ChangedElementsClient.ts" target="_blank">ChangedElementsClient.ts</a> file should look like when you are done with this section.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Changed Elements Client</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ChangedElements</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-common&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">IModelConnection</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">Authorization</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/imodels-client-management&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token doc-comment comment">
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">/**
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"> * Class for using the Changed Elements API
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment"> */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">class</span><span> </span><span class="token class-name">ChangedElementsClient</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Get base URL for changed elements API
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@returns</span><span class="token doc-comment comment"> URL for changed elements API
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">return</span><span> </span><span class="token string">&quot;https://api.bentley.com/changedelements&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Function to form the URL for the comparison operation of changed elements API
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">iModelId</span><span class="token doc-comment comment"> iModel Id to query for
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">iTwinId</span><span class="token doc-comment comment"> iTwin Id of the iModel
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">startChangesetId</span><span class="token doc-comment comment"> Start changeset for comparison data
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">endChangesetId</span><span class="token doc-comment comment"> End changeset for comparison data
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@returns</span><span class="token doc-comment comment"> Url for querying changed elements from the changed elements API
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token function">getComparisonOperationUrl</span><span class="token punctuation">(</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token parameter">iModelId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token parameter">    iTwinId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token parameter">    startChangesetId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token parameter">    endChangesetId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">return</span><span> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token operator">+</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token string">&quot;/comparison?iModelId=&quot;</span><span> </span><span class="token operator">+</span><span> iModelId </span><span class="token operator">+</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token string">&quot;&amp;iTwinId=&quot;</span><span> </span><span class="token operator">+</span><span> iTwinId </span><span class="token operator">+</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token string">&quot;&amp;startChangesetId=&quot;</span><span> </span><span class="token operator">+</span><span> startChangesetId </span><span class="token operator">+</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token string">&quot;&amp;endChangesetId=&quot;</span><span> </span><span class="token operator">+</span><span> endChangesetId</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Function to form the URL for the enable change tracking operation of changed elements API
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@returns</span><span class="token doc-comment comment"> Url for enabling/disabling change tracking
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token function">getEnableChangeTrackingUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">return</span><span> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token operator">+</span><span> </span><span class="token string">&quot;/tracking&quot;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Get authorization for getting named versions
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@returns</span><span class="token doc-comment comment"> 
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token keyword">static</span><span> </span><span class="token keyword">async</span><span> </span><span class="token function">getAuthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Authorization</span><span class="token operator">&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">authorizationClient</span><span class="token punctuation">)</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">throw</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;AuthorizationClient is not defined. Most likely IModelApp.startup was not called yet.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> token </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">authorizationClient</span><span class="token punctuation">.</span><span class="token method function property-access">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> parts </span><span class="token operator">=</span><span> token</span><span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">return</span><span> parts</span><span class="token punctuation">.</span><span class="token property-access">length</span><span> </span><span class="token operator">===</span><span> </span><span class="token number">2</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token operator">?</span><span> </span><span class="token punctuation">{</span><span> scheme</span><span class="token punctuation">:</span><span> parts</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span> token</span><span class="token punctuation">:</span><span> parts</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span> </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">:</span><span> </span><span class="token punctuation">{</span><span> scheme</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">,</span><span> token </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Gets the changed elements between two changesets using the changed elements API
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * This results in a GET request to the comparison endpoint
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">iModel</span><span class="token doc-comment comment"> iModel to test
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">startChangesetId</span><span class="token doc-comment comment"> Start changeset Id
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">endChangesetId</span><span class="token doc-comment comment"> End changeset Id
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@returns</span><span class="token doc-comment comment"> ChangedElements object or undefined
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token keyword">async</span><span> </span><span class="token function">getComparison</span><span class="token punctuation">(</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    iModel</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">IModelConnection</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    startChangesetId</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    endChangesetId</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">)</span><span class="token punctuation">:</span><span> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token maybe-class-name">ChangedElements</span><span> </span><span class="token operator">|</span><span> undefined</span><span class="token operator">&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Parse out iModel Id and iTwin Id</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> iModelId </span><span class="token operator">=</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">iModelId</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> iTwinId </span><span class="token operator">=</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">iTwinId</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Ensure they are properly defined</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>iModelId </span><span class="token operator">===</span><span> undefined </span><span class="token operator">||</span><span> iTwinId </span><span class="token operator">===</span><span> undefined</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">throw</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;IModel is not properly defined&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Get the request URL for the comparison operation</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> url</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span> </span><span class="token operator">=</span><span> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getComparisonOperationUrl</span><span class="token punctuation">(</span><span>iModelId</span><span class="token punctuation">,</span><span> iTwinId</span><span class="token punctuation">,</span><span> startChangesetId</span><span class="token punctuation">,</span><span> endChangesetId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Options for the request</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> authorization </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> </span><span class="token maybe-class-name">ChangedElementsClient</span><span class="token punctuation">.</span><span class="token method function property-access">getAuthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> options </span><span class="token operator">=</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      method</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      headers</span><span class="token punctuation">:</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token maybe-class-name">Authorization</span><span class="token punctuation">:</span><span> authorization</span><span class="token punctuation">.</span><span class="token property-access">scheme</span><span> </span><span class="token operator">+</span><span> </span><span class="token string">&quot; &quot;</span><span> </span><span class="token operator">+</span><span> authorization</span><span class="token punctuation">.</span><span class="token property-access">token</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token maybe-class-name">Accept</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;application/vnd.bentley.itwin-platform.v1+json&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">try</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Execute the request</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> response </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span>url</span><span class="token punctuation">,</span><span> options</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Ensure we got a proper response</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> body </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> response</span><span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>response</span><span class="token punctuation">.</span><span class="token property-access">status</span><span> </span><span class="token operator">===</span><span> </span><span class="token number">200</span><span> </span><span class="token operator">&amp;&amp;</span><span> body</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">changedElements</span><span> </span><span class="token operator">!==</span><span> undefined</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token comment">// If so, cast the changedElements object of the body as a ChangedElements type</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token keyword">return</span><span> body</span><span class="token punctuation">.</span><span class="token property-access">changedElements</span><span> </span><span class="token keyword">as</span><span> </span><span class="token maybe-class-name">ChangedElements</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Something went wrong, log it to console</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;Could not get changed elements. Status: &quot;</span><span> </span><span class="token operator">+</span><span> response</span><span class="token punctuation">.</span><span class="token property-access">status</span><span> </span><span class="token operator">+</span><span> </span><span class="token string">&quot;. Body: &quot;</span><span> </span><span class="token operator">+</span><span> response</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span> </span><span class="token keyword">catch</span><span> </span><span class="token punctuation">(</span><span>e</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error obtaining changed elements: &quot;</span><span> </span><span class="token operator">+</span><span> e</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// We did not get a proper response, return undefined</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">return</span><span> undefined</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Enable or disable change tracking for an iModel
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * This will cause the iModel to be monitored for named versions
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Whenever a named version gets created, the changed elements API will process the changesets
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * so that a comparison operation can be made against the new named versions
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">iModel</span><span class="token doc-comment comment"> IModel to track change for
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">value</span><span class="token doc-comment comment"> true for enabling, false for disabling
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@returns</span><span class="token doc-comment comment"> true if successful, false if failed
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token keyword">async</span><span> </span><span class="token function">enableChangeTracking</span><span class="token punctuation">(</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    iModel</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">IModelConnection</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    value</span><span class="token punctuation">:</span><span> </span><span class="token builtin">boolean</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">)</span><span class="token punctuation">:</span><span> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Parse out iModel Id and iTwin Id</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> iModelId </span><span class="token operator">=</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">iModelId</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> iTwinId </span><span class="token operator">=</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">iTwinId</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Ensure they are properly defined</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>iModelId </span><span class="token operator">===</span><span> undefined </span><span class="token operator">||</span><span> iTwinId </span><span class="token operator">===</span><span> undefined</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">throw</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;IModel is not properly defined&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Get the request URL for the comparison operation</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> url</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span> </span><span class="token operator">=</span><span> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">getEnableChangeTrackingUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> authorization </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> </span><span class="token maybe-class-name">ChangedElementsClient</span><span class="token punctuation">.</span><span class="token method function property-access">getAuthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Options for the request</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> options </span><span class="token operator">=</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      method</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;PUT&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      headers</span><span class="token punctuation">:</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token maybe-class-name">Authorization</span><span class="token punctuation">:</span><span> authorization</span><span class="token punctuation">.</span><span class="token property-access">scheme</span><span> </span><span class="token operator">+</span><span> </span><span class="token string">&quot; &quot;</span><span> </span><span class="token operator">+</span><span> authorization</span><span class="token punctuation">.</span><span class="token property-access">token</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token maybe-class-name">Accept</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;application/vnd.bentley.itwin-platform.v1+json&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      body</span><span class="token punctuation">:</span><span> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        enable</span><span class="token punctuation">:</span><span> value</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        iModelId</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        iTwinId</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">try</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Execute the request</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> response </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span>url</span><span class="token punctuation">,</span><span> options</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Ensure we get a proper response</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>response</span><span class="token punctuation">.</span><span class="token property-access">status</span><span> </span><span class="token operator">===</span><span> </span><span class="token number">202</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token keyword">return</span><span> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Something went wrong, log it to console</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;Could not enable change tracking. Status: &quot;</span><span> </span><span class="token operator">+</span><span> response</span><span class="token punctuation">.</span><span class="token property-access">status</span><span> </span><span class="token operator">+</span><span> </span><span class="token string">&quot;. Body: &quot;</span><span> </span><span class="token operator">+</span><span> response</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span> </span><span class="token keyword">catch</span><span> </span><span class="token punctuation">(</span><span>e</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;Error change tracking: &quot;</span><span> </span><span class="token operator">+</span><span> e</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// We did not get a proper response, return undefined</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">return</span><span> </span><span class="token boolean">false</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#34-using-the-client" id="34-using-the-client">3.4 Using the client</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Now, we must implement the onClick handlers of the widget buttons so that they use the client and call the necessary API endpoints. First, ensure you import the <code>ChangedElementsClient</code> to be used in the <code>ChangedElementsWidget.tsx</code> file.</p><p class="iui-text-block iui-text-spacing">For enabling change tracking, all we need to do is use the client’s <code>enableChangeTracking</code> method we wrote earlier. Paste the code in the <code>onEnableTracking</code> callback that we left blank earlier in <a href="#31-creating-the-widget" target="_blank">Section 3.1</a>. For this to work, we just need to pass the <code>iModel</code> object and <code>true</code> to the client’s function. If you have not enabled change tracking on your iModel yet, do so now. Keep in mind that as mentioned in section 2.1.3, processing may take a while, so take a break and get some coffee to ensure that the API processes your iModel.</p><p class="iui-text-block iui-text-spacing">For visualizing changed elements, we are going to need to use the client’s <code>getComparison</code> method. This requires us to pass the <code>iModel</code> object, <code>startChangesetId</code> and <code>endChangesetId</code>. We can obtain the <code>iModel</code> from the passed props of the widget. The <code>endChangesetId</code> we can obtain by looking at the iModel’s current changeset. For <code>startChangesetId</code>, we need to use the <code>selectedVersion</code> variable we setup in the widget that should contain the changeset Id of the named version that got selected by the user. Paste the code in the <code>onVisualizeChangedElements</code> callback that we left blank earlier in <a href="#31-creating-the-widget" target="_blank">Section 3.1</a>. If you get a <code>404</code> response from the <a href="/apis/changed-elements/operations/get-comparison/" target="_blank">Get Comparison</a> operation, it means the API has not yet processed your iModel, and you must wait.</p><p class="iui-text-block iui-text-spacing">If authorization has been properly setup, you should obtain results from the API. To display the results in the viewport, let’s emphasize the elements that have changed on the screen. We can use the <a href="https://www.itwinjs.org/reference/core-frontend/rendering/emphasizeelements/" target="_blank">EmphasizeElements</a> class, which is a <a href="https://www.itwinjs.org/reference/core-frontend/views/featureoverrideprovider/" target="_blank">FeatureOverrideProvider</a> that will highlight the elements on the viewport.</p><p class="iui-text-block iui-text-spacing">The <code>changedElements.elements</code> is an array that contains the element Ids of all elements that have changed in the iModel between the changesets that we are looking at. Here’s more information about the <a href="https://www.itwinjs.org/reference/core-common/entities/changedelements/" target="_blank">ChangedElements</a> result.</p><p class="iui-text-block iui-text-spacing">Here’s what the <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/src/ChangedElementsWidget.tsx" target="_blank">ChangedElementsWidget.tsx</a> file should look like when you are done with this section.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Import the ChangedElementsClient class in ChangedElementsWidget</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ChangedElementsClient</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./ChangedElementsClient&quot;</span><span class="token punctuation">;</span><span> </span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Enable Change Tracking Button Handler</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token comment">// Callback for when clicking the &#x27;Enable Change Tracking&#x27; button</span><span>
</span></span><span><span></span><span class="token keyword">const</span><span> onEnableTracking </span><span class="token operator">=</span><span> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> iModel </span><span class="token operator">=</span><span> props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token comment">// Ensure our iModel is defined</span><span>
</span></span><span><span>  </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>iModel</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token comment">// Create a changed elements client object</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> client </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">ChangedElementsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token comment">// Enable change tracking for the iModel</span><span>
</span></span><span><span>    </span><span class="token keyword">await</span><span> client</span><span class="token punctuation">.</span><span class="token method function property-access">enableChangeTracking</span><span class="token punctuation">(</span><span>iModel</span><span class="token punctuation">,</span><span> </span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span><span></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span>
</span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Visualize Changed Elements Button Handler</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token comment">// Callback for when clicking the &#x27;Visualize Changed Elements&#x27; button</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> onVisualizeChangedElements </span><span class="token operator">=</span><span> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> iModel </span><span class="token operator">=</span><span> props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>iModel </span><span class="token operator">===</span><span> undefined </span><span class="token operator">||</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">changeset</span><span class="token punctuation">.</span><span class="token property-access">id</span><span> </span><span class="token operator">===</span><span> undefined</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;iModel is not valid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token keyword">return</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>selectedVersion</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">changesetId</span><span> </span><span class="token operator">===</span><span> undefined </span><span class="token operator">||</span><span> selectedVersion</span><span class="token punctuation">.</span><span class="token property-access">changesetId</span><span> </span><span class="token operator">==</span><span> </span><span class="token keyword">null</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;Selected version is not defined&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token keyword">return</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> client </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">ChangedElementsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> endChangesetId </span><span class="token operator">=</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">changeset</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> startChangesetId </span><span class="token operator">=</span><span> selectedVersion</span><span class="token punctuation">.</span><span class="token property-access">changesetId</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> changedElements </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> client</span><span class="token punctuation">.</span><span class="token method function property-access">getComparison</span><span class="token punctuation">(</span><span>
</span></span><span><span>      iModel</span><span class="token punctuation">,</span><span>
</span></span><span><span>      startChangesetId</span><span class="token punctuation">,</span><span>
</span></span><span>      endChangesetId
</span><span><span>    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token comment">// Log the results to console to inspect them</span><span>
</span></span><span><span>    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span>changedElements</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> viewport </span><span class="token operator">=</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">viewManager</span><span class="token punctuation">.</span><span class="token property-access">selectedView</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>changedElements </span><span class="token operator">&amp;&amp;</span><span> viewport</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token comment">// Emphasize the changed elements in the view</span><span>
</span></span><span><span>      </span><span class="token maybe-class-name">EmphasizeElements</span><span class="token punctuation">.</span><span class="token method function property-access">getOrCreate</span><span class="token punctuation">(</span><span>viewport</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">emphasizeElements</span><span class="token punctuation">(</span><span>
</span></span><span><span>        changedElements</span><span class="token punctuation">.</span><span class="token property-access">elements</span><span class="token punctuation">,</span><span>
</span></span><span>        viewport
</span><span><span>      </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>selectedVersion</span><span class="token punctuation">,</span><span> props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#35-enhancing-the-change-visualization" id="35-enhancing-the-change-visualization">3.5 Enhancing the change visualization</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">By now, you should have changed elements being emphasized in your view, but it would be better if we colorize them by their operation codes, see <a href="https://www.itwinjs.org/reference/core-bentley/besqlite/dbopcode/" target="_blank">DbOpcode</a>.</p><p class="iui-text-block iui-text-spacing">To be able to colorize the elements, we will implement our own <a href="https://www.itwinjs.org/reference/core-frontend/views/featureoverrideprovider/" target="_blank">FeatureOverrideProvider</a>. Create a new file <code>ChangedElementsFeatureOverrides.ts</code> and follow the code snippet to the right.</p><p class="iui-text-block iui-text-spacing">The provider’s constructor finds which elements are inserted or updated based on their <a href="https://www.itwinjs.org/reference/core-bentley/besqlite/dbopcode/" target="_blank">DbOpcode</a>. Then, it implements the <code>addFeatureOverrides</code> function that will colorize inserted elements as green, updated elements as blue and make everything else transparent gray.</p><div class="iui-alert iui-informational" style="margin-bottom:22px"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-alert-icon"><path d="m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8zm1.2 3.2a.92336.92336 0 0 1 .997.8433q.00235.02829.003.0567a1.30936 1.30936 0 0 1 -1.3 1.2.94477.94477 0 0 1 -1-1 1.22815 1.22815 0 0 1 1.3-1.1zm-2 9.6c-.5 0-.9-.3-.5-1.7l.6-2.4c.1-.4.1-.5 0-.5-.2-.1-.9.2-1.3.5l-.2-.5a6.49722 6.49722 0 0 1 3.3-1.6c.5 0 .6.6.3 1.6l-.7 2.6c-.1.5-.1.6.1.6a2.00287 2.00287 0 0 0 1.1-.6l.3.4a5.76881 5.76881 0 0 1 -3 1.6z"></path></svg><span class="iui-alert-message">Displaying deleted elements is not as straightforward because the deleted elements are not present in the current iModel that we are displaying in the viewport. This can be done by implementing a<!-- --> <a style="text-decoration:underline" href="https://www.itwinjs.org/reference/imodeljs-frontend/views/tiledgraphicsprovider/" target="_blank">TiledGraphicsProvider</a>, but this is out of the scope for this tutorial.</span></div><p class="iui-text-block iui-text-spacing">Now that we have a feature override provider that will colorize our elements properly, let’s use it in our <code>onVisualizeChangedElements</code> button callback. Import the class in <code>ChangedElementsWidget.tsx</code>.</p><p class="iui-text-block iui-text-spacing">Before adding a provider to the viewport, t’s important to drop any feature override providers from the viewport before we add one to ensure we start with a clean viewport each time.</p><p class="iui-text-block iui-text-spacing">You should now be able to see the elements colorized, showing inserted elements as green and updated elements as blue whenever we click the visualize button:</p><div style="margin-top:16px;margin-bottom:16px"><img src="../../images/changed-elements-colorized.png" style="margin:auto"/></div><p class="iui-text-block iui-text-spacing">Here’s what the <a href="https://github.com/iTwin/changed-elements-tutorial/blob/main/src/ChangedElemensFeatureOverrides.ts" target="_blank">ChangedElementsFeatureOverrides.ts</a> file should look like when you are done with this section.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Changed Elements Feature Override Provider</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">DbOpcode</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">Id64String</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-bentley&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ChangedElements</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">FeatureAppearance</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-common&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">FeatureOverrideProvider</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">FeatureSymbology</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">Viewport</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token doc-comment comment">
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">/**
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"> * Feature Override Provider to visualize changed elements and colorize them
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"> * in the viewport
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment"> */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">class</span><span> </span><span class="token class-name">ChangedElementsFeatureOverrides</span><span> </span><span class="token keyword">implements</span><span> </span><span class="token class-name">FeatureOverrideProvider</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token comment">// Array of inserted element Ids</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">private</span><span> _insertedElements</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">Id64String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token comment">// Array of updated element Ids</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">private</span><span> _updatedElements</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">Id64String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Constructor
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">changedElements</span><span class="token doc-comment comment"> Changed Elements to visualize
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">changedElements</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">ChangedElements</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Go over all changed elements array, all arrays are guaranteed to have same size</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">for</span><span> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span> i </span><span class="token operator">=</span><span> </span><span class="token number">0</span><span class="token punctuation">;</span><span> i </span><span class="token operator">&lt;</span><span> changedElements</span><span class="token punctuation">.</span><span class="token property-access">elements</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span> </span><span class="token operator">++</span><span>i</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Element Id of the changed element</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> elementId</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">Id64String</span><span> </span><span class="token operator">=</span><span> changedElements</span><span class="token punctuation">.</span><span class="token property-access">elements</span><span class="token punctuation">[</span><span>i</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Operation code of the changed element</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">const</span><span> opcode</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">DbOpcode</span><span> </span><span class="token operator">=</span><span> changedElements</span><span class="token punctuation">.</span><span class="token property-access">opcodes</span><span class="token punctuation">[</span><span>i</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Add the element Id to the proper list</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token keyword">switch</span><span> </span><span class="token punctuation">(</span><span>opcode</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token keyword">case</span><span> </span><span class="token maybe-class-name">DbOpcode</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Delete</span><span class="token punctuation">:</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>          </span><span class="token comment">// Deleted elements do not exist in the current version of the iModel</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>          </span><span class="token comment">// Displaying non-iModel elements in the same view is out of scope for this tutorial</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>          </span><span class="token keyword">break</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token keyword">case</span><span> </span><span class="token maybe-class-name">DbOpcode</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Update</span><span class="token punctuation">:</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>          </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_updatedElements</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span>elementId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>          </span><span class="token keyword">break</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        </span><span class="token keyword">case</span><span> </span><span class="token maybe-class-name">DbOpcode</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Insert</span><span class="token punctuation">:</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>          </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_insertedElements</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span>elementId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>          </span><span class="token keyword">break</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span> </span><span class="token doc-comment comment"> /**
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">   * Adds the colorization and emphasis of the elements we care about
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">overrides</span><span class="token doc-comment comment"> Overrides to be updated with our changed elements
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   * </span><span class="token doc-comment comment token keyword">@param</span><span class="token doc-comment comment"> </span><span class="token doc-comment comment token parameter">viewport</span><span class="token doc-comment comment"> Viewport we are overriding features on
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span class="token doc-comment comment">   */</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token keyword">public</span><span> </span><span class="token function">addFeatureOverrides</span><span class="token punctuation">(</span><span>overrides</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">FeatureSymbology</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Overrides</span><span class="token punctuation">,</span><span> viewport</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">Viewport</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span> </span><span class="token keyword">void</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Create a default appearance for non-changed elements, set it to transparent light gray</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> defaultAppearance </span><span class="token operator">=</span><span> </span><span class="token maybe-class-name">FeatureAppearance</span><span class="token punctuation">.</span><span class="token method function property-access">fromJSON</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      rgb</span><span class="token punctuation">:</span><span> </span><span class="token punctuation">{</span><span>r</span><span class="token punctuation">:</span><span> </span><span class="token number">200</span><span class="token punctuation">,</span><span> g</span><span class="token punctuation">:</span><span> </span><span class="token number">200</span><span class="token punctuation">,</span><span> b</span><span class="token punctuation">:</span><span> </span><span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      transparency</span><span class="token punctuation">:</span><span> </span><span class="token number">0.9</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// Make unchanged elements non-locatable</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token comment">// This is to allow selecting changed elements that are behind unchanged elements in the view</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      nonLocatable</span><span class="token punctuation">:</span><span> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Override the default coloring for all other elements</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    overrides</span><span class="token punctuation">.</span><span class="token method function property-access">setDefaultOverrides</span><span class="token punctuation">(</span><span>defaultAppearance</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Create an appearance with the color green for inserted elements and emphasize them</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> insertedAppearance </span><span class="token operator">=</span><span> </span><span class="token maybe-class-name">FeatureAppearance</span><span class="token punctuation">.</span><span class="token method function property-access">fromJSON</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      rgb</span><span class="token punctuation">:</span><span> </span><span class="token punctuation">{</span><span>r</span><span class="token punctuation">:</span><span> </span><span class="token number">0</span><span class="token punctuation">,</span><span> g</span><span class="token punctuation">:</span><span> </span><span class="token number">255</span><span class="token punctuation">,</span><span> b</span><span class="token punctuation">:</span><span> </span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      emphasized</span><span class="token punctuation">:</span><span> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Override the inserted elements with the appearance</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_insertedElements</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">elementId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      overrides</span><span class="token punctuation">.</span><span class="token method function property-access">override</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        elementId</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        appearance</span><span class="token punctuation">:</span><span> insertedAppearance
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment">
</span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Create an appearance with the color blue for updated elements</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">const</span><span> updatedAppearance </span><span class="token operator">=</span><span> </span><span class="token maybe-class-name">FeatureAppearance</span><span class="token punctuation">.</span><span class="token method function property-access">fromJSON</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      rgb</span><span class="token punctuation">:</span><span> </span><span class="token punctuation">{</span><span>r</span><span class="token punctuation">:</span><span> </span><span class="token number">0</span><span class="token punctuation">,</span><span> g</span><span class="token punctuation">:</span><span> </span><span class="token number">0</span><span class="token punctuation">,</span><span> b</span><span class="token punctuation">:</span><span> </span><span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      emphasized</span><span class="token punctuation">:</span><span> </span><span class="token boolean">true</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token comment">// Override the updated elements with the appearance</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_updatedElements</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">elementId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      overrides</span><span class="token punctuation">.</span><span class="token method function property-access">override</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        elementId</span><span class="token punctuation">,</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>        appearance</span><span class="token punctuation">:</span><span> updatedAppearance
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment token doc-comment comment"><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Updated Visualize Changed Elements Button Callback</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token comment">// Updated callback for when clicking the &#x27;Visualize Changed Elements&#x27; button</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> onVisualizeChangedElements </span><span class="token operator">=</span><span> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> iModel </span><span class="token operator">=</span><span> props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>iModel </span><span class="token operator">===</span><span> undefined </span><span class="token operator">||</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">changeset</span><span class="token punctuation">.</span><span class="token property-access">id</span><span> </span><span class="token operator">===</span><span> undefined</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;iModel is not valid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token keyword">return</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>selectedVersion</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token property-access">changesetId</span><span> </span><span class="token operator">===</span><span> undefined </span><span class="token operator">||</span><span> selectedVersion</span><span class="token punctuation">.</span><span class="token property-access">changesetId</span><span> </span><span class="token operator">==</span><span> </span><span class="token keyword">null</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&quot;Selected version is not defined&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token keyword">return</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> client </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">ChangedElementsClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> endChangesetId </span><span class="token operator">=</span><span> iModel</span><span class="token punctuation">.</span><span class="token property-access">changeset</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> startChangesetId </span><span class="token operator">=</span><span> selectedVersion</span><span class="token punctuation">.</span><span class="token property-access">changesetId</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> changedElements </span><span class="token operator">=</span><span> </span><span class="token keyword">await</span><span> client</span><span class="token punctuation">.</span><span class="token method function property-access">getComparison</span><span class="token punctuation">(</span><span>
</span></span><span><span>      iModel</span><span class="token punctuation">,</span><span>
</span></span><span><span>      startChangesetId</span><span class="token punctuation">,</span><span>
</span></span><span>      endChangesetId
</span><span><span>    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token comment">// Log the results to console to inspect them</span><span>
</span></span><span><span>    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span>changedElements</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token keyword">const</span><span> viewport </span><span class="token operator">=</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">viewManager</span><span class="token punctuation">.</span><span class="token property-access">selectedView</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>changedElements </span><span class="token operator">&amp;&amp;</span><span> viewport</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token comment">// Ensure we are not currently visualizing changed elements</span><span>
</span></span><span><span>      </span><span class="token keyword">const</span><span> oldProvider </span><span class="token operator">=</span><span> viewport</span><span class="token punctuation">.</span><span class="token method function property-access">findFeatureOverrideProviderOfType</span><span class="token punctuation">(</span><span class="token maybe-class-name">ChangedElementsFeatureOverrides</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>oldProvider</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>        </span><span class="token comment">// If we are, drop the override provider so that we start with a clean viewport</span><span>
</span></span><span><span>        viewport</span><span class="token punctuation">.</span><span class="token method function property-access">dropFeatureOverrideProvider</span><span class="token punctuation">(</span><span>oldProvider</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token punctuation">}</span><span>
</span></span><span><span>      </span><span class="token comment">// Create our feature override provider object</span><span>
</span></span><span><span>      </span><span class="token keyword">const</span><span> overrideProvider </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">ChangedElementsFeatureOverrides</span><span class="token punctuation">(</span><span>changedElements</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token comment">// Add it to the viewport</span><span>
</span></span><span><span>      viewport</span><span class="token punctuation">.</span><span class="token method function property-access">addFeatureOverrideProvider</span><span class="token punctuation">(</span><span>overrideProvider</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>selectedVersion</span><span class="token punctuation">,</span><span> props</span><span class="token punctuation">.</span><span class="token property-access">iModel</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#36-about-changed-properties" id="36-about-changed-properties">3.6 About changed properties</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">We will cover working with properties from Changed Elements API in a different tutorial, but here’s an overview of what’s provided in the API:</p><p class="iui-text-block iui-text-spacing">The API returns a <code>properties</code> array that contains the <code>EC Property Access Strings</code> of any properties that had changes between the two versions being queried. The <code>properties</code> array is 2-dimensional, the first index corresponds to the element you are looking at, the second index will allow you to iterate through all properties that changed in the element.</p><p class="iui-text-block iui-text-spacing">As explained in the <a href="#21-enabling-change-tracking" target="_blank">Enabling Change Tracking Section</a>, the properties of an element may not live in the element itself, so we can’t simply query for its value using ECSQL, the element Id and the property access string.</p><p class="iui-text-block iui-text-spacing">To properly inspect an elements properties, including properties that do not exist on the element, we need to use <a href="https://www.itwinjs.org/presentation/" target="_blank">iTwin.js Presentation Library</a>, which is out of scope for this tutorial.</p><p class="iui-text-block iui-text-spacing">The change data also contains the <code>newChecksums</code> and <code>oldChecksums</code> arrays. Each property of an element will have a matching new and old checksum. These arrays are useful to quickly check if the property value indeed has changed, or if it has flipped back and forth to the same value between versions.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#4-making-sense-of-changed-elements-data" id="4-making-sense-of-changed-elements-data">4. Making sense of Changed Elements data</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">The returned data is a JSON object that contains arrays of data. Each of these arrays are of the same length. This length is the number of changed elements that were found during processing.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#41-changed-elements-json" id="41-changed-elements-json">4.1 Changed Elements JSON</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing"><a href="https://www.itwinjs.org/reference/core-common/entities/changedelements/" target="_blank">ChangedElements</a> class is defined in the @bentley/imodeljs-common package.</p><p class="iui-text-block iui-text-spacing">As mentioned before, this interface contains different arrays. Let’s go over each of the arrays and what they are:</p><span id="elements"><strong>elements</strong></span><p class="iui-text-block iui-text-spacing">Contains the element Ids of the changed elements. This is useful if you want to query the iModel for more information about the element.</p><span id="classids"><strong>classIds</strong></span><p class="iui-text-block iui-text-spacing">Contains the ECClass Ids of the changed elements. This is useful if you want to access specific properties of the element that are in its ECClass.</p><span id="opcodes"><strong>opcodes</strong></span><p class="iui-text-block iui-text-spacing">Contains the operation codes that tells us if the element was inserted, updated or deleted in the change. See <a href="https://www.itwinjs.org/reference/core-bentley/besqlite/dbopcode/" target="_blank">DbOpcode</a></p><span id="type"><strong>type</strong></span><p class="iui-text-block iui-text-spacing">Contains the type of change that occurred to the element. This number is a bitflag, and can be used to know whether the element had property changes, geometric changes, placement changes, indirect changes and/or hidden property changes.</p><span id="modelids"><strong>modelIds</strong></span><p class="iui-text-block iui-text-spacing">Contains the model Ids of the changed elements. This is useful for visualization purposes, like ensuring the model the changed element resides in is displayed in the viewport.</p><span id="properties"><strong>properties</strong></span><p class="iui-text-block iui-text-spacing">Contains the property accessor string names of changed properties an element may have. This property accessor string can be used in conjunction with the element’s class Id to obtain the property value.</p><span id="oldchecksums"><strong>oldChecksums</strong></span><p class="iui-text-block iui-text-spacing">Contains the old checksum for the property value of the index that matches the property array. This is useful to determine using newChecksums array, whether the property value has indeed changed in the before and after states of the iModel. This is useful because there are cases in which a property may be flipped back and forth, and you may still want to know it was touched, but you can determine whether the change is valuable using a simple checksum comparison.</p><span id="newchecksums"><strong>newChecksums</strong></span><p class="iui-text-block iui-text-spacing">Contains the new checksum for the property value of the index that matches the property array</p><span id="parentids"><strong>parentIds</strong></span><p class="iui-text-block iui-text-spacing">Contains the parent Id of the element. If the element does not have a parent, this id will be “0”</p><span id="parentclassids"><strong>parentClassIds</strong></span><p class="iui-text-block iui-text-spacing">Contains the ECClass Id of the parent of the element. If the element does not have a parent, this id will be “0”</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#conclusion" id="conclusion">Conclusion</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">Congratulations on completing this tutorial, at this point you should have been able to visualize change using the API! In conclusion, the Changed Elements API can help you understand what elements have changed in your iModel and how they have changed between the given changesets. You could use this API to generate reports, visualize change using an iTwin.js application like we did in this tutorial, or review properties that have changed on the elements that you find relevant in your iModel.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#more-resources-that-you-may-like" id="more-resources-that-you-may-like">More resources that you may like</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><div style="display:flex;gap:22px;flex-wrap:wrap;margin-bottom:22px"><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://create-react-app.dev"><span class="iui-tile-name-label">Create React App</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>Set up a modern web app by running one command.</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://www.npmjs.com/package/@itwin/web-viewer-react"><span class="iui-tile-name-label">iTwin Viewer React</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>The iTwin Viewer is a configurable iTwin.js viewer that offers basic tooling and widgets out-of-the-box and can be further extended through the use of <a href="https://github.com/imodeljs/extension-sample" target="_blank">iTwin.js extensions</a>. This package contains the Viewer as a React component and some additional Typescript APIs.</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://www.npmjs.com/package/@itwin/cra-template-web-viewer"><span class="iui-tile-name-label">iTwin Viewer Create React App Template</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>This is a template for applications that are based on the <a href="https://github.com/iTwin/viewer/tree/master/packages/modules/web-viewer-react" target="_blank">iTwin Viewer</a> for <a href="https://github.com/facebook/create-react-app" target="_blank">Create React App</a>.</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://www.npmjs.com/package/@bentley/react-scripts"><span class="iui-tile-name-label">Bentley React Scripts</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>This is the iTwin.js fork of react-scripts.</div></div></div></div></div></div></div></div></div></div></div></main><div class="iui-root transparent-container" data-iui-theme="light" data-iui-contrast="default"><footer class="iui-legal-footer footer"><ul class="iui-legal-footer-list"><li class="iui-legal-footer-item">© 2024 Bentley Systems, Incorporated</li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="/terms-of-service" target="_blank" rel="noreferrer">Terms of service</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/privacy-policy" target="_blank" rel="noreferrer">Privacy</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/terms-of-use-and-select-online-agreement" target="_blank" rel="noreferrer">Terms of use</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/cookie-policy" target="_blank" rel="noreferrer">Cookies</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://connect.bentley.com/Legal" target="_blank" rel="noreferrer">Legal notices</a></li></ul></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/tutorials/changed-elements-api","query":{},"buildId":"4I2YaoF9Uf026tEb78Qcd","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>