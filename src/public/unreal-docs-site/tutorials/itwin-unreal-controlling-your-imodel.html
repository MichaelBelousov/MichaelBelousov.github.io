<!DOCTYPE html><html class="iui-theme-light" lang="en"><head><meta charSet="utf-8"/><meta name="author" content="Bentley Systems"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/favicon.ico"/><title>Controlling your iModel in Unreal | iTwin for Game Engines</title><meta name="next-head-count" content="6"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K95F6GW');</script><style>@layer global-overrides, itwinui;</style><link rel="preload" href="/unreal-docs-site/static/css/6a68c8a7b2a77f53.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/6a68c8a7b2a77f53.css" data-n-g=""/><link rel="preload" href="/unreal-docs-site/static/css/99338c7953687cf2.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/99338c7953687cf2.css" data-n-g=""/><link rel="preload" href="/unreal-docs-site/static/css/94b5429e8bb99082.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/94b5429e8bb99082.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/unreal-docs-site/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/unreal-docs-site/static/chunks/webpack-5260ea72744590ab.js" defer=""></script><script src="/unreal-docs-site/static/chunks/framework-79bce4a3a540b080.js" defer=""></script><script src="/unreal-docs-site/static/chunks/main-557073a0905b564b.js" defer=""></script><script src="/unreal-docs-site/static/chunks/pages/_app-6b8898c21a2e4b95.js" defer=""></script><script src="/unreal-docs-site/static/chunks/fec483df-6230579d5d828573.js" defer=""></script><script src="/unreal-docs-site/static/chunks/8670-b234e6d64ae1c03d.js" defer=""></script><script src="/unreal-docs-site/static/chunks/9734-f7fe5072f2fe3007.js" defer=""></script><script src="/unreal-docs-site/static/chunks/9102-f9e23c377aca5fcd.js" defer=""></script><script src="/unreal-docs-site/static/chunks/8764-dbd95fd81c44c3e6.js" defer=""></script><script src="/unreal-docs-site/static/chunks/1706-7c6deda01944d83c.js" defer=""></script><script src="/unreal-docs-site/static/chunks/4009-a6bb264a9deaef6d.js" defer=""></script><script src="/unreal-docs-site/static/chunks/1610-62049d841aecaa9e.js" defer=""></script><script src="/unreal-docs-site/static/chunks/6638-64bc76b8941aa5e8.js" defer=""></script><script src="/unreal-docs-site/static/chunks/pages/tutorials/itwin-unreal-controlling-your-imodel-3d2066cd8c3e0991.js" defer=""></script><script src="/unreal-docs-site/static/4I2YaoF9Uf026tEb78Qcd/_buildManifest.js" defer=""></script><script src="/unreal-docs-site/static/4I2YaoF9Uf026tEb78Qcd/_ssgManifest.js" defer=""></script></head><body class="iui-body portal-root"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K95F6GW"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="app"><div class="sticky-top" style="z-index:10"><div class="portal-header dark-blue" data-theme="dark"><header class="iui-page-header page-header"><div class="iui-left"><a id="itwin-platform-header-logo-link" href="/"><div class="iui-header-logo" role="button" tabindex="0"><svg id="header-logo-icon" class="iui-header-button-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.997 3.95a1.405 1.405 0 0 0-.682-1.122L11.901.802a1.397 1.397 0 0 0-1.427 0L10.3.906l-1.017.604L7.06 2.828a1.404 1.404 0 0 0-.684 1.202v1.113l-.85-.504a1.397 1.397 0 0 0-1.427 0l-2.157 1.28-.995.59-.262.156A1.404 1.404 0 0 0 0 7.867v4.103c0 .027.001.054.003.08a1.405 1.405 0 0 0 .682 1.122l3.414 2.026a1.397 1.397 0 0 0 1.427 0l.175-.104 1.017-.604 2.222-1.318a1.404 1.404 0 0 0 .685-1.202v-1.113l.85.504a1.397 1.397 0 0 0 1.426 0l2.157-1.28.996-.59.262-.156A1.404 1.404 0 0 0 16 8.133V4.03c0-.027-.001-.054-.003-.08zM4.82 6.619a.744.744 0 1 1-.744.744.744.744 0 0 1 .744-.744zm2.037 6.375-.3.184-1.071.66-.367.227-.19.117a.174.174 0 0 1-.043.02.253.253 0 0 1-.173-.012l-.017-.008-.103-.064-1.825-1.124V11.86s.006-.244.316-.067l1.126.692v-2.428l-.701-.433V8.492s.006-.244.317-.066l1.582.973v3.091l1.132-.696c.31-.177.317.067.317.067zm8.548-7.889v3.028a.807.807 0 0 1-.393.69l-.262.156-.996.591-2.156 1.28a.802.802 0 0 1-.82 0l-1.153-.685V7.867a1.404 1.404 0 0 0-.685-1.202l-1.124-.667-.846-.502V4.03a.807.807 0 0 1 .393-.69L9.585 2.02l1.018-.604.175-.103a.803.803 0 0 1 .82 0l3.414 2.025a.814.814 0 0 1 .392.645l.001.046zm-3.958-2.713 2.157 1.329V5.06s-.008.288-.375.078L11.9 4.32v2.87l.829.511v1.34s-.007.288-.374.078l-1.87-1.15V4.316l-1.338.822c-.367.21-.374-.078-.374-.078V3.72l.354-.217 1.266-.78.434-.268.224-.138a.205.205 0 0 1 .05-.025.299.299 0 0 1 .205.016l.02.01z"></path></svg><span class="iui-label"><strong>iTwin Platform</strong></span></div></a></div><div class="iui-right"><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/get-started"><span class="iui-button-label"><div>Get Started</div></span></a><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/apis"><span class="iui-button-label"><div>Documentation</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button iui-active desktop-header-button" type="button" aria-label="Dropdown" aria-current="location"><span class="iui-button-label"><div>Learning</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/samples"><span class="iui-button-label"><div>Samples</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button desktop-header-button" type="button" aria-label="Dropdown"><span class="iui-button-label"><div>Support</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><button class="iui-button iui-borderless" type="button" id="mobile-header-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="iui-button-icon" aria-hidden="true"><g fill-rule="evenodd"><path d="M0,12h16v2H0V12z"></path><path d="M0,7h16v2H0V7z"></path><path d="M0,2h16v2H0V2z"></path></g></svg></button><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></header><div class="header-menu-backdrop" style="display:none"><div class="collapsible-menu"><div class="collapsible-menu-close-area"><button class="iui-button iui-borderless iui-small header-close-button" type="button"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon" aria-hidden="true"><path d="m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"></path></svg></button></div><a class="hamburger-nav-link" href="/get-started/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Started</div></span></button></a><a class="hamburger-nav-link" href="/apis/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Documentation</div></span></button></a><a class="hamburger-nav-link" href="/tutorials/"><button class="iui-button iui-borderless iui-header-button iui-active hamburger-button" type="button" aria-current="location"><span class="iui-button-label"><div>Tutorials</div></span></button></a><a class="hamburger-nav-link" href="/accreditation/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Accreditation</div></span></button></a><a class="hamburger-nav-link" href="/powered-by-itwin/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Powered by iTwin</div></span></button></a><a class="hamburger-nav-link" href="/samples/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Samples</div></span></button></a><a class="hamburger-nav-link" href="/support/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Support</div></span></button></a><a class="hamburger-nav-link" href="https://itwinplatform.ideas.aha.io/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Submit an Idea</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon"><path d="m16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4-1.9-1.9m5.4 16v-9h-1v8h-14v-14h8v-1h-9v16z"></path></svg></button></a><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></div></div></div><main class="content"><div id="page" class="container tutorial-container"><div id="tutorial-header"><h1 class="iui-text-headline iui-text-spacing">Controlling your iModel in Unreal</h1></div><div id="tutorial-content"><div id="menu-button" data-testid="menu-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 11.3-1.4 1.4L8 6.1l-6.6 6.6L0 11.3l8-8"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 4.7-1.4-1.4L8 9.9 1.4 3.3 0 4.7l8 8z"></path></svg></div><div id="tutorial-side-navigation-pane" class="sticky-container"><div class="sideMenu sticky-element"><div class="sideMenu-large"><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#introduction"><span class="sideMenuItem">Introduction</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#prerequisites"><span class="sideMenuItem">Prerequisites</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#1-preparing-actors-in-your-scene"><span class="sideMenuItem">1. Preparing actors in your scene</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#2-setting-up-our-interface-classes"><span class="sideMenuItem">2. Setting up our interface classes</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#3-laying-out-the-hud"><span class="sideMenuItem">3. Laying out the HUD</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#4-scripting-the-scrubber"><span class="sideMenuItem">4. Scripting the scrubber</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#conclusion"><span class="sideMenuItem">Conclusion</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/itwin-unreal-controlling-your-imodel/#more-resources-that-you-may-like"><span class="sideMenuItem">More resources that you may like</span></a></div></div></div></div></div><div id="tutorial-content-body"><div class="disable-actions-section"><div id="tutorial-summary-graphical-content"><div class="graphical-content-placeholder"><img src="/unreal-docs-site/static/images/unreal-ui-featured.png"/></div></div><div id="tutorial-introduction"><div class="tutorial-introduction-content"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#introduction" id="introduction">Introduction</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">This tutorial looks at the various blueprint functions in the iTwin Unreal Datasmith Plugin you can use to manipulate your iModel in Unreal
and builds a simple user interface with a scrubber for users to interact with your schedule animation in real-time.
It also focuses on synchronizing the level sequence (used by actors with transform animations) with the ScheduledActor’s animations,
which is necessary when you exported using the <em>combine meshes</em> option.</p></div><div class="tutorial-summary"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#info" id="info">Info</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><div id="tutorial-summary-skill-level"><p class="iui-text-block iui-text-spacing label">Skill level:</p><p class="iui-text-block iui-text-spacing">Advanced</p></div><div id="tutorial-summary-duration"><p class="iui-text-block iui-text-spacing label">Duration:</p><p class="iui-text-block iui-text-spacing">30<!-- --> minutes</p></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#prerequisites" id="prerequisites">Prerequisites</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">This tutorial assumes that you have:</p><ul class="documentation-ul"><li>Installed <a href="https://www.unrealengine.com/download" target="_blank">Unreal Engine 4.26.1</a> or later</li><li>In your project already imported Datasmith content that was made with the iTwin Exporter for Datasmith from an iTwin that contains a schedule script. You may
follow one of the tutorials below for help exporting your own data.<ul class="documentation-ul"><li><a href="/tutorials/itwin-unreal-export-combined-meshes/" target="_blank">Exporting iModel to Unreal Datasmith as a combined mesh</a></li><li><a href="/tutorials/itwin-unreal-dataprep" target="_blank">Processing iModel metadata in Unreal Visual Dataprep</a></li></ul></li><li>An existing Unreal Engine project with the <a href="/tutorials/itwin-unreal-export-combined-meshes/#3-install-the-itwin-unreal-datasmith-plugin-in-your-unreal-project" target="_blank">iTwin Unreal Datasmith Plugin</a> installed.<ul class="documentation-ul"><li>Depending on your Unreal Engine version, this may require Visual Studio to be installed. The prerequisites section of <a href="/tutorials/itwin-unreal-export-combined-meshes/#prerequisites" target="_blank">Exporting iModel to Unreal Datasmith as a combined mesh</a>
has instructions for recompiling the plugin.</li></ul></li><li>A reasonable knowledge of blueprint scripting in Unreal Engine</li></ul></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#1-preparing-actors-in-your-scene" id="1-preparing-actors-in-your-scene">1. Preparing actors in your scene</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">In the level editor where you see your imported data, you need to add some tags to specific actors so later code can find them easily.
From the <strong>World Outliner</strong> at the top right of the editor, select the datasmith scene actor that was created when you imported your Datasmith content. Then in the <strong>Details</strong> panel,
search for or scroll down to the <strong>Actor &gt; Tags</strong> section and press the plus button to add a new tag, give it a value of “ExampleDatasmithScene1”.</p><p class="iui-text-block iui-text-spacing">If you selected the <em>combine meshes</em> option while exporting, you will have an actor named ScheduleActor as a child of your datasmith scene actor,
Select it and give it a new tag with a value of “ExampleScheduleActor1”. It is not necessary to have done a combined-mesh export,
however this tutorial will assume you have and write the code to synchronize the exported level sequence with the ScheduleActor
driving animations in the combined mesh.</p><img style="margin-bottom:22px" class="sample-img-l" alt="setting actor tags in the details panel" src="/unreal-docs-site/static/images/unreal-ui-actor-tags.png"/><p class="iui-text-block iui-text-spacing">If you have not done so already, in the Content Browser, in the folder where you chose to import your datasmith content, go into the animations subfolder
and drag-and-drop the ScheduleAnimation asset into the level to add the actor to the scene.</p><img style="margin-bottom:22px" class="sample-img-m" alt="drag-and-drop-level-sequence" src="/unreal-docs-site/static/images/unreal-export-anim-drag-drop.png"/><p class="iui-text-block iui-text-spacing">Make sure the new level sequence actor is selected, and in the <strong>Details Panel</strong>, give it an
actor tag with a value of “ScheduleLevelSequence1”. Still in the <strong>Details Panel</strong>, find the <strong>Playback</strong> settings section, check <strong>Auto Play</strong> and
set the <strong>Loop</strong> option to <strong>Loop Indefinitely</strong>.</p><img style="margin-bottom:22px" class="sample-img-l" alt="set auto play" src="/unreal-docs-site/static/images/unreal-ui-set-autoplay.png"/><p class="iui-text-block iui-text-spacing">Using actor tags is one of several ways to make it easy to access actors in the level at runtime in our code. Now that you have them setup,
you can use them in the code of the classes that will comprise your user interface.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#2-setting-up-our-interface-classes" id="2-setting-up-our-interface-classes">2. Setting up our interface classes</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">In Unreal Engine, <code>HUD</code> (Heads Up Display) classes are used to draw the 2-dimensional interface overlaying the rendered scene.
The HUD is controlled by the <code>PlayerController</code> it is attached to, and both are provisioned by the engine’s active <code>GameMode</code>.
In this tutorial a basic gamemode setup will be created so when you run your project, the interface will have a scrubber timeline, some
displayed information about the scene, and inputs to control the schedule animation playback.</p><p class="iui-text-block iui-text-spacing">Start by pressing the <strong>Add/Import</strong> button in the Content Browser, and under <strong>User Interface</strong> pick <strong>Widget Blueprint</strong> to create a new
<em>Widget Blueprint</em>. Name it <code>ExampleTimelineWidget</code>.</p><div class="iui-alert iui-informational" style="margin-bottom:22px"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-alert-icon"><path d="m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8zm1.2 3.2a.92336.92336 0 0 1 .997.8433q.00235.02829.003.0567a1.30936 1.30936 0 0 1 -1.3 1.2.94477.94477 0 0 1 -1-1 1.22815 1.22815 0 0 1 1.3-1.1zm-2 9.6c-.5 0-.9-.3-.5-1.7l.6-2.4c.1-.4.1-.5 0-.5-.2-.1-.9.2-1.3.5l-.2-.5a6.49722 6.49722 0 0 1 3.3-1.6c.5 0 .6.6.3 1.6l-.7 2.6c-.1.5-.1.6.1.6a2.00287 2.00287 0 0 0 1.1-.6l.3.4a5.76881 5.76881 0 0 1 -3 1.6z"></path></svg><span class="iui-alert-message">The names used in this tutorial are arbitrary. You can use any name as long as you connect the classes correctly.</span></div><img style="margin-bottom:22px" class="sample-img-m" alt="create a widget blueprint by using the add/import button in the Content Browser" src="/unreal-docs-site/static/images/unreal-ui-createwidgetblueprint.png"/><p class="iui-text-block iui-text-spacing">Next, create a new <code>GameModeBase</code> blueprint by pressing the <strong>Add/Import</strong> button in the Content Browser again,
this time choosing <strong>Blueprint Class</strong> at the top, under create <strong>Create Basic Asset</strong>. In the <strong>Pick Parent Class</strong> dialog, use the search menu to
find the <code>GameModeBase</code> class. Some, but not all, classes may also be selected from the <strong>Common Classes</strong> list at the top of the dialog.
Name your new <code>GameModeBase</code> subclass <code>ExampleGameModeBase</code>. In the same way create a new <code>PlayerController</code> blueprint, <code>ExamplePlayerController</code>,
and a new <code>HUD</code> blueprint, <code>ExampleHUD</code>, as well. Double-click the newly created <code>ExampleHUD</code> asset in the content editor to open the blueprint editor.</p><p class="iui-text-block iui-text-spacing">In your HUD’s blueprint event graph, add a <code>Create Widget</code> node to the <code>Begin Play</code> event and call the <code>Add to Viewport</code> function on the created widget reference.
Set the class parameter of the <code>Create Widget</code> node to the blueprint widget class you created, <code>ExampleTimelineWidget</code>.
The resulting node graph for the <code>Begin Play</code> event should look as follows.</p><div style="margin-bottom:22px" class="linking-image sample-img-m sample-img-xl"><a href="https://blueprintue.com/blueprint/k0_44j0-/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="screenshot of blueprint code for ExampleHUD class" src="/unreal-docs-site/static/images/unreal-ui-hud-beginplay.png" class="sample-img-xl"/></a></div><p class="iui-text-block iui-text-spacing">Go back to the Content Browser in the main level editor window and open the <code>ExamplePlayerController</code> class. In the <code>Begin Play</code> event,
add a <code>Get All Actors Of Class with Tag</code> node and get all Scheduled Actors with the tag you added earlier, “ExampleScheduleActor1”. Get the
element at index 0 (the first) element of the array, since we know we have one such actor in the scene, and set it as the value for a new
variable, <code>Scene</code>. You can drag the output pin of the array indexing <code>Get</code> node, and release in the graph space to open the context menu
and at the top select <strong>Promote to variable</strong> to do this quickly.</p><p class="iui-text-block iui-text-spacing">Then add a <code>Get HUD</code> node and a <code>Cast to ExampleHUD</code> node after the intialization of <code>Scene</code>. Store the ExampleHUD instance in a new variable, <code>PlayerHUD</code>.</p><div style="margin-bottom:22px" class="linking-image sample-img-m blueprint-img"><a href="https://blueprintue.com/blueprint/02yoz_1_/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="screenshot of player controller&#x27;s beginplay" src="/unreal-docs-site/static/images/unreal-ui-playercontroller-beginplay.png" class="blueprint-img"/></a></div><p class="iui-text-block iui-text-spacing">Create a new boolean variable <code>IsMouseCaptured</code>, and right-click in the event graph, search in the context menu for “spacebar” to add the
space bar input event. Then add the following blueprint code to use spacebar to toggle between controlling our spectator pawn or the mouse.</p><div class="iui-alert iui-informational" style="margin-bottom:22px"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-alert-icon"><path d="m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8zm1.2 3.2a.92336.92336 0 0 1 .997.8433q.00235.02829.003.0567a1.30936 1.30936 0 0 1 -1.3 1.2.94477.94477 0 0 1 -1-1 1.22815 1.22815 0 0 1 1.3-1.1zm-2 9.6c-.5 0-.9-.3-.5-1.7l.6-2.4c.1-.4.1-.5 0-.5-.2-.1-.9.2-1.3.5l-.2-.5a6.49722 6.49722 0 0 1 3.3-1.6c.5 0 .6.6.3 1.6l-.7 2.6c-.1.5-.1.6.1.6a2.00287 2.00287 0 0 0 1.1-.6l.3.4a5.76881 5.76881 0 0 1 -3 1.6z"></path></svg><span class="iui-alert-message">See the<!-- --> <a href="https://docs.unrealengine.com/InteractiveExperiences/Input/" target="_blank">Unreal Engine input management documentation</a> <!-- -->for better ways of managing input. Using a direct keyboard event is done for simplicity and there are more robust ways of reacting to input.</span></div><div style="margin-bottom:22px" class="linking-image sample-img-m blueprint-img"><a href="https://blueprintue.com/blueprint/wdbxp-au/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="screenshot of player controller&#x27;s spacebar event implementation" src="/unreal-docs-site/static/images/unreal-ui-playercontroller-onspacebar.png" class="blueprint-img"/></a></div><p class="iui-text-block iui-text-spacing">Finally, set your world to use these new blueprint classes, so that when the level is played, your widget is
in the viewport. Click the <strong>Settings</strong> icon in the top bar, and click <strong>World Settings</strong> in its dropdown. In the <strong>World Settings</strong> panel,
find the <strong>Game Mode</strong> section. There, see the <strong>GameMode Override</strong> dropdown value to your newly created <code>ExampleGameModeBase</code>.
Then expand the <strong>Selected GameMode</strong> options by clicking the arrow to the left of the label, and set the HUD and PlayerController classes to the ones you created.</p><img style="margin-bottom:22px" class="sample-img-m" alt="screenshot of gamemode override settings" src="/unreal-docs-site/static/images/unreal-ui-gamemode-override.png"/><div class="iui-alert iui-informational" style="margin-bottom:22px"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-alert-icon"><path d="m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8zm1.2 3.2a.92336.92336 0 0 1 .997.8433q.00235.02829.003.0567a1.30936 1.30936 0 0 1 -1.3 1.2.94477.94477 0 0 1 -1-1 1.22815 1.22815 0 0 1 1.3-1.1zm-2 9.6c-.5 0-.9-.3-.5-1.7l.6-2.4c.1-.4.1-.5 0-.5-.2-.1-.9.2-1.3.5l-.2-.5a6.49722 6.49722 0 0 1 3.3-1.6c.5 0 .6.6.3 1.6l-.7 2.6c-.1.5-.1.6.1.6a2.00287 2.00287 0 0 0 1.1-.6l.3.4a5.76881 5.76881 0 0 1 -3 1.6z"></path></svg><span class="iui-alert-message">In addition to a game mode override for local testing, you may also want to set the default GameMode in the project settings&#x27;<!-- --> <strong>Maps &amp; Modes</strong> section.</span></div><p class="iui-text-block iui-text-spacing">Now that HUD and widget spawn when play begins, you need to add some controls to your widget to be able to see it, and then you will be able to hook up those controls
to your iTwin’s animation.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#3-laying-out-the-hud" id="3-laying-out-the-hud">3. Laying out the HUD</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">In the Content Browser, double-click the <code>ExampleTimelineWidget</code> asset you created to open the widget editor. From the <strong>Palette</strong> on the left,
drag and drop a <em>Slider</em> control into the widget designer viewport. Make sure it is selected, and use the scale handles to scale it across the bottom
edge of the viewport to use as our scrubber. Additionally, place a <em>Text</em> control at each the left and right end of the slider, and one more above the middle
of the slider. You will show your iTwin’s schedule start, end, and current time of the animation in these text controls, updating the current time every tick.</p><video class="sample-img-xl" autoplay="" loop="" muted=""><source src="/unreal-docs-site/static/images/unreal-ui-widget-building.webm" type="video/webm"/>Your browser does not support this embedded video</video><p class="iui-text-block iui-text-spacing">In the <strong>Hierarchy</strong> panel on the left of the editor, rename your newly placed controls respectively to, Scrubber, StartTime, EndTime, and CurrentTime,
and in the top-right corner of the <strong>Details</strong> panel make sure the <strong>Is Variable</strong> checkbox is checked so you can reference your controls in the event graph.</p><img style="margin-bottom:22px" class="sample-img-xl" alt="the location of the Is Variable checkbox in the interface" src="/unreal-docs-site/static/images/unreal-ui-isvariable.png"/><p class="iui-text-block iui-text-spacing">To start scripting your placed controls, switch to the blueprint graph by pressing the <strong>Graph</strong> button in the top right of the window in the blueprint widget editor.
On the widget’s <code>Construct</code> event, first store both the “ExampleScheduleActor1”, and the “ScheduleLevelSequence1” tagged actors stored to variables in your script.
Then call the StartTime text control’s <em>Set Text</em> function and set it to the formatted date text of the ScheduledActor’s <code>AnimationStartTime</code>. Do the same
for EndTime but with the ScheduledActor’s <code>AnimationEndTime</code>.</p><div class="iui-alert iui-informational" style="margin-bottom:22px"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-alert-icon"><path d="m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8zm1.2 3.2a.92336.92336 0 0 1 .997.8433q.00235.02829.003.0567a1.30936 1.30936 0 0 1 -1.3 1.2.94477.94477 0 0 1 -1-1 1.22815 1.22815 0 0 1 1.3-1.1zm-2 9.6c-.5 0-.9-.3-.5-1.7l.6-2.4c.1-.4.1-.5 0-.5-.2-.1-.9.2-1.3.5l-.2-.5a6.49722 6.49722 0 0 1 3.3-1.6c.5 0 .6.6.3 1.6l-.7 2.6c-.1.5-.1.6.1.6a2.00287 2.00287 0 0 0 1.1-.6l.3.4a5.76881 5.76881 0 0 1 -3 1.6z"></path></svg><span class="iui-alert-message">If you did not perform an export with the <em>combine meshes</em> option, the ScheduledActor&#x27;s static blueprint function<!-- --> <a href="/unreal/integration/blueprint-api-reference/#AScheduledActor::GetSeparatedExportSceneData" target="_blank"><code class="iui-code">GetSeparatedExportSceneData</code></a> <!-- -->can be called with your Datasmith Scene Actor to receive the<!-- --> <code class="iui-code">ScheduleStartDateTime</code>, <code class="iui-code">ScheduleEndDateTime</code>, and<!-- --> <code class="iui-code">ScheduleTicksPerSecond</code>.</span></div><p class="iui-text-block iui-text-spacing">Then add a custom event to the event graph by right-clicking in the graph and search
for <strong>Add Custom Event</strong> in the context menu. Name this event &quot;Set Correct Level
Sequence End&quot;, and invoke the event after the variables are initialized in the Construct
event that you have been building up.</p><div style="margin-bottom:22px" class="linking-image sample-img-m blueprint-img"><a href="https://blueprintue.com/blueprint/1fqeenu4/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="screenshot of timeline widget&#x27;s construct event" src="/unreal-docs-site/static/images/unreal-ui-timelinewidget-beginplay.png" class="blueprint-img"/></a></div><p class="iui-text-block iui-text-spacing">Before you implement that custom event, in the tick event update the CurrentText control with the current time of the ScheduleActor. If you did not combine meshes during export,
you can instead use the static plugin blueprint function <a href="/unreal/integration/blueprint-api-reference/#AScheduledActor::GetScheduleDateTimeFromActiveSequence" target="_blank"><code>GetScheduleDateTimeFromActiveSequence</code></a>
to get the current date given the level sequence actor. Then, after having set the text, calculate the proportion of the animation played and update Scrubber’s value to match, so that it moves along
with the animation every tick.</p><div style="margin-bottom:22px" class="linking-image sample-img-m blueprint-img"><a href="https://blueprintue.com/blueprint/m5zhmaz-/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="screenshot of timeline widget&#x27;s tick event" src="/unreal-docs-site/static/images/unreal-ui-timelinewidget-tick.png" class="blueprint-img"/></a></div><p class="iui-text-block iui-text-spacing">Now you should implement the custom event, <code>SetCorrectLevelSequenceEnd</code>. This step is necessary to synchronize the exported level sequence with the ScheduledActor,
because the DatasmithSDK does not currently have a way to set the end frame of a level sequence. When an export is created with the combine meshes option, only
transform data is put in the level sequence, therefore the true end frame which is typically a non-transform frame (i.e. visibility, color, etc, frame) is lost.
To compensate for this, you can calculate the end frame manually from the metadata, and set the correct end time at startup. You could also set the end of the level sequence
asset itself, but a one-time computation at startup is not expensive and does not need to be recalculated in the event of a re-export of your Datasmith content.</p><p class="iui-text-block iui-text-spacing">To calculate it, divide the schedule date range using the <code>AnimationTicksPerSecondScale</code> variable to find how many 24FPS frames occur during the equivalent game time, which
can then be used to set the level sequence end frame from. In this example int64 is used in order to have the same resolution as DateTime which is internally a single int64.
Additionally, some constants from Unreal’s native <code>ETimespan</code> enumeration are reproduced to calculate the amount of ticks from the amount of seconds using only available blueprint nodes.</p><div style="margin-bottom:22px" class="linking-image sample-img-m blueprint-img"><a href="https://blueprintue.com/blueprint/aug9_doq/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="screenshot of player timeline widget&#x27;s custom event &#x27;set correct level sequence end&#x27;" src="/unreal-docs-site/static/images/unreal-ui-setcorrectlevelsequenceend.png" class="blueprint-img"/></a></div><p class="iui-text-block iui-text-spacing">Now, when you hit the <strong>Play</strong> button to watch the scene unfold, your animations should play and loop, with the scrubber moving and the date text updating throughout. You should
also be able to press the spacebar to get control of the mouse in order to move the scrubber. Moving the scrubber however, won’t do anything. That is your next step.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#4-scripting-the-scrubber" id="4-scripting-the-scrubber">4. Scripting the scrubber</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">Go back to the widget designer by hitting the <strong>Designer</strong> button at the top-right of the widget blueprint graph. Select your scrubber control in the <strong>Hierarchy</strong> tab,
and in the <strong>Details</strong> tab scroll all the way to the bottom to the <strong>Events</strong> section. Click the green plus <strong>On Mouse Capture Begin</strong>, <strong>On Mouse Capture End</strong>,
and <strong>On Value Changed</strong> buttons to add those events. Each time you press one of the buttons, you will be taken to where the event was added in the graph, go back to the
designer each time until all three events have been added.</p><img style="margin-bottom:22px" class="sample-img-xl" alt="the green plus buttons that let you add callbacks for scrubber controls to the event graph" src="/unreal-docs-site/static/images/unreal-ui-widget-add-callbacks.png"/><p class="iui-text-block iui-text-spacing">On mouse capture, pause the animation, so that the scene does not keep playing while a user is trying to scrub through it. In the <code>On Mouse Capture Begin</code> event,
set the ScheduleActor’s <code>AnimationIsPlaying</code> variable to false, and call the <code>Pause</code> function on the level sequence. In the <code>On Mouse Capture End</code> event, do the opposite,
setting <code>AnimationIsPlaying</code> to true, and calling the <code>Play</code> function on the level sequence.</p><div style="margin-bottom:22px" class="linking-image sample-img-m sample-img-xl"><a href="https://blueprintue.com/blueprint/vt_82mpw/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="the implementation of On Mouse Capture events for the ExampleTimelineWidget for playback control" src="/unreal-docs-site/static/images/unreal-ui-timelinewidget-onmouse.png" class="sample-img-xl"/></a></div><p class="iui-text-block iui-text-spacing">Finally, you must implement the <code>On Value Changed</code> event by converting the scrubber value from between 0 and 1 to the appropriate date in the schedule for setting the
ScheduleActor’s <code>AnimationTime</code>, and you must calculate the proportional time in the level sequence and call its <code>SetPlaybackPosition</code> function. The necessary math for
transforming from the value between 0 and 1 to the level sequence seconds and schedule date time can be seen in the following blueprint code.</p><div style="margin-bottom:22px" class="linking-image sample-img-m blueprint-img"><a href="https://blueprintue.com/blueprint/brwbb3iz/" target="_blank" rel="noreferrer"><div class="linking-image-icon-container"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="linking-image-icon"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></div><img alt="the implementation of On Value Changed for the ExampleTimelineWidget" src="/unreal-docs-site/static/images/unreal-ui-timelinewidget-onvaluechanged.png" class="blueprint-img"/></a></div></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#conclusion" id="conclusion">Conclusion</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">With your scene scrubber now working, you should be able to start extending the code with your own inputs and controls,
such as using custom interface control styles, or new inputs like pause buttons, etc. For a full list of available blueprint
functions in the iTwin Unreal Datasmith Plugin, see the <a href="/unreal/integration/blueprint-api-reference/" target="_blank">Blueprint API reference</a>.</p><p class="iui-text-block iui-text-spacing">If you have an idea for something that could improve your workflow and belongs in the plugin, visit <a href="https://itwinplatform.ideas.aha.io/?category=7010781758179112615" target="_blank">our ideas portal</a>.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#more-resources-that-you-may-like" id="more-resources-that-you-may-like">More resources that you may like</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><div style="display:flex;gap:22px;flex-wrap:wrap;margin-bottom:22px"><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="/unreal/integration/documentation/"><span class="iui-tile-name-label">iTwin Exporter for Datasmith documentation</span></a></div><div class="iui-tile-description"><div>Extended functionality and workflow descriptions in iTwin Exporter for Datasmith</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="/unreal/integration/blueprint-api-reference/"><span class="iui-tile-name-label">The iTwin Unreal Datasmith Plugin Blueprint api reference</span></a></div><div class="iui-tile-description"><div>Follow this tutorial to get iModel data into the Datasmith format as a combined mesh</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://docs.unrealengine.com/Resources/ContentExamples/Blueprints_HUD/1_1/"><span class="iui-tile-name-label">Unreal example HUD</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>See the official example HUD in Unreal to learn some HUD design techniques and best practices</div></div></div></div></div></div></div></div></div></div></div></div></main><div class="iui-root transparent-container" data-iui-theme="light" data-iui-contrast="default"><footer class="iui-legal-footer footer"><ul class="iui-legal-footer-list"><li class="iui-legal-footer-item">© 2024 Bentley Systems, Incorporated</li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="/terms-of-service" target="_blank" rel="noreferrer">Terms of service</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/privacy-policy" target="_blank" rel="noreferrer">Privacy</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/terms-of-use-and-select-online-agreement" target="_blank" rel="noreferrer">Terms of use</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/cookie-policy" target="_blank" rel="noreferrer">Cookies</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://connect.bentley.com/Legal" target="_blank" rel="noreferrer">Legal notices</a></li></ul></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/tutorials/itwin-unreal-controlling-your-imodel","query":{},"buildId":"4I2YaoF9Uf026tEb78Qcd","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>