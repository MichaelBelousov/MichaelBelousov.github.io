<!DOCTYPE html><html class="iui-theme-light" lang="en"><head><meta charSet="utf-8"/><meta name="author" content="Bentley Systems"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/favicon.ico"/><title>Adding view decorations to your iTwin Viewer - Tutorials | iTwin Platform</title><meta name="next-head-count" content="6"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K95F6GW');</script><style>@layer global-overrides, itwinui;</style><link rel="preload" href="/unreal-docs-site/static/css/6a68c8a7b2a77f53.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/6a68c8a7b2a77f53.css" data-n-g=""/><link rel="preload" href="/unreal-docs-site/static/css/99338c7953687cf2.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/99338c7953687cf2.css" data-n-g=""/><link rel="preload" href="/unreal-docs-site/static/css/94b5429e8bb99082.css" as="style"/><link rel="stylesheet" href="/unreal-docs-site/static/css/94b5429e8bb99082.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/unreal-docs-site/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/unreal-docs-site/static/chunks/webpack-5260ea72744590ab.js" defer=""></script><script src="/unreal-docs-site/static/chunks/framework-79bce4a3a540b080.js" defer=""></script><script src="/unreal-docs-site/static/chunks/main-557073a0905b564b.js" defer=""></script><script src="/unreal-docs-site/static/chunks/pages/_app-6b8898c21a2e4b95.js" defer=""></script><script src="/unreal-docs-site/static/chunks/fec483df-6230579d5d828573.js" defer=""></script><script src="/unreal-docs-site/static/chunks/8670-b234e6d64ae1c03d.js" defer=""></script><script src="/unreal-docs-site/static/chunks/9734-f7fe5072f2fe3007.js" defer=""></script><script src="/unreal-docs-site/static/chunks/9102-f9e23c377aca5fcd.js" defer=""></script><script src="/unreal-docs-site/static/chunks/8764-dbd95fd81c44c3e6.js" defer=""></script><script src="/unreal-docs-site/static/chunks/1706-7c6deda01944d83c.js" defer=""></script><script src="/unreal-docs-site/static/chunks/4009-a6bb264a9deaef6d.js" defer=""></script><script src="/unreal-docs-site/static/chunks/1610-62049d841aecaa9e.js" defer=""></script><script src="/unreal-docs-site/static/chunks/6638-64bc76b8941aa5e8.js" defer=""></script><script src="/unreal-docs-site/static/chunks/9332-d9571a93b65b4eb1.js" defer=""></script><script src="/unreal-docs-site/static/chunks/pages/tutorials/adding-decorators-and-markers-53bfa99759dbabc4.js" defer=""></script><script src="/unreal-docs-site/static/4I2YaoF9Uf026tEb78Qcd/_buildManifest.js" defer=""></script><script src="/unreal-docs-site/static/4I2YaoF9Uf026tEb78Qcd/_ssgManifest.js" defer=""></script></head><body class="iui-body portal-root"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K95F6GW"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="app"><div class="sticky-top" style="z-index:10"><div class="portal-header dark-blue" data-theme="dark"><header class="iui-page-header page-header"><div class="iui-left"><a id="itwin-platform-header-logo-link" href="/"><div class="iui-header-logo" role="button" tabindex="0"><svg id="header-logo-icon" class="iui-header-button-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.997 3.95a1.405 1.405 0 0 0-.682-1.122L11.901.802a1.397 1.397 0 0 0-1.427 0L10.3.906l-1.017.604L7.06 2.828a1.404 1.404 0 0 0-.684 1.202v1.113l-.85-.504a1.397 1.397 0 0 0-1.427 0l-2.157 1.28-.995.59-.262.156A1.404 1.404 0 0 0 0 7.867v4.103c0 .027.001.054.003.08a1.405 1.405 0 0 0 .682 1.122l3.414 2.026a1.397 1.397 0 0 0 1.427 0l.175-.104 1.017-.604 2.222-1.318a1.404 1.404 0 0 0 .685-1.202v-1.113l.85.504a1.397 1.397 0 0 0 1.426 0l2.157-1.28.996-.59.262-.156A1.404 1.404 0 0 0 16 8.133V4.03c0-.027-.001-.054-.003-.08zM4.82 6.619a.744.744 0 1 1-.744.744.744.744 0 0 1 .744-.744zm2.037 6.375-.3.184-1.071.66-.367.227-.19.117a.174.174 0 0 1-.043.02.253.253 0 0 1-.173-.012l-.017-.008-.103-.064-1.825-1.124V11.86s.006-.244.316-.067l1.126.692v-2.428l-.701-.433V8.492s.006-.244.317-.066l1.582.973v3.091l1.132-.696c.31-.177.317.067.317.067zm8.548-7.889v3.028a.807.807 0 0 1-.393.69l-.262.156-.996.591-2.156 1.28a.802.802 0 0 1-.82 0l-1.153-.685V7.867a1.404 1.404 0 0 0-.685-1.202l-1.124-.667-.846-.502V4.03a.807.807 0 0 1 .393-.69L9.585 2.02l1.018-.604.175-.103a.803.803 0 0 1 .82 0l3.414 2.025a.814.814 0 0 1 .392.645l.001.046zm-3.958-2.713 2.157 1.329V5.06s-.008.288-.375.078L11.9 4.32v2.87l.829.511v1.34s-.007.288-.374.078l-1.87-1.15V4.316l-1.338.822c-.367.21-.374-.078-.374-.078V3.72l.354-.217 1.266-.78.434-.268.224-.138a.205.205 0 0 1 .05-.025.299.299 0 0 1 .205.016l.02.01z"></path></svg><span class="iui-label"><strong>iTwin Platform</strong></span></div></a></div><div class="iui-right"><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/get-started"><span class="iui-button-label"><div>Get Started</div></span></a><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/apis"><span class="iui-button-label"><div>Documentation</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button iui-active desktop-header-button" type="button" aria-label="Dropdown" aria-current="location"><span class="iui-button-label"><div>Learning</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><a class="iui-button iui-borderless iui-header-button desktop-header-button" type="button" href="/samples"><span class="iui-button-label"><div>Samples</div></span></a><button class="iui-button iui-borderless iui-dropdown iui-header-button iui-header-dropdown-button desktop-header-button" type="button" aria-label="Dropdown"><span class="iui-button-label"><div>Support</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" class="iui-button-icon"><path d="m4.8067 6h6.3953a.27961.27961 0 0 1 .24043.44321l-3.1736 3.45707a.33969.33969 0 0 1 -.48085 0l-3.2217-3.45707a.26909.26909 0 0 1 .24042-.44321z"></path></svg></button><button class="iui-button iui-borderless" type="button" id="mobile-header-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="iui-button-icon" aria-hidden="true"><g fill-rule="evenodd"><path d="M0,12h16v2H0V12z"></path><path d="M0,7h16v2H0V7z"></path><path d="M0,2h16v2H0V2z"></path></g></svg></button><button class="iui-button iui-borderless iui-header-button desktop-header-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></header><div class="header-menu-backdrop" style="display:none"><div class="collapsible-menu"><div class="collapsible-menu-close-area"><button class="iui-button iui-borderless iui-small header-close-button" type="button"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon" aria-hidden="true"><path d="m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"></path></svg></button></div><a class="hamburger-nav-link" href="/get-started/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Started</div></span></button></a><a class="hamburger-nav-link" href="/apis/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Documentation</div></span></button></a><a class="hamburger-nav-link" href="/tutorials/"><button class="iui-button iui-borderless iui-header-button iui-active hamburger-button" type="button" aria-current="location"><span class="iui-button-label"><div>Tutorials</div></span></button></a><a class="hamburger-nav-link" href="/accreditation/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Accreditation</div></span></button></a><a class="hamburger-nav-link" href="/powered-by-itwin/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Powered by iTwin</div></span></button></a><a class="hamburger-nav-link" href="/samples/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Samples</div></span></button></a><a class="hamburger-nav-link" href="/support/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Get Support</div></span></button></a><a class="hamburger-nav-link" href="https://itwinplatform.ideas.aha.io/"><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Submit an Idea</div></span><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="iui-button-icon"><path d="m16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4-1.9-1.9m5.4 16v-9h-1v8h-14v-14h8v-1h-9v16z"></path></svg></button></a><button class="iui-button iui-borderless iui-header-button hamburger-button" type="button"><span class="iui-button-label"><div>Sign In</div></span></button></div></div></div></div><main class="content"><div id="page" class="container tutorial-container"><div id="tutorial-header"><h1 class="iui-text-headline iui-text-spacing">Adding view decorations to your iTwin Viewer</h1></div><div id="tutorial-content"><div id="menu-button" data-testid="menu-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 11.3-1.4 1.4L8 6.1l-6.6 6.6L0 11.3l8-8"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m16 4.7-1.4-1.4L8 9.9 1.4 3.3 0 4.7l8 8z"></path></svg></div><div id="tutorial-side-navigation-pane" class="sticky-container"><div class="sideMenu sticky-element"><div class="sideMenu-large"><div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#introduction"><span class="sideMenuItem">Introduction</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#prerequisites"><span class="sideMenuItem">Prerequisites</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#1-view-decorations-decorators-and-markers"><span class="sideMenuItem">1. View Decorations, Decorators and Markers</span></a></div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#11-view-decorations"><span class="sideMenuItem sideMenuSubItem">1.1 View Decorations</span></a></div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#12-decorators"><span class="sideMenuItem sideMenuSubItem">1.2 Decorators</span></a></div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#13-markers"><span class="sideMenuItem sideMenuSubItem">1.3 Markers</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#2-creating-a-simple-app-to-display-markers-for-elements-of-interest"><span class="sideMenuItem">2. Creating a simple app to display markers for elements of interest</span></a></div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#21-creating-our-elementofinterestmarker-class"><span class="sideMenuItem sideMenuSubItem">2.1 Creating our ElementOfInterestMarker class</span></a></div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#22-creating-our-elementofinterestdecorator-class"><span class="sideMenuItem sideMenuSubItem">2.2 Creating our ElementOfInterestDecorator class</span></a></div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#23-modifying-apptsx"><span class="sideMenuItem sideMenuSubItem">2.3 Modifying App.tsx</span></a></div></div><div><div class="menuItem-container"><a href="/tutorials/adding-decorators-and-markers/#more-resources-that-you-may-like"><span class="sideMenuItem">More resources that you may like</span></a></div></div></div></div></div><div id="tutorial-content-body"><div id="tutorial-summary-graphical-content"><div class="graphical-content-placeholder"><img src="/images/adding-decorators-and-markers.png"/></div></div><div id="tutorial-introduction"><div class="tutorial-introduction-content"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#introduction" id="introduction">Introduction</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">This tutorial guides you through customizing your iTwin Viewer application by displaying application-specific graphics, called <em>view decorations</em>, in addition to an iModel’s geometry. </p><p class="iui-text-block iui-text-spacing">First, we explore the basics about view decorations, decorators and markers. Then, we create a simple viewer application which displays markers for elements of interest in a 3D iModel.</p></div><div class="tutorial-summary"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#info" id="info">Info</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><div id="tutorial-summary-skill-level"><p class="iui-text-block iui-text-spacing label">Skill level:</p><p class="iui-text-block iui-text-spacing">Basic</p></div><div id="tutorial-summary-duration"><p class="iui-text-block iui-text-spacing label">Duration:</p><p class="iui-text-block iui-text-spacing">45<!-- --> minutes</p></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#prerequisites" id="prerequisites">Prerequisites</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">This tutorial assumes that you have:</p><ul class="documentation-ul"><li>Your own local source for the iTwin Web Viewer based on the template @itwin/web-viewer<ul class="documentation-ul"><li>See the <a href="/tutorials/web-application-quick-start" target="_blank">Get Started!</a> tutorial for instructions.</li></ul></li><li>Configured your local source to open the “House Model” sample iModel.<ul class="documentation-ul"><li>See the <a href="/tutorials/create-test-imodel-sample" target="_blank">Create a test iModel from a Bentley provided sample</a> tutorial for instructions on using a sample iModel.</li></ul></li><li>Completed the “<a href="/tutorials/itwin-viewer-hello-world" target="_blank">Customizing the iTwin Viewer</a>” tutorial.</li><li>Completed the “<a href="/tutorials/adding-showcase-widgets-to-your-itwin-viewer" target="_blank">Adding showcase widgets to your iTwin Viewer</a>” tutorial.</li></ul></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#1-view-decorations-decorators-and-markers" id="1-view-decorations-decorators-and-markers">1. View Decorations, Decorators and Markers</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#11-view-decorations" id="11-view-decorations">1.1 View Decorations</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Using iTwin.js, there are many ways to customize your iTwin Viewer application, such as displaying custom graphics in the viewport. Additionally, to add graphics that are not contained in, or provided by, the iModel, use View Decorations. At their core, view decorations are application-generated graphics supplied to the viewer’s render system at runtime. There are three categories of view decorations:</p><ul class="documentation-ul"><li>View Graphic Decorations</li><li>Canvas Decorations</li><li>HTML Decorations</li></ul><p class="iui-text-block iui-text-spacing">View graphic decorations, of which there are many sub-types, are decorations drawn using the iTwin.js rendering system through WebGL. They allow you to display complex graphics alongside the models’ geometry. They are constructed using a <a href="https://www.itwinjs.org/reference/core-frontend/rendering/graphicbuilder/" target="_blank">GraphicBuilder</a> or by using <a href="https://www.itwinjs.org/reference/core-frontend/tiles/readgltfgraphics" target="_blank">readGltfGraphics</a> to load <a href="https://www.khronos.org/gltf/" target="_blank">glTF</a> assets. Depending on their sub-type, view graphic decorations can be drawn using the view’s lighting, shading and render mode. A common use case of view graphic decorations is the display of 3D bounding boxes around certain elements of a model.</p><figure style="display:table;width:60%;margin-left:auto;margin-right:auto;margin-top:22px;margin-bottom:22px;padding-left:0px"><img style="width:100%" src="/images/tutorials/adding-decorators-and-markers/project_extents.png" alt="3d iModel of a red brick house over a green background with a white bounding box illustrating the model&#x27;s limits."/><figcaption style="display:table-caption;caption-side:bottom">View graphic decorations created using a graphicsBuilder to display a bounding box around the House Model.</figcaption></figure><p class="iui-text-block iui-text-spacing">Canvas decorations are decorations drawn atop the scene using <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D" target="_blank">CanvasRenderingContext2D</a>, which means they always appear in front of your models. They are very useful to display information you do not want to lose sight of behind elements. Canvas decorations are created by implemention the <a href="https://www.itwinjs.org/reference/core-frontend/rendering/canvasdecoration/" target="_blank">CanvasDecoration</a> interface. The iTwin.js implementation of <a href="https://www.itwinjs.org/reference/core-frontend/views/sprite/" target="_blank">Sprites</a> uses canvas decorations.</p><p class="iui-text-block iui-text-spacing">HTML decorations are simply HTML elements added to the DOM on top of your views. They are displayed in front of canvas decorations.</p><p class="iui-text-block iui-text-spacing">For more information on using view decorations, see <a href="https://www.itwinjs.org/learning/frontend/viewdecorations/" target="_blank">View Decorations</a>.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#12-decorators" id="12-decorators">1.2 Decorators</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">View decorations are added to a viewport using a <em>decorator</em>. A decorator is an object implementing the <a href="https://www.itwinjs.org/reference/core-frontend/views/decorator/" target="_blank">Decorator</a> interface that manages a set of view decorations. Each time a viewport renders a frame, each registered decorator’s <code>decorate</code> method is called. The method receives a <a href="https://www.itwinjs.org/reference/core-frontend/rendering/decoratecontext/" target="_blank">DecorateContext</a>, which is used to add the view decorations to be rendered for that frame. Decorators are registered with the <a href="https://www.itwinjs.org/reference/core-frontend/views/viewmanager/adddecorator/" target="_blank">ViewManager.addDecorator</a> method.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#13-markers" id="13-markers">1.3 Markers</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing"><a href="https://www.itwinjs.org/learning/frontend/markers/" target="_blank">Markers</a> are a convenient way to display information atop the view that follow a fixed point in the world. They are often used as visual indicators showing the location of data from external sources or points of interest in the world. As such, they can present information when hovered and perform actions when clicked. Markers can optionaly display all three types of view decorations.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#2-creating-a-simple-app-to-display-markers-for-elements-of-interest" id="2-creating-a-simple-app-to-display-markers-for-elements-of-interest">2. Creating a simple app to display markers for elements of interest</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><p class="iui-text-block iui-text-spacing">To apply what we have just learned about view decorations, decorators, and markers, we will now create a simple Viewer application using these three features. Our goal is to display markers representing interesting elements in the House Model. Those markers will consist of simple 2D images. When hovered, they will show a name for the element and, when clicked, they will take us to that element.</p><p class="iui-text-block iui-text-spacing"><strong>Note</strong>: You can have a look at the <a href="https://www.itwinjs.org/sandboxes/RaphaelMelancon/Simple%20Marker%20Sample%20App" target="_blank">Simple Marker Sample App</a> community sandbox to see what your application will look like at the end of this tutorial.</p><p class="iui-text-block iui-text-spacing">Let’s get started!</p><video class="sample-img-xl" autoplay="" loop="" muted="" alt="Screen recording of the Viewer app being used." style="display:block;width:60%;margin-left:auto;margin-right:auto"><source src="/images/tutorials/adding-decorators-and-markers/sample-app-green-bg.webm" type="video/webm"/>Your browser does not support this embedded video</video><br/></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="title-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#21-creating-our-elementofinterestmarker-class" id="21-creating-our-elementofinterestmarker-class">2.1 Creating our ElementOfInterestMarker class</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">First off, make sure you are starting from a newly created Viewer Test App. Have a look at the <a href="#Prerequisites" target="_blank">prerequisites</a> if you are unsure how to do that.</p><p class="iui-text-block iui-text-spacing">Now, let’s create a new file called <code>ElementOfInterestMarker.ts</code> in the same directory as your <code>App.tsx</code> file. In this file, we define our custom <code>ElementOfInterestMarker</code> class extending <a href="https://www.itwinjs.org/reference/core-frontend/views/marker/" target="_blank">Marker</a>, which we import.</p><p class="iui-text-block iui-text-spacing">To have all our markers appear the same size, we add the property <code>private static _height = 35;</code> to our class.
We also add <code>private _onMouseButtonCallback: any;</code> to hold each marker’s callback function.<br/>
We will use those properties in the constructor.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterestMarker class</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">Marker</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">class</span><span> </span><span class="token class-name">ElementOfInterestMarker</span><span> </span><span class="token keyword">extends</span><span> </span><span class="token class-name">Marker</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">private</span><span> </span><span class="token keyword">static</span><span> _height </span><span class="token operator">=</span><span> </span><span class="token number">35</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">private</span><span> _onMouseButtonCallback</span><span class="token punctuation">:</span><span> </span><span class="token builtin">any</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#constructor" id="constructor">Constructor</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Indeed, our marker class needs a constructor in which to setup the image to display, its position and size, the tooltip shown when hovered and the callback function triggered when clicked. We define such a constructor, which expects an image, a string for the tooltip, a callback function to call when clicked, and world coordinates.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token function">constructor</span><span class="token punctuation">(</span>image<span class="token operator">:</span> HTMLImageElement<span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> onMouseButtonCallback<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> worldLocation<span class="token operator">:</span> Point3d<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">As with any constructor of a class extending another, the first line of our constructor must call the parent class’s constructor using <code>super</code>. In our case, <code>Marker</code>&#x27;s <a href="https://www.itwinjs.org/reference/core-frontend/views/marker/constructor/" target="_blank">constructor</a> expects a <a href="https://www.itwinjs.org/reference/core-geometry/cartesiangeometry/point3d/" target="_blank">Point3d</a> representing the world coordinates of the marker and a <a href="https://www.itwinjs.org/reference/core-geometry/cartesiangeometry/point2d/" target="_blank">Point2d</a> representing its size in pixels. We can directly use <code>worldLocation</code> for the former and a simple calculation gives us the latter, keeping the input image’s aspect ratio while reducing its size.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">super</span><span class="token punctuation">(</span>worldLocation<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token punctuation">(</span>ElementOfInterestMarker<span class="token punctuation">.</span>_height <span class="token operator">/</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span> ElementOfInterestMarker<span class="token punctuation">.</span>_height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Then, we assign the callback function to the previously created <code>_onMouseButtonCallback</code> property, set the marker’s <a href="https://www.itwinjs.org/reference/core-frontend/views/marker/title/" target="_blank">title</a>, and set the image using <a href="https://www.itwinjs.org/reference/core-frontend/views/marker/setimage/" target="_blank">setImage</a>.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">this</span><span class="token punctuation">.</span>_onMouseButtonCallback <span class="token operator">=</span> onMouseButtonCallback<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setImage</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Make sure to add the necessary imports.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">import</span> <span class="token punctuation">{</span> Point2d<span class="token punctuation">,</span> Point3d <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@itwin/core-geometry"</span><span class="token punctuation">;</span>
</code></pre></p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterestMarker constructor</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span>
</span></span><span><span>  </span><span class="token parameter">image</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">HTMLImageElement</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span><span class="token parameter">  title</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span><span class="token parameter">  onMouseButtonCallback</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">any</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span><span class="token parameter">  worldLocation</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">Point3d</span><span class="token parameter token punctuation">,</span><span>
</span></span><span><span></span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">super</span><span class="token punctuation">(</span><span>worldLocation</span><span class="token punctuation">,</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Point2d</span><span class="token punctuation">(</span><span>image</span><span class="token punctuation">.</span><span class="token property-access">width</span><span> </span><span class="token operator">*</span><span> </span><span class="token punctuation">(</span><span class="token maybe-class-name">ElementOfInterestMarker</span><span class="token punctuation">.</span><span class="token property-access">_height</span><span> </span><span class="token operator">/</span><span> image</span><span class="token punctuation">.</span><span class="token property-access">height</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">ElementOfInterestMarker</span><span class="token punctuation">.</span><span class="token property-access">_height</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_onMouseButtonCallback</span><span> </span><span class="token operator">=</span><span> onMouseButtonCallback</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">title</span><span> </span><span class="token operator">=</span><span> title</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setImage</span><span class="token punctuation">(</span><span>image</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#onmousebutton-method" id="onmousebutton-method">onMouseButton method</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">To complete our <code>ElementOfInterestMarker</code> class, let’s implement its optional <code>onMouseButton</code> method, which is called whenever a mouse button event takes place on the marker. The method receives an instance of <a href="https://www.itwinjs.org/reference/core-frontend/tools/bebuttonevent/" target="_blank">BeButtonEvent</a> containing information about the mouse event and returns a boolean. We will trigger a callback when such an event takes place.</p><p class="iui-text-block iui-text-spacing">In our case, we only want our application to react to mouse events that correspond to the right mouse button. We thus use the condition <code>BeButton.Data !== ev.button</code> to return before doing anything if the button clicked is not the <em>Data</em> (left) button. We also do not want anything to happen when a mouse button is depressed rather than pressed. We thus add the condition <code>!ev.isDown</code> to also return early when the mouse button started from a down position. These two conditions ensure that we only act when the right mouse button is pressed. The other conditions are safeguards to prevent triggering the callback when the viewport is missing or invalid.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">if</span> <span class="token punctuation">(</span>BeButton<span class="token punctuation">.</span>Data <span class="token operator">!==</span> ev<span class="token punctuation">.</span>button <span class="token operator">||</span> <span class="token operator">!</span>ev<span class="token punctuation">.</span>isDown <span class="token operator">||</span> <span class="token operator">!</span>ev<span class="token punctuation">.</span>viewport <span class="token operator">||</span> <span class="token operator">!</span>ev<span class="token punctuation">.</span>viewport<span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">isSpatialView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">If none of the above conditions are true, we trigger the callback stored in <code>_onMouseButtonCallback</code>. We always return <code>true</code> to signal the event was processed and not to forward it to other UI elements.</p><p class="iui-text-block iui-text-spacing">Again, make sure to add the necessary imports.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">import</span> <span class="token punctuation">{</span> BeButton<span class="token punctuation">,</span> BeButtonEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@itwin/core-frontend"</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Just like that, our <code>ElementOfInterestMarker</code> class is complete! You can see the completed file in the code snippet.<br/>
We suggest you review the <a href="https://www.itwinjs.org/reference/core-frontend/views/marker/" target="_blank">Marker</a> documention, as the class provides many other useful methods and properties to tweak the behavior of your markers.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterestMarker&#x27;s onMouseButton method</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">public</span><span> </span><span class="token function">onMouseButton</span><span class="token punctuation">(</span><span>ev</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">BeButtonEvent</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span> </span><span class="token builtin">boolean</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span class="token maybe-class-name">BeButton</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Data</span><span> </span><span class="token operator">!==</span><span> ev</span><span class="token punctuation">.</span><span class="token property-access">button</span><span> </span><span class="token operator">||</span><span> </span><span class="token operator">!</span><span>ev</span><span class="token punctuation">.</span><span class="token property-access">isDown</span><span> </span><span class="token operator">||</span><span> </span><span class="token operator">!</span><span>ev</span><span class="token punctuation">.</span><span class="token property-access">viewport</span><span> </span><span class="token operator">||</span><span> </span><span class="token operator">!</span><span>ev</span><span class="token punctuation">.</span><span class="token property-access">viewport</span><span class="token punctuation">.</span><span class="token property-access">view</span><span class="token punctuation">.</span><span class="token method function property-access">isSpatialView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span>
</span></span><span><span>    </span><span class="token keyword">return</span><span> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_onMouseButtonCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">return</span><span> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Complete ElementOfInterestMarker.ts file</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">BeButton</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">BeButtonEvent</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">Marker</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">Point2d</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">Point3d</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-geometry&quot;</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">class</span><span> </span><span class="token class-name">ElementOfInterestMarker</span><span> </span><span class="token keyword">extends</span><span> </span><span class="token class-name">Marker</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">private</span><span> </span><span class="token keyword">static</span><span> _height </span><span class="token operator">=</span><span> </span><span class="token number">35</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">private</span><span> _onMouseButtonCallback</span><span class="token punctuation">:</span><span> </span><span class="token builtin">any</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span>
</span></span><span><span>    </span><span class="token parameter">image</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">HTMLImageElement</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span><span class="token parameter">    title</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">string</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span><span class="token parameter">    onMouseButtonCallback</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token builtin">any</span><span class="token parameter token punctuation">,</span><span class="token parameter">
</span></span><span><span class="token parameter">    worldLocation</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">Point3d</span><span class="token parameter token punctuation">,</span><span>
</span></span><span><span>  </span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">super</span><span class="token punctuation">(</span><span>worldLocation</span><span class="token punctuation">,</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Point2d</span><span class="token punctuation">(</span><span>image</span><span class="token punctuation">.</span><span class="token property-access">width</span><span> </span><span class="token operator">*</span><span> </span><span class="token punctuation">(</span><span class="token maybe-class-name">ElementOfInterestMarker</span><span class="token punctuation">.</span><span class="token property-access">_height</span><span> </span><span class="token operator">/</span><span> image</span><span class="token punctuation">.</span><span class="token property-access">height</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">ElementOfInterestMarker</span><span class="token punctuation">.</span><span class="token property-access">_height</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_onMouseButtonCallback</span><span> </span><span class="token operator">=</span><span> onMouseButtonCallback</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">title</span><span> </span><span class="token operator">=</span><span> title</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setImage</span><span class="token punctuation">(</span><span>image</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">public</span><span> </span><span class="token function">onMouseButton</span><span class="token punctuation">(</span><span>ev</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">BeButtonEvent</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span> </span><span class="token builtin">boolean</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span class="token maybe-class-name">BeButton</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Data</span><span> </span><span class="token operator">!==</span><span> ev</span><span class="token punctuation">.</span><span class="token property-access">button</span><span> </span><span class="token operator">||</span><span> </span><span class="token operator">!</span><span>ev</span><span class="token punctuation">.</span><span class="token property-access">isDown</span><span> </span><span class="token operator">||</span><span> </span><span class="token operator">!</span><span>ev</span><span class="token punctuation">.</span><span class="token property-access">viewport</span><span> </span><span class="token operator">||</span><span> </span><span class="token operator">!</span><span>ev</span><span class="token punctuation">.</span><span class="token property-access">viewport</span><span class="token punctuation">.</span><span class="token property-access">view</span><span class="token punctuation">.</span><span class="token method function property-access">isSpatialView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span>
</span></span><span><span>      </span><span class="token keyword">return</span><span> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_onMouseButtonCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">return</span><span> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#22-creating-our-elementofinterestdecorator-class" id="22-creating-our-elementofinterestdecorator-class">2.2 Creating our ElementOfInterestDecorator class</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Now that we have created our marker class, we need to create a decorator which will supply the viewport with the markers to draw on each render. First, create a new file called <code>ElementtOfInterestDecorator.ts</code>.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#elementofinterest-interface" id="elementofinterest-interface">ElementOfInterest interface</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">In this file, let’s define the interface <code>ElementOfInterest</code> which represents the properties our decorator needs to create an <code>ElementOfInterestMarker</code> for an iModel element. We need the element’s id to access information such as its position in the model and a custom title to display as the marker’s tooltip. Let’s also add a property indicating the best angle to see this element from, which we use to adjust the view when we select the element’s marker. Do not forget to import <code>Id64String</code> and <code>StandardViewId</code>.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterest interface</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">Id64String</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-bentley&quot;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">interface</span><span> </span><span class="token class-name">ElementOfInterest</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  id</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">Id64String</span><span class="token punctuation">,</span><span>
</span></span><span><span>  title</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span class="token punctuation">,</span><span>
</span></span><span><span>  viewOrientation</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#elementofinterestdecorator-class" id="elementofinterestdecorator-class">ElementOfInterestDecorator class</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">It’s now time to create our decorator. We create the class <code>ElementOfInterestDecorator</code> implementing the <a href="https://www.itwinjs.org/reference/core-frontend/views/decorator/" target="_blank">Decorator</a> interface in <code>ElementOfInterestDecorator.ts</code>. To store our decorator’s markers, we add the property <code>private _markers: ElementOfInterestMarker[] = [];</code> to our class. Then, in the required decorate method, we can call the inherited <a href="https://www.itwinjs.org/reference/core-frontend/views/marker/adddecoration/" target="_blank">addDecoration</a> method of each of our markers, supplying the context.
Refer to the code snippet for the necessary imports.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterestDecorator class</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">DecorateContext</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">Decorator</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ElementOfInterestMarker</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./ElementOfInterestMarker&quot;</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">class</span><span> </span><span class="token class-name">ElementOfInterestDecorator</span><span> </span><span class="token keyword">implements</span><span> </span><span class="token class-name">Decorator</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">private</span><span> _markers</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">ElementOfInterestMarker</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">public</span><span> </span><span class="token function-variable function">decorate</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">DecorateContext</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>context</span><span class="token punctuation">.</span><span class="token property-access">viewport</span><span class="token punctuation">.</span><span class="token property-access">view</span><span class="token punctuation">.</span><span class="token method function property-access">isSpatialView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_markers</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">marker</span><span> </span><span class="token arrow operator">=&gt;</span><span> marker</span><span class="token punctuation">.</span><span class="token method function property-access">addDecoration</span><span class="token punctuation">(</span><span>context</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#_zoomtoelementcallback-method" id="_zoomtoelementcallback-method">_zoomToElementCallback method</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Our decorator needs to provide the markers with a callback function to move the view to the corresponding element, so we define the method <code>_zoomToElementCallback</code> that receives the element’s id and desired view orientation. To achieve the view change, we use the viewport’s built-in <a href="https://www.itwinjs.org/reference/core-frontend/views/viewport/zoomtoelements/" target="_blank">zoomToElements</a> method. We get the viewport instance through the <a href="https://www.itwinjs.org/reference/core-frontend/imodelapp/imodelapp/" target="_blank">IModelApp</a> singleton by doing <code>IModelApp.viewManager.selectedView</code>. Don’t forget to import it. Then, we call its zoomToElements method with the element id and additional options to specify the view orientation and to animate the view change.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterestDecorator&#x27;s _zoomToElementCallback method</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">private</span><span> </span><span class="token function-variable function">_zoomToElementCallback</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token parameter">elementId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">Id64String</span><span class="token parameter token punctuation">,</span><span class="token parameter"> viewOrientation</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">StandardViewId</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> vp </span><span class="token operator">=</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">viewManager</span><span class="token punctuation">.</span><span class="token property-access">selectedView</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>vp </span><span class="token operator">!==</span><span> undefined</span><span class="token punctuation">)</span><span>
</span></span><span><span>    vp</span><span class="token punctuation">.</span><span class="token method function property-access">zoomToElements</span><span class="token punctuation">(</span><span>elementId</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">{</span><span>standardViewId</span><span class="token punctuation">:</span><span> viewOrientation</span><span class="token punctuation">,</span><span> animateFrustumChange</span><span class="token punctuation">:</span><span> </span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#_createmarker-method" id="_createmarker-method">_createMarker method</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">Additionaly, we need a method to create a marker for an element and add it to the <code>_markers</code> array of our decorator. Recall our <code>ElementOfInterestMarker</code>&#x27;s constructor requires an image, a title, a callback function and a location in the world. Our method thus needs as inputs an instance of <code>ElementOfInterest</code>, an image, and an iModelConnection to get the element’s world location.</p><p class="iui-text-block iui-text-spacing">Let’s create a <code>_createMarker</code> method with those inputs.</p><p class="iui-text-block iui-text-spacing">We use our <code>_zoomToElementCallback</code> method to create the marker’s callback function, providing the element’s id and viewOrientation.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">const</span> <span class="token function-variable function">_onMouseButtonCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_zoomToElementCallback</span><span class="token punctuation">(</span>elementProps<span class="token punctuation">.</span>id<span class="token punctuation">,</span> elementProps<span class="token punctuation">.</span>viewOrientation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">To get the element’s world location, we can query the <a href="https://www.itwinjs.org/reference/core-frontend/imodelconnection/imodelconnection/" target="_blank">IModelConnection</a>. In our case, we fetch the element’s <a href="https://www.itwinjs.org/reference/core-common/geometry/placement3d/" target="_blank">placement</a>, which contain its location in the world, by calling <a href="https://www.itwinjs.org/reference/core-frontend/imodelconnection/imodelconnection/imodelconnection.elements/getplacements/" target="_blank">iModel.elements.getPlacements</a> with the element’s id. From the placements we get the elements center point.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">const</span> elementCenter <span class="token operator">=</span> placements<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getWorldCorners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Finally, we create a new instance of <code>ElementOfInterestMarker</code> and add it to our decorator’s <code>_markers</code> array.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">this</span><span class="token punctuation">.</span>_markers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ElementOfInterestMarker</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> elementProps<span class="token punctuation">.</span>title<span class="token punctuation">,</span> _onMouseButtonCallback<span class="token punctuation">,</span> elementCenter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">However, <code>getPlacements()</code> is an async method, so we need to wrap the previous lines inside a <code>Promise.then</code> statement.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers="">iModel<span class="token punctuation">.</span>elements<span class="token punctuation">.</span><span class="token function">getPlacements</span><span class="token punctuation">(</span>elementProps<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>placements<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Refer to the code snippet for the necessary import statements.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterestDecorator&#x27;s _createMarker method</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">private</span><span> </span><span class="token function-variable function">_createMarker</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token parameter">elementProps</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">ElementOfInterest</span><span class="token parameter token punctuation">,</span><span class="token parameter"> image</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">HTMLImageElement</span><span class="token parameter token punctuation">,</span><span class="token parameter"> iModel</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">IModelConnection</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">const</span><span> </span><span class="token function-variable function">_onMouseButtonCallback</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_zoomToElementCallback</span><span class="token punctuation">(</span><span>elementProps</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span><span> elementProps</span><span class="token punctuation">.</span><span class="token property-access">viewOrientation</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  iModel</span><span class="token punctuation">.</span><span class="token property-access">elements</span><span class="token punctuation">.</span><span class="token method function property-access">getPlacements</span><span class="token punctuation">(</span><span>elementProps</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">placements</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> elementCenter </span><span class="token operator">=</span><span> placements</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">getWorldCorners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_markers</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token keyword">new</span><span> </span><span class="token class-name">ElementOfInterestMarker</span><span class="token punctuation">(</span><span>image</span><span class="token punctuation">,</span><span> elementProps</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">,</span><span> _onMouseButtonCallback</span><span class="token punctuation">,</span><span> elementCenter</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="leading"><h3 class="iui-text-leading iui-text-spacing tutorial-heading"><a href="#constructor-1" id="constructor-1">Constructor</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">To complete our decorator class, let’s add a constructor that creates the markers from a supplied image, an array of <code>ElementOfInterest</code> and an <code>IModelConnection</code>. We simply call the <code>_createMarker</code> method for each of the elements in the supplied array.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers="">elements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_createMarker</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> image<span class="token punctuation">,</span> iModel<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Again, make sure to import the required objects.</p><p class="iui-text-block iui-text-spacing">Our decorator class is now complete, you can see the final contents of <code>ElementOfInterestDecorator.ts</code> in the code snippet.</p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">ElementOfInterestDecorator&#x27;s constructor</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">elements</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">ElementOfInterest</span><span class="token parameter token punctuation">[</span><span class="token parameter token punctuation">]</span><span class="token parameter token punctuation">,</span><span class="token parameter"> image</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">HTMLImageElement</span><span class="token parameter token punctuation">,</span><span class="token parameter"> iModel</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">IModelConnection</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  elements</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_createMarker</span><span class="token punctuation">(</span><span>element</span><span class="token punctuation">,</span><span> image</span><span class="token punctuation">,</span><span> iModel</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Finalized contents of ElementOfInterestDecorator.ts</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TYPESCRIPT</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">Id64String</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-bentley&quot;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">DecorateContext</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">Decorator</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">IModelConnection</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ElementOfInterestMarker</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./ElementOfInterestMarker&quot;</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">interface</span><span> </span><span class="token class-name">ElementOfInterest</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  id</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">Id64String</span><span class="token punctuation">,</span><span>
</span></span><span><span>  title</span><span class="token punctuation">:</span><span> </span><span class="token builtin">string</span><span class="token punctuation">,</span><span>
</span></span><span><span>  viewOrientation</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span>
</span></span><span><span></span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">class</span><span> </span><span class="token class-name">ElementOfInterestDecorator</span><span> </span><span class="token keyword">implements</span><span> </span><span class="token class-name">Decorator</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>  </span><span class="token keyword">private</span><span> _markers</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">ElementOfInterestMarker</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">private</span><span> </span><span class="token function-variable function">_zoomToElementCallback</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token parameter">elementId</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">Id64String</span><span class="token parameter token punctuation">,</span><span class="token parameter"> viewOrientation</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">StandardViewId</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> vp </span><span class="token operator">=</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">viewManager</span><span class="token punctuation">.</span><span class="token property-access">selectedView</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>vp </span><span class="token operator">!==</span><span> undefined</span><span class="token punctuation">)</span><span>
</span></span><span><span>      vp</span><span class="token punctuation">.</span><span class="token method function property-access">zoomToElements</span><span class="token punctuation">(</span><span>elementId</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">{</span><span>standardViewId</span><span class="token punctuation">:</span><span> viewOrientation</span><span class="token punctuation">,</span><span> animateFrustumChange</span><span class="token punctuation">:</span><span> </span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">private</span><span> </span><span class="token function-variable function">_createMarker</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">ElementOfInterest</span><span class="token parameter token punctuation">,</span><span class="token parameter"> image</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">HTMLImageElement</span><span class="token parameter token punctuation">,</span><span class="token parameter"> iModel</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">IModelConnection</span><span class="token parameter token punctuation">,</span><span> </span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">const</span><span> </span><span class="token function-variable function">_onMouseButtonCallback</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_zoomToElementCallback</span><span class="token punctuation">(</span><span>element</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span><span> element</span><span class="token punctuation">.</span><span class="token property-access">viewOrientation</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    iModel</span><span class="token punctuation">.</span><span class="token property-access">elements</span><span class="token punctuation">.</span><span class="token method function property-access">getPlacements</span><span class="token punctuation">(</span><span>element</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">placements</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token keyword">const</span><span> elementCenter </span><span class="token operator">=</span><span> placements</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">getWorldCorners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>      </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_markers</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token keyword">new</span><span> </span><span class="token class-name">ElementOfInterestMarker</span><span class="token punctuation">(</span><span>image</span><span class="token punctuation">,</span><span> element</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">,</span><span> _onMouseButtonCallback</span><span class="token punctuation">,</span><span> elementCenter</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">elements</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">ElementOfInterest</span><span class="token parameter token punctuation">[</span><span class="token parameter token punctuation">]</span><span class="token parameter token punctuation">,</span><span class="token parameter"> image</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">HTMLImageElement</span><span class="token parameter token punctuation">,</span><span class="token parameter"> iModel</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">IModelConnection</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    elements</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">_createMarker</span><span class="token punctuation">(</span><span>element</span><span class="token punctuation">,</span><span> image</span><span class="token punctuation">,</span><span> iModel</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token keyword">public</span><span> </span><span class="token function-variable function">decorate</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">DecorateContext</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>context</span><span class="token punctuation">.</span><span class="token property-access">viewport</span><span class="token punctuation">.</span><span class="token property-access">view</span><span class="token punctuation">.</span><span class="token method function property-access">isSpatialView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span><span>      </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">_markers</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">marker</span><span> </span><span class="token arrow operator">=&gt;</span><span> marker</span><span class="token punctuation">.</span><span class="token method function property-access">addDecoration</span><span class="token punctuation">(</span><span>context</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span><span>    </span><span class="token punctuation">}</span><span>
</span></span><span><span>  </span><span class="token punctuation">}</span><span>
</span></span><span><span></span><span class="token punctuation">}</span></span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><div class="subheading"><h3 class="iui-text-subheading iui-text-spacing tutorial-heading"><a href="#23-modifying-apptsx" id="23-modifying-apptsx">2.3 Modifying App.tsx</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h3><hr class="solid"/></div><p class="iui-text-block iui-text-spacing">We have created our marker class and our decorator class. All that remains is to create our decorator instance and supply it to the <code>Viewer</code>&#x27;s <a href="https://www.itwinjs.org/reference/core-frontend/views/viewmanager/" target="_blank">ViewManager</a> in <code>App.tsx</code>.</p><p class="iui-text-block iui-text-spacing">Our decorator’s constructor requires an array of <code>ElementOfInterest</code> from which to create markers. In this tutorial, we supply these manually.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">const</span> elements<span class="token operator">:</span> ElementOfInterest<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">"0x12c"</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"Front Door"</span><span class="token punctuation">,</span> viewOrientation<span class="token operator">:</span> StandardViewId<span class="token punctuation">.</span>Front<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">"0x1fa"</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"Small Window"</span><span class="token punctuation">,</span> viewOrientation<span class="token operator">:</span> StandardViewId<span class="token punctuation">.</span>Front<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">"0xf15"</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"Patio Door"</span><span class="token punctuation">,</span> viewOrientation<span class="token operator">:</span> StandardViewId<span class="token punctuation">.</span>Back<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">"0x26c"</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"Television"</span><span class="token punctuation">,</span> viewOrientation<span class="token operator">:</span> StandardViewId<span class="token punctuation">.</span>Right<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">In a real application, we would problably receive this information from an external source or through user interaction with our app.</p><p class="iui-text-block iui-text-spacing">The constructor also requires an image in the form of and <code>HTMLImageElement</code>. To generate it, save an <a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types" target="_blank">HTML-compatible</a> image file in the app’s <code>public</code> directory.</p><p class="iui-text-block iui-text-spacing">You can <a href="/images/tutorials/adding-decorators-and-markers/magnifying-glass.svg" download="" target="_blank">download</a> this image,</p><img src="/images/tutorials/adding-decorators-and-markers/magnifying-glass.svg" alt="Cartoony magnifying glass icon." style="display:block;width:80%;max-width:240px;margin-left:auto;margin-right:auto;margin-top:22px;margin-bottom:22px"/><p class="iui-text-block iui-text-spacing">or you may download a different compatible one from elsewhere on the internet.</p><p class="iui-text-block iui-text-spacing">Then, load the image using the utility function <a href="https://www.itwinjs.org/reference/core-frontend/rendering/imageelementfromurl/" target="_blank">imageElementFromUrl</a>, which is async.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">const</span> markerImagePromise <span class="token operator">=</span> <span class="token function">imageElementFromUrl</span><span class="token punctuation">(</span><span class="token string">"magnifying-glass.svg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Lastly, our decorator’s constructor requires an <code>IModelConnection</code>, which is set up by the <code>Viewer</code> component. Conveniently, the <code>Viewer</code> component accepts an optional <code>onIModelConnected</code> property to supply a function to be called when the connection to the iModel is established. The function is called with the <code>IModelConnection</code> as input. We define such a function, which we use to instantiate our decorator and supply it to the <code>viewManager</code>.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">const</span> <span class="token function-variable function">onIModelConnected</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>iModel<span class="token operator">:</span> IModelConnection<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> elementOfInterestdecorator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ElementOfInterestDecorator</span><span class="token punctuation">(</span>
    elements<span class="token punctuation">,</span>
    <span class="token keyword">await</span> <span class="token function">imageElementFromUrl</span><span class="token punctuation">(</span>markerImageUrl<span class="token punctuation">)</span><span class="token punctuation">,</span>
    iModel
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  IModelApp<span class="token punctuation">.</span>viewManager<span class="token punctuation">.</span><span class="token function">addDecorator</span><span class="token punctuation">(</span>elementOfInterestdecorator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></p><p class="iui-text-block iui-text-spacing">Notice our function is async because we wait on the image’s promise to be resolved.</p><p class="iui-text-block iui-text-spacing">Now, we supply the function to the <code>Viewer</code> component by setting <code>onIModelConnected={onIModelConnected}</code>. Also, make sure to add the necessary import statements.</p><p class="iui-text-block iui-text-spacing">Congratulations, your first Viewer Application using view decorations is now complete!<br/>
Make sure to try it out by running <code>npm start</code> and then opening <a href="https://localhost:3000" target="_blank">https://localhost:3000</a> in your browser.</p><video class="sample-img-xl" autoplay="" loop="" muted="" autoplay="true" alt="Screen recording of the Viewer app being used." style="display:block;width:80%;margin-left:auto;margin-right:auto"><source src="/images/tutorials/adding-decorators-and-markers/sample-app-black-bg.webm" type="video/webm"/>Your browser does not support this embedded video</video><br/><p class="iui-text-block iui-text-spacing"><strong>Note</strong>: If you wish to get rid of the black background in your app, you can turn on the default skybox by adding <code>skyboxOn: true</code> to the <code>viewCreatorOptions</code>.</p><p class="iui-text-block iui-text-spacing"><pre class="codeblock"><code class="iui-code language-typescript" data-language="typescript" data-highlighted-line-numbers=""><span class="token keyword">const</span> viewCreatorOptions <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> viewportConfigurer<span class="token operator">:</span> viewConfiguration<span class="token punctuation">,</span> skyboxOn<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>viewConfiguration<span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></p></div></div><div class="tutorial-content-section-actions dark sticky-container"><div class="subheading-placeholder"></div><div class="sticky-element"><div class="action"><div class="action-title"><p class="iui-text-block iui-text-spacing">Finalized contents of App.tsx</p><hr class="solid"/></div></div><div class="action"><div class="iui-root transparent-container itwinui-code-block-container" data-iui-theme="light" data-iui-contrast="default"><div class="iui-codeblock copy-code-block dark" data-theme="dark"><div class="iui-title-bar"><span class="iui-title">TSX</span><button class="iui-button" data-iui-variant="borderless" type="button" aria-label="Copy"><span class="iui-button-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m5 10h-2a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v2h1v-2a2 2 0 0 0 -2-2h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h2zm8-4a1 1 0 0 1 1 1v7a1 1 0 0 1 -1 1h-5a1 1 0 0 1 -1-1v-7a1 1 0 0 1 1-1zm0-1h-5a2 2 0 0 0 -2 2v7a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-7a2 2 0 0 0 -2-2z"></path></svg></span><span>Copy</span></button></div><pre class="iui-codeblock-content"><pre style="background-color:#fff"><code><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token keyword">import</span><span> </span><span class="token string">&quot;./App.scss&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">BrowserAuthorizationClient</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/browser-authorization&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">FitViewTool</span><span class="token punctuation">,</span><span> imageElementFromUrl</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">IModelConnection</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token keyword">type</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ScreenViewport</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-frontend&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">FillCentered</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/core-react&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ProgressLinear</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/itwinui-react&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  useAccessToken</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token maybe-class-name">Viewer</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token maybe-class-name">ViewerPerformance</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;@itwin/web-viewer-react&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token maybe-class-name">React</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">{</span><span> useCallback</span><span class="token punctuation">,</span><span> useEffect</span><span class="token punctuation">,</span><span> useMemo</span><span class="token punctuation">,</span><span> useState </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> history </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./history&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">import</span><span> </span><span class="token punctuation">{</span><span> </span><span class="token maybe-class-name">ElementOfInterest</span><span class="token punctuation">,</span><span> </span><span class="token maybe-class-name">ElementOfInterestDecorator</span><span> </span><span class="token punctuation">}</span><span> </span><span class="token keyword">from</span><span> </span><span class="token string">&quot;./ElementOfInterestDecorator&quot;</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">const</span><span> </span><span class="token maybe-class-name">App</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access token maybe-class-name">FC</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> </span><span class="token punctuation">[</span><span>iModelId</span><span class="token punctuation">,</span><span> setIModelId</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token function">useState</span><span class="token punctuation">(</span><span>process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_IMODEL_ID</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> </span><span class="token punctuation">[</span><span>iTwinId</span><span class="token punctuation">,</span><span> setITwinId</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token function">useState</span><span class="token punctuation">(</span><span>process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_ITWIN_ID</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> accessToken </span><span class="token operator">=</span><span> </span><span class="token function">useAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> authClient </span><span class="token operator">=</span><span> </span><span class="token function">useMemo</span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">new</span><span> </span><span class="token class-name">BrowserAuthorizationClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        scope</span><span class="token punctuation">:</span><span> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_AUTH_CLIENT_SCOPES</span><span> </span><span class="token operator">?</span><span class="token operator">?</span><span> </span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        clientId</span><span class="token punctuation">:</span><span> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_AUTH_CLIENT_CLIENT_ID</span><span> </span><span class="token operator">?</span><span class="token operator">?</span><span> </span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        redirectUri</span><span class="token punctuation">:</span><span> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_AUTH_CLIENT_REDIRECT_URI</span><span> </span><span class="token operator">?</span><span class="token operator">?</span><span> </span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        postSignoutRedirectUri</span><span class="token punctuation">:</span><span> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_AUTH_CLIENT_LOGOUT_URI</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        responseType</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        authority</span><span class="token punctuation">:</span><span> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_AUTH_AUTHORITY</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> login </span><span class="token operator">=</span><span> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token keyword">try</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">await</span><span> authClient</span><span class="token punctuation">.</span><span class="token method function property-access">signInSilent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">}</span><span> </span><span class="token keyword">catch</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">await</span><span> authClient</span><span class="token punctuation">.</span><span class="token method function property-access">signIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>authClient</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token keyword">void</span><span> </span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>login</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>accessToken</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">const</span><span> urlParams </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">location</span><span class="token punctuation">.</span><span class="token property-access">search</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>urlParams</span><span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span><span class="token string">&quot;iTwinId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token function">setITwinId</span><span class="token punctuation">(</span><span>urlParams</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;iTwinId&quot;</span><span class="token punctuation">)</span><span> </span><span class="token keyword">as</span><span> </span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token punctuation">}</span><span> </span><span class="token keyword">else</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span class="token operator">!</span><span>process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_ITWIN_ID</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token keyword">throw</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token string">&quot;Please add a valid iTwin ID in the .env file and restart the application or add it to the iTwinId query parameter in the url and refresh the page. See the README for more information.&quot;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>urlParams</span><span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span><span class="token string">&quot;iModelId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token function">setIModelId</span><span class="token punctuation">(</span><span>urlParams</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;iModelId&quot;</span><span class="token punctuation">)</span><span> </span><span class="token keyword">as</span><span> </span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token punctuation">}</span><span> </span><span class="token keyword">else</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span class="token operator">!</span><span>process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">IMJS_IMODEL_ID</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token keyword">throw</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token string">&quot;Please add a valid iModel ID in the .env file and restart the application or add it to the iModelId query parameter in the url and refresh the page. See the README for more information.&quot;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>accessToken</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>accessToken </span><span class="token operator">&amp;&amp;</span><span> iTwinId </span><span class="token operator">&amp;&amp;</span><span> iModelId</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      history</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token template-string token template-punctuation string">`</span><span class="token template-string token string">?iTwinId=</span><span class="token template-string token interpolation token interpolation-punctuation punctuation">${</span><span class="token template-string token interpolation">iTwinId</span><span class="token template-string token interpolation token interpolation-punctuation punctuation">}</span><span class="token template-string token string">&amp;iModelId=</span><span class="token template-string token interpolation token interpolation-punctuation punctuation">${</span><span class="token template-string token interpolation">iModelId</span><span class="token template-string token interpolation token interpolation-punctuation punctuation">}</span><span class="token template-string token template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span>accessToken</span><span class="token punctuation">,</span><span> iTwinId</span><span class="token punctuation">,</span><span> iModelId</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token comment">/** NOTE: This function will execute the &quot;Fit View&quot; tool after the iModel is loaded into the Viewer.
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">   * This will provide an &quot;optimal&quot; view of the model. However, it will override any default views that are
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">   * stored in the iModel. Delete this function and the prop that it is passed to if you prefer
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">   * to honor default views when they are present instead (the Viewer will still apply a similar function to iModels that do not have a default view).
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token comment">   */</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> viewConfiguration </span><span class="token operator">=</span><span> </span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">viewPort</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">ScreenViewport</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token comment">// default execute the fitview tool and use the iso standard view after tile trees are loaded</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token keyword">const</span><span> </span><span class="token function-variable function">tileTreesLoaded</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">return</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token parameter token punctuation">,</span><span class="token parameter"> reject</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token keyword">const</span><span> start </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token keyword">const</span><span> intvl </span><span class="token operator">=</span><span> </span><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>viewPort</span><span class="token punctuation">.</span><span class="token property-access">areAllTileTreesLoaded</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token maybe-class-name">ViewerPerformance</span><span class="token punctuation">.</span><span class="token method function property-access">addMark</span><span class="token punctuation">(</span><span class="token string">&quot;TilesLoaded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token keyword">void</span><span> </span><span class="token maybe-class-name">ViewerPerformance</span><span class="token punctuation">.</span><span class="token method function property-access">addAndLogMeasure</span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>              </span><span class="token string">&quot;TileTreesLoaded&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>              </span><span class="token string">&quot;ViewerStarting&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>              </span><span class="token string">&quot;TilesLoaded&quot;</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>              viewPort</span><span class="token punctuation">.</span><span class="token property-access">numReadyTiles</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token function">clearInterval</span><span class="token punctuation">(</span><span>intvl</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token keyword">const</span><span> now </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token comment">// after 20 seconds, stop waiting and fit the view</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token keyword">if</span><span> </span><span class="token punctuation">(</span><span>now</span><span class="token punctuation">.</span><span class="token method function property-access">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token operator">-</span><span> start</span><span class="token punctuation">.</span><span class="token method function property-access">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token operator">&gt;</span><span> </span><span class="token number">20000</span><span class="token punctuation">)</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>            </span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>          </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token function">tileTreesLoaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">void</span><span> </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">tools</span><span class="token punctuation">.</span><span class="token method function property-access">run</span><span class="token punctuation">(</span><span class="token maybe-class-name">FitViewTool</span><span class="token punctuation">.</span><span class="token property-access">toolId</span><span class="token punctuation">,</span><span> viewPort</span><span class="token punctuation">,</span><span> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      viewPort</span><span class="token punctuation">.</span><span class="token property-access">view</span><span class="token punctuation">.</span><span class="token method function property-access">setStandardRotation</span><span class="token punctuation">(</span><span class="token maybe-class-name">StandardViewId</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Iso</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> viewCreatorOptions </span><span class="token operator">=</span><span> </span><span class="token function">useMemo</span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span> viewportConfigurer</span><span class="token punctuation">:</span><span> viewConfiguration</span><span class="token punctuation">,</span><span> skyboxOn</span><span class="token punctuation">:</span><span> </span><span class="token boolean">true</span><span> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">[</span><span>viewConfiguration</span><span class="token punctuation">]</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token comment">/** 
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">  * List of model elements we will create markers for. 
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">  * In a typical application, we would get these by querying the iModel or from an external source. 
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token comment">  */</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> elements</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">ElementOfInterest</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span> </span><span class="token operator">=</span><span> </span><span class="token punctuation">[</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">{</span><span>id</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;0x12c&quot;</span><span class="token punctuation">,</span><span> title</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;Front Door&quot;</span><span class="token punctuation">,</span><span> viewOrientation</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Front</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">{</span><span>id</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;0x1fa&quot;</span><span class="token punctuation">,</span><span> title</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;Small Window&quot;</span><span class="token punctuation">,</span><span> viewOrientation</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Front</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">{</span><span>id</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;0xf15&quot;</span><span class="token punctuation">,</span><span> title</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;Patio Door&quot;</span><span class="token punctuation">,</span><span> viewOrientation</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Back</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">{</span><span>id</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;0x26c&quot;</span><span class="token punctuation">,</span><span> title</span><span class="token punctuation">:</span><span> </span><span class="token string">&quot;Television&quot;</span><span class="token punctuation">,</span><span> viewOrientation</span><span class="token punctuation">:</span><span> </span><span class="token maybe-class-name">StandardViewId</span><span class="token punctuation">.</span><span class="token property-access token maybe-class-name">Right</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">]</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token comment">/** 
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">  * Our marker image
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token comment">  */</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> markerImagePromise </span><span class="token operator">=</span><span> </span><span class="token function">imageElementFromUrl</span><span class="token punctuation">(</span><span class="token string">&quot;magnifying-glass.svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token comment">/**
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">  * Function we will be called when the iModelConnection is established.
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">  * We provide our decorator with the list of elements we wish to create markers for, 
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">  * then we add our decorator to the viewManager. 
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token comment">  */</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">const</span><span> </span><span class="token function-variable function">onIModelConnected</span><span> </span><span class="token operator">=</span><span> </span><span class="token keyword">async</span><span> </span><span class="token punctuation">(</span><span class="token parameter">iModel</span><span class="token parameter token punctuation">:</span><span class="token parameter"> </span><span class="token parameter token maybe-class-name">IModelConnection</span><span class="token punctuation">)</span><span> </span><span class="token arrow operator">=&gt;</span><span> </span><span class="token punctuation">{</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token keyword">const</span><span> elementOfInterestdecorator </span><span class="token operator">=</span><span> </span><span class="token keyword">new</span><span> </span><span class="token class-name">ElementOfInterestDecorator</span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      elements</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token keyword">await</span><span> markerImagePromise</span><span class="token punctuation">,</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">      iModel
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token maybe-class-name">IModelApp</span><span class="token punctuation">.</span><span class="token property-access">viewManager</span><span class="token punctuation">.</span><span class="token method function property-access">addDecorator</span><span class="token punctuation">(</span><span>elementOfInterestdecorator</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">}</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token keyword">return</span><span> </span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>    </span><span class="token tag token tag token punctuation">&lt;</span><span class="token tag token tag">div</span><span class="token tag"> </span><span class="token tag token attr-name">className</span><span class="token tag token attr-value token punctuation">=</span><span class="token tag token attr-value token punctuation">&quot;</span><span class="token tag token attr-value">viewer-container</span><span class="token tag token attr-value token punctuation">&quot;</span><span class="token tag token punctuation">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">      </span><span class="token punctuation">{</span><span class="token operator">!</span><span>accessToken </span><span class="token operator">&amp;&amp;</span><span> </span><span class="token punctuation">(</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>        </span><span class="token tag token tag token punctuation">&lt;</span><span class="token tag token tag token class-name">FillCentered</span><span class="token tag token punctuation">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">          </span><span class="token tag token tag token punctuation">&lt;</span><span class="token tag token tag">div</span><span class="token tag"> </span><span class="token tag token attr-name">className</span><span class="token tag token attr-value token punctuation">=</span><span class="token tag token attr-value token punctuation">&quot;</span><span class="token tag token attr-value">signin-content</span><span class="token tag token attr-value token punctuation">&quot;</span><span class="token tag token punctuation">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">            </span><span class="token tag token tag token punctuation">&lt;</span><span class="token tag token tag token class-name">ProgressLinear</span><span class="token tag"> </span><span class="token tag token attr-name">indeterminate</span><span class="token tag token script language-javascript token script-punctuation punctuation">=</span><span class="token tag token script language-javascript token punctuation">{</span><span class="token tag token script language-javascript token boolean">true</span><span class="token tag token script language-javascript token punctuation">}</span><span class="token tag"> </span><span class="token tag token attr-name">labels</span><span class="token tag token script language-javascript token script-punctuation punctuation">=</span><span class="token tag token script language-javascript token punctuation">{</span><span class="token tag token script language-javascript token punctuation">[</span><span class="token tag token script language-javascript token string">&quot;Signing in...&quot;</span><span class="token tag token script language-javascript token punctuation">]</span><span class="token tag token script language-javascript token punctuation">}</span><span class="token tag"> </span><span class="token tag token punctuation">/&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">          </span><span class="token tag token tag token punctuation">&lt;/</span><span class="token tag token tag">div</span><span class="token tag token punctuation">&gt;</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">        </span><span class="token tag token tag token punctuation">&lt;/</span><span class="token tag token tag token class-name">FillCentered</span><span class="token tag token punctuation">&gt;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>      </span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">      &lt;Viewer
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">        iTwinId=</span><span class="token punctuation">{</span><span>iTwinId</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">        iModelId=</span><span class="token punctuation">{</span><span>iModelId</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">        authClient=</span><span class="token punctuation">{</span><span>authClient</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">        viewCreatorOptions=</span><span class="token punctuation">{</span><span>viewCreatorOptions</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">        enablePerformanceMonitors=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token plain-text"> // see description in the README (https://www.npmjs.com/package/@itwin/desktop-viewer-react)
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">        onIModelConnected=</span><span class="token punctuation">{</span><span>onIModelConnected</span><span class="token punctuation">}</span><span class="token plain-text"> // The viewer calls this function when the connection is established
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">      /&gt;
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span class="token plain-text">    </span><span class="token tag token tag token punctuation">&lt;/</span><span class="token tag token tag">div</span><span class="token tag token punctuation">&gt;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span>  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment"><span></span><span class="token keyword">export</span><span> </span><span class="token keyword">default</span><span> </span><span class="token maybe-class-name">App</span><span class="token punctuation">;</span><span>
</span></span><span class="token plain-text token plain-text token comment token comment token comment token comment token comment token comment token comment token comment token comment">
</span></code></pre></pre></div></div></div></div></div></div><div class="tutorial-content-section"><div class="tutorial-content-section-description sticky-container"><div class="sticky-element"><h2 class="iui-text-title iui-text-spacing tutorial-heading title"><a href="#more-resources-that-you-may-like" id="more-resources-that-you-may-like">More resources that you may like</a><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="permalink"><path d="m7.2 8.9c.8.8 2.2.8 3 0l3-3c.8-.8.8-2.2 0-3s-2.2-.8-3 0l-1 1c-.9-.3-1.8-.4-2.7-.3l2.3-2.3c1.7-1.7 4.3-1.7 6 0 1.6 1.7 1.6 4.4 0 6l-3 3c-3.6 3.6-6.5-.5-6.7-.8l1.4-1.4zm3.7-2.4c-.2-.3-.3-.4-.7-.8-1.6-1.7-4.2-1.7-5.9.1l-3 3c-1.7 1.7-1.7 4.3 0 6s4.3 1.7 6 0l2.3-2.3c-1 .2-1.9.1-2.8-.2l-1.1 1.1c-.8.8-2.2.8-3 0s-.8-2.2 0-3l3-3c1.7-1.7 3.5.5 3.6.8z"></path></svg></h2><div style="display:flex;gap:22px;flex-wrap:wrap;margin-bottom:22px"><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://www.itwinjs.org/learning/frontend/viewdecorations/"><span class="iui-tile-name-label">View Decorations</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>Detailed explanation of View Decorations and their uses in the iTwin.js Library.</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://www.itwinjs.org/learning/frontend/markers/"><span class="iui-tile-name-label">Markers</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>Learn more about the iTwin.js Library&#x27;s Marker component.</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://www.itwinjs.org/learning/display/"><span class="iui-tile-name-label">The Display System</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>Dive deeper into the iTwin.js Library&#x27;s display system.</div></div></div></div><div class="iui-tile tutorial-tile resource-tile"><div class="iui-tile-content"><div class="iui-tile-name"><a target="_blank" href="https://www.itwinjs.org/sandboxes/RaphaelMelancon/Simple%20Marker%20Sample%20App"><span class="iui-tile-name-label">Simple Marker Sample App</span><svg class="new-window-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M16 0v5.4l-1.9-2-8.4 8.4-1.5-1.5 8.3-8.4L10.6 0M16 16V7h-1v8H1V1h8V0H0v16z"></path></svg></a></div><div class="iui-tile-description"><div>A community sandbox implementing the iTwin Viewer Application developed in this tutorial.</div></div></div></div></div></div></div></div></div></div></div></main><div class="iui-root transparent-container" data-iui-theme="light" data-iui-contrast="default"><footer class="iui-legal-footer footer"><ul class="iui-legal-footer-list"><li class="iui-legal-footer-item">© 2024 Bentley Systems, Incorporated</li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="/terms-of-service" target="_blank" rel="noreferrer">Terms of service</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/privacy-policy" target="_blank" rel="noreferrer">Privacy</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/terms-of-use-and-select-online-agreement" target="_blank" rel="noreferrer">Terms of use</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://www.bentley.com/en/cookie-policy" target="_blank" rel="noreferrer">Cookies</a></li><li class="iui-legal-footer-separator" aria-hidden="true"></li><li class="iui-legal-footer-item"><a href="https://connect.bentley.com/Legal" target="_blank" rel="noreferrer">Legal notices</a></li></ul></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/tutorials/adding-decorators-and-markers","query":{},"buildId":"4I2YaoF9Uf026tEb78Qcd","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>