"use strict";
(function() {
var exports = {};
exports.id = 3500;
exports.ids = [3500];
exports.modules = {

/***/ 15113:
/***/ (function(module) {

module.exports = require("@azure/identity");

/***/ }),

/***/ 21748:
/***/ (function(module) {

module.exports = require("@azure/keyvault-secrets");

/***/ }),

/***/ 75214:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/401");

/***/ }),

/***/ 23563:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/403");

/***/ }),

/***/ 5142:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/404");

/***/ }),

/***/ 26595:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/500");

/***/ }),

/***/ 75777:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/502");

/***/ }),

/***/ 4142:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/503");

/***/ }),

/***/ 42777:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/Error");

/***/ }),

/***/ 29165:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/Redirect");

/***/ }),

/***/ 46573:
/***/ (function(module) {

module.exports = require("@itwin/itwinui-illustrations-react/cjs/illustrations/TimedOut");

/***/ }),

/***/ 44787:
/***/ (function(module) {

module.exports = require("@tippyjs/react");

/***/ }),

/***/ 59003:
/***/ (function(module) {

module.exports = require("classnames");

/***/ }),

/***/ 11004:
/***/ (function(module) {

module.exports = require("js-beautify");

/***/ }),

/***/ 3280:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/app-router-context.js");

/***/ }),

/***/ 92796:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/head-manager-context.js");

/***/ }),

/***/ 34014:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/i18n/normalize-locale-path.js");

/***/ }),

/***/ 78524:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/is-plain-object.js");

/***/ }),

/***/ 95832:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/loadable.js");

/***/ }),

/***/ 78020:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/mitt.js");

/***/ }),

/***/ 64406:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/page-path/denormalize-page-path.js");

/***/ }),

/***/ 24964:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router-context.js");

/***/ }),

/***/ 11751:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix.js");

/***/ }),

/***/ 10299:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/format-next-pathname-info.js");

/***/ }),

/***/ 23938:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/format-url.js");

/***/ }),

/***/ 29565:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/get-asset-path-from-route.js");

/***/ }),

/***/ 35789:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/get-next-pathname-info.js");

/***/ }),

/***/ 1428:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/is-dynamic.js");

/***/ }),

/***/ 28854:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/parse-path.js");

/***/ }),

/***/ 91292:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/parse-relative-url.js");

/***/ }),

/***/ 34567:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/path-has-prefix.js");

/***/ }),

/***/ 80979:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/querystring.js");

/***/ }),

/***/ 93297:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash.js");

/***/ }),

/***/ 36052:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/resolve-rewrites.js");

/***/ }),

/***/ 84226:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/route-matcher.js");

/***/ }),

/***/ 95052:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/router/utils/route-regex.js");

/***/ }),

/***/ 59232:
/***/ (function(module) {

module.exports = require("next/dist/shared/lib/utils.js");

/***/ }),

/***/ 16689:
/***/ (function(module) {

module.exports = require("react");

/***/ }),

/***/ 66405:
/***/ (function(module) {

module.exports = require("react-dom");

/***/ }),

/***/ 62154:
/***/ (function(module) {

module.exports = require("react-table");

/***/ }),

/***/ 84466:
/***/ (function(module) {

module.exports = require("react-transition-group");

/***/ }),

/***/ 9926:
/***/ (function(module) {

module.exports = import("zod");;

/***/ }),

/***/ 14408:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

__webpack_require__.a(module, async function (__webpack_handle_async_dependencies__, __webpack_async_result__) { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ handler; }
/* harmony export */ });
/* harmony import */ var _server_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3141);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(35797);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_env__WEBPACK_IMPORTED_MODULE_0__]);
_server_env__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];


const ALLOWED_METHODS = ['POST'];
const SECRET_HEADER_NAME = 'secret'; // Re-validates the content on the given path.
// POST: /api/revalidate?path={path}
//
// Query parameters:
// [Required] path (e.g. '/apis/users/overview').
//
// Headers:
// [Required] secret (a string value in app configuration - RevalidationSecret).

async function handler(request, response) {
  if (!ALLOWED_METHODS.includes(request.method ?? '')) {
    return response.status(404).end();
  } // Check for secret to confirm this is a valid request


  const {
    path
  } = request.query;
  const secret = request.headers[SECRET_HEADER_NAME];

  if (!secret || secret !== _server_env__WEBPACK_IMPORTED_MODULE_0__/* ["default"].REVALIDATION_SECRET */ .Z.REVALIDATION_SECRET) {
    return response.status(401).end();
  }

  if (!path) {
    return response.status(400).json({
      message: 'Missing required query parameter: "path".'
    });
  }

  const pathValue = Array.isArray(path) ? path[0] : path;

  try {
    // this should be the actual path not a rewritten path
    // e.g. for "/blog/[slug]/" this should be "/blog/post-1/"
    await response.revalidate(_utils__WEBPACK_IMPORTED_MODULE_1__/* .Utils.ensureTrailingSlash */ .c.ensureTrailingSlash(pathValue));
    return response.status(200).json({
      message: 'Revalidation succeeded.',
      revalidated: true
    });
  } catch (err) {
    // If there was an error, Next.js will continue
    // to show the last successfully generated page
    return response.status(500).json({
      message: `Revalidation failed. Error: ${err}`,
      revalidated: false
    });
  }
}
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 3141:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

__webpack_require__.a(module, async function (__webpack_handle_async_dependencies__, __webpack_async_result__) { try {
/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9926);
/* harmony import */ var _azure_identity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15113);
/* harmony import */ var _azure_identity__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_azure_identity__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _azure_keyvault_secrets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21748);
/* harmony import */ var _azure_keyvault_secrets__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_azure_keyvault_secrets__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _zod_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72581);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _zod_utils__WEBPACK_IMPORTED_MODULE_3__]);
([zod__WEBPACK_IMPORTED_MODULE_0__, _zod_utils__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);




if (!process.env.KEY_VAULT_URL) throw new Error('KEY_VAULT_URL is not provided.');
if (!process.env.REVALIDATION_SECRET) throw new Error('REVALIDATION_SECRET reference to key vault is not provided.');
if (!process.env.SEQ_API_KEY) throw new Error('SEQ_API_KEY reference to key vault is not provided.');
const schema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({
  ENVIRONMENT: (0,_zod_utils__WEBPACK_IMPORTED_MODULE_3__/* .string */ .Z_)('ENVIRONMENT'),
  REVALIDATION_SECRET: (0,_zod_utils__WEBPACK_IMPORTED_MODULE_3__/* .secret */ .zY)('REVALIDATION_SECRET'),
  SEQ_API_KEY: (0,_zod_utils__WEBPACK_IMPORTED_MODULE_3__/* .secret */ .zY)('SEQ_API_KEY'),
  SEQ_URL: (0,_zod_utils__WEBPACK_IMPORTED_MODULE_3__/* .url */ .HQ)('SEQ_URL')
});
const credential = new _azure_identity__WEBPACK_IMPORTED_MODULE_1__.DefaultAzureCredential();
const client = new _azure_keyvault_secrets__WEBPACK_IMPORTED_MODULE_2__.SecretClient(process.env.KEY_VAULT_URL, credential);
const data = Promise.all([client.getSecret(process.env.REVALIDATION_SECRET), client.getSecret(process.env.SEQ_API_KEY)]).then(secrets => {
  const envData = {
    ENVIRONMENT: process.env.ENVIRONMENT,
    REVALIDATION_SECRET: secrets[0].value,
    SEQ_API_KEY: secrets[1].value,
    SEQ_URL: process.env.SEQ_URL
  };
  const env = schema.safeParse(envData);
  if (!env.success) throw new Error(JSON.stringify(env.error.issues, null, 2));
  return env.data;
});
/* harmony default export */ __webpack_exports__["Z"] = (await data);
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } }, 1);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
var __webpack_exports__ = __webpack_require__.X(0, [1505,2196,5217,222], function() { return __webpack_exec__(14408); });
module.exports = __webpack_exports__;

})();