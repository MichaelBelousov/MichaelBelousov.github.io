(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5139],{69687:function(e,t,n){"use strict";n(67294);var r=n(94184),a=n.n(r),o=n(72589),i=n(24506),s=(n(92939),n(85893));t.Z=function(e){var t=e.onSave,n=e.onCancel,r=e.message,l=e.className,c=e.submitLabel,u=void 0===c?"Save":c,d=e.cancelLabel,p=void 0===d?"Cancel":d;return(0,s.jsxs)("div",{id:"actions",className:a()("action-panel",l),children:[r&&(0,s.jsx)("div",{className:"agreement-section",children:(0,s.jsx)(o.x,{children:r})}),(0,s.jsx)(i.z,{size:"large",styleType:"cta",type:"submit",id:"save-app",onClick:t,children:u}),(0,s.jsx)(i.z,{size:"large",styleType:"default",type:"button",id:"cancel",onClick:n,children:p})]})}},31993:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});n(36581);var r=n(26034),a=n(85893);function o(e){var t=e.isFullPage,n=void 0!==t&&t,o=e.hasSecondaryHeader,i=void 0!==o&&o,s=(0,a.jsx)("div",{className:"spinner-page-overlay",children:(0,a.jsx)(r.p,{indeterminate:!0})});return n?(0,a.jsx)("div",{className:i?"full-page-with-secondary-header-overlay-container":"full-page-overlay-container",children:s}):s}},70468:function(e,t,n){"use strict";var r=n(92809),a=(n(67294),n(85893));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){return(0,a.jsx)("svg",i(i({},e),{},{children:(0,a.jsx)("path",{d:"M14.481 20.364h.104a1.981 1.981 0 0 1-1.99-1.864H15v-3H1v-11a1.001 1.001 0 0 1 1-1h17a1.001 1.001 0 0 1 1 1v3h1v-3a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6.444c-.002.31-.182 1.604-1.99 1.864h.068a.563.563 0 0 0 0 1.122h7.96a.563.563 0 0 0 0-1.122zM10.5 17.5a.5.5 0 1 1 .5-.5.5.5 0 0 1-.5.5zm12-9h-5A1.5 1.5 0 0 0 16 10v10a1.5 1.5 0 0 0 1.5 1.5h5A1.5 1.5 0 0 0 24 20V10a1.5 1.5 0 0 0-1.5-1.5zM23 20a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5V10a.5.5 0 0 1 .5-.5h1.016v.5a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-.5h.984a.5.5 0 0 1 .5.5z"})}))};s.defaultProps={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};t.Z=function(e){return(0,a.jsx)(s,i({},e))}},70803:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var r=n(67294),a=n(55475),o=n(35818);function i(){var e=(0,o.nu)(),t=(0,o.WQ)();(0,r.useEffect)((function(){!e&&t&&a.O.signin()}),[e,t])}},79036:function(e,t,n){"use strict";n.d(t,{Iv:function(){return r}});var r,a=n(67294),o=n(41283),i=n.n(o),s=n(51477);!function(e){e.AppName="applicationName",e.ImodelName="iModelName",e.ApiGroups="apiGroups",e.AppType="appType",e.ImodelType="iModelType",e.RedirectURI="redirectURI",e.PostLogoutRedirectURI="postLogoutRedirectURI",e.Scopes="scopes",e.Owner="owner",e.IModelFile="iModelFile"}(r||(r={}));var l={UriIsSecure:{message:"Your URI is not allowed. URI must start with HTTPS or HTTP (only for loopback URIs).",rule:function(e){var t=RegExp("^http://(localhost:?)|(127.0.0.1:?)|(::1:?)");return!e.startsWith("http://")||t.test(e)}},AllowedUriScheme:{message:"URI scheme is not allowed.",rule:function(e){return!RegExp("^(javascript:)|(file:)|(data:)|(mailto:)|(ftp:)|(blob:)|(about:)|(ssh:)|(tel:)|(view-source:)|(ws:)|(wss:)").test(e)}},NoFragments:{message:"Fragments are not allowed.",rule:function(e){return-1===e.indexOf("#")}},IsWellFormedUri:{message:"URI is not absolute or well formed.",rule:function(e){return s.c.IsWellFormedUri(e)}},HasAtLeastOneAPIAssociation:{message:"Please select at least one API association.",rule:function(e){return e.filter((function(e){return e.isSelected})).length>0}},HasAtLeastOneScope:{message:"Please select at least one scope from any API association.",rule:function(e){return e.length>0},required:!0},AppTypeIsSelected:{message:"Please select application type.",rule:function(e){return void 0!==e}},ImodelSourceIsSelected:{message:"Please select iModel source.",rule:function(e){return void 0!==e}},MaxStringSize:{message:"The :field may not be greater than :max characters.",rule:function(e,t){return e.length<=parseFloat(t[0])},messageReplace:function(e,t){return e.replace(":max",t[0]).replace(":field",t[1])}},NoInvalidChars:{message:"Contains invalid characters.",rule:function(e){return!RegExp(/[<>/\\&#']/g).test(e)}},AllowedFileExtensions:{message:"This file type is not allowed.",rule:function(e,t){return t.some((function(t){return e.name.endsWith(t)}))}},NoSpacesInFileName:{message:"File name cannot contain spaces.",rule:function(e){return!e.name.match(/ /)}},WithinOneYearTimeFrame:{message:"Date must not be set in the past and not more than 1 year in the future.",rule:function(e){var t=new Date;return e.getTime()<t.getTime()+31536e6&&t.getTime()<e.getTime()}},ValidPhoneNumber:{message:"Number is in the wrong format.",rule:function(e){return!!e.match(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/g)}}},c={required:"This field is required."};t.ZP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=(0,a.useState)(!1),r=n[0],o=n[1],s=(0,a.useState)(),u=(s[0],s[1]),d=(0,a.useRef)(new(i())({messages:e,validators:t,autoForceUpdate:{forceUpdate:function(){return u((function(e){return!e}))}}}));return(0,a.useEffect)((function(){r&&d.current.showMessages()}),[r]),[d.current,o]}},16813:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var r=n(70803),a=n(86818),o=n(30266),i=n(61565),s=n(809),l=n.n(s),c=(n(57031),n(67294)),u=n(11163),d=n(25934),p=n(5607),m=n(31552),f=n(45274),v=n(29e3),h=n(72589),g=n(23098),y=n(88524),x=n(83633),j=n(24506),b=n(67685),w=n(15390),I=n(80853),O=n(61686),S=n(79036),M=n(35818),P=n(68216),N=n(25997),F=n(92809),T=n(85893);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){return(0,T.jsx)("svg",Z(Z({},e),{},{children:(0,T.jsx)("path",{d:"m17 14.5 1-.75v2.75a.522.522 0 0 1-.5.5H12v1l-2-1.5 2-1.5v1h5ZM11 13h5v1l2-1.5-2-1.5v1h-5.5a.522.522 0 0 0-.5.5v2.75l1-.75Zm2.15-8.03c-.05-.05-.11-.1-.16-.15l-.18-.12-4.15-2.47a1.67 1.67 0 0 0-1.7 0L2.81 4.7l-.18.12c-.06.05-.11.1-.16.15A1.589 1.589 0 0 0 2 6.1v5.06a1.65 1.65 0 0 0 .81 1.42l4.15 2.47a1.67 1.67 0 0 0 1.7 0l.34-.2v-1.63l-1.06.63a.243.243 0 0 1-.26 0l-2.26-1.34c-.04-.05-.106-.107-.1-.18v-1.21a.205.205 0 0 1 .31-.18l1.35.75V8.84l-.73-.47a.193.193 0 0 1-.1-.17V7a.205.205 0 0 1 .21-.21.193.193 0 0 1 .1.03l2.08 1.15a.194.194 0 0 1 .1.17v3.55l1.35-.75a.181.181 0 0 1 .1-.043h3.53V6.12a1.618 1.618 0 0 0-.47-1.15ZM7.81 6.46a.88.88 0 1 1 .88-.88.875.875 0 0 1-.88.88Z"})}))};E.defaultProps={"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"};var C=function(e){return(0,T.jsx)(E,Z({},e))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,F.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){return(0,T.jsxs)("svg",A(A({},e),{},{children:[(0,T.jsx)("path",{d:"M4.09 9.491c1.051 0 6.231.341 6.333 1.505.164 1.866-3.538 2.357-5.82 2.38-.82 0-2.845-.27-2.845-1.236 0-.47.563-.965.897-1.28ZM12.84 0H16v1.147A4.83 4.83 0 0 0 12.84 0Z"}),(0,T.jsx)("path",{d:"M16 3.886V16H.005L0 14.524a12.567 12.567 0 0 0 4.448.814c4.417.164 8.88-1.264 8.802-4.4-.054-2.155-4.851-3.015-7.792-3.094l.212-.228c4.941.122 9.02-.587 10.33-3.73Z"}),(0,T.jsx)("path",{d:"M.005 10.541V0h8.849a17.694 17.694 0 0 0-4.27.86A17.663 17.663 0 0 0 1.52 2.114C.834 2.533.018 3.228.199 3.979c.174.726 2.238-.18 3.121-.437a52.184 52.184 0 0 1 7.15-1.413c2.974-.18 3.693.606 3.718 1.1-.061.737-1.308 2.132-7.103 2.828 2.129-2.178 2.308-2.47 2.488-2.85-2.564 0-3.749 1.482-5.415 2.897a6.678 6.678 0 0 0-3.113.88c-.349.282-.846.545-.548 1.037.215.355 1.132.188 1.445.208-.71.82-1.536 1.818-1.937 2.313Z"})]}))};R.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"};var U,z=function(e){return(0,T.jsx)(R,A({},e))},B=n(70468);!function(e){e.BentleySample="bentleysample",e.LocalFile="localfile",e.EmptyImodel="emptyimodel"}(U||(U={}));var D=function(){function e(){(0,P.Z)(this,e)}return(0,N.Z)(e,null,[{key:"getiModelTypes",get:function(){return[{name:"Bentley Sample",type:U.BentleySample,icon:(0,T.jsx)(z,{}),tooltip:"Create a new iModel by copying one of the existing Bentley supplied sample iModels."},{name:"Local File",type:U.LocalFile,icon:(0,T.jsx)(B.Z,{}),tooltip:"Create a new iModel by converting a single file uploaded from your computer."},{name:"Empty iModel",type:U.EmptyImodel,icon:(0,T.jsx)(C,{}),tooltip:(0,T.jsxs)("div",{children:["Use"," ",(0,T.jsx)("a",{href:"https://www.bentley.com/en/Products/Product-Line/Digital-Twins/iTwin-Synchronizer",target:"_blank",onClick:function(e){e.stopPropagation()},children:"iTwin Synchronizer"})," ","to populate the iModel by converting a set of files from your local computer."]})}]}}]),e}(),_=n(3027),q=n(64992);var H=function(e){var t=e.value,n=e.setValue,r=e.errorMessage;return(0,T.jsx)(_.O,{label:"Create iModel from",message:r,status:r?"negative":void 0,children:D.getiModelTypes.map((function(e){return(0,T.jsx)(q.s,{id:e.type,label:e.name,icon:e.icon,description:e.tooltip,checked:t===e.type,onChange:function(){return n(e.type)}},e.type)}))})},V=n(36815),$=n(69687),W=n(31993);var G=function(){var e,t=(0,c.useState)(""),n=t[0],r=t[1],s=(0,c.useState)(),P=s[0],N=s[1],F=(0,c.useState)(!0),k=F[0],Z=F[1],E=(0,c.useState)([]),C=E[0],L=E[1],A=(0,c.useState)(""),R=A[0],z=A[1],B=(0,c.useState)([{label:"Loading...",value:void 0}]),D=B[0],_=B[1],q=(0,c.useState)(void 0),G=q[0],X=q[1],Y=(0,c.useState)(),J=Y[0],Q=Y[1],K=(0,c.useState)(!1),ee=K[0],te=K[1],ne=(0,M.Vj)(),re=ne.templates,ae=ne.templatesLoading,oe=ne.templatesCompleted,ie=(0,S.ZP)(),se=(0,i.Z)(ie,2),le=se[0],ce=se[1],ue=(0,u.useRouter)(),de=(0,M.nu)(),pe=(0,M.aF)(),me=pe.email,fe=pe.sub,ve=I.v.footerLinks,he=I.v.bridgeJobsEnvironment;function ge(e,t,n,r,a,o){return ye.apply(this,arguments)}function ye(){return(ye=(0,o.Z)(l().mark((function e(t,n,r,a,o,i){var s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.$I.getSasTokenUrl(t,n.name);case 2:return s=e.sent,c=new p.O,u=new m.bM(s,c),e.prev=5,e.next=8,u.upload(n,n.size);case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),new Error("File upload failed. Error: ".concat(e.t0.message));case 13:if(!n.name.endsWith("bim")&&!n.name.endsWith("imodel")){e.next=18;break}return e.next=16,V.$I.postConversionMessage({activityId:t,fileName:n.name,projectId:r.projectId,projectName:r.projectName,sasURL:s});case 16:e.next=20;break;case 18:return e.next=20,V.$I.postConversionMessageCBS({activityId:t,fileName:n.name,projectId:r.projectId,projectName:r.projectName,sasURL:s,environment:a,userEmail:o,userId:i});case 20:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}(0,c.useEffect)((function(){!de||ae||oe||V.$I.getAllIModelTemplates()}),[de,ae,oe]),(0,c.useEffect)((function(){_(re.map((function(e){return{label:e.iModelName,value:e}})))}),[re]),(0,c.useEffect)((function(){le.purgeFields()}),[P]);var xe=function(){var e=(0,o.Z)(l().mark((function e(){var t,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(le.allValid()&&me&&fe)){e.next=45;break}if(t=!1,te(!0),P!==U.BentleySample||!G){e.next=13;break}return e.prev=4,e.next=7,V.$I.createSampleIModelFromTemplate(n,G,[me].concat((0,a.Z)(C)));case 7:t=!0,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),f.Z.negative("Failed to create iModel. Error: ".concat(e.t0.message));case 13:if(P!==U.LocalFile||!J){e.next=29;break}return e.next=16,V.$I.createSampleIModelFromFile(n,[me].concat((0,a.Z)(C)),J.name);case 16:return r=e.sent,o=(0,d.Z)(),e.prev=18,e.next=21,ge(o,J,r,he,me,fe);case 21:t=!0,e.next=29;break;case 24:return e.prev=24,e.t1=e.catch(18),e.next=28,V.$I.deleteSampleIModel(r.projectId);case 28:f.Z.negative("Failed to create iModel. Error: ".concat(e.t1.message));case 29:if(P!==U.EmptyImodel){e.next=39;break}return e.prev=30,e.next=33,V.$I.createSampleIModelFromFile(n,[me].concat((0,a.Z)(C)));case 33:t=!0,e.next=39;break;case 36:e.prev=36,e.t2=e.catch(30),f.Z.negative("Failed to create iModel. Error: ".concat(e.t2.message));case 39:if(te(!1),!t){e.next=43;break}return e.next=43,je();case 43:e.next=46;break;case 45:ce(!0);case 46:case"end":return e.stop()}}),e,null,[[4,10],[18,24],[30,36]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.push(O.yH);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)(T.Fragment,{children:[ee&&(0,T.jsx)(W.b,{}),(0,T.jsxs)("div",{id:"page",className:"create-imodel",children:[(0,T.jsx)(v.s,{children:"Create sample iModel"}),(0,T.jsx)(h.x,{className:"mandatory-field-legend",children:"All fields are mandatory unless stated otherwise."}),(0,T.jsxs)("form",{className:"create-form-container",children:[(0,T.jsx)(g.L,{id:"iModelName",placeholder:"Please enter your iModel name.",label:"iModel name",value:n,onChange:function(e){r(e.target.value),le.showMessageFor(S.Iv.ImodelName)},onBlurCapture:function(e){r(e.target.value),le.showMessageFor(S.Iv.ImodelName)},onBlur:function(){le.showMessageFor(S.Iv.ImodelName)},message:le.message(S.Iv.ImodelName,n,"required|MaxStringSize:150,iModel name|NoInvalidChars"),status:le.message(S.Iv.ImodelName,n,"required|MaxStringSize:150,iModel name|NoInvalidChars")?"negative":void 0}),(0,T.jsx)(H,{value:P,setValue:N,errorMessage:le.message(S.Iv.ImodelType,P,"required")}),P===U.BentleySample&&(0,T.jsx)(y._,{options:D,placeholder:"Select",onChange:function(e){return X(e)},value:G,label:"Bentley iModel template",message:le.message(S.Iv.ImodelType,G,"required"),status:le.message(S.Iv.ImodelType,G,"required")?"negative":void 0}),P===U.LocalFile&&(0,T.jsx)("div",{className:"file-upload",children:(0,T.jsx)(g.L,{id:"file-upload",type:"file",name:"local-file-upload",onChange:function(e){e.target.files&&Q(e.target.files[0])},message:null!==(e=le.message(S.Iv.IModelFile,J,"required|AllowedFileExtensions:.dgn,.bim,.imodel,.dwg,.rvt|NoSpacesInFileName"))&&void 0!==e?e:"Source the project from an uploaded .dgn, .bim, .imodel, .dwg or .rvt file.",status:le.message(S.Iv.IModelFile,J,"required|AllowedFileExtensions:.dgn,.bim,.imodel,.dwg,.rvt|NoSpacesInFileName")?"negative":void 0})}),k&&(0,T.jsx)(x.b,{type:"informational",onClose:function(){return Z(!1)},children:"Please provide the email of other developers who should have access to the sample iModel. They will be required to have a valid Bentley profile."}),(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:"participants-input",children:[(0,T.jsx)(g.L,{label:"Project participants (optional)",id:"participants",placeholder:"Participant email",value:R,onChange:function(e){z(e.target.value)}}),(0,T.jsx)(j.z,{onClick:function(){""!==R&&(L([].concat((0,a.Z)(C),[R])),z(""))},children:"Add"})]}),C.map((function(e,t){return(0,T.jsxs)("div",{className:"added-participants",children:[e,(0,T.jsx)(b.h,{styleType:"borderless",size:"small",onClick:function(){return function(e){C.splice(C.indexOf(e),1),L((0,a.Z)(C))}(e)},children:(0,T.jsx)(w.Mpc,{})})]},t)}))]})]}),(0,T.jsx)($.Z,{message:(0,T.jsxs)(T.Fragment,{children:["By proceeding to register your sample imodel, you agree to our"," ",(0,T.jsx)("a",{target:"_blank",rel:"noreferrer",href:ve.tosUrl,title:"Terms of Service",children:"Terms of Service"}),"."]}),onSave:(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:case"end":return e.stop()}}),e)}))),onCancel:(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:case"end":return e.stop()}}),e)})))})]})]})},X=n(9008);var Y=function(){(0,r.q)();var e=(0,T.jsx)(X.default,{children:(0,T.jsx)("title",{children:"Create sample iModel | iTwin Platform"})});return(0,T.jsxs)(T.Fragment,{children:[e,(0,T.jsx)(G,{})]})}},38855:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-imodel",function(){return n(16813)}])},92939:function(){},36581:function(){},57031:function(){},58955:function(){},64598:function(){},21408:function(){}},function(e){e.O(0,[8487,615,123,6102,6815,9774,2888,179],(function(){return t=38855,e(e.s=t);var t}));var t=e.O();_N_E=t}]);