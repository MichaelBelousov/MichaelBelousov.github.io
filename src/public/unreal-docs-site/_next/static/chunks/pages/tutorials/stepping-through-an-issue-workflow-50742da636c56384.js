(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8890],{76715:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return v},Jt:function(){return T}});var s=n(159),i=n(91164),o=n(67294),a=n(3905),r=["components"],l=(o.createElement,{title:"Stepping Through an Issue Workflow",tile:{name:"Stepping Through an Issue Workflow",description:"Use a workflow to track the status of an issue created through the Issues REST API.",thumbnail:null,href:"/tutorials/stepping-through-an-issue-workflow",durationInMinutes:15,relatedApiIds:["issues"]}}),d=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)}},u=d("Introduction"),p=d("TutorialSection"),c=d("Title"),h=d("ActionLinkButton"),m=d("CodeBlock"),f=d("Alert"),k=d("ContinueLearningSection"),w=d("TileList"),g=d("Tile"),y={metadata:l};function v(e){var t=e.components,n=(0,i.Z)(e,r);return(0,a.kt)("wrapper",(0,s.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)(u,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"Each issue type by default is associated with a workflow. Workflows help users keep track of which of their issues they have addressed and how far along they are with each."),(0,a.kt)("p",null,"In this tutorial you will learn how to look up the workflow for the issue you created and then step the issue through the workflow\u2019s statuses until it is considered closed (i.e., done)."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"You will need to first complete the tutorial ",(0,a.kt)("a",{parentName:"p",href:"../creating-your-first-issue/"},"Creating Your First Issue")," so that you have an issue to modify."),(0,a.kt)("p",null,"Take note of the issue\u2019s ",(0,a.kt)("inlineCode",{parentName:"p"},"type")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," properties, as you will need them here.")),(0,a.kt)(p,{actions:[(0,a.kt)(c,{mdxType:"Title"},(0,a.kt)(h,{href:"/apis/issues-v1/operations/get-workflow/",title:"Try the Get Workflow endpoint",target:"_blank",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,a.kt)(c,{mdxType:"Title"},"Sample request"),(0,a.kt)(m,{language:"http",code:"GET https://api.bentley.com/issues/workflows/<your-issue-type>?projectId=<your-project-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,a.kt)(c,{mdxType:"Title"},"Sample response"),(0,a.kt)(m,{language:"http",code:'HTTP/1.1 200 OK\n\n{\n  "workflow":{\n    "id":"xospFt7H20-9uSSLOwfBeMrXBKJQWpdOqXbvQ8xzG7s",\n    "startStates":["Open"],\n    "type":"Field Data",\n    "states":[\n      {\n        "name":"Open",\n        "color":"#ff0000",\n        "editableProperties":[],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Assigned",\n        "color":"#ff9900",\n        "editableProperties":[\n          "AssignedTo",\n          "AssignedToId",\n          "_DueDate",\n          "_AssignedUsers"\n        ],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Review",\n        "color":"#ffff00",\n        "editableProperties":[\n          "AssignedTo",\n          "AssignedToId",\n          "_DueDate",\n          "_AssignedUsers"\n        ],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Approved",\n        "color":"#66cc00",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      },\n      {\n        "name":"Rejected",\n        "color":"#990000",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      },\n      {\n        "name":"Voided",\n        "color":"#999999",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      }\n    ],\n    "transitions":[\n      {\n        "displayName":"Assign",\n        "start":"Open",\n        "end":"Assigned",\n        "notes":"None"\n      },\n      {\n        "displayName":"Void",\n        "start":"Open",\n        "end":"Voided",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send for Review",\n        "start":"Assigned",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send back",\n        "start":"Assigned",\n        "end":"Open",\n        "notes":"None"\n      },\n      {\n        "displayName":"Approve",\n        "start":"Review",\n        "end":"Approved",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reject",\n        "start":"Review",\n        "end":"Rejected",\n        "notes":"None"\n      },\n      {\n        "displayName":"Void",\n        "start":"Review",\n        "end":"Voided",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send back",\n        "start":"Review",\n        "end":"Assigned",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Approved",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Rejected",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Voided",\n        "end":"Review",\n        "notes":"None"\n      }\n    ],\n    "startingTransitions":[\n      {\n        "displayName":"Create as Open",\n        "start":null,\n        "end":"Open",\n        "notes":"None"\n      }\n    ],\n    "uninitializedState":{\n      "name":null,\n      "color":null,\n      "editableProperties":[],\n      "stateCategory":null\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"1-look-up-the-workflow"},"1. Look Up the Workflow"),(0,a.kt)("p",null,"Make a GET request to the ",(0,a.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-workflow/"},"Get Workflow")," endpoint to retrieve the workflow definition."),(0,a.kt)("h4",{id:"url"},"URL"),(0,a.kt)("p",null,"The URL of the request includes a path of ",(0,a.kt)("inlineCode",{parentName:"p"},"/workflows")," followed by your issue type. You must also provide ",(0,a.kt)("strong",{parentName:"p"},"projectId")," as a query string parameter."),(0,a.kt)("p",null,"Format: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/workflows/<type>?projectId=<projectId>")),(0,a.kt)("h4",{id:"understanding-the-workflow-definition"},"Understanding the Workflow Definition"),(0,a.kt)("p",null,"The workflow definition in the response body consists of two main concepts: ",(0,a.kt)("strong",{parentName:"p"},"states")," and ",(0,a.kt)("strong",{parentName:"p"},"transitions"),". States are named statuses that an issue can have as the value of its ",(0,a.kt)("inlineCode",{parentName:"p"},"status")," property. Transitions dictate the possible changes between states; if an issue is in Status A, then it can be changed to Status B if and only if there is a transition with a ",(0,a.kt)("inlineCode",{parentName:"p"},"start")," of A and an ",(0,a.kt)("inlineCode",{parentName:"p"},"end")," of B."),(0,a.kt)("p",null,"Thus, a workflow can be pictured as a flowchart where states are bubbles and transitions are arrows. Below is a visual representation of the workflow shown in the sample response body."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"/unreal-docs-site/images/issue-workflow.png",alt:"Visualized Workflow"})),(0,a.kt)("p",null,"Examine the sample response and note that one of the states in the list of states has a ",(0,a.kt)("inlineCode",{parentName:"p"},"name")," of \u201cOpen\u201d. Also, there are transitions named \u201cAssign\u201d and \u201cVoid\u201d that both have a ",(0,a.kt)("inlineCode",{parentName:"p"},"start")," of \u201cOpen\u201d, and have ",(0,a.kt)("inlineCode",{parentName:"p"},"end")," values of \u201cAssigned\u201d and \u201cVoided\u201d, respectively. Thus, an issue with a ",(0,a.kt)("inlineCode",{parentName:"p"},"status")," of \u201cOpen\u201d can be changed to have a ",(0,a.kt)("inlineCode",{parentName:"p"},"status")," of \u201cAssigned\u201d or \u201cVoided\u201d, but no other values."),(0,a.kt)(f,{type:"informational",mdxType:"Alert"},"Tip for application designers: Usually, a UI element for setting an issue's workflow status consists of a dropdown list. Each transition that's available for the current status (i.e., has the current status as its ",(0,a.kt)("code",null,"start"),") appears as an option in the list with text equal to the transition's ",(0,a.kt)("code",null,"displayName"),". Selecting the option modifies the issue's status to the value of ",(0,a.kt)("code",null,"end")," for that transition.")),(0,a.kt)(p,{actions:[(0,a.kt)(c,{mdxType:"Title"},(0,a.kt)(h,{href:"/apis/issues-v1/operations/modify-issue/",target:"_blank",title:"Try the Update Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,a.kt)(m,{language:"http",code:"PATCH https://api.bentley.com/issues/<your-issue-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,a.kt)(c,{mdxType:"Title"},"Sample body (1)"),(0,a.kt)(m,{language:"json",code:'{\n  "status":"Assigned"\n}',mdxType:"CodeBlock"}),(0,a.kt)(c,{mdxType:"Title"},"Sample body (2)"),(0,a.kt)(m,{language:"json",code:'{\n  "status":"Review"\n}',mdxType:"CodeBlock"}),(0,a.kt)(c,{mdxType:"Title"},"Sample body (3)"),(0,a.kt)(m,{language:"json",code:'{\n  "status":"Approved"\n}',mdxType:"CodeBlock"}),(0,a.kt)(c,{mdxType:"Title"},"Sample response"),(0,a.kt)(m,{language:"http",code:'HTTP/1.1 200 OK\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "status":"Approved",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-21T19:43:55.146858Z",\n    "assignee":{\n      "displayName":"Andrew Menzies",\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189"\n    },\n    "number":"FID-00002",\n    "displayName":"FID-00002",\n    "subject":"Which Material? With model ID",\n    "description":"Version 1.2 of the plans does not specify what material this support beam will be made out of.",\n    "type":"Field Data",\n    "container":{\n      "id":"2374523948759432"\n    },\n    "item":{\n      "id":"9090096798506970"\n    },\n    "dueDate":"2021-07-30T00:00:00Z",\n    "state":"Closed",\n    "properties":{\n      "_StatusColor":"#66cc00"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"2-update-the-issues-status"},"2. Update the Issue\u2019s Status"),(0,a.kt)("p",null,"An issue\u2019s ",(0,a.kt)("strong",{parentName:"p"},"status")," property dictates what step of the workflow it\u2019s currently on. When you create an issue, you can set its ",(0,a.kt)("strong",{parentName:"p"},"status")," to one of the strings listed in the ",(0,a.kt)("strong",{parentName:"p"},"startStates")," array. Since you didn\u2019t set a status when creating your issue in the ",(0,a.kt)("strong",{parentName:"p"},"Creating Your First Issue")," tutorial, it was automatically set to the first ",(0,a.kt)("inlineCode",{parentName:"p"},"startState"),", \u201cOpen\u201d."),(0,a.kt)("p",null,"To change the issue\u2019s status, make a PATCH request to the ",(0,a.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/modify-issue/"},"Update Issue")," endpoint, just as you did in the ",(0,a.kt)("strong",{parentName:"p"},"Creating Your First Issue")," tutorial. Include the ",(0,a.kt)("strong",{parentName:"p"},"status")," property, making sure to set its value according to the workflow transitions."),(0,a.kt)("p",null,"For instance, to change your issue from \u201cOpen\u201d to \u201cAssigned\u201d, make a request with the body shown in \u201cSample Body (1)\u201d."),(0,a.kt)("p",null,"To keep stepping the issue through the workflow, make additional Update Issue requests, using \u201cSample Body (2)\u201d and then \u201cSample Body (3)\u201d. This will change the issue from \u201cAssigned\u201d to \u201cReview\u201d and then \u201cApproved\u201d. Once all of these requests are done, you should get the response shown under \u201cSample response\u201d."),(0,a.kt)("p",null,"Note that the \u201cApproved\u201d status in the workflow definition has a ",(0,a.kt)("strong",{parentName:"p"},"stateCategory")," of \u201cClosed\u201d rather than \u201cOpen\u201d. ",(0,a.kt)("inlineCode",{parentName:"p"},"stateCategory")," is a conceptual grouping of workflow states into one of three types: \u201cOpen\u201d, \u201cClosed\u201d, and \u201cDraft\u201d. Conceptually, to users, an issue in an Open state generally requires attention; one in Closed has been taken care of (or deemed not a problem). A Draft issue is being worked on by its creator and may not be ready for review by others yet. In terms of functionality, Open and Draft issues can both be edited like normal, but a Closed issue cannot be edited except to change its ",(0,a.kt)("strong",{parentName:"p"},"status"),"."),(0,a.kt)(f,{mdxType:"Alert"},"Note: The ",(0,a.kt)("strong",null,"state")," property of an issue (not to be confused with"," ",(0,a.kt)("strong",null,"status"),") corresponds to the ",(0,a.kt)("strong",null,"stateCategory")," of the issue's current ",(0,a.kt)("strong",null,"status")," in the workflow definition. The"," ",(0,a.kt)("strong",null,"state")," property is set automatically and cannot be included in the body of ",(0,a.kt)("strong",null,"Create Issue")," or ",(0,a.kt)("strong",null,"Update Issue")," ","requests."),(0,a.kt)("p",null,"Well done! You now understand how to use the Issues REST API to find an issue\u2019s workflow, how the workflow affects updating the issue (the ",(0,a.kt)("strong",{parentName:"p"},"status")," property), and how the issue becomes ",(0,a.kt)("em",{parentName:"p"},"open")," or ",(0,a.kt)("em",{parentName:"p"},"closed")," as a result.")),(0,a.kt)(k,{mdxType:"ContinueLearningSection"},(0,a.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,a.kt)(w,{mdxType:"TileList"},(0,a.kt)(g,{name:"Stepping Through an Issue Workflow",description:"Learn how an issue's status can be set to track its progress.",href:"../stepping-through-an-issue-workflow",mdxType:"Tile"}),(0,a.kt)(g,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",mdxType:"Tile"}))))}v.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-look-up-the-workflow",level:2,title:"1. Look Up the Workflow",children:[]},{id:"2-update-the-issues-status",level:2,title:"2. Update the Issue\u2019s Status",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},31389:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var s=n(61565),i=n(67294),o=n(94184),a=n.n(o),r=(n(50371),n(73351)),l=n(85893),d=function(e){var t=e.item,n=e.setActiveItem,s=e.className,i=e.activeItem,o=e.prefix;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"menuItem-container",children:(0,l.jsx)(r.D,{href:"".concat(null!==o&&void 0!==o?o:"#").concat(t.id),children:(0,l.jsx)("span",{onClick:function(){return n(t.id)},className:"".concat(s," ").concat(t.id===i?"active":""),children:t.title})})})})},u=function(e){var t=e.items,n=e.setActiveItem,s=e.activeItem,i=e.navPrefix;return(0,l.jsx)(l.Fragment,{children:t.map((function(e,t){return(0,l.jsxs)("div",{children:[(0,l.jsx)(d,{item:e,className:"sideMenuItem",setActiveItem:n,activeItem:s,prefix:i},e.id),e.children.map((function(e){return(0,l.jsx)(d,{item:e,className:"sideMenuItem sideMenuSubItem",setActiveItem:n,activeItem:s,prefix:i},e.id)}))]},t)}))})},p=n(71125),c=function(e){var t,n=i.useState(!1),o=(0,s.Z)(n,2),r=o[0],d=o[1],c=i.useState(""),h=(0,s.Z)(c,2),m=h[0],f=h[1],k=i.useState(!1),w=(0,s.Z)(k,2),g=w[0],y=w[1];i.useEffect((function(){var t;e.items.length>0&&f(null!==(t=e.activeItem)&&void 0!==t?t:e.items[0].id)}),[e.activeItem]),i.useEffect((function(){var e=function(){var e=window.location.hash.substring(1,window.location.hash.length);f(e),y(!1)};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),[]),i.useEffect((function(){g&&d(!1)}),[g]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.j,{isOpened:r,onClick:function(){d((function(e){return!e}))}}),(0,l.jsx)("div",{id:"tutorial-side-navigation-pane",className:a()(e.className,"sticky-container",r?"opened":void 0),children:(0,l.jsx)("div",{className:"sideMenu sticky-element",children:(0,l.jsxs)("div",{className:"sideMenu-large",children:[e.header,(0,l.jsx)(u,{items:e.items,setActiveItem:function(e){y(!0),f(e)},activeItem:m,navPrefix:null!==(t=e.navPrefix)&&void 0!==t?t:"#"}),e.actions&&(0,l.jsx)("div",{className:"side-menu-actions",children:e.actions})]})})})]})}},1176:function(e,t,n){"use strict";n(63673),n(67294);var s=n(29e3),i=n(31389),o=n(52203),a=n(85893);t.Z=function(e){return(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{id:"page",className:"container tutorial-container",children:[(0,a.jsx)("div",{id:"tutorial-header",children:(0,a.jsx)(s.s,{children:e.tutorial.headline})}),(0,a.jsxs)("div",{id:"tutorial-content",children:[(0,a.jsx)(i.Z,{items:e.tutorial.navigationItems}),(0,a.jsx)("div",{id:"tutorial-content-body",children:e.tutorial.tutorialSteps})]})]})})}},32086:function(e,t,n){"use strict";n.r(t);var s=n(3905),i=n(1176),o=n(55092),a=n(76715),r=(n(67294),n(80989)),l=n(85893);t.default=function(){var e={headline:a.Pu.title,navigationItems:(0,a.Jt)(),tutorialSteps:(0,l.jsx)(s.Zo,{components:o.d,children:(0,l.jsx)(a.ZP,{})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.d,{title:"".concat(a.Pu.title," - Tutorials | iTwin Platform")}),(0,l.jsx)(i.Z,{tutorial:e})]})}},5982:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/stepping-through-an-issue-workflow",function(){return n(32086)}])},63673:function(){}},function(e){e.O(0,[8273,508,483,229,271,2033,6815,9527,1061,9774,2888,179],(function(){return t=5982,e(e.s=t);var t}));var t=e.O();_N_E=t}]);