(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{88774:function(e,n,t){"use strict";t.d(n,{Pu:function(){return s},ZP:function(){return v},Jt:function(){return g}});var i=t(159),a=t(91164),l=t(67294),o=t(3905),r=["components"],s=(l.createElement,{title:"Retrieve Validation Model Data",tile:{name:"Retrieve Validation Model Data",description:"Walk-through of the retrieving and understanding basic model information needed for various validation functions.",href:"/tutorials/retrieve-validation-model-data/",thumbnail:"/images/ClashDetectionSample.png",durationInMinutes:20,relatedApiIds:["clashdetection"]}}),c=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",n)}},d=c("Introduction"),u=c("TutorialSection"),m=c("Alert"),p=c("Title"),h=c("CodeBlock"),f=c("ContinueLearningSection"),y=c("TileList"),b=c("ResourceTile"),T={metadata:s};function v(e){var n=e.components,t=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},T,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Model validation functions are used to check a model you\u2019ve created to make sure everything is as expected. In the case of property validation, this means making sure element properties fit specific criteria. In the case of clash detection, this means certain elements are not touching or are within a certain range of each other.")),(0,o.kt)(u,{mdxType:"TutorialSection"},(0,o.kt)("h2",{id:"1-optional-create-a-sample-imodel-for-testing"},"1. (Optional) Create a sample iModel for testing"),(0,o.kt)("p",null,"Follow the steps listed ",(0,o.kt)("a",{parentName:"p",href:"/tutorials/create-test-imodel-sample/"},"here")),(0,o.kt)("p",null,"You will be redirected to the \u201cMy sample iModels\u201d page. Wait a few minutes while the create process completes. Once it is, you can click \u201cShow\u201d in the IDs column to easily access the iTwin ID (also referred to as the project ID) and the iModel ID, both which will be frequently used throughout validation API calls. To get the changeset ID, you can either follow Step 4 in ",(0,o.kt)("a",{parentName:"p",href:"/tutorials/create-named-version"},"this tutorial"),", or, when viewing the model in the iTwinViewer, copying the string after \u201cChangeSetId=\u201d in the URL."),(0,o.kt)("p",null,"Note that in the following sections and related tutorials, the sample code will include actual results and data from this model outside of project/iModel/named version IDs, which will be specific to your project upon creation, and any ID values generated via API functions. While in most cases the results will be truncated for brevity, they should give you an idea of what you\u2019re looking for so you can easily determine if something has gone awry.")),(0,o.kt)(u,{mdxType:"TutorialSection"},(0,o.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,o.kt)("p",null,"To make request to the API a user token is needed. There are several ways to get it."),(0,o.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,o.kt)("p",null,"Follow this ",(0,o.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application. You will need to include the scopes clashdetection:read and clashdetection:modify."),(0,o.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Go ",(0,o.kt)("a",{parentName:"li",href:"/apis/clash-detection/operations/create-clashdetection-tests/"},"here")),(0,o.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,o.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,o.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,o.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,o.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,o.kt)(u,{actions:[(0,o.kt)(p,{mdxType:"Title"},"Request Syntax"),(0,o.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/modelsAndCategories/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,o.kt)(p,{mdxType:"Title"},"Request Headers"),(0,o.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,o.kt)(p,{mdxType:"Title"},"Response Body"),(0,o.kt)(h,{language:"json",code:'{\n  "models":[\n    {\n      "id":"0x21",\n      "displayName":"ProcessPhysicalModel"\n    }\n  ],\n  "categories":[\n    {\n      "id":"0x20000000002",\n      "displayName":"Uncategorized"\n    },\n    {\n      "id":"0x30000000048",\n      "displayName":"PID LineStyle Default"\n    },\n    {\n      "id":"0x3000000004a",\n      "displayName":"Border"\n    },\n    {\n      "id":"0x4000000000d",\n      "displayName":"Tag-Category"\n    },\n    {\n      "id":"0x40000000e71",\n      "displayName":"Structure"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,o.kt)("h2",{id:"2-retrieving-models-and-categories"},"2. Retrieving Models and Categories"),(0,o.kt)("p",null,"For creating any Clash Detection test, you will need a list of the models or categories you wish to check for clashing elements."),(0,o.kt)("p",null,"To do this, we need to send an HTTP request to ",(0,o.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/modelsAndCategories/imodels/{modelId}?projectId={projectId}")," using your projectId in place of {projectId}. This is an asynchronous request; if model information has never been previously requested for iModel, the data extraction will need time to process and the job will return a status of 202. You can repeat this request periodically until it returns a status of 200, at which point it will include the full response."),(0,o.kt)("p",null,"The response will include a complete list of models and categories, with their respective ids and display names. You will only need the ids for any validation functions, but to determine which models you are looking for, you will probably want to reference the display name, which should describe the model/categories and would be the same name you would see when looking at a model list or element when the iModel is open in any viewer.")),(0,o.kt)(u,{actions:[(0,o.kt)(p,{mdxType:"Title"},"Request Syntax"),(0,o.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/modelsAndCategories/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,o.kt)(p,{mdxType:"Title"},"Request Headers"),(0,o.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,o.kt)(p,{mdxType:"Title"},"Response Body"),(0,o.kt)(h,{language:"json",code:'{\n  "schema":[\n    {\n      "name":"ECDbMeta",\n      "label":null,\n      "entityClass":[\n        {\n          "name":"ECClassDef",\n          "label":"ECClass",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECSchemaDef",\n          "label":"ECSchema",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"Alias",\n              "label":null\n            },\n            {\n              "name":"VersionMajor",\n              "label":null\n            },\n            {\n              "name":"VersionWrite",\n              "label":null\n            },\n            {\n              "name":"VersionMinor",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECPropertyDef",\n          "label":"ECProperty",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"IsReadonly",\n              "label":null\n            },\n            {\n              "name":"Priority",\n              "label":null\n            },\n            {\n              "name":"Ordinal",\n              "label":null\n            },\n            {\n              "name":"ExtendedTypeName",\n              "label":null\n            },\n            {\n              "name":"ArrayMinOccurs",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECEnumerationDef",\n          "label":"ECEnumeration",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"IsStrict",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"KindOfQuantityDef",\n          "label":"KindOfQuantity",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"PersistenceUnit",\n              "label":null\n            },\n            {\n              "name":"RelativeError",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"PropertyCategoryDef",\n          "label":"PropertyCategory",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"Priority",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECRelationshipConstraintDef",\n          "label":null,\n          "properties":[\n            {\n              "name":"MultiplicityLowerLimit",\n              "label":null\n            },\n            {\n              "name":"MultiplicityUpperLimit",\n              "label":null\n            },\n            {\n              "name":"IsPolymorphic",\n              "label":null\n            },\n            {\n              "name":"RoleLabel",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        }\n      ]\n    },\n    {\n      "name":"ProcessPhysical",\n      "label":null,\n      "entityClass":[\n        {\n          "name":"PIPING_COMPONENT",\n          "label":"Piping Component",\n          "properties":[\n            {\n              "name":"COMPONENT_NAME",\n              "label":"Component Name"\n            },\n            {\n              "name":"STATE",\n              "label":"Component State"\n            },\n            {\n              "name":"LENGTH_EFFECTIVE",\n              "label":"Length Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_BRANCH_END_EFFECTIVE",\n              "label":"Design Length Center To Branch End Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_OUTLET_END_EFFECTIVE",\n              "label":"Design Length Center To Outlet End Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_RUN_END_EFFECTIVE",\n              "label":"Design Length Center To Run End Effective"\n            },\n            {\n              "name":"WALL_THICKNESS",\n              "label":"Wall Thickness"\n            },\n            {\n              "name":"UPDATE_GRAPHICS",\n              "label":"Update Graphics"\n            },\n            {\n              "name":"NOMINAL_DIAMETER_RUN_END",\n              "label":"Nominal Diameter Run End"\n            },\n            {\n              "name":"Geometry",\n              "label":"Element Geometry"\n            },\n            {\n              "name":"SPOOL_ID",\n              "label":"Spool Id"\n            },\n            {\n              "name":"SPOOL_NUMBER",\n              "label":"Spool Number"\n            },\n            {\n              "name":"OPTION_CODE",\n              "label":"Option Code"\n            },\n            {\n              "name":"NOTES",\n              "label":"Notes"\n            },\n            {\n              "name":"CATALOG_NAME",\n              "label":"Catalog Name"\n            },\n            {\n              "name":"EC_CLASS_NAME",\n              "label":"EC Class Name"\n            },\n            {\n              "name":"UNIT_OF_MEASURE",\n              "label":"Unit Of Measure"\n            },\n            {\n              "name":"PIECE_MARK",\n              "label":"Piece Mark"\n            },\n            {\n              "name":"FABRICATION_CATEGORY",\n              "label":"Fabrication Category"\n            },\n            {\n              "name":"LINENUMBER",\n              "label":"Line Number"\n            },\n            {\n              "name":"INSULATION_THICKNESS",\n              "label":"Insulation Thickness"\n            },\n            {\n              "name":"INSULATION",\n              "label":"Insulation Material"\n            },\n            {\n              "name":"LENGTH",\n              "label":"Length"\n            },\n            {\n              "name":"INSIDE_DIAMETER",\n              "label":"Inside Diameter"\n            },\n            {\n              "name":"NORMAL_OPERATING_PRESSURE",\n              "label":"Normal Operating Pressure"\n            },\n            {\n              "name":"OUTSIDE_DIAMETER",\n              "label":"Outside Diameter"\n            },\n            {\n              "name":"PIPE_FLANGE_TYPE",\n              "label":"Pipe Flange Type"\n            },\n            {\n              "name":"GRADE",\n              "label":"Grade"\n            },\n            {\n              "name":"SHOP_FIELD",\n              "label":"Shop Field"\n            },\n            {\n              "name":"HUB_DEPTH",\n              "label":"Hub Depth"\n            },\n            {\n              "name":"HUB_WIDTH",\n              "label":"Hub Width"\n            },\n            {\n              "name":"TRACING",\n              "label":"Tracing"\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        }\n      ]\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,o.kt)("h2",{id:"3-get-schema-info"},"3. Get Schema Info"),(0,o.kt)("p",null,"For creating Property Validation tests you will need access to the property information for elements with which validate against. To do this you will need to retrieve the schema info via an HTTP request to ",(0,o.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/schemas/imodels/{modelId}?projectId={projectId}")," using your projectId in place of {projectId}."),(0,o.kt)("p",null,"Similarly to the Get Models and Categories step, this is an asynchronous request and if schema extraction has never been done for this iModel before, it will need time to process and return a 202 status until extraction is complete. The user can repeat this request periodically until it returns a status of 200, which will include the full response."),(0,o.kt)("p",null,"The response will include a complete list of classes, labels of the classes if they\u2019re available, and all of the associated properties with that class and their respective names and labels. For creating tests and rules, you will be using the name properties, usually in the format of {className}.{propertyName} although the labels may help you figure out which classes and properties you\u2019re looking for.")),(0,o.kt)(u,{mdxType:"TutorialSection"},(0,o.kt)("h2",{id:"4-conclusion"},"4. Conclusion"),(0,o.kt)("p",null,"You should be able to successfully retrieve the related IDs and schema info for your model. While this information is of limited value on its own, it is useful and necessary for creating clash detection and property validation tests, so check out the continue learning section to put your new knowledge to use.")),(0,o.kt)(f,{mdxType:"ContinueLearningSection"},(0,o.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,o.kt)(y,{mdxType:"TileList"},(0,o.kt)(b,{title:"Clash Test Basics",href:"/tutorials/clash-test-basics",description:"A tutorial that covers the basics of the clash detection lifecycle and usage.",mdxType:"ResourceTile"}),(0,o.kt)(b,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}))))}v.isMDXComponent=!0;var g=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-optional-create-a-sample-imodel-for-testing",level:2,title:"1. (Optional) Create a sample iModel for testing",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"2-retrieving-models-and-categories",level:2,title:"2. Retrieving Models and Categories",children:[]},{id:"3-get-schema-info",level:2,title:"3. Get Schema Info",children:[]},{id:"4-conclusion",level:2,title:"4. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},31389:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(61565),a=t(67294),l=t(94184),o=t.n(l),r=(t(50371),t(73351)),s=t(85893),c=function(e){var n=e.item,t=e.setActiveItem,i=e.className,a=e.activeItem,l=e.prefix;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"menuItem-container",children:(0,s.jsx)(r.D,{href:"".concat(null!==l&&void 0!==l?l:"#").concat(n.id),children:(0,s.jsx)("span",{onClick:function(){return t(n.id)},className:"".concat(i," ").concat(n.id===a?"active":""),children:n.title})})})})},d=function(e){var n=e.items,t=e.setActiveItem,i=e.activeItem,a=e.navPrefix;return(0,s.jsx)(s.Fragment,{children:n.map((function(e,n){return(0,s.jsxs)("div",{children:[(0,s.jsx)(c,{item:e,className:"sideMenuItem",setActiveItem:t,activeItem:i,prefix:a},e.id),e.children.map((function(e){return(0,s.jsx)(c,{item:e,className:"sideMenuItem sideMenuSubItem",setActiveItem:t,activeItem:i,prefix:a},e.id)}))]},n)}))})},u=t(71125),m=function(e){var n,t=a.useState(!1),l=(0,i.Z)(t,2),r=l[0],c=l[1],m=a.useState(""),p=(0,i.Z)(m,2),h=p[0],f=p[1],y=a.useState(!1),b=(0,i.Z)(y,2),T=b[0],v=b[1];a.useEffect((function(){var n;e.items.length>0&&f(null!==(n=e.activeItem)&&void 0!==n?n:e.items[0].id)}),[e.activeItem]),a.useEffect((function(){var e=function(){var e=window.location.hash.substring(1,window.location.hash.length);f(e),v(!1)};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),[]),a.useEffect((function(){T&&c(!1)}),[T]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.j,{isOpened:r,onClick:function(){c((function(e){return!e}))}}),(0,s.jsx)("div",{id:"tutorial-side-navigation-pane",className:o()(e.className,"sticky-container",r?"opened":void 0),children:(0,s.jsx)("div",{className:"sideMenu sticky-element",children:(0,s.jsxs)("div",{className:"sideMenu-large",children:[e.header,(0,s.jsx)(d,{items:e.items,setActiveItem:function(e){v(!0),f(e)},activeItem:h,navPrefix:null!==(n=e.navPrefix)&&void 0!==n?n:"#"}),e.actions&&(0,s.jsx)("div",{className:"side-menu-actions",children:e.actions})]})})})]})}},1176:function(e,n,t){"use strict";t(63673),t(67294);var i=t(29e3),a=t(31389),l=t(52203),o=t(85893);n.Z=function(e){return(0,o.jsx)(l.Z,{children:(0,o.jsxs)("div",{id:"page",className:"container tutorial-container",children:[(0,o.jsx)("div",{id:"tutorial-header",children:(0,o.jsx)(i.s,{children:e.tutorial.headline})}),(0,o.jsxs)("div",{id:"tutorial-content",children:[(0,o.jsx)(a.Z,{items:e.tutorial.navigationItems}),(0,o.jsx)("div",{id:"tutorial-content-body",children:e.tutorial.tutorialSteps})]})]})})}},8526:function(e,n,t){"use strict";t.r(n);var i=t(3905),a=t(1176),l=t(55092),o=t(88774),r=(t(67294),t(80989)),s=t(85893);n.default=function(){var e={headline:o.Pu.title,navigationItems:(0,o.Jt)(),tutorialSteps:(0,s.jsx)(i.Zo,{components:l.d,children:(0,s.jsx)(o.ZP,{})})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.d,{title:"".concat(o.Pu.title," - Tutorials | iTwin Platform")}),(0,s.jsx)(a.Z,{tutorial:e})]})}},83894:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/retrieve-validation-model-data",function(){return t(8526)}])},63673:function(){}},function(e){e.O(0,[8273,508,483,229,271,2033,6815,9527,1061,9774,2888,179],(function(){return n=83894,e(e.s=n);var n}));var n=e.O();_N_E=n}]);