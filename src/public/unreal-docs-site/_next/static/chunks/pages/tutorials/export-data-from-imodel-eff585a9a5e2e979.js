(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9709],{1962:function(e,t,n){"use strict";n.d(t,{Pu:function(){return s},ZP:function(){return I},Jt:function(){return v}});var o=n(159),i=n(91164),r=n(67294),a=n(3905),l=["components"],s=(r.createElement,{title:"Export data from an iModel",tile:{name:"Export data from an iModel",description:"This tutorial guides you through exporting data from an iModel to other formats, such as IFC or LandXM using the Export API.",href:"/tutorials/export-data-from-imodel/",durationInMinutes:20,relatedApiIds:["export","imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)}},d=p("Introduction"),u=p("TutorialSection"),c=p("CreateSampleAppButton"),h=p("Alert"),m=p("Title"),f=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),x=p("Tile"),T=p("ResourceTile"),y={metadata:s};function I(e){var t=e.components,n=(0,i.Z)(e,l);return(0,a.kt)("wrapper",(0,o.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"20",mdxType:"Introduction"},(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"This quick start is intended to help you export data from an iModel to different formats like ",(0,a.kt)("a",{parentName:"p",href:"https://www.buildingsmart.org/standards/bsi-standards/industry-foundation-classes/"},"IFC")," or ",(0,a.kt)("a",{parentName:"p",href:"http://www.landxml.org/"},"LandXML")," and store it in the iTwin Storage. Export API works in project and iModel context.\nIn this walk-through, you will be able to start an export.")),(0,a.kt)(u,{actions:[(0,a.kt)(c,{scopes:["export:modify","export:read"],clientName:"Export data from an iModel tutorial",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,a.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. Use the ",(0,a.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,a.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,a.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,a.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,a.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,a.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,a.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,a.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,a.kt)("strong",{parentName:"p"},"Export API")," and has ",(0,a.kt)("inlineCode",{parentName:"p"},"export:modify export:read")," scopes enabled."))),(0,a.kt)(u,{mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,a.kt)("p",null,"To make requests to the API, a user token is needed. There are several ways to get it."),(0,a.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,a.kt)("p",null,"Follow this ",(0,a.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,a.kt)(h,{type:"informational",mdxType:"Alert"},"Here you need to use Client ID generated from previous registration step."),(0,a.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-out-section"},"Grab a user token from Api reference \u201cTry it out\u201d Section"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to ",(0,a.kt)("a",{parentName:"li",href:"/apis/export/operations/startExport/"},"Create Configuration")),(0,a.kt)("li",{parentName:"ol"},"Click \u201cTry it out\u201d button."),(0,a.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,a.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,a.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,a.kt)(h,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,a.kt)(u,{mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"3-store-refresh-token-for-user"},"3. Store refresh token for user"),(0,a.kt)("p",null,"The export process usually takes time and is performed in the background. For that, we need to store the user\u2019s refresh token. To get the authorization information, use the Get Authorization Information API. This API will return the current status and a redirect URL where user has to be redirected on the browser if the token has to be renewed.")),(0,a.kt)(u,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Get Authorization Information Request Syntax and Headers"),(0,a.kt)(f,{language:"http",code:"GET https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"request"},"Request"),(0,a.kt)("p",null,"In order to do that, send a GET ",(0,a.kt)("a",{parentName:"p",href:"https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL"},"https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL")," request."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Authorization\xa0header with valid Bearer token is required."),(0,a.kt)("li",{parentName:"ol"},"REDIRECT_URL is a url of where a user should be redirected after successful token renewal."))),(0,a.kt)(u,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Get Authorization Information Response Body"),(0,a.kt)(f,{language:"json",code:'{\n    "authorizationInformation": {\n        "isUserAuthorized": true,\n        "_links": {\n            "authorizationUrl": {\n                "href": null\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"response-if-user-has-a-valid-refresh-token"},"Response if user has a valid refresh token"),(0,a.kt)("p",null,"\u201cisUserAuthorized\u201d with value \u201ctrue\u201d means, user has a valid refresh token and can run long running export.")),(0,a.kt)(u,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Get Authorization Information Response Body"),(0,a.kt)(f,{language:"json",code:'{\n    "authorizationInformation": {\n        "isUserAuthorized": false,\n        "_links": {\n            "authorizationUrl": {\n                "href": "https://connect-itwinbridgeportal.bentley.com/authenticate?redirect_url=REDIRECT_URL"\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"response-if-user-does-not-have-a-valid-refresh-token"},"Response if user does not have a valid refresh token"),(0,a.kt)("p",null,"\u201cisUserAuthorized\u201d with value \u201cfalse\u201d means, user does not have valid refresh token and cannot run long running export. To refresh token user has to be redirected to authorizationUrl from response.")),(0,a.kt)(u,{actions:[(0,a.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,a.kt)(f,{language:"http",code:"POST https://api.bentley.com/export/startExport HTTP/1.1",mdxType:"CodeBlock"}),(0,a.kt)(m,{mdxType:"Title"},"Request Headers"),(0,a.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,a.kt)(m,{mdxType:"Title"},"Request Body"),(0,a.kt)(f,{language:"json",code:'{\n  "projectId": "ProjectId",\n  "iModelId": "IModelId",\n  "changesetId": "ChangesetId",\n  "folderId": "FolderId",\n  "mappingFileId": "MappingFileId",\n  "saveLogs": true,\n  "replaceOlderFile": false,\n  "exportType": "ExportType",\n  "ifcVersion": "IfcVersion"\n  }\n}',mdxType:"CodeBlock"}),(0,a.kt)(m,{mdxType:"Title"},"Response Headers"),(0,a.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,a.kt)(m,{mdxType:"Title"},"Response Body"),(0,a.kt)(f,{language:"json",code:'{\n  "start-export-status":{\n    "status": "started"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"4-start-export"},"4. Start Export"),(0,a.kt)("p",null,"To start the Export, call the endpoint ",(0,a.kt)("a",{parentName:"p",href:"https://api.bentley.com/export/startExport"},"Start Export")),(0,a.kt)("p",null,"These are the required properties for the endpoint:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"projectId")," - Project Id."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"iModelId")," - iModel Id of an iModal that is going to be used for the export."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"exportType"),' - Export Type ("IFC" or "LandXML").')),(0,a.kt)("p",null,"These are the optional properties for the endpoint:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"changesetId")," - Changeset Id of the iModel."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"folderId")," - Folder Id to store the output file."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"mappingFileId")," - User-defined mapping file Id."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"saveLogs")," -  Set to save the logs of export."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"replaceOlderFile")," - Set to replace the older file for same imodel."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ifcVersion")," - Ifc Version if the export type is \u201cIFC\u201d (One of 'IFC4.3 RC1\u2019, 'IFC2x3\u2019, 'IFC2x3 CV 2.0\u2019, 'IFC4 RV 1.2\u2019).")),(0,a.kt)("p",null,"To execute the request, go to ",(0,a.kt)("a",{parentName:"p",href:"/apis/export/operations/startExport/"},"StartExport")," page and use the \u201cTry it out\u201d section.")),(0,a.kt)(u,{mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"5-waiting-for-the-export-to-finish"},"5. Waiting for the export to finish"),(0,a.kt)("p",null,"Once completed the output file will be uploaded to the storage. To get that use the storage API.")),(0,a.kt)(u,{mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"6-conclusion"},"6. Conclusion"),(0,a.kt)("p",null,"We\u2019ve successfully started an export to export the iModel data.")),(0,a.kt)(k,{mdxType:"ContinueLearningSection"},(0,a.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,a.kt)(g,{mdxType:"TileList"},(0,a.kt)(x,{name:"Synchronize an iModel using Synchronization API",description:"You will learn how to use the synchronization REST API to synchronize data to iModel.",href:"/tutorials/synchronization-tutorial/",mdxType:"Tile"}),(0,a.kt)(x,{name:"Filter an iModel using Transformation API",description:"You will learn how to use the transformation REST API to filter iModel data.",href:"/tutorials/filter-by-view-definition-transformation/",mdxType:"Tile"}),(0,a.kt)(x,{name:"Get started with Storage API",description:"You will learn the main workflows and operations of the storage REST API.",href:"/tutorials/storage-quick-start/",mdxType:"Tile"})),(0,a.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,a.kt)(g,{mdxType:"TileList"},(0,a.kt)(T,{title:"Export API documentation",href:"/apis/export/overview",description:"An overview and detailed Export API documentation.",mdxType:"ResourceTile"}))))}I.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-out-section",level:3,title:"Grab a user token from Api reference \u201cTry it out\u201d Section",children:[]}]},{id:"3-store-refresh-token-for-user",level:2,title:"3. Store refresh token for user",children:[]},{id:"4-start-export",level:2,title:"4. Start Export",children:[]},{id:"5-waiting-for-the-export-to-finish",level:2,title:"5. Waiting for the export to finish",children:[]},{id:"6-conclusion",level:2,title:"6. Conclusion",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},31389:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(61565),i=n(67294),r=n(94184),a=n.n(r),l=(n(50371),n(73351)),s=n(85893),p=function(e){var t=e.item,n=e.setActiveItem,o=e.className,i=e.activeItem,r=e.prefix;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"menuItem-container",children:(0,s.jsx)(l.D,{href:"".concat(null!==r&&void 0!==r?r:"#").concat(t.id),children:(0,s.jsx)("span",{onClick:function(){return n(t.id)},className:"".concat(o," ").concat(t.id===i?"active":""),children:t.title})})})})},d=function(e){var t=e.items,n=e.setActiveItem,o=e.activeItem,i=e.navPrefix;return(0,s.jsx)(s.Fragment,{children:t.map((function(e,t){return(0,s.jsxs)("div",{children:[(0,s.jsx)(p,{item:e,className:"sideMenuItem",setActiveItem:n,activeItem:o,prefix:i},e.id),e.children.map((function(e){return(0,s.jsx)(p,{item:e,className:"sideMenuItem sideMenuSubItem",setActiveItem:n,activeItem:o,prefix:i},e.id)}))]},t)}))})},u=n(71125),c=function(e){var t,n=i.useState(!1),r=(0,o.Z)(n,2),l=r[0],p=r[1],c=i.useState(""),h=(0,o.Z)(c,2),m=h[0],f=h[1],k=i.useState(!1),g=(0,o.Z)(k,2),x=g[0],T=g[1];i.useEffect((function(){var t;e.items.length>0&&f(null!==(t=e.activeItem)&&void 0!==t?t:e.items[0].id)}),[e.activeItem]),i.useEffect((function(){var e=function(){var e=window.location.hash.substring(1,window.location.hash.length);f(e),T(!1)};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),[]),i.useEffect((function(){x&&p(!1)}),[x]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.j,{isOpened:l,onClick:function(){p((function(e){return!e}))}}),(0,s.jsx)("div",{id:"tutorial-side-navigation-pane",className:a()(e.className,"sticky-container",l?"opened":void 0),children:(0,s.jsx)("div",{className:"sideMenu sticky-element",children:(0,s.jsxs)("div",{className:"sideMenu-large",children:[e.header,(0,s.jsx)(d,{items:e.items,setActiveItem:function(e){T(!0),f(e)},activeItem:m,navPrefix:null!==(t=e.navPrefix)&&void 0!==t?t:"#"}),e.actions&&(0,s.jsx)("div",{className:"side-menu-actions",children:e.actions})]})})})]})}},1176:function(e,t,n){"use strict";n(63673),n(67294);var o=n(29e3),i=n(31389),r=n(52203),a=n(85893);t.Z=function(e){return(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{id:"page",className:"container tutorial-container",children:[(0,a.jsx)("div",{id:"tutorial-header",children:(0,a.jsx)(o.s,{children:e.tutorial.headline})}),(0,a.jsxs)("div",{id:"tutorial-content",children:[(0,a.jsx)(i.Z,{items:e.tutorial.navigationItems}),(0,a.jsx)("div",{id:"tutorial-content-body",children:e.tutorial.tutorialSteps})]})]})})}},96113:function(e,t,n){"use strict";n.r(t);var o=n(3905),i=n(1176),r=n(55092),a=n(1962),l=(n(67294),n(80989)),s=n(85893);t.default=function(){var e={headline:a.Pu.title,navigationItems:(0,a.Jt)(),tutorialSteps:(0,s.jsx)(o.Zo,{components:r.d,children:(0,s.jsx)(a.ZP,{})})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.d,{title:"".concat(a.Pu.title," - Tutorials | iTwin Platform")}),(0,s.jsx)(i.Z,{tutorial:e})]})}},53841:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/export-data-from-imodel",function(){return n(96113)}])},63673:function(){}},function(e){e.O(0,[8273,508,483,229,271,2033,6815,9527,1061,9774,2888,179],(function(){return t=53841,e(e.s=t);var t}));var t=e.O();_N_E=t}]);