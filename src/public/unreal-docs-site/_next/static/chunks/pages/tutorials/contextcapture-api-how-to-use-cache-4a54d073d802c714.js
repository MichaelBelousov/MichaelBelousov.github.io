(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{68017:function(e,t,a){"use strict";a.d(t,{Pu:function(){return s},ZP:function(){return C},Jt:function(){return y}});var n=a(159),i=a(91164),o=a(67294),r=a(3905),c=["components"],s=(o.createElement,{title:"Using cache in ContextCapture API",tile:{name:"Using cache in ContextCapture API",description:"This tutorial focuses on using cache for faster processing in ContextCapture",thumbnail:"/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache/",durationInMinutes:15,relatedApiIds:["contextcapture"]}}),l=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},u=l("Introduction"),d=l("TutorialSection"),p=l("CodeBlock"),h=l("Alert"),m=l("ContinueLearningSection"),k=l("TileList"),b=l("Tile"),g=l("ResourceTile"),f={metadata:s};function C(e){var t=e.components,a=(0,i.Z)(e,c);return(0,r.kt)("wrapper",(0,n.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(u,{skillLevel:"Advanced",durationInMinutes:"15",summaryImageSrc:"/images/cccs-cache-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to leverage the caching mechanism of ",(0,r.kt)("em",{parentName:"p"},"ContextCapture REST API")," in order to speed up your processing."),(0,r.kt)("p",null,"In this tutorial, we will create a job to be cached, then use this cache to export another format without reprocessing the complete data.")),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"ContextCapture Quick Start tutorial"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start/#3-create-a-workspace"},"Created a workspace")),(0,r.kt)("li",{parentName:"ul"},"Uploaded input data (images and orientations)"))))),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-cache-re-usage-and-behavior"},"1. Cache re-usage and behavior"),(0,r.kt)("h3",{id:"cache-re-usage"},"Cache re-usage"),(0,r.kt)("p",null,"Before creating jobs, it is important to understand how caching works in ",(0,r.kt)("em",{parentName:"p"},"ContextCapture"),".\nWhen asked for, a cache will be created if the job is successful. If a job is failed or cancelled, no cache will be created."),(0,r.kt)("p",null,"A created cache can be used for later jobs in order to reuse it (new exports for example). This is the table of possible workflows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"}),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Calibration"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Reconstruction"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Full"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Calibration"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Reconstruction"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Full"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")))),(0,r.kt)("p",null,"A new calibration job based on a cached reconstruction will failed for example."),(0,r.kt)("h3",{id:"cache-behavior"},"Cache behavior"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"ContextCapture")," considers that cache is the truth, and will use it as much as possible.\nFor example, if you submit a full job with a ",(0,r.kt)("em",{parentName:"p"},"Draft")," mesh quality to produce a 3MX, then use it as cache for a full job with ",(0,r.kt)("em",{parentName:"p"},"Extra")," mesh quality to produce an OBJ, you will have a ",(0,r.kt)("em",{parentName:"p"},"Draft")," OBJ result."),(0,r.kt)("p",null,"Caches are standalone snapshot of a job. They don\u2019t depend on each other. Note that for large projects, cache can be very large:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Cache upload will then slow marginally your job"),(0,r.kt)("li",{parentName:"ul"},"Usage of Reality Data will increase")),(0,r.kt)("p",null,"Cache can be cleaned: they are uploaded in the ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Data")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),".")),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-a-job-that-will-be-cache"},"2. Create a job that will be cache"),(0,r.kt)("p",null,"In order to tell ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," we want to create a cache of the job, we just need to specify a setting in the job creation payload.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(p,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"A new job with cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(p,{language:"json",code:'{\n  "type": "Full",\n  "name": "My CCCS job to be cached",\n  "workspaceId": "WORKSPACE_ID",\n  "inputs": [\n    {\n      "id": "IMAGECOLLECTION_RD_ID",\n      "description": "Drone ImageCollection"\n    },\n    {\n      "id": "CCORIENTATIONS_RD_ID",\n      "description": "Drone CCOrientations"\n    }\n  ],\n  "settings": {\n    "meshQuality": "Extra",\n    "processingEngines": 0,\n    "outputs": [\n      "OBJ"\n    ],\n    "cacheSettings":\n    {\n      "createCache": True\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a new section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"createCache")," set to ",(0,r.kt)("em",{parentName:"p"},"True"),"."),(0,r.kt)("p",null,"At the end of the job, if it is successful, the cache will be automatically uploaded to ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Data")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),"."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note the JOB_ID created by this job. It will be useful later for using the cache.")),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-use-a-cached-job"},"3. Use a cached job"),(0,r.kt)("p",null,"If you want to export your data to another format - 3SM for example, we can use the cached job to speed up the processing time.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(p,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"A new job with using cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(p,{language:"json",code:'{\n  "type":"Full",\n  "name":"My CCCS job using cache",\n  "workspaceId":"WORKSPACE_ID",\n  "inputs":[\n    {\n      "id":"IMAGECOLLECTION_RD_ID",\n      "description":"Drone ImageCollection"\n    },\n    {\n      "id":"CCORIENTATIONS_RD_ID",\n      "description":"Drone CCOrientations"\n    }\n  ],\n  "settings":{\n    "meshQuality":"Extra",\n    "processingEngines":0,\n    "outputs":[\n      "3SM"\n    ],\n    "cacheSettings":{\n      "useCache":"JOB_ID_OF_CACHED_JOB"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"useCache")," set to ",(0,r.kt)("em",{parentName:"p"},"JOB_ID_OF_CACHED_JOB"),".\nThis tells ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," to download and use the cached job.\nThat way, your job will be faster, since geometry was cached and only need to be converted to ",(0,r.kt)("em",{parentName:"p"},"3SM")," format."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"It is possible to combine both properties in ",(0,r.kt)("code",null,"cacheSettings"),". For example you may want to use the cache of a ",(0,r.kt)("i",null,"Calibration")," job for a"," ",(0,r.kt)("i",null,"Full")," job, and have the result of this job cached for future exports.")),(0,r.kt)(m,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," cache tutorial! You should now be able to create and use cached job for faster processing.\nTo go further and use ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(b,{name:"Better calibration in ContextCapture",description:"Learn how to specify calibration settings in ContextCapture, and download the result of a calibration",thumbnail:"/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"}),(0,r.kt)(b,{name:"Better production in ContextCapture",description:"Learn how to specify production settings in ContextCapture",thumbnail:"/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using ContextCapture API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for ContextCapture, and downloading outputs.",mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var y=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-cache-re-usage-and-behavior",level:2,title:"1. Cache re-usage and behavior",children:[{id:"cache-re-usage",level:3,title:"Cache re-usage",children:[]},{id:"cache-behavior",level:3,title:"Cache behavior",children:[]}]},{id:"2-create-a-job-that-will-be-cache",level:2,title:"2. Create a job that will be cache",children:[]},{id:"3-use-a-cached-job",level:2,title:"3. Use a cached job",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},31389:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(61565),i=a(67294),o=a(94184),r=a.n(o),c=(a(50371),a(73351)),s=a(85893),l=function(e){var t=e.item,a=e.setActiveItem,n=e.className,i=e.activeItem,o=e.prefix;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"menuItem-container",children:(0,s.jsx)(c.D,{href:"".concat(null!==o&&void 0!==o?o:"#").concat(t.id),children:(0,s.jsx)("span",{onClick:function(){return a(t.id)},className:"".concat(n," ").concat(t.id===i?"active":""),children:t.title})})})})},u=function(e){var t=e.items,a=e.setActiveItem,n=e.activeItem,i=e.navPrefix;return(0,s.jsx)(s.Fragment,{children:t.map((function(e,t){return(0,s.jsxs)("div",{children:[(0,s.jsx)(l,{item:e,className:"sideMenuItem",setActiveItem:a,activeItem:n,prefix:i},e.id),e.children.map((function(e){return(0,s.jsx)(l,{item:e,className:"sideMenuItem sideMenuSubItem",setActiveItem:a,activeItem:n,prefix:i},e.id)}))]},t)}))})},d=a(71125),p=function(e){var t,a=i.useState(!1),o=(0,n.Z)(a,2),c=o[0],l=o[1],p=i.useState(""),h=(0,n.Z)(p,2),m=h[0],k=h[1],b=i.useState(!1),g=(0,n.Z)(b,2),f=g[0],C=g[1];i.useEffect((function(){var t;e.items.length>0&&k(null!==(t=e.activeItem)&&void 0!==t?t:e.items[0].id)}),[e.activeItem]),i.useEffect((function(){var e=function(){var e=window.location.hash.substring(1,window.location.hash.length);k(e),C(!1)};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}),[]),i.useEffect((function(){f&&l(!1)}),[f]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.j,{isOpened:c,onClick:function(){l((function(e){return!e}))}}),(0,s.jsx)("div",{id:"tutorial-side-navigation-pane",className:r()(e.className,"sticky-container",c?"opened":void 0),children:(0,s.jsx)("div",{className:"sideMenu sticky-element",children:(0,s.jsxs)("div",{className:"sideMenu-large",children:[e.header,(0,s.jsx)(u,{items:e.items,setActiveItem:function(e){C(!0),k(e)},activeItem:m,navPrefix:null!==(t=e.navPrefix)&&void 0!==t?t:"#"}),e.actions&&(0,s.jsx)("div",{className:"side-menu-actions",children:e.actions})]})})})]})}},1176:function(e,t,a){"use strict";a(63673),a(67294);var n=a(29e3),i=a(31389),o=a(52203),r=a(85893);t.Z=function(e){return(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{id:"page",className:"container tutorial-container",children:[(0,r.jsx)("div",{id:"tutorial-header",children:(0,r.jsx)(n.s,{children:e.tutorial.headline})}),(0,r.jsxs)("div",{id:"tutorial-content",children:[(0,r.jsx)(i.Z,{items:e.tutorial.navigationItems}),(0,r.jsx)("div",{id:"tutorial-content-body",children:e.tutorial.tutorialSteps})]})]})})}},32e3:function(e,t,a){"use strict";a.r(t);var n=a(3905),i=a(1176),o=a(55092),r=a(68017),c=(a(67294),a(80989)),s=a(85893);t.default=function(){var e={headline:r.Pu.title,navigationItems:(0,r.Jt)(),tutorialSteps:(0,s.jsx)(n.Zo,{components:o.d,children:(0,s.jsx)(r.ZP,{})})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.d,{title:"".concat(r.Pu.title," - Tutorials | iTwin Platform")}),(0,s.jsx)(i.Z,{tutorial:e})]})}},25816:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/contextcapture-api-how-to-use-cache",function(){return a(32e3)}])},63673:function(){}},function(e){e.O(0,[8273,508,483,229,271,2033,6815,9527,1061,9774,2888,179],(function(){return t=25816,e(e.s=t);var t}));var t=e.O();_N_E=t}]);