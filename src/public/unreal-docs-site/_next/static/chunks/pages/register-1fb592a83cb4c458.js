(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{29963:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return H}});var n=r(70803),a=r(30266),s=r(86818),c=r(61565),i=r(809),o=r.n(i),u=r(67294),p=r(11163),l=r(36815),d=r(39209),f=r(58617),v=r(80853),x=r(61686),m=r(3027),h=r(64992),g=r(85893);var b=function(e){var t=e.value,r=e.setValue,n=e.errorMessage;return(0,g.jsx)(m.O,{id:"appType",label:"Application type",message:n,status:n?"negative":void 0,children:f.Z.getAppTypes.map((function(e){return(0,g.jsx)(h.s,{id:e.type,label:e.name,description:e.description,icon:e.icon,checked:t===e.type,onChange:function(){return r(e.type)}},e.type)}))})},j=r(78518),A=r(61890);r(31173);var w=function(e){var t=e.apiGroups,r=e.setApiGroups;return(0,g.jsx)("div",{className:"checkbox-group",children:t.map((function(e,n){return(0,g.jsx)(j.X,{id:e.id,className:"checkbox-container",label:(0,g.jsxs)("span",{className:"checkbox-list-item",children:[(0,g.jsx)(A.B,{apiGroupId:e.id,className:"api-group-svg"}),(0,g.jsx)("span",{children:e.displayName})]}),checked:e.isSelected,onChange:function(){return function(e,n){var a=t;a[n].isSelected=!e.isSelected,r((0,s.Z)(a))}(e,n)}},e.id)}))})},S=r(79036),k=r(98938),y=r(92809),P=(r(24495),r(45230)),N=r(39978),Z=r(15390),U=r(86668);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,y.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(e){var t=e.isDisabled,r=e.options,n=e.value,a=e.setValue,s=(0,u.useState)(n.map((function(e){return{value:e,label:e}}))),c=s[0],i=s[1],o=r.map((function(e){return{value:e,label:e}}));return(0,u.useEffect)((function(){i(n.map((function(e){return{value:e,label:e}})))}),[n,r]),(0,g.jsx)(P.ZP,{isDisabled:t,isMulti:!0,id:"input-with-dropdown",className:"input-with-dropdown",classNamePrefix:"input-with-dropdown",placeholder:"Select required scopes",value:c,menuPortalTarget:document.body,components:{ClearIndicator:function(e){return(0,g.jsx)(N.c.ClearIndicator,I(I({},e),{},{children:(0,g.jsx)(U.u,{content:"Clear",children:(0,g.jsx)("svg",{children:(0,g.jsx)(Z.GG$,{})})})}))},DropdownIndicator:function(e){return(0,g.jsx)(N.c.DropdownIndicator,I(I({},e),{},{children:(0,g.jsx)("svg",{children:(0,g.jsx)(Z.upq,{})})}))},MultiValueRemove:function(e){return(0,g.jsx)(N.c.MultiValueRemove,I(I({},e),{},{children:(0,g.jsx)(U.u,{content:"Remove",children:(0,g.jsx)("svg",{children:(0,g.jsx)(Z.GG$,{})})})}))}},options:o,onChange:function(e){a(e.map((function(e){return e.value})))}})},T=r(45274),D=r(29e3),R=r(72589),_=r(23098),B=r(15645),E=r(24506),G=(r(49898),r(51873)),q=r(89131),F=r(69687),M=r(84316),W=r(31993);var V=function(){var e=(0,u.useState)(""),t=e[0],r=e[1],n=(0,u.useState)(""),i=n[0],m=n[1],h=(0,u.useState)(),j=h[0],A=h[1],y=(0,u.useState)([]),P=y[0],N=y[1],Z=(0,u.useState)([""]),O=Z[0],I=Z[1],V=(0,u.useState)([""]),L=V[0],H=V[1],$=(0,u.useState)(),z=$[0],X=$[1],Y=(0,u.useState)(!1),J=Y[0],K=Y[1],Q=(0,u.useState)(!1),ee=Q[0],te=Q[1],re=(0,u.useState)([]),ne=re[0],ae=re[1],se=(0,u.useState)([]),ce=se[0],ie=se[1],oe=v.v.footerLinks,ue=(0,p.useRouter)(),pe=(0,S.ZP)(),le=(0,c.Z)(pe,2),de=le[0],fe=le[1];(0,u.useEffect)((function(){T.Z.closeAll();var e=d.q.apiGroups.filter((function(e){return e.isReleased}));N((0,s.Z)(e))}),[]);var ve=(0,G.E)().groupScopes;(0,u.useEffect)((function(){var e=Array.from(new Set(P.filter((function(e){return e.isSelected})).flatMap((function(e){return ve[e.id]||[]}))));ae(e),ie(e)}),[P,ve]),(0,u.useEffect)((function(){de.purgeFields()}),[j]);var xe=function(){var e=(0,a.Z)(o().mark((function e(n,a,s,c,i){var u,p,d,v,m,h,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.Z.closeAll(),!de.allValid()){e.next=30;break}if(K(!0),e.prev=3,t){e.next=12;break}return e.next=7,me(n,a,s,c,i);case 7:p=e.sent,r(null===(d=p)||void 0===d?void 0:d.data.clientId),a!==f.p.Service&&a!==f.p.WebApp||X(null===(v=p)||void 0===v?void 0:v.data.secret),e.next=15;break;case 12:return e.next=14,he(t,n,a,s,c,i);case 14:p=e.sent;case 15:return e.next=17,be(null===(u=p)||void 0===u?void 0:u.data.clientId);case 17:0===(m=e.sent).length?(T.Z.positive("Application ".concat(n," was successfully registered."),{type:"temporary",hasCloseButton:!0,link:{title:"View App Details",onClick:function(){var e;return ue.push("".concat(x.ei,"/").concat(a,"/").concat(null===(e=p)||void 0===e?void 0:e.data.clientId))}}}),a===f.p.Service||a===f.p.WebApp?te(!0):je()):(h=m.map((function(e){return"- ".concat(e.product,": ").concat(e.message)})).join("\n"),T.Z.negative("Failed to enable following products: \n".concat(h),{hasCloseButton:!0})),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),g=e.t0.response.data.errors?Object.values(e.t0.response.data.errors).map((function(e){return l.pU.changeBackendTermsToHumanReadable("".concat(e))})):l.pU.changeBackendTermsToHumanReadable(e.t0.response.data.message),T.Z.negative("".concat(g),{hasCloseButton:!0});case 25:return e.prev=25,K(!1),e.finish(25);case 28:e.next=31;break;case 30:fe(!0);case 31:case"end":return e.stop()}}),e,null,[[3,21,25,28]])})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)(o().mark((function e(t,r,n,a,s){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=19;break}return e.next=3,ge(t,r,n,a,s);case 3:c=e.sent,e.t0=r,e.next=e.t0===f.p.Desktop?7:e.t0===f.p.SPA?10:e.t0===f.p.Service?13:e.t0===f.p.WebApp?16:19;break;case 7:return e.next=9,l.pU.createNativeApplication(c);case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,l.pU.createSpaApplication(c);case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,l.pU.createServiceApplication(c);case 15:return e.abrupt("return",e.sent);case 16:return e.next=18,l.pU.createWebApplication(c);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),he=function(){var e=(0,a.Z)(o().mark((function e(t,r,n,a,s,c){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=19;break}return e.next=3,ge(r,n,a,s,c);case 3:i=e.sent,e.t0=n,e.next=e.t0===f.p.Desktop?7:e.t0===f.p.SPA?10:e.t0===f.p.Service?13:e.t0===f.p.WebApp?16:19;break;case 7:return e.next=9,l.pU.updateNativeApplication(t,i);case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,l.pU.updateSpaApplication(t,i);case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,l.pU.updateServiceApplication(t,i);case 15:return e.abrupt("return",e.sent);case 16:return e.next=18,l.pU.updateWebApplication(t,i);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})));return function(t,r,n,a,s,c){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)(o().mark((function e(t,r,n,a,s){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next=e.t0===f.p.Service?3:e.t0===f.p.Desktop?4:e.t0===f.p.SPA?5:e.t0===f.p.WebApp?6:7;break;case 3:return e.abrupt("return",{clientName:t||"",allowedScopes:s});case 4:case 5:case 6:return e.abrupt("return",{allowedScopes:s,clientName:t||"",clientUri:void 0,grantType:"authorization_code",postLogoutRedirectUris:a.filter((function(e){return""!==e})),redirectUris:n.filter((function(e){return""!==e}))});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),be=function(){var e=(0,a.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n=q.r.map((function(e){return l.pU.enableProduct(t,e).catch((function(t){var n,a,s=l.pU.changeBackendTermsToHumanReadable(null===t||void 0===t||null===(n=t.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message);r.push({product:e,message:s})}))})),e.next=4,Promise.all(n);case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){ue.push(x.$Z)},Ae=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}e.t0=j,e.next=e.t0===f.p.Service?4:e.t0===f.p.Desktop?7:e.t0===f.p.SPA?10:e.t0===f.p.WebApp?13:16;break;case 4:return e.next=6,l.pU.deleteServiceApplication(t);case 6:return e.abrupt("break",16);case 7:return e.next=9,l.pU.deleteNativeApplication(t);case 9:return e.abrupt("break",16);case 10:return e.next=12,l.pU.deleteSpaApplication(t);case 12:return e.abrupt("break",16);case 13:return e.next=15,l.pU.deleteWebApplication(t);case 15:return e.abrupt("break",16);case 16:T.Z.closeAll(),ue.push(x.$Z);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[J&&(0,g.jsx)(W.b,{}),(0,g.jsxs)("div",{id:"page",className:"register-page",children:[(0,g.jsx)(D.s,{children:"Register your application"}),(0,g.jsx)(R.x,{className:"mandatory-field-legend",children:"All fields are mandatory unless stated otherwise."}),(0,g.jsxs)("form",{className:"register-form-container",children:[(0,g.jsx)(_.L,{id:"applicationName",placeholder:"Please enter your application name.",label:"Application name",value:i,onChange:function(e){m(e.target.value),de.showMessageFor(S.Iv.AppName)},onBlurCapture:function(e){m(e.target.value),de.showMessageFor(S.Iv.AppName)},message:de.message(S.Iv.AppName,i,j===f.p.Service?"required|max:60":"required|max:128"),status:de.message(S.Iv.AppName,i,j===f.p.Service?"required|max:60":"required|max:128")?"negative":void 0,onBlur:function(){de.showMessageFor(S.Iv.AppName)}}),(0,g.jsx)(B.B,{label:"API associations",id:"apiAssociations",status:de.message(S.Iv.ApiGroups,P,"HasAtLeastOneAPIAssociation")?"negative":void 0,message:de.message(S.Iv.ApiGroups,P,"HasAtLeastOneAPIAssociation"),children:(0,g.jsx)(w,{apiGroups:P,setApiGroups:N})}),(0,g.jsx)(B.B,{id:"allowedScopes",label:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{children:"Allowed scopes"}),(0,g.jsx)(U.u,{placement:"right",content:"Add all scopes from selected API associations",children:(0,g.jsx)(E.z,{id:"select-all-scopes",styleType:"default",size:"small",onClick:function(){return ie(ne)},children:"Select all"})})]}),status:de.message(S.Iv.Scopes,ce,"required")?"negative":void 0,message:de.message(S.Iv.Scopes,ce,"required"),children:(0,g.jsx)(C,{isDisabled:!1,options:ne,value:ce,setValue:ie})}),(0,g.jsx)(b,{value:j,setValue:A,errorMessage:de.message(S.Iv.AppType,j,"required")}),j!==f.p.Service&&(0,g.jsx)(M.Z,{postLogoutRedirectUris:L,setPostLogoutRedirectUris:H,setRedirectUris:I,validator:de,redirectUris:O})]}),(0,g.jsx)(F.Z,{message:(0,g.jsxs)(g.Fragment,{children:["By proceeding to register your application, you agree to our"," ",(0,g.jsx)("a",{target:"_blank",rel:"noreferrer",href:oe.tosUrl,title:"Terms of Service",children:"Terms of Service"}),"."]}),onSave:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(i,j,O,L,ce);case 2:case"end":return e.stop()}}),e)}))),onCancel:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae();case 2:case"end":return e.stop()}}),e)})))}),(0,g.jsx)(k.Z,{secret:z,show:ee,closeHandle:je,message:(0,g.jsxs)(g.Fragment,{children:["You have successfully registered an application. Copy the"," ",(0,g.jsx)("strong",{children:"Client Secret"})," for your application now!"]})})]})]})},L=r(9008);var H=function(){(0,n.q)();var e=(0,g.jsx)(L.default,{children:(0,g.jsx)("title",{children:"Register your application | iTwin Platform"})});return(0,g.jsxs)(g.Fragment,{children:[e,(0,g.jsx)(V,{})]})}},11073:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(29963)}])},31173:function(){},24495:function(){},49898:function(){}},function(e){e.O(0,[229,123,7490,6815,1890,5621,9774,2888,179],(function(){return t=11073,e(e.s=t);var t}));var t=e.O();_N_E=t}]);