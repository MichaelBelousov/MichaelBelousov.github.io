(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{35986:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return w},Jt:function(){return b}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Adding Attachments and Comments to Your Issue",tile:{name:"Adding Attachments and Comments to Your Issue",description:"Use the Issues REST API to add documents, images, and comments to an issue.",thumbnail:null,href:"/tutorials/adding-attachments-and-comments-to-your-issue/",durationInMinutes:15,relatedApiIds:["issues"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("ActionLinkButton"),h=p("CodeBlock"),k=p("Alert"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T={metadata:l};function w(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Attachments and comments provide a great way for your team to discuss and collaborate on solving an issue. Attachments let you provide files with more details about an issue, and comments let multiple people ask questions and talk about an issue without overwriting each others\u2019 changes."),(0,r.kt)("p",null,"In this tutorial, you will learn how to use the Issues REST API to add comments to an already-existing issue and view all of the issue\u2019s comments. You will also use the API to attach a file to the issue and then download it."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"You will need to create an issue in your project so that you can add comments and attachments to it. Please complete the tutorial ",(0,r.kt)("a",{parentName:"p",href:"../creating-your-first-issue/"},"Creating Your First Issue")," if you haven\u2019t already."),(0,r.kt)("p",null,"Once you have created an issue, note its ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property. You will need to use that anytime you see ",(0,r.kt)("strong",{parentName:"p"},"<","your-issue-id",">")," in this tutorial.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-comments"},"1. Comments"),(0,r.kt)("p",null,"Comments are simple text posts that are associated with a single issue. Many different users in your project can comment on an issue, and anyone who can view the issue will be able to see who said what and when. They\u2019re a useful tool for asking questions or providing clarification.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/add-comment-to-issue/",target:"_blank",title:"Try the Add Comment to Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Method, sample URL, and headers"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues/<your-issue-id>/comments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body"),(0,r.kt)(h,{language:"json",code:'{\n  "text": "This has been noted and will be fixed in version 1.3."\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:"HTTP/1.1 201 Created",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-creating-a-comment"},"1.1. Creating a Comment"),(0,r.kt)("p",null,"Creating a comment is simple! Make a POST request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/add-comment-to-issue/"},"Add Comment to Issue")," endpoint. The body is a JSON object containing just one property\u2014",(0,r.kt)("inlineCode",{parentName:"p"},"text"),"\u2014whose string value is the contents of the message you want to send. The server will automatically generate and save metadata, including when the comment was posted and who made the request."),(0,r.kt)("h4",{id:"url"},"URL"),(0,r.kt)("p",null,"The path includes your issue ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," followed by ",(0,r.kt)("inlineCode",{parentName:"p"},"/comments"),", i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<your-issue-id>/comments")),(0,r.kt)("h4",{id:"body"},"Body"),(0,r.kt)("p",null,"Provide a JSON object with a ",(0,r.kt)("inlineCode",{parentName:"p"},"text")," property containing your message, and no other properties."),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"If the request succeeds, the response will just consist of the ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code (and some headers) without a body.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-issue-comments/",target:"_blank",title:"Try the Get Issue Comments endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/comments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "comments":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeO7IKKXOvh1Nkl344vJ_s_E",\n      "text":"This has been noted and will be fixed in version 1.3.",\n      "authorDisplayName":"Andrew Menzies",\n      "_links":{\n        "author":{\n          "href":"https://api.bentley.com/projects/16ab8bc6-c7de-4fdb-bdb9-248b3b07c178/members/9e543213-2457-466d-9de3-8d8a186b4189"\n        }\n      },\n      "createdDateTime":"2021-06-14T20:34:33.9220455Z"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-viewing-an-issues-comments"},"1.2. Viewing an Issue\u2019s Comments"),(0,r.kt)("p",null,"You can read the comment you added by making a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-comments/"},"Get Issue Comments")," endpoint."),(0,r.kt)("h4",{id:"url-1"},"URL"),(0,r.kt)("p",null,"The URL for this request is exactly the same as it is for creating a comment: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<your-issue-id>/comments")),(0,r.kt)("h4",{id:"response-1"},"Response"),(0,r.kt)("p",null,"The response consists of an array of comments. For each comment, the author\u2019s display name and the comment\u2019s creation time are provided, even though you didn\u2019t manually set them in your request."),(0,r.kt)("p",null,"Each comment in the response also includes a link that can be followed to request additional information about the comment\u2019s author from the ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project-team-member-details/"},"Get Project Team Member Details")," endpoint of the ",(0,r.kt)("strong",{parentName:"p"},"Projects")," API, assuming you have access to it.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-attachments"},"2. Attachments"),(0,r.kt)("p",null,"The Issues API supports attaching files of many different types to issues\u2014nearly any non-executable file type is supported. These can include documents, images (like a problem at the project\u2019s physical site or a screenshot of an iModel), and even short videos (up to 30MB). Adding an attachment to an issue right after you create it can be an excellent way of providing more context than words alone.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/add-attachment-to-issue/",target:"_blank",title:"Try the Add Attachment to Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Method, sample URL, and header"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues/<your-issue-id>/attachments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body"),(0,r.kt)(h,{language:"json",code:'{\n  "fileName":"ExampleDoc.txt",\n  "caption":"Document related to the issue"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:"HTTP/1.1 201 Created\nLocation: https://api.bentley.com/issues/xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw/attachments/xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/upload-attachment-file/",target:"_blank",title:"Try the Upload Attachment File endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request (you will also need to include the file's bytes)"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/issues/xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw/attachments/xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-adding-an-attachment"},"2.1. Adding an Attachment"),(0,r.kt)("p",null,"Adding an attachment is a two-step process. First, make a POST request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/add-attachment-to-issue/"},"Add Attachment to Issue")," endpoint to create metadata for the file you\u2019re about to upload."),(0,r.kt)("h4",{id:"url-2"},"URL"),(0,r.kt)("p",null,"The URL path includes the issue\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property followed by ",(0,r.kt)("inlineCode",{parentName:"p"},"/attachments"),", i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<id>/attachments"),"."),(0,r.kt)("h4",{id:"body-1"},"Body"),(0,r.kt)("p",null,"The request body is a JSON object. It must contain a ",(0,r.kt)("strong",{parentName:"p"},"fileName")," property which can be any valid filename (without a directory path). The file extension should be accurate for the type of file you are about to upload to ensure that users who download the file will be able to open it."),(0,r.kt)("p",null,"You may also add a ",(0,r.kt)("strong",{parentName:"p"},"caption")," property. It just contains simple text that can provide additional context to users who look up the issue\u2019s attachments."),(0,r.kt)("h4",{id:"response-2"},"Response"),(0,r.kt)("p",null,"If successful, the response will include a ",(0,r.kt)("strong",{parentName:"p"},"Location")," header with a URL. Now, for the second step: Upload your raw file (plus the Authorization header, as usual) via PUT request to that URL to complete the process."),(0,r.kt)("p",null,"You can upload the file using the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/upload-attachment-file/"},"Upload Attachment File")," endpoint. The ",(0,r.kt)("inlineCode",{parentName:"p"},"attachmentId")," URL parameter is equal to the final segment of the URL that was returned in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Location")," header. (That is, the segment after ",(0,r.kt)("inlineCode",{parentName:"p"},"/attachments/"),". For example, in the response shown under ",(0,r.kt)("strong",{parentName:"p"},"Sample response"),", the attachment id would be ",(0,r.kt)("inlineCode",{parentName:"p"},"xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI"),", but it\u2019ll be different for your attachment.)"),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Note: To upload a file using the Try It feature of our documentation site, choose the ",(0,r.kt)("strong",null,"Binary")," radio button under ",(0,r.kt)("strong",null,"Body"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-issue-attachments/",target:"_blank",title:"Try the Get Issue Attachments endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request to get attachment list"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/attachments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample attachment list response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "attachments":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI",\n      "fileName":"ExampleDoc.txt",\n      "createdDateTime":"2021-06-16T19:11:21.2722577Z",\n      "size":405,\n      "caption":"Document related to the issue",\n      "binding":null,\n      "type":"txt"\n    }\n  ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-attachment-by-id/",target:"_blank",title:"Try the Get Attachment File endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request to get file"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/attachments/<your-attachment-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"22-getting-the-issues-attachments"},"2.2. Getting the Issue\u2019s Attachments"),(0,r.kt)("p",null,"Make a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-attachments/"},"Get Issue Attachments")," endpoint, passing your issue\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,r.kt)("strong",{parentName:"p"},"id")," parameter, to get a list of all files attached to the issue."),(0,r.kt)("p",null,"This will return a JSON array of attachment metadata, including ",(0,r.kt)("strong",{parentName:"p"},"fileName"),", ",(0,r.kt)("strong",{parentName:"p"},"id"),", and the auto-populated ",(0,r.kt)("strong",{parentName:"p"},"size")," (in bytes) and ",(0,r.kt)("strong",{parentName:"p"},"createdDateTime"),". Find your attachment and take note of its ",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"."),(0,r.kt)("p",null,"Make a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-attachment-by-id/"},"Get Attachment File by ID")," endpoint, passing the same issue ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,r.kt)("strong",{parentName:"p"},"id")," parameter and passing the attachment ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,r.kt)("strong",{parentName:"p"},"attachmentId")," parameter. This will return the file you uploaded earlier. (If using the Try It feature, our developer site will attempt to display the file\u2019s bytes as text, so it may not work well for images. It might be better to try attaching a plain .txt file for purposes of this tutorial.)")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Adding Attachments and Comments to Your Issue",description:"Upload images and documents, and post comments, to make your issue more detailed.",href:"/tutorials/adding-attachments-and-comments-to-your-issue",mdxType:"Tile"}),(0,r.kt)(f,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",isExternal:!0,mdxType:"Tile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-comments",level:2,title:"1. Comments",children:[{id:"11-creating-a-comment",level:3,title:"1.1. Creating a Comment",children:[]},{id:"12-viewing-an-issues-comments",level:3,title:"1.2. Viewing an Issue\u2019s Comments",children:[]}]},{id:"2-attachments",level:2,title:"2. Attachments",children:[{id:"21-adding-an-attachment",level:3,title:"2.1. Adding an Attachment",children:[]},{id:"22-getting-the-issues-attachments",level:3,title:"2.2. Getting the Issue\u2019s Attachments",children:[]}]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},22544:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Adding showcase widgets to your iTwin Viewer",tile:{name:"Adding showcase widgets to your iTwin Viewer",description:"This tutorial will take widgets from the sample showcase and add them into your iTwin Viewer using the `uiProviders` prop.",thumbnail:"/images/view_attributes_ported_results.png",href:"/tutorials/adding-showcase-widgets-to-your-itwin-viewer/",durationInMinutes:30,relatedApiIds:["visualization"],showInFirstSteps:!0,firstStepsSequenceNumber:3}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"/images/adding-showcase-widgets-to-your-itwin-viewer-sample.gif",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take widgets from the sample showcase and add them to your iTwin Viewer using the ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Explored the ",(0,r.kt)("a",{parentName:"li",href:"https://www.itwinjs.org/sample-showcase"},"sample showcase"),"."),(0,r.kt)("li",{parentName:"ul"},"Your own ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/iTwin/viewer"},"local source")," for the iTwin Web Viewer based on the template @itwin/web-viewer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions for that can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Configured your local source to open the \u201cHouse Model\u201d sample iModel.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to use this sample iModel can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-test-imodel-sample"},"here"),"."))),(0,r.kt)("li",{parentName:"ul"},"Understand the concept of a ",(0,r.kt)("a",{parentName:"li",href:"https://www.itwinjs.org/learning/ui/abstract/uiitemsprovider"},"UI Provider")," and adding ",(0,r.kt)("a",{parentName:"li",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/"},"widgets"),"."),(0,r.kt)("li",{parentName:"ul"},"Completed ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-viewer-hello-world"},"\u201cCustomizing the iTwin Viewer\u201d")," tutorial."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-understanding-the-sample-showcase"},"1. Understanding the Sample Showcase"),(0,r.kt)("p",null,"We hope you have given the ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/sample-showcase"},"sample showcase")," a tour and enjoyed the many samples provided. You may want to use some of these samples in your own iTwin Viewer, and to do so you\u2019ll first need to understand how the showcase works."),(0,r.kt)("p",null,"If we take a closer look at the files involved in each sample, you\u2019ll notice they all follow the same pattern containing a few important files:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName]App.tsx")," - Corresponds to ",(0,r.kt)("inlineCode",{parentName:"li"},"App.tsx")," in the iTwin Viewer template and provides the main ",(0,r.kt)("inlineCode",{parentName:"li"},"Viewer")," component."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName]Widget.tsx")," - Defines the ",(0,r.kt)("inlineCode",{parentName:"li"},"UiItemsProvider")," that will be passed into prop ",(0,r.kt)("inlineCode",{parentName:"li"},"uiProviders")," for our sample widget component. This widget is the controller for our samples."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName]Api.ts")," - Defines widget functionality that uses the iTwin.js API being showcased."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName].scss")," - Defines the styles in our css classes used inside the widget.")),(0,r.kt)("p",null,"Given this pattern, it\u2019s simple to identify the parts required to bring our sample showcase to your iTwin Viewer. The component revolves around the ",(0,r.kt)("inlineCode",{parentName:"p"},"[SampleName]Widget.tsx")," file so we need to copy all the files associated with our custom widgets ",(0,r.kt)("inlineCode",{parentName:"p"},"UiItemsProvider")," and pass it in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"The Viewer component in ViewAttributesApp.tsx file"),(0,r.kt)(m,{language:"jsx",code:'<Viewer\n  iTwinId={process.env.IMJS_ITWIN_ID ?? ""}\n  iModelId={process.env.IMJS_IMODEL_ID ?? ""}\n  authClient={AuthorizationClient.oidcClient}\n  viewportOptions={viewportOptions}\n  onIModelConnected={_oniModelReady}\n  defaultUiConfig={default3DSandboxUi}\n  theme="dark"\n  uiProviders={uiProviders}\n/>',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-example-using-a-sample"},"2. Example using a sample"),(0,r.kt)("p",null,"For this tutorial, we\u2019ll be taking the widget from sample ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/sample-showcase/?group=Viewer&sample=view-attributes-sample&imodel=House+Sample"},"View Attributes")," and adding it into our iTwin Viewer."),(0,r.kt)("p",null,"Starting with our entry file ",(0,r.kt)("inlineCode",{parentName:"p"},"ViewAttributesApp.tsx"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component is shown in a code snippet.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Passing ViewAttributesWidgetProvider to uiProviders"),(0,r.kt)(m,{language:"jsx",code:'import { ViewAttributesWidgetProvider } from "./ViewAttributesWidget";\n...\nconst uiProviders = [new ViewAttributesWidgetProvider()];',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Prop ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," is passed in as an array that contains the ",(0,r.kt)("inlineCode",{parentName:"p"},"ViewAttributesWidgetProvider"),", imported and defined at the top of the file.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Lines you need to add in your iTwin Viewer in `App.tsx`"),(0,r.kt)(m,{language:"jsx",code:'... // Import the widget provider\nimport { ViewAttributesWidgetProvider } from "./ViewAttributesWidget";\n... // Construct the widget provider\nconst uiProviders = [new ViewAttributesWidgetProvider()];\n... // A Prop passed into the <Viewer> component\nuiProviders={uiProviders}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"To sum it up, three lines shown is a code snippet are the only lines you\u2019ll need to add in your iTwin Viewer in ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx"),".")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"We now have made all the necessary coding modifications to our iTwin Viewer. We\u2019ll just need to copy the remaining three files to bring our widget over."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ViewAttributesApi.ts")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ViewAttributesWidget.tsx")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ViewAttributes.scss")))),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"For this tutorial, these files will be placed directly in our src directory so your file structure should look similar to this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/sample_viewer_port_to_itwin_viewer.png",alt:"ViewAttributesStructure"})),(0,r.kt)("p",null,"Running our iTwin Viewer now, you\u2019ll notice the same fully functional widget from the sample showcase in your iTwin Viewer."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/view_attributes_ported_results.png",alt:"ViewAttributesResults"})),(0,r.kt)("p",null,"Feel free to customize these widgets to your liking.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-multiple-ways-to-extend-uiproviders"},"3. Multiple ways to extend uiProviders"),(0,r.kt)("p",null,"If you already have a ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop passed in or would like to add more widgets from the sample showcase, the ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop takes in an array of providers. Extending the widget is as simple as appending to your array.")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"You can add to the uiProviders const variable, i.e.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">const</span> uiProviders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ViewAttributesWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HyerModelingWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span>\n'}})),(0,r.kt)("p",null,"or ignore the variable completely and pass the array in directly:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Viewer</span></span>\n  <span class="token attr-name">iTwinId</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">IMJS_ITWIN_ID</span> <span class="token operator">??</span> <span class="token string">""</span><span class="token punctuation">}</span></span>\n  <span class="token attr-name">iModelId</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">IMJS_IMODEL_ID</span> <span class="token operator">??</span> <span class="token string">""</span><span class="token punctuation">}</span></span>\n  <span class="token attr-name">authClient</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>AuthorizationClient<span class="token punctuation">.</span>oidcClient<span class="token punctuation">}</span></span>\n  <span class="token attr-name">viewportOptions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>viewportOptions<span class="token punctuation">}</span></span>\n  <span class="token attr-name">onIModelConnected</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>_oniModelReady<span class="token punctuation">}</span></span>\n  <span class="token attr-name">defaultUiConfig</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>default3DSandboxUi<span class="token punctuation">}</span></span>\n  <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dark<span class="token punctuation">"</span></span>\n  <span class="token attr-name">uiProviders</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ViewAttributesWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HyperModelingWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>\n<span class="token punctuation">/></span></span>\n'}}))),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Just remember to copy corresponding files to your source.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Using an existing UiItemsProvider instead of passing in multiple new ones"),(0,r.kt)(m,{language:"jsx",code:"export class MyCustomUiProvider extends UiItemsProvider {\n  ... // Your custom code\n  public provideWidgets(\n    _stageId: string,\n    _stageUsage: string,\n    location: StagePanelLocation,\n    _section?: StagePanelSection\n  ): ReadonlyArray<AbstractWidgetProps> {\n    const widgets: AbstractWidgetProps[] = [];\n    if (location === StagePanelLocation.Right) {\n      widgets.push({\n        id: 'ViewAttributesWidget',\n        label: 'View Attributes Controls',\n        defaultState: WidgetState.Floating,\n        getWidgetContent: () => <ViewAttributesWidget />, // Don't forget to copy code for the ViewAttributesWidget\n      });\n    }\n  }\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"If you\u2019d like to use an existing UiItemsProvider instead of passing in multiple new ones, just add the widget in your ",(0,r.kt)("inlineCode",{parentName:"p"},"provideWigets()")," function along with copying and pasting the react component to your desired location.")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"As you can see, extending your iTwin Viewer with multiple widgets is simple.\nIt\u2019s completely up to you on how you want to structure your directories and components. Feel free to extend as many widgets as you like.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Start building a Viewer App",thumbnail:"/images/retail-tutorial-sample-small.png",description:"This quick start is intended to help you get started with using iTwin Platform visualization components. By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).",href:"/tutorials/web-application-quick-start/",mdxType:"Tile"}),(0,r.kt)(g,{name:'Customizing the iTwin Viewer - "The Basics"',thumbnail:"/images/itwin-viewer-hello-world-sample-small.png",description:"This tutorial will take you through the first steps of customizing your iTwin Web Viewer. First you will learn how to add a new user interface component. Later you will customize that component to change the background color of your viewer.",href:"/tutorials/itwin-viewer-hello-world",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Create a test iModel from a Bentley provided sample",href:"/tutorials/create-test-imodel-sample",description:"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Sample House Model",href:"/tutorials/create-test-imodel-sample/#house-sample",description:"Bentley provided sample of a House for test iModel creation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"UI Provider",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/",description:"Describes interface of objects that want to provide UI component to the running IModelApp.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"View Attributes Sample",href:"https://www.itwinjs.org/sample-showcase/?group=Viewer&sample=view-attributes-sample&imodel=House+Sample",description:"This sample demonstrates the API used to control view attributes.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Visit the iTwin Sample Showcase",href:"https://www.itwinjs.org/sample-showcase/",description:"The iTwin Sample Showcase provides many samples demonstrating options for customizing the iTwin viewer.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-understanding-the-sample-showcase",level:2,title:"1. Understanding the Sample Showcase",children:[]},{id:"2-example-using-a-sample",level:2,title:"2. Example using a sample",children:[]},{id:"3-multiple-ways-to-extend-uiproviders",level:2,title:"3. Multiple ways to extend uiProviders",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},91272:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return w},Jt:function(){return b}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Authorize Service Application",tile:{name:"Get Access Token with Service application",description:"This tutorial will provide you information how to authorize.",href:"/tutorials/authorize-service/",durationInMinutes:10,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("SignInButton"),m=p("CreateServiceAppButton"),h=p("CodeBlock"),k=p("Alert"),g=p("Title"),y=p("HttpSample"),f=p("ContinueLearningSection"),T={metadata:l};function w(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial you will create ",(0,r.kt)("strong",{parentName:"p"},"Service")," application. Learn how ",(0,r.kt)("strong",{parentName:"p"},"client_credential")," flow works and how to get ",(0,r.kt)("strong",{parentName:"p"},"access token")," with it. And in the end we will double check if token is truly valid by making request to one of ",(0,r.kt)("strong",{parentName:"p"},"iTwin Platforms API endpoint"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-service-application"},"1. Register an Service Application"),(0,r.kt)("h4",{id:"what-is-service-application"},"What is Service Application?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Service application")," is designed to operate without user interaction (sometimes called two-legged OAuth) in order to access web-hosted resourced by using the identity of an application. Services run on a server where the source code or configuration of the application is not available to the public. This allows the use of a client secret when communicating with the authorization server to help improve security.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"SignInButton"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"sign-in"},"Sign in"),(0,r.kt)("p",null,"To be able to register application you need to be Signed in.\nIf you are not already you can do that in action pane by clicking ",(0,r.kt)("strong",{parentName:"p"},"Sign In")," button or in the headers top right corner. ")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(m,{tooltip:"Register a basic Service App for this tutorial",allowedScopes:["users:read"],clientName:"Authorize Service",mdxType:"CreateServiceAppButton"},"Register Application"),(0,r.kt)(h,{language:"json",code:e.clientId&&e.clientSecret&&e.scope?JSON.stringify({client_id:e.clientId,client_secret:e.clientSecret,scope:e.scope},void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"register-an-service-application"},"Register an Service Application"),(0,r.kt)("p",null,"You will need to register an application to be able consume/use iTwin Platform APIs.\nTo make your tutorial more interactive please use the ",(0,r.kt)("strong",{parentName:"p"},"Register Application")," button."),(0,r.kt)("p",null,"After you click this button it will registers an client and will display its settings."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": This is the unique identifier for your application. It is displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_secret"),": Secret that was created and shown first time you created an application. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope"),": List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},(0,r.kt)("b",null,"For future use"),": You can register applications in ",(0,r.kt)("a",{href:"/my-apps",target:"_blank"},"My apps")," page. But it is not recommended for this tutorial")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-access-token"},"2. Get Access Token"),(0,r.kt)("h4",{id:"what-is-access-token"},"What is access token?"),(0,r.kt)("p",null,"An ",(0,r.kt)("strong",{parentName:"p"},"Access Token")," is token which contains a string that can be used to make authenticated requests to an API to access protect resources (in this case iTwin Platform APIs). The string has no meaning to the application using it, but represents that the user has authorized the application to access their account. The token is bounded by an appropriate lifetime, scopes, and other information that the server may require."),(0,r.kt)("h4",{id:"21-client-credentials-flow"},"2.1. Client credentials flow"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Client credentials")," flow provides the ability for a web service (confidential client) to use it\u2019s own credentials, instead of impersonating a user, to authenticate when calling a web service. Permissions are granted directly to the application itself by an administrator. When the app presents a token to a resource, the resource enforces that the app itself has authorization to perform an action since there is no user involved in the authentication."),(0,r.kt)("p",null,"You can find more information ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizingservicemachinetomachines"},"here"),", but it is more technical."),(0,r.kt)("p",null,"To sum up in simpler terms:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"No user interaction,"),(0,r.kt)("li",{parentName:"ul"},"No user context/information,"),(0,r.kt)("li",{parentName:"ul"},"You will use ",(0,r.kt)("strong",{parentName:"li"},"client id")," and ",(0,r.kt)("strong",{parentName:"li"},"client secret")," and ",(0,r.kt)("strong",{parentName:"li"},"scope")," to get access token."))),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i;return[(0,r.kt)(g,{mdxType:"Title"},"Request to Token endpoint"),(0,r.kt)(y,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",client_secret:null!==(n=e.clientSecret)&&void 0!==n?n:"CLIENT_SECRET",scope:null!==(i=e.scope)&&void 0!==i?i:"users:read",grant_type:"client_credentials"}).toString(),saveResponseTo:"tokenResponse",canSendRequest:e.clientId&&e.clientSecret&&e.scope,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"211-request-to-token-endpoint"},"2.1.1. Request to Token endpoint"),(0,r.kt)("p",null,"You need to call the token endpoint with the ",(0,r.kt)("strong",{parentName:"p"},"Content-Type")," header equal to ",(0,r.kt)("strong",{parentName:"p"},"application/x-www-form-urlencoded"),"."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"url encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": Identification that is generated when the application is created.  You can find it in the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. If you generated it during this tutorial you can find it in the first step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_secret"),": Secret that was created and shown first time you created an application"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope"),": Space separated scopes (in this tutorial: users:read)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"client_credentials")," it indicates what flow is in use and client_credentials basically means that you will provide client_id and client_secret as credentials for fake user."))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(g,{mdxType:"Title"},"Response from the Token endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.tokenResponse||{access_token:"JWT_TOKEN",token_type:"Bearer",expires_in:3599},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"212-response"},"2.1.2. Response"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer")," this is part of Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token")," you can read more ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed into ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for api calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": lifespan of access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-make-the-request"},"3. Make the request")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n;return[(0,r.kt)(g,{mdxType:"Title"},"Request to /users/me endpoint"),(0,r.kt)(y,{method:"GET",url:"".concat(e.baseUrl,"/users/me"),headers:{Authorization:"Bearer "+(null!==(t=null===(n=e.tokenResponse)||void 0===n?void 0:n.access_token)&&void 0!==t?t:"JWT_TOKEN"),Accept:"application/vnd.bentley.itwin-platform.v1+json"},body:void 0,saveResponseTo:"me",canSendRequest:e.tokenResponse,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"31-make-the-request-to-usersme-endpoint"},"3.1. Make the request to /users/me endpoint"),(0,r.kt)("p",null,"This request will show that newly created ",(0,r.kt)("strong",{parentName:"p"},"access token")," is valid and will show how to use it. ",(0,r.kt)("inlineCode",{parentName:"p"},"/users/me")," endpoint would retrieve the logged in user\u2019s profile, but because authorization was done without user interaction it will contain \u201cfake\u201d user information that is associated with this ",(0,r.kt)("strong",{parentName:"p"},"Service")," application.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(g,{mdxType:"Title"},"Response from /users/me endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.me||{user:{displayName:"CLIENT_ID@apps.imsoidc.bentley.com",givenName:"CLIENT_NAME",surname:"LastName",email:"CLIENT_ID@apps.imsoidc.bentley.com",alternateEmail:"CLIENT_ID@apps.imsoidc.bentley.com",city:null,country:"US",language:"EN",createdDateTime:"2021-08-27T10:19:07.2510000Z"}},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"32-response-explanation"},"3.2. Response explanation"),(0,r.kt)("p",null,"Because service applications does not require user interaction it does not contain any user context or in simpler terms access token does not contain any user information and it gets assigned to \u201cfake\u201d user and you can see details in this response. To give this application any additional access you need give extra roles, that can be done by administrator ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/#serviceapplications"},"more information about that"),".")),(0,r.kt)(f,{mdxType:"ContinueLearningSection"}))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-an-service-application",level:2,title:"1. Register an Service Application",children:[]},{id:"2-get-access-token",level:2,title:"2. Get Access Token",children:[]},{id:"3-make-the-request",level:2,title:"3. Make the request",children:[]}]}},76737:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return v},Jt:function(){return N}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Authorize Single-Page Application (SPA)",tile:{name:"Authorize Single-Page Application (SPA)",description:"This tutorial will show you how to register a Single-Page Application (SPA), get an access token with it, and use it.",href:"/tutorials/authorize-spa/",durationInMinutes:10,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("SignInButton"),m=p("CreateSpaAppButton"),h=p("CodeBlock"),k=p("Title"),g=p("GeneratePkceButton"),y=p("LinkWithUrl"),f=p("HttpSample"),T=p("Alert"),w=p("ContinueLearningSection"),b={metadata:l};function v(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial you will create a ",(0,r.kt)("strong",{parentName:"p"},"Single-Page Application (SPA)"),", learn how ",(0,r.kt)("strong",{parentName:"p"},"authorization code flow")," works with\n",(0,r.kt)("a",{parentName:"p",href:"https://auth0.com/docs/authorization/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce"},(0,r.kt)("strong",{parentName:"a"},"Proof Key for Code Exchange (PKCE)")),",\nand how to get an ",(0,r.kt)("strong",{parentName:"p"},"access token")," with it. In the end we will double check if the token is truly valid by making a request to one of the ",(0,r.kt)("strong",{parentName:"p"},"iTwin Platform API endpoints"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-a-single-page-application-spa"},"1. Register a Single-Page Application (SPA)"),(0,r.kt)("h4",{id:"what-is-a-single-page-application-spa"},"What is a Single-Page Application (SPA)?"),(0,r.kt)("p",null,"A ",(0,r.kt)("strong",{parentName:"p"},"Single-Page Application (SPA)")," is a web application or website that interacts with the user by dynamically rewriting the current web page with new data from the web server,\ninstead of the default method of a web browser loading entire new pages.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"SignInButton"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"sign-in"},"Sign in"),(0,r.kt)("p",null,"To be able to register an application you need to be signed in.\nIf you are not already you can do that by clicking the ",(0,r.kt)("strong",{parentName:"p"},"Sign In")," button in the action pane or in the top right corner of the page.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(m,{tooltip:"Register a basic Single-Page Application (SPA) for this tutorial",allowedScopes:["users:read"],clientName:"Authorize SPA",mdxType:"CreateSpaAppButton"},"Register Application"),(0,r.kt)(h,{language:"json",code:e.clientId&&e.redirectUris&&e.scope?JSON.stringify({client_id:e.clientId,redirect_uri:e.redirectUris&&e.redirectUris[0],scope:e.scope},void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"register-a-single-page-application-spa"},"Register a Single-Page Application (SPA)"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs.\nYou can use the ",(0,r.kt)("strong",{parentName:"p"},"Register Application")," button to automatically create your first Single-Page Application (SPA).\nThis will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your Single-Page Application (SPA)")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," - This is the unique identifier for your application. It is displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirectUris")," - Specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on the application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," - List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"For future use:")," Register and configure your application manually following the instructions in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-an-access-token"},"2. Get an Access Token"),(0,r.kt)("h4",{id:"what-is-an-access-token"},"What is an access token?"),(0,r.kt)("p",null,"An ",(0,r.kt)("strong",{parentName:"p"},"Access Token")," is token which contains a string that can be used to make authenticated requests to an API to access protect resources (in this case iTwin Platform APIs).The string has no meaning to the application using it, but represents that the user has authorized the application to access their account.\nThe token is bounded by an appropriate lifetime, scopes, and other information that the server may require."),(0,r.kt)("h4",{id:"21-authorization-code-flow-with-proof-key-for-code-exchange-pkce"},"2.1. Authorization Code Flow with Proof Key for Code Exchange (PKCE)"),(0,r.kt)("p",null,"This flow provides a way to authorize with an Authorization Server by redirecting to the authorization server,\ngetting a ",(0,r.kt)("strong",{parentName:"p"},"code")," back, and exchanging it for an ",(0,r.kt)("strong",{parentName:"p"},"access token")," in a subsequent call."),(0,r.kt)("p",null,"You can find more information ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizationcodeflowwithproofkeyforcodeexchangepkce"},"here"),", but it is more technical."),(0,r.kt)("p",null,"Steps to get an access token using this flow:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Generate ",(0,r.kt)("strong",{parentName:"li"},"code_verifier")," and ",(0,r.kt)("strong",{parentName:"li"},"code_challenge"),","),(0,r.kt)("li",{parentName:"ol"},"Navigate to the authorization server,"),(0,r.kt)("li",{parentName:"ol"},"The authorization server will redirect back to your application (one of redirect URIs) with ",(0,r.kt)("strong",{parentName:"li"},"code")," query parameter,"),(0,r.kt)("li",{parentName:"ol"},"The application exchange ",(0,r.kt)("strong",{parentName:"li"},"code")," for an ",(0,r.kt)("strong",{parentName:"li"},"access_token")," via the Token endpoint."))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Generate Code Verifier and Code Challenge"),(0,r.kt)(g,{mdxType:"GeneratePkceButton"}),(0,r.kt)(h,{language:"json",code:e.pkce?JSON.stringify(e.pkce,void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"211-code-verifier-and-code-challenge"},"2.1.1. Code Verifier and Code Challenge"),(0,r.kt)("p",null,"PKCE (",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7636#section-4.1"},"RFC 7636"),") is an extension to the Authorization Code flow to prevent CSRF and authorization code injection attacks."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"code_verifier")," is a random string between 43 and 128 characters. It provides proof that you initiated the redirect to the authorization endpoint."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"code_challenge"),": is a string that is generated from ",(0,r.kt)("strong",{parentName:"p"},"code_verifier")," and it is passed to the authorization endpoint as a query parameter.\nPseudo code to generate code challenge:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token function">base64urlEncode</span><span class="token punctuation">(</span><span class="token constant">SHA256</span><span class="token punctuation">(</span><span class="token constant">ASCII</span><span class="token punctuation">(</span>code_verifier<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n'}})),(0,r.kt)("p",null,"Read more about: ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ASCII"},"ASCII"),", ",(0,r.kt)("a",{parentName:"p",href:"https://en.bitcoinwiki.org/wiki/SHA-256"},"SHA256"),", ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.tcl-lang.org/page/base64url"},"base64urlEncode")),(0,r.kt)("p",null,"You can generate them by clicking ",(0,r.kt)("strong",{parentName:"p"},"Generate Code Verifier and Code Challenge"),". This is required for the following steps.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i,a;return[(0,r.kt)(k,{mdxType:"Title"},"Navigate to the Authorization Server"),(0,r.kt)(y,{url:e.authority+"/connect/authorize?"+new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000",scope:null!==(n=e.scope)&&void 0!==n?n:"users:read",response_type:"code",code_challenge:null!==(i=null===(a=e.pkce)||void 0===a?void 0:a.code_challenge)&&void 0!==i?i:"CODE_CHALLENGE",code_challenge_method:"S256"}).toString(),mdxType:"LinkWithUrl"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"212-navigate-to-the-authorization-server"},"2.1.2. Navigate To the Authorization Server"),(0,r.kt)("p",null,"Application should make interactive redirect/navigate to authorization server.\nThis allow user to authorize agents authorization server and give consent to allow access part of his data through your application.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Navigate")," button and it will open popup window that will hit authorization endpoint with required query parameters."),(0,r.kt)("p",null,"The URL will be built in this way:"),(0,r.kt)("p",null,"Authorization endpoint: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize")),(0,r.kt)("p",null,"With query parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," this is the unique identifier for your application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"spa-example"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri")," Specify there you want go back after successful authorization (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3000/redirect"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," list of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),". (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"users:read"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"response_type")," For this flow ",(0,r.kt)("strong",{parentName:"li"},"code")," it is only option and that indicates, that you will get code as query parameter then user will come back from authorization server."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_challenge")," Code challenge that was generated from code ",(0,r.kt)("strong",{parentName:"li"},"code_verifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_challenge_method")," Code challenge method type it should be ",(0,r.kt)("strong",{parentName:"li"},"S256"))),(0,r.kt)("p",null,"So in the end it should look something like this: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize?client_id=CLIENT_ID&redirect_uri=http%3A%2F%2Flocalhost%3A3000&scope=users%3Aread&response_type=code&code_challenge=CODE_CHALLENGE&code_challenge_method=S256"))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},e.code?"Code query parameter value":""),(0,r.kt)(h,{language:"text",code:"string"===typeof e.code?e.code:JSON.stringify(e.code,void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"213-receive-the-code"},"2.1.3. Receive the code"),(0,r.kt)("p",null,"The code will be placed inside the redirect URL query parameter (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/redirect"),(0,r.kt)("strong",{parentName:"p"},"?code=random-string"),").\nThe application should take care of ",(0,r.kt)("strong",{parentName:"p"},"code")," query parameter extraction. If you follow the interactive steps the code should appear in the action pane.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i,a;return[(0,r.kt)(k,{mdxType:"Title"},"Request to Token endpoint"),(0,r.kt)(f,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",code_verifier:null!==(n=null===(i=e.pkce)||void 0===i?void 0:i.code_verifier)&&void 0!==n?n:"CODE_VERIFIER",grant_type:"authorization_code",code:null!==(a=e.code)&&void 0!==a?a:"CODE",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000"}).toString(),saveResponseTo:"tokenResponse",canSendRequest:e.code,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"214-receive-an-access-token"},"2.1.4. Receive an access token"),(0,r.kt)("p",null,"You need to call the token endpoint with the ",(0,r.kt)("strong",{parentName:"p"},"Content-Type")," header equal to ",(0,r.kt)("strong",{parentName:"p"},"application/x-www-form-urlencoded"),"."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"URL encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": Identification that is generated when the application is created.  You can find it in the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. If you generated it during this tutorial you can find it in the first step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"authorization_code")," indicates that the application will use a ",(0,r.kt)("strong",{parentName:"li"},"code")," to get an ",(0,r.kt)("strong",{parentName:"li"},"access_token"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_verifier"),": It is for verification purposes that the same application that redirected to the authorization server is calling this endpoint."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code"),": Code that the application got after the redirect from the authorization server back to the application itself."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri"),": redirect URI there was code send.")),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},(0,r.kt)("b",null,"Code is short lived"),": If your code has expired please Navigate to the authorization server one more time.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from the Token endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.tokenResponse||{access_token:"JWT_TOKEN",token_type:"Bearer",expires_in:3599},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-from-the-token-endpoint"},"Response from the Token endpoint"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer"),". This is part of the Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token"),".  You can read more ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": Access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed in the ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for API calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": Lifespan of the access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-make-the-request"},"3. Make the request")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n;return[(0,r.kt)(k,{mdxType:"Title"},"Request to /users/me endpoint"),(0,r.kt)(f,{method:"GET",url:"".concat(e.baseUrl,"/users/me"),headers:{Authorization:"Bearer "+(null!==(t=null===(n=e.tokenResponse)||void 0===n?void 0:n.access_token)&&void 0!==t?t:"JWT_TOKEN"),Accept:"application/vnd.bentley.itwin-platform.v1+json"},body:void 0,saveResponseTo:"me",canSendRequest:e.tokenResponse,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"31-make-the-request-to-the-usersme-endpoint"},"3.1. Make the request to the /users/me endpoint"),(0,r.kt)("p",null,"This request will show that the newly created ",(0,r.kt)("strong",{parentName:"p"},"access token")," is valid and how to use it.\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"/users/me")," endpoint will retrieve the logged in user\u2019s profile information.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Send request")," button.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from /users/me endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.me||{user:{displayName:"FirstName LastName",givenName:"FirstName",surname:"LastName",email:"FirstName.LastName@domain.com",alternateEmail:"FirstName.LastName@alternative.com",city:"CityName",country:"US",language:"EN",createdDateTime:"2021-08-27T10:19:07.2510000Z"}},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"32-response"},"3.2. Response"),(0,r.kt)("p",null,"This request will return user information (name, email, country and etc.).")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"}))}v.isMDXComponent=!0;var N=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-a-single-page-application-spa",level:2,title:"1. Register a Single-Page Application (SPA)",children:[]},{id:"2-get-an-access-token",level:2,title:"2. Get an Access Token",children:[]},{id:"3-make-the-request",level:2,title:"3. Make the request",children:[]}]}},20398:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return b},Jt:function(){return v}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Authorize Web Application",tile:{name:"Authorize Web Application",description:"This tutorial will show you how to register a Web Application, get an access token with it, and use it.",href:"/tutorials/authorize-webapp/",durationInMinutes:10,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("SignInButton"),m=p("CreateWebAppButton"),h=p("CodeBlock"),k=p("Title"),g=p("LinkWithUrl"),y=p("HttpSample"),f=p("Alert"),T=p("ContinueLearningSection"),w={metadata:l};function b(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial you will create a ",(0,r.kt)("strong",{parentName:"p"},"Web Application"),", learn how ",(0,r.kt)("strong",{parentName:"p"},"authorization code flow")," works with ",(0,r.kt)("strong",{parentName:"p"},"Secret"),",\nand how to get an ",(0,r.kt)("strong",{parentName:"p"},"access token")," with it. In the end we will double check if the token is truly valid by making a request to one of the ",(0,r.kt)("strong",{parentName:"p"},"iTwin Platform API endpoints"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-a-web-application"},"1. Register a Web Application"),(0,r.kt)("h4",{id:"what-is-a-web-application"},"What is a Web Application?"),(0,r.kt)("p",null,"A ",(0,r.kt)("strong",{parentName:"p"},"Web Application")," is an application which runs on web system such as Android, Windows, iOS and etc.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"SignInButton"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"sign-in"},"Sign in"),(0,r.kt)("p",null,"To be able to register an application you need to be signed in.\nIf you are not already you can do that by clicking the ",(0,r.kt)("strong",{parentName:"p"},"Sign In")," button in the action pane or in the top right corner of the page.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(m,{tooltip:"Register a basic Web Application for this tutorial",allowedScopes:["users:read"],clientName:"Authorize Webapp",mdxType:"CreateWebAppButton"},"Register Application"),(0,r.kt)(h,{language:"json",code:e.clientId&&e.redirectUris&&e.scope&&e.clientSecret?JSON.stringify({client_id:e.clientId,client_secret:e.clientSecret,redirect_uri:e.redirectUris&&e.redirectUris[0],scope:e.scope},void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"register-a-web-application"},"Register a Web Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs.\nYou can use the ",(0,r.kt)("strong",{parentName:"p"},"Register Application")," button to automatically create your first Web Application.\nThis will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizingwebapplications"},"Authorization Code Flow for your Web Application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," - This is the unique identifier for your application. It is displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirectUris")," - Specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on the application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," - List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_secret"),": Secret that was created and shown first time you created an application. ")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"For future use:")," Register and configure your application manually following the instructions in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-an-access-token"},"2. Get an Access Token"),(0,r.kt)("h4",{id:"what-is-an-access-token"},"What is an access token?"),(0,r.kt)("p",null,"An ",(0,r.kt)("strong",{parentName:"p"},"Access Token")," is token which contains a string that can be used to make authenticated requests to an API to access protect resources (in this case iTwin Platform APIs).The string has no meaning to the application using it, but represents that the user has authorized the application to access their account.\nThe token is bounded by an appropriate lifetime, scopes, and other information that the server may require."),(0,r.kt)("h4",{id:"21-authorization-code-flow-with-secret"},"2.1. Authorization Code Flow with Secret"),(0,r.kt)("p",null,"This flow provides a way to authorize by redirecting to the Authorize endpoint,\ngetting a ",(0,r.kt)("strong",{parentName:"p"},"code")," back, and exchanging it for an ",(0,r.kt)("strong",{parentName:"p"},"access token")," in a subsequent call."),(0,r.kt)("p",null,"You can find more information ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizingwebapplications"},"here"),", but it is more technical."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"For this tutorial purposes we will split Application into two parts ",(0,r.kt)("strong",{parentName:"p"},"Frontend")," (UI stuff, that runs on user machine) and ",(0,r.kt)("strong",{parentName:"p"},"Backend")," (that runs inside server).")),(0,r.kt)("p",null,"Steps to get an access token using this flow:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Frontend navigates to authorization server."),(0,r.kt)("li",{parentName:"ol"},"Authorization server redirects back to your application (one of redirect URIs) with ",(0,r.kt)("strong",{parentName:"li"},"code")," query parameter."),(0,r.kt)("li",{parentName:"ol"},"Frontend part sends ",(0,r.kt)("strong",{parentName:"li"},"code")," to Backend."),(0,r.kt)("li",{parentName:"ol"},"Backend exchanges ",(0,r.kt)("strong",{parentName:"li"},"code")," for an ",(0,r.kt)("strong",{parentName:"li"},"access_token")," via the Token endpoint."),(0,r.kt)("li",{parentName:"ol"},"Backend sends ",(0,r.kt)("strong",{parentName:"li"},"access_token")," back to Frontend. (And keeps refresh token for himself)"))),(0,r.kt)(c,{subSection:!0,actions:function(e){var t;return[(0,r.kt)(k,{mdxType:"Title"},"Navigate to the Authorization Server"),(0,r.kt)(g,{url:e.authority+"/connect/authorize?"+new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000",scope:e.scopes?e.scopes+" offline_access":"users:read offline_access",response_type:"code"}).toString(),mdxType:"LinkWithUrl"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"211-navigate-to-the-authorization-server"},"2.1.1. Navigate To the Authorization Server"),(0,r.kt)("p",null,"Application should open browser to allow user interact with authorization server.\nThis allow user to authorize agents authorization server and give consent to allow access part of his data through your application.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Navigate")," button and it will open popup window that will hit authorization endpoint with required query parameters."),(0,r.kt)("p",null,"The URL will be built in this way:"),(0,r.kt)("p",null,"Authorization endpoint: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Web Applications")," can ask for ",(0,r.kt)("strong",{parentName:"p"},"offline_access")," scope.  This will indicate that you want to receive a ",(0,r.kt)("strong",{parentName:"p"},"refresh_token")," which can be used to generate new ",(0,r.kt)("strong",{parentName:"p"},"access tokens")," ",(0,r.kt)("strong",{parentName:"p"},"without")," user interaction."),(0,r.kt)("p",null,"With query parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," - This is the unique identifier for your application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"webapp-example"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri")," - Specifies where you want to go back after successful authorization (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3000/redirect"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," - List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"users:read"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"response_type")," - For this flow ",(0,r.kt)("strong",{parentName:"li"},"code")," is the only option and it indicates that you will get code as a query parameter when the user will come back from the authorization server.")),(0,r.kt)("p",null,"So in the end it should look something like this: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize?client_id=CLIENT_ID&redirect_uri=http%3A%2F%2Flocalhost%3A3000&scope=users%3Aread+offline_access&response_type=code"))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},e.code?"Code query parameter value":""),(0,r.kt)(h,{language:"text",code:"string"===typeof e.code?e.code:JSON.stringify(e.code,void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"212-receive-the-code"},"2.1.2. Receive the code"),(0,r.kt)("p",null,"The code will be placed inside the redirect URL query parameter (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/redirect"),(0,r.kt)("strong",{parentName:"p"},"?code=random-string"),").\nThe application should take care of ",(0,r.kt)("strong",{parentName:"p"},"code")," query parameter extraction. If you follow the interactive steps the code should appear in the action pane.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i;return[(0,r.kt)(k,{mdxType:"Title"},"Request to Token endpoint"),(0,r.kt)(y,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",client_secret:null!==(n=e.clientSecret)&&void 0!==n?n:"CLIENT_SECRET",grant_type:"authorization_code",code:null!==(i=e.code)&&void 0!==i?i:"CODE",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000"}).toString(),saveResponseTo:"tokenResponse",canSendRequest:e.code,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"213-receive-an-access-token"},"2.1.3. Receive an access token"),(0,r.kt)("p",null,"You need to call the token endpoint with the ",(0,r.kt)("strong",{parentName:"p"},"Content-Type")," header equal to ",(0,r.kt)("strong",{parentName:"p"},"application/x-www-form-urlencoded"),"."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"URL encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": Identification that is generated when the application is created.  You can find it in the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. If you generated it during this tutorial you can find it in the first step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_secret"),": Secret that was created and shown first time you created an application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"authorization_code")," indicates that the application will use a ",(0,r.kt)("strong",{parentName:"li"},"code")," to get an ",(0,r.kt)("strong",{parentName:"li"},"access_token"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code"),": Code that the application got after the redirect from the authorization server back to the application itself."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri"),": redirect URI there was code send.")),(0,r.kt)(f,{type:"informational",mdxType:"Alert"},(0,r.kt)("b",null,"Code is short lived"),": If your code has expired please Navigate to the authorization server one more time.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from the Token endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.tokenResponse||{access_token:"JWT_TOKEN",refresh_token:"REFRESH_TOKEN",token_type:"Bearer",expires_in:3599},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-from-the-token-endpoint"},"Response from the Token endpoint"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer"),". This is part of the Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token"),".  You can read more ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": Access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed in the ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for API calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"refresh_token"),": Token that allows getting a new ",(0,r.kt)("strong",{parentName:"li"},"access token")," without user interaction."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": Lifespan of the access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-an-access-token-using-a-refresh-token"},"3. Get an Access Token using a Refresh Token")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i,a;return[(0,r.kt)(k,{mdxType:"Title"},"Refresh Token"),(0,r.kt)(y,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",client_secret:null!==(n=e.clientSecret)&&void 0!==n?n:"CLIENT_SECRET",grant_type:"refresh_token",refresh_token:null!==(i=null===(a=e.tokenResponse)||void 0===a?void 0:a.refresh_token)&&void 0!==i?i:"REFRESH_TOKEN"}).toString(),saveResponseTo:"refreshedAccessToken",canSendRequest:e.tokenResponse,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"31-request-to-the-token-endpoint-with-refresh-token"},"3.1. Request to the Token endpoint with Refresh token"),(0,r.kt)("p",null,"You need to call the token endpoint with the ",(0,r.kt)("strong",{parentName:"p"},"Content-Type")," header equal to ",(0,r.kt)("strong",{parentName:"p"},"application/x-www-form-urlencoded"),"."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"URL encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": Identification that is generated when the application is created.  You can find it in the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. If you generated it during this tutorial you can find it in the first step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_secret"),": Secret that was created and shown first time you created an application. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"refresh_token")," indicates that the application will use ",(0,r.kt)("strong",{parentName:"li"},"refresh_token")," to get ",(0,r.kt)("strong",{parentName:"li"},"access_token"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"refresh_token"),": refresh_token token itself that you got from the last request to the Token endpoint."))),(0,r.kt)(c,{subSection:!0,actions:function(e){var t;return[(0,r.kt)(k,{mdxType:"Title"},"Response from /users/me endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(null!==(t=e.refreshedAccessToken)&&void 0!==t?t:{access_token:"JWT_TOKEN",refresh_token:"REFRESH_TOKEN",token_type:"Bearer",expires_in:3599},void 0,4),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"32-response-from-the-token-endpoint"},"3.2. Response from the Token endpoint"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer"),". This is part of the Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token"),". You can read more ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": Access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed in the ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for API calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"refresh_token"),": Token that allows you to get a new ",(0,r.kt)("strong",{parentName:"li"},"access token")," without user interaction."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": Lifespan of the access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-make-the-request"},"4. Make the request")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n;return[(0,r.kt)(k,{mdxType:"Title"},"Request to /users/me endpoint"),(0,r.kt)(y,{method:"GET",url:"".concat(e.baseUrl,"/users/me"),headers:{Authorization:"Bearer "+(null!==(t=null===(n=e.tokenResponse)||void 0===n?void 0:n.access_token)&&void 0!==t?t:"JWT_TOKEN"),Accept:"application/vnd.bentley.itwin-platform.v1+json"},body:void 0,saveResponseTo:"me",canSendRequest:e.tokenResponse,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"41-make-the-request-to-the-usersme-endpoint"},"4.1. Make the request to the /users/me endpoint"),(0,r.kt)("p",null,"This request will show that the newly created ",(0,r.kt)("strong",{parentName:"p"},"access token")," is valid and how to use it.\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"/users/me")," endpoint will retrieve the logged in user\u2019s profile information.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Send request")," button.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from /users/me endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.me||{user:{displayName:"FirstName LastName",givenName:"FirstName",surname:"LastName",email:"FirstName.LastName@domain.com",alternateEmail:"FirstName.LastName@alternative.com",city:"CityName",country:"US",language:"EN",createdDateTime:"2021-08-27T10:19:07.2510000Z"}},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"42-response"},"4.2. Response"),(0,r.kt)("p",null,"This request will return user information (name, email, country and etc.).")),(0,r.kt)(T,{mdxType:"ContinueLearningSection"}))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-a-web-application",level:2,title:"1. Register a Web Application",children:[]},{id:"2-get-an-access-token",level:2,title:"2. Get an Access Token",children:[]},{id:"3-get-an-access-token-using-a-refresh-token",level:2,title:"3. Get an Access Token using a Refresh Token",children:[]},{id:"4-make-the-request",level:2,title:"4. Make the request",children:[]}]}},54625:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Clash Suppression Rules Basics",tile:{name:"Clash Suppression Rules Basics",description:"Walk-through of the creation and usage of suppression rules for clash detection tests.",href:"/tutorials/clash-suppression-rules-basics/",thumbnail:"/images/ClashDetectionSample.png",durationInMinutes:20,relatedApiIds:["clashdetection"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Suppression rules are rules for clash detection tests that will allow you to filter out potentially unwanted results based on properties of either or both of the clashing elements. In this tutorial, you will learn how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a suppression rule"),(0,r.kt)("li",{parentName:"ul"},"Associate a suppression rule with a test"),(0,r.kt)("li",{parentName:"ul"},"Interpret the results of a test using suppression rules"),(0,r.kt)("li",{parentName:"ul"},"Update your suppression rule"),(0,r.kt)("li",{parentName:"ul"},"Delete your suppression rule"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Access to an iModel and the associated projectId and imodelId for that iModel, along with the named version ID for the version you want to run the test against\n-If you do not have a model, instructions on creating one and retrieving the associated model data can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data"},"here")),(0,r.kt)("li",{parentName:"ul"},"Access to an iModel and the associated projectId and imodelId for that iModel, along with the named version ID for the version you want to run the test against"),(0,r.kt)("li",{parentName:"ul"},"Knowledge of how to run a clash detection test",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions on clash test basics, including creation and running are located ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/clash-test-basics"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Property and schema information for the rules you want to implement",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions on retrieving schema information for a specific model can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data"},"here")))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-get-a-token"},"1. Get a token"),(0,r.kt)("p",null,"To make request to the API a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application. You will need to include the scopes clashdetection:read and clashdetection:modify."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/clash-detection/operations/create-clashdetection-tests/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/suppressionRuleTemplates?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "suppressionRuleTemplates":[\n    {\n      "id":"0000000000000000000000000000000000000000000",\n      "displayName":"Suppression/Definition/Generic/AnyProperty",\n      "description":"Suppress clashes based on properties of any one of the clashing elements",\n      "prompt":"Suppress clashes if any one of the clashing elements has a property that satisfies the expression: -Expression-. Note: Use wild card "_" to match any single character, and "%" to match multiple characters",\n      "templateExpression":{\n        "propertyExpression":{\n          "relationshipPath":"ArchitecturalPhysical:Door",\n          "propertyName":"Origin",\n          "operator":"IS NOT NULL",\n          "propertyValue":""\n        }\n      }\n    }\n  ],\n  "_links":{\n    "next":{\n      "href":"https://api.bentley.com/clashdetection/suppressionRuleTemplates?projectId=00000000-0000-0000-0000-000000000000&continuationToken=00000000000000000000000000000000000000"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-suppression-rules-templates"},"2. Get Suppression Rules Templates"),(0,r.kt)("p",null,"Suppression rules work by checking elements in a valid clash against specific criteria. A rule can suppress a clash based on matching query criteria on a single element in a clash, matching criteria on both elements in a clash, or even matching criteria based on the relationship between two elements in a clash."),(0,r.kt)("p",null,"To make it simpler, we\u2019ve provided a variety of suppression rule templates. A HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/suppressionRuleTemplates?projectId[&continuationToken][&$top]")," request will return all of the valid suppression rule templates for the given project id. You simply choose the template that sounds best suited for your goals based on the prompt description.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/suppressionRules HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Suppress Long Pipes",\n  "reason":"Sample Demo",\n  "templateId":"0000000000000000000000000000000000000000000",\n  "parameters":{\n    "propertyExpression":{\n      "relationshipPath":"ProcessPhysical:IsmCurveMember",\n      "propertyName":"AutoLength",\n      "operator":">",\n      "propertyValue":"24"\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "suppressionRule":{\n    "id":"0000000000000000000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-creating-a-suppression-rule"},"3. Creating a Suppression Rule"),(0,r.kt)("p",null,"To create a suppression rule, you need to include the template id of your chosen template, a name for the rule, a reason that describes why the rule exists and what it covers, and the test parameters and send an HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/suppressionRules")),(0,r.kt)("p",null,"The parameters will vary based on your chosen template. Some templates, like 'suppress clashes if clashing elements are in the same category\u2019, don\u2019t require any parameters- we don\u2019t need any more information from you, we can just check the element categories against each other. For templates that do require parameters, you should follow the guidelines set forth by the template expression."),(0,r.kt)("p",null,"For more advanced users, or those who wish to do something a little more complicated that isn\u2019t covered by the standard templates, there are UnaryECSql and BinaryECSql templates that are essentially freeform and allow you to write the desired query criteria yourself in an ECSql expression."),(0,r.kt)("p",null,"If your rule creation is successful, it will return the rule metadata and a rule id. This will be used in the following steps to associate the rule with a test.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Sample Test",\n  "description":"Categories: Tag v Structure",\n  "setA":{\n    "modelIds":[],\n    "categoryIds":["0x4000000000d"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "setB":{\n    "modelIds":[],\n    "categoryIds":["0x40000000e71"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "suppressTouching":true,\n  "touchingTolerance":0.001,\n  "includeSubModels":false,\n  "suppressionRules":["0000000000000000000000000000000000000000000"]\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-adding-a-suppression-rule-to-a-clash-test"},"4. Adding a Suppression Rule to a Clash Test"),(0,r.kt)("p",null,"You can either use your suppression rule when creating a fresh clash test or when updating a previously created test. If you need a refresher, full instructions and parameter explanations for either option are located ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/clash-test-basics"},"here")),(0,r.kt)("p",null,"The only new step for either option is including a suppression rules array in the request block properties. This will be an array of IDs including the testId returned in the previous creation step, along with any other rules you would want to associate with the test."),(0,r.kt)("p",null,"Note that when updating a test, this is a replacement update, so if there were previously any rules associated with a test, you will need to include them in the array if you want them to continue to be associated with the test. This also means to disassociate a suppression rule with a clash test, all you would have to do is send an update request ",(0,r.kt)("em",{parentName:"p"},"without")," the specified ID in the suppressionRules array.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/results/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "result":[\n    {\n      "clashType":"Collision",\n      "clearance":-1,\n      "elementAId":"0x400000000c4",\n      "elementALabel":"1-SWS-0104-EX-OPM [4-5G]",\n      "elementACategoryIndex":0,\n      "elementAModelIndex":0,\n      "elementBId":"0x4000000003e",\n      "elementBLabel":"IsmCurveMember [4-1Q]",\n      "elementBCategoryIndex":1,\n      "elementBModelIndex":0,\n      "center":{\n        "x":12.192031860351562,\n        "y":407.69541931152344,\n        "z":122.92329406738281\n      },\n      "suppressingRuleIndexArray":[0]\n    }\n  ],\n  "categoryList":[\n    {\n      "id":"0x4000000000d",\n      "displayName":"Tag-Category"\n    },\n    {\n      "id":"0x40000000e71",\n      "displayName":"Structure"\n    }\n  ],\n  "modelList":[\n    {\n      "id":"0x20000000002",\n      "displayName":"Sample"\n    }\n  ],\n  "suppressingRuleList":[\n    {\n      "id":"0000000000000000000000000000000000000000000",\n      "displayName":"Sample Suppression Rule"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-interpreting-clash-results-with-suppression-rules"},"5. Interpreting Clash Results with Suppression Rules"),(0,r.kt)("p",null,"At this point, you should already understand the basics of how clash tests work and how to run them, so go ahead and run your updated test now, or if you need to, go ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/clash-test-basics"},"here")," to review the process."),(0,r.kt)("p",null,"While the process of running a test hasn\u2019t changed, the results themselves will if there were clashes affected by your new suppression rule. Clashes that fit the suppression rule criteria are not removed from results directly; rather, they have an array property (suppressingRuleIndexArray) that includes the zero-based index of any suppression rule. You can then use this array index to look up the relevant suppressing rule in the suppressingRuleList array, which includes the id and name. This will allow you to see the effect of multiple suppression rules, and which clashes they impact, without having to rerun the test multiple times.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "displayName":"Long Pipes Suppression Rule",\n  "reason":"Suppress long pipes over 24 meters."\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "suppressionRule":{\n    "id":"0000000000000000000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-updating-a-suppression-rule"},"6. Updating a Suppression Rule"),(0,r.kt)("p",null,"To update a suppression rule is relatively simple, all you need to do is send a HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT https://api.bentley.com/clashdetection/suppressionRules/{id}")," request. However, you can only update the name and reason- you will not be able to change the rule parameters and would have to create a new rule instead. Both parameters are optional, so if you only want to update one or the other, you can only send that property during the update. You will not need to update any of the associated tests- next time you run them, they will returns responses based on the updated rule.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"DELETE https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-deleting-a-suppression-rule"},"7. Deleting a Suppression Rule"),(0,r.kt)("p",null,"Deleting a suppression rule is also easy, just send a HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE https://api.bentley.com/clashdetection/suppressionRules/{id}")," Upon a successful deletion, the response body will be empty; it will only include additional information if the deletion failed."),(0,r.kt)("p",null,"At this time, deleting a suppression rule does not automatically delete them from associated tests, so please make an effort to update the tests in conjunction with the rule deletion to keep things consistent.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"8-conclusion"},"8. Conclusion"),(0,r.kt)("p",null,"You should now be able to successfully create and update suppression rules. This will allow you to filter the number of clashes based on your specified criteria so you only have to spend time investigating the issues you think might need attention.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-get-a-token",level:2,title:"1. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"2-get-suppression-rules-templates",level:2,title:"2. Get Suppression Rules Templates",children:[]},{id:"3-creating-a-suppression-rule",level:2,title:"3. Creating a Suppression Rule",children:[]},{id:"4-adding-a-suppression-rule-to-a-clash-test",level:2,title:"4. Adding a Suppression Rule to a Clash Test",children:[]},{id:"5-interpreting-clash-results-with-suppression-rules",level:2,title:"5. Interpreting Clash Results with Suppression Rules",children:[]},{id:"6-updating-a-suppression-rule",level:2,title:"6. Updating a Suppression Rule",children:[]},{id:"7-deleting-a-suppression-rule",level:2,title:"7. Deleting a Suppression Rule",children:[]},{id:"8-conclusion",level:2,title:"8. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},90304:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Clash Test Basics",tile:{name:"Clash Test Basics",description:"Walk-through of the clash detection lifecycle-creating, running and retrieving the results.",href:"/tutorials/clash-test-basics/",thumbnail:"/images/ClashDetectionSample.png",durationInMinutes:20,relatedApiIds:["clashdetection"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Clash detection is used to analyze the potential conflicts between multiple elements in an iModel. Based on criteria you set, it detects geometrical clashes between object element sets and returns information about each of these clashes so you can follow up and determine which might lead to potential problems. In this tutorial, you will learn how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a clash test"),(0,r.kt)("li",{parentName:"ul"},"Run the clash test against a specific iModel version"),(0,r.kt)("li",{parentName:"ul"},"Monitor the Clash Test run process"),(0,r.kt)("li",{parentName:"ul"},"Retrieve and interpret the resulting clashes"),(0,r.kt)("li",{parentName:"ul"},"Update your clash test"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Access to an iModel and the associated projectId and imodelId for that iModel, along with the named version ID for the version you want to run the test against",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you do not have a model, instructions on creating one and retrieving the associated model data can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data/#1-optional-create-a-sample-imodel-for-testing"},"here")))),(0,r.kt)("li",{parentName:"ul"},"A list of model and category IDs you wish to check for clashes",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions on retrieving lists of models and categories for a specific model can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data/#2-retrieving-models-and-categories"},"here")))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-get-a-token"},"1. Get a token"),(0,r.kt)("p",null,"To make request to the API a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application. You will need to include the scopes clashdetection:read and clashdetection:modify."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/clash-detection/operations/create-clashdetection-tests/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/tests HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Sample Test",\n  "description":"Categories: Tag v Structure",\n  "setA":{\n    "modelIds":[],\n    "categoryIds":["0x4000000000d"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "setB":{\n    "modelIds":[],\n    "categoryIds":["0x40000000e71"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "suppressTouching":true,\n  "touchingTolerance":0.001,\n  "includeSubModels":false\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-a-clash-test"},"2. Create a Clash Test"),(0,r.kt)("p",null,"Now that we have an authorization token, along with the prerequisites we should have everything we need to run our first clash test."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: Many people's first inclination when experimenting with clash tests is to run every model or category against every other model or category. While this does usually guarantee you will see clashes, it also usually guarantees a long wait time while the engine processes the sets. Consider selecting a smaller subset if you're just starting out. You can always look in the iTwin Viewer and find two elements you know are clashing, and note the models/categories they belong to to use in your practice test."),(0,r.kt)("p",null,"Clash tests are saved and associated with a specific project; if you run a clash test and find issues that you plan to fix in your model, once you upload the new model version you can rerun the same test to ensure they\u2019ve been resolved."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: Even if iModels share category and model display names, the ids may differ. Please check before running a test against a different iModel than the one it was initially created for."),(0,r.kt)("p",null,"To create a clash test send an HTTP POST request to ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/tests/")),(0,r.kt)("p",null,"Clash detection tests are highly configurable. so let\u2019s quickly go over all of the different parameters you can set in the request body:\n",(0,r.kt)("strong",{parentName:"p"},"projectId")," - Id of the project this test will be associated with. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"displayName")," - Name of the clash test. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"description")," - Additional identifying information or descriptions of the clash. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"setA/setB")," - Object containing clash test information about a given set of elements. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"modelIds")," - Array of model IDs which contain elements to check for clashes. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"categoryIds")," - Array of category IDs which contain elements to check for clashes ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"selfCheck")," - Boolean value. When this is true, elements in this set will be checked for clashes against other elements in this set. When false, it will only check against elements in the opposing set. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clearance")," - When this is set above 0, any elements within this distance will be reported as a clash, even when not touching. A \u201cClearance\u201d value will be supplied in results, telling you the distance between the elements. This is in meters. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"suppressTouching")," - Boolean value. When this is true, the results will not include elements that are touching, or whose clash overlap falls within the touching tolerance limits specified below. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"touchingTolerance")," - Elements that are overlapping by less than this amount will be suppressed. This is in meters. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"includeSubModels")," - Boolean value. When this is true, any elements under any model that falls under the model hierarchy of the models you\u2019ve specified will be included. When false, this test will only include elements directly under the models you\u2019ve specified.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"The response from the server will include the id of the newly created test, as well as a link to the test."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: You will need this test ID later to run the test.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/runs/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "testId":"00000000-0000-0000-0000-000000000000",\n  "iModelId":"00000000-0000-0000-0000-000000000000",\n  "namedVersionId":"00000000-0000-0000-0000-000000000000"\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "run":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "run":{\n        "href":"https://api.bentley.com/clashdetection/runs/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-run-the-clash-detection-test"},"3. Run the Clash Detection Test"),(0,r.kt)("p",null,"Now that you have created a test, we\u2019re going to go ahead and run it. To run a Clash Detection test, you just need to send the HTTP POST request ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/runs/")," with a request body containing the testId from the previous step, the iModel id and Named Version Id you want to run against."),(0,r.kt)("p",null,"Clash detection tests are asynchronous, so instead of containing the results directly, the result body contains the runId as well as a link to the run. You will use this in the next step to retrieve the run status.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Retrieve Run Results Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/runs/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Run Results Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Run Results Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "run":{\n    "id":"000000000000000-000000000000000000000000000",\n    "displayName":"ClashDetectionTest1-12/1/2020 5:12:50 PM",\n    "executedDateTime":"12/1/2020 5:12:50 PM",\n    "count":"0",\n    "userName":"Your Name",\n    "status":"queued",\n    "_links":{\n      "result":{\n        "href":"https://api.bentley.com/clashdetection/results/000000000000000-000000000000000000000000000"\n      },\n      "test":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Clash Results Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/results/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Clash Results Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Clash Results Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "result":[\n    {\n      "clashType":"Collision",\n      "clearance":-1,\n      "elementAId":"0x400000000c4",\n      "elementALabel":"1-SWS-0104-EX-OPM [4-5G]",\n      "elementACategoryIndex":0,\n      "elementAModelIndex":0,\n      "elementBId":"0x4000000003e",\n      "elementBLabel":"IsmCurveMember [4-1Q]",\n      "elementBCategoryIndex":1,\n      "elementBModelIndex":0,\n      "center":{\n        "x":12.192031860351562,\n        "y":407.69541931152344,\n        "z":122.92329406738281\n      },\n      "suppressingRuleIndexArray":[]\n    }\n  ],\n  "categoryList":[\n    {\n      "id":"0x4000000000d",\n      "displayName":"Tag-Category"\n    },\n    {\n      "id":"0x40000000e71",\n      "displayName":"Structure"\n    }\n  ],\n  "modelList":[\n    {\n      "id":"0x20000000002",\n      "displayName":"Sample"\n    }\n  ],\n  "suppressingRuleList":[]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-retrieve-clash-detection-results"},"4. Retrieve Clash Detection Results"),(0,r.kt)("p",null,"Once you\u2019ve run a clash detection test, you\u2019ll need to wait for the engine to finish processing the test. This can take less than ten minutes or several hours depending on the queue time and number of elements and potential collision are in your element sets."),(0,r.kt)("p",null,"There are two parts to results retrieval, retrieving the information about the clash test run itself, and then the actual results:"),(0,r.kt)("h3",{id:"retrieve-run-results"},"Retrieve Run Results"),(0,r.kt)("p",null,"You can check on the status of your clash job via an HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/runs/{id}")," using the runId returned in the previous create step. It can take a while, so you might want to run this on a loop until you get the \u201cstatus: completed\u201d result."),(0,r.kt)("p",null,"In addition to the status, the results body will also include some metadata, and most importantly for us a results link we will use to retrieve the actual clash results."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: While the results link will always appear in the response body, you will not be able to actually retrieve the results until the status is shown as complete."),(0,r.kt)("h3",{id:"retrieve-clash-results"},"Retrieve Clash Results"),(0,r.kt)("p",null,"Using the results link from the previous step, we can now retrieve the actual clash results we\u2019ve been waiting for using a GET HTTP request ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/results/{id}"),". The clash results object contains a lot of information, so let\u2019s quickly go over them. There are four main array objects in the result body:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"categoryList")," - Category lookup table. Contains an array of category id and category display name pairs.",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"modelList")," - Model lookup table. Contains an array of model id and model display name pairs. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"suppressingRuleList")," - Suppression rule lookup table. Contains an array of suppression rule ids and suppression rule display name pairs. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clashDetectionResult")," - Array of all the clashes in this clash detection result. ",(0,r.kt)("br",null)),(0,r.kt)("p",null,"A single clash object in the clashDetectionResult array contains:",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clashType")," - The type of clash detected - possible values: Collision, Clearance, Touching, Not Initialized. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clearance")," - When the clash type is Clearance, the value is returned in meters. Otherwise -1 is returned. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementAId")," - The unique id of element A. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementALabel")," - The display label of element A. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementACategoryIndex")," - The zero-based index used to lookup the element A category in the categoryList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementAModelIndex")," - The zero-based index used to lookup the element A model in the modelList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBId")," - The unique id of element B. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBLabel")," - The display label of element B. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBCategoryIndex")," - The zero-based index used to lookup the element B category in the categoryList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBModelIndex")," - The zero-based index used to lookup the element B model in the modelList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"center")," - The clash center point. This contains x, y, and z properties for the exact spatial position of the center point. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"suppressingRuleIndexArray")," - An array of the zero-based indexes used to lookup any suppression rules this clash would be suppressed by in the suppressingRuleList. ",(0,r.kt)("br",null))),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"}," Get Clash Test Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Get Clash Test Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Get Clash Test Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "displayName":"Sample Test",\n    "description":"Categories: Tag v Structure",\n    "setA":{\n      "modelIds":[],\n      "categoryIds":["0x4000000000d"],\n      "selfCheck":false,\n      "clearance":0\n    },\n    "setB":{\n      "modelIds":[],\n      "categoryIds":["0x40000000e71"],\n      "selfCheck":false,\n      "clearance":0\n    },\n    "suppressTouching":true,\n    "touchingTolerance":0.001,\n    "includeSubModels":false,\n    "_links":{\n      "createdBy":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000/members/00000000-0000-0000-0000-000000000000"\n      },\n      "lastModifiedBy":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000/members/00000000-0000-0000-0000-000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Syntax"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Sample Test",\n  "description":"Categories: Tag v Structure",\n  "setA":{\n    "modelIds":[],\n    "categoryIds":["0x4000000000d"],\n    "selfCheck":true,\n    "clearance":0\n  },\n  "setB":{\n    "modelIds":[],\n    "categoryIds":["0x40000000e71"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "suppressTouching":true,\n  "touchingTolerance":0.005,\n  "includeSubModels":true\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-update-a-clash-test"},"5. Update a Clash Test"),(0,r.kt)("p",null,"After running your test, you might realize you want to tweak your criteria slightly. Instead of making a new test, you can just update the one you just made previously. This is a replacement update, so you will still need the full test criteria you enetered previously. If you still have your test criteria handy, you can just copy it and update as necessary. If not, you can use a ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/tests/{id}"),", with your test id to retrieve the test details and update from there."),(0,r.kt)("p",null,"Once you have your test criteria and have implemented any updates you want to make, you can use an HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT https://api.bentley.com/clashdetection/tests/{id}")," using the test id.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-conclusion"},"6. Conclusion"),(0,r.kt)("p",null,"You have now gone through the entire life cycle of a clash detection test: creating, running and retrieving the results. This will aid you in detecting any potential problems or clashes earlier in the modeling process while they are easier to fix. As you continue to practice and gain experience creating and running tests, you will be able to refine the criteria to be specific to your individual needs and issues.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Clash Review Sample Showcase",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Clash%20Review",description:"A sample showcase that demonstrates calling Clash Detection APIs to retrieve clash data and present it for review in a viewer app.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-get-a-token",level:2,title:"1. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"2-create-a-clash-test",level:2,title:"2. Create a Clash Test",children:[]},{id:"3-run-the-clash-detection-test",level:2,title:"3. Run the Clash Detection Test",children:[]},{id:"4-retrieve-clash-detection-results",level:2,title:"4. Retrieve Clash Detection Results",children:[{id:"retrieve-run-results",level:3,title:"Retrieve Run Results",children:[]},{id:"retrieve-clash-results",level:3,title:"Retrieve Clash Results",children:[]}]},{id:"5-update-a-clash-test",level:2,title:"5. Update a Clash Test",children:[]},{id:"6-conclusion",level:2,title:"6. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},41905:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Better calibration in ContextCapture",tile:{name:"Better calibration in ContextCapture",description:"Learn how to specify calibration settings in ContextCapture, and download the result of a calibration",thumbnail:"/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration/",durationInMinutes:10,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Expert",durationInMinutes:"10",summaryImageSrc:"/images/cccs-calibration-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to specify calibration settings to ",(0,r.kt)("em",{parentName:"p"},"ContextCapture"),", so that you can obtain a better model."),(0,r.kt)("p",null,"In this tutorial, we will cover how to send calibration settings to ",(0,r.kt)("em",{parentName:"p"},"ContextCapture"),", and how to retrieve calibration reports from the service.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"ContextCapture Quick Start tutorial"),"."),(0,r.kt)("li",{parentName:"ul"},"A basic understanding of the calibration/aerotriangulation concept in ContextCapture. See ",(0,r.kt)("a",{parentName:"li",href:"https://docs.bentley.com/LiveContent/web/ContextCapture%20Help-v10/en/GUID-95336991-F284-4AD8-A33B-9AE341507D5C.html"},"ContextCapture Master Help")," for a description of the calibration settings"))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"AT Settings exchange structure"),(0,r.kt)(m,{language:"json",code:'{\n  "ATSettingsExchange":{\n    "PhotogroupEstimationMode": "OnePass"-"MultiPass",\n    "ColorEqualizationMode": "EqualizeBlockwise"-"EqualizeNone",\n    "SplatsMode": "SplatsAtlas"-"SplatsNone",\n    "AdjustmentConstraints": "None"|"UserConstraints"|"ControlPoints"|"PositionMetadata"|"PointClouds"|"Automatic",\n    "RigidRegistration": "None"|"UserConstraints"|"ControlPoints"|"PositionMetadata"|"PointClouds"|"Automatic",\n    "EstimationGroups": "PerPhotogroup"-"PerPhoto",\n    "RotationPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "CenterPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "FocalPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "PrincipalPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "RadialPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "TangentialPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "TiePointsPolicy": "Compute"-"Keep",\n    "FisheyeFocalPolicy": "Compute"-"Keep"-"AdjustFisheyeFocalSymmetric"-"AdjustFisheyeFocalAsymmetric",\n    "FisheyeDistortionPolicy": "Compute"-"Keep"-"AdjustFisheyeDistortion_01xx0"-"AdjustFisheyeDistortion_x1xx0"-"AdjustFisheyeDistortion_x1xxx"-"AdjustWithinTolerance %.%",\n    "AspectRatioPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "SkewPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "PairSelectionMode": "Default"-"Sequence"-"Loop"-"Exhaustive"-"Similar images only",\n    "PairSelectionMaxDistance": int,\n    "KeyPointsDensity": "Normal"-"High",\n    "ExtractQR": "QR Codes"|"April Tags"|"Chili Tags"|"Disabled",\n    "ComponentConstructionMode": "OnePass"-"MultiPass"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-specifying-calibration-settings"},"1. Specifying calibration settings"),(0,r.kt)("p",null,"If you want to apply specific settings for the calibration, you can add a file in the workspace reality data: the file ",(0,r.kt)("inlineCode",{parentName:"p"},"at_settings.json")," has to be uploaded to ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/data/"),".\nNote that no check on the uploaded file is performed until the job is actually submitted, and if the parameters are not fitted to the inputs, the job will failed."),(0,r.kt)("p",null,"Note that every properties in the following structure are optional.\nStrings separated by ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," mean only one option can be specified. Strings separated by ",(0,r.kt)("inlineCode",{parentName:"p"},"|")," can be combined using ",(0,r.kt)("inlineCode",{parentName:"p"},"|"),", eg: ",(0,r.kt)("inlineCode",{parentName:"p"},'"QR Codes|Chili Tags"'),". For parameter ",(0,r.kt)("inlineCode",{parentName:"p"},'"AdjustWithinTolerance %.%"'),", ",(0,r.kt)("inlineCode",{parentName:"p"},"%.%")," has to be replace by a double."),(0,r.kt)("p",null,"If you have a preset and you want to apply it, upload it as ",(0,r.kt)("inlineCode",{parentName:"p"},"at_preset.cfg")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/data/"),". No need to specify the name in the the ATSettings file.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-accessing-calibration-results"},"2. Accessing calibration results"),(0,r.kt)("p",null,"Once the step ",(0,r.kt)("em",{parentName:"p"},"AT_CloudExport")," is executed, you can access calibration results (including reports) through the workspace reality data."),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/outputs/calibration/")," you will find:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"acquisition_report"),", a folder containing an HTML page with CSS regarding the acquisition of your images"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"quality_report"),", a folder containing HTML pages regarding with quality of your calibration"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"block.xmlz")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"block - TiePoints.xmlz"),", the corresponding ",(0,r.kt)("em",{parentName:"li"},"CCOrientations")," of this calibration"))),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," calibration tutorial!\nYou should now be able to specify calibration settings and retrieve reports once a calibration is completed."),(0,r.kt)("p",null,"To go further and use ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Using cache in ContextCapture",description:"This tutorial focuses on using cache for faster processing in ContextCapture",thumbnail:"/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache",mdxType:"Tile"}),(0,r.kt)(g,{name:"Better production in ContextCapture",description:"Learn how to specify production settings in ContextCapture",thumbnail:"/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using ContextCapture API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for ContextCapture, and downloading outputs.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-specifying-calibration-settings",level:2,title:"1. Specifying calibration settings",children:[]},{id:"2-accessing-calibration-results",level:2,title:"2. Accessing calibration results",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},115:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Better production in ContextCapture",tile:{name:"Better production in ContextCapture",description:"Learn how to specify production settings in ContextCapture",thumbnail:"/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production/",durationInMinutes:10,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Expert",durationInMinutes:"10",summaryImageSrc:"/images/cccs-production-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to specify production settings to ",(0,r.kt)("em",{parentName:"p"},"ContextCapture"),", so that your exports are closer to what you\u2019d like."),(0,r.kt)("p",null,"In this tutorial, we will cover how to send production settings to ",(0,r.kt)("em",{parentName:"p"},"ContextCapture"),", and go over the different settings and their usage.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"ContextCapture Quick Start tutorial"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Example of a production settings file"),(0,r.kt)(m,{language:"json",code:'{\n  "ProductionSettingsExchange":[\n    {\n      "name":"OBJ",\n      "settings":{\n        "TexturedEnabled":false,\n        "DoublePrecision":true\n      }\n    },\n    {\n      "name":"FBX",\n      "settings":""\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-specifying-production-settings"},"1. Specifying production settings"),(0,r.kt)("p",null,"If you want to apply specific settings to the productions - that is outputs like ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", etc. - you can add a file in the workspace reality data: the file ",(0,r.kt)("inlineCode",{parentName:"p"},"prod_settings.json")," has to be uploaded to ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/data/"),".\nNote that no check on the uploaded file is performed until the job is actually submitted, and if the parameters are not fitted to the inputs, the job will failed.\nAlso, if you provide this file, all the outputs should be present in the file.\nThat is, if you requested ",(0,r.kt)("em",{parentName:"p"},"OBJ")," and ",(0,r.kt)("em",{parentName:"p"},"FBX"),", both of these outputs should be present in the file, even if you only want to apply specific settings to the ",(0,r.kt)("em",{parentName:"p"},"OBJ")," format, see the example.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-list-of-existing-production-settings"},"2. List of existing production settings"),(0,r.kt)("p",null,"You will find here a complete list of the existing options for the existing ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," formats. Properties separated by a ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," mean you have to chose between one of the options.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "TexturedEnabled": true-false,\n  "TextureColorSource": "Visible"-"Thermal"-"Resolution",\n  "TextureColorSourceResRangeMin": double,\n  "TextureColorSourceResRangeMax": double,\n  "TextureColorSourceThermalUnit": "Absolute"-"Equalized"-"Celsius"-"Fahrenheit",\n  "TextureColorSourceThermalRangeMin": double,\n  "TextureColorSourceThermalRangeMax": double,\n  "TextureCompressionQuality": 50-75-90-100,\n  "MaximumTextureSize": int,\n  "TextureSharpening": 0-100\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"texture"},"Texture"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"POD"),", ",(0,r.kt)("em",{parentName:"p"},"LAS"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),"."),(0,r.kt)("p",null,"They are used to enabled the texturing of a model, select the color source, change the compression of the texture and so on.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "TileOverlap": double (in units or meters)\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"tile-overlap"},"Tile overlap"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),"."),(0,r.kt)("p",null,"They are used to determinate the overlap distance between two tiles, in order to avoid gaps.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "SRS": string,\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"spatial-reference-system"},"Spatial Reference System"),(0,r.kt)("p",null,"A spatial reference system describes the coordinates system of the produced output.\nWe expect a string Well Known Text definition (e.g. WGS84), \u201cEPSG: \u201d or a PROJ.4 definition."),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"LAS"),", ",(0,r.kt)("em",{parentName:"p"},"POD"),", ",(0,r.kt)("em",{parentName:"p"},"Orthophoto/DSM"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "SRSOrigin": "15.0;2.3;-25.3"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"srs-origin"},"SRS Origin"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),"."),(0,r.kt)("p",null,"They describe the origin of the Spatial Reference System.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "LODType": "type - see table",\n  "LODSize": 0.707106781186547-1-1.4142135623731-2\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"level-of-details"},"Level of details"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),"."),(0,r.kt)("p",null,"They describe the type of level of details to be used, and their size."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"Type Table"),(0,r.kt)("th",{parentName:"tr",align:"center"},"None"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Adaptive"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Octree"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Unary"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Quadtree"),(0,r.kt)("th",{parentName:"tr",align:"center"},"BingMaps"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3MX"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3SM"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"Cesium 3D Tiles"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"ESRI i3s"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"DGN"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"FBX"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"OBJ"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"LODTreeExport"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"))))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"3MX settings"),(0,r.kt)(m,{language:"json",code:'{\n  "GenerateWebGLApp": bool,\n  "IncludeProxy3DModel": bool\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Cesium settings"),(0,r.kt)(m,{language:"json",code:'{\n  "GenerateCesiumApp": bool\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"generate-webapp"},"Generate WebApp"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX")," or ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", but they differ in the structure."),(0,r.kt)("p",null,"They are used to generate a web application that can be hosted on a server for displaying 3D models.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "DoublePrecision": bool\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"double-precision"},"Double precision"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"OBJ"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "PointSamplingUnit": "pixel"-"meter"-"unit",\n  "PointSamplingDistance": double\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"point-sampling"},"Point sampling"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"POD"),", ",(0,r.kt)("em",{parentName:"p"},"LAS"),"."),(0,r.kt)("p",null,"PointSamplingUnit is used to describe what unit you want to use for sampling.\nPixel means ",(0,r.kt)("em",{parentName:"p"},"One point every x pixels")," so that the sampling is relative to the resolution of your input.\nMeter or unit means ",(0,r.kt)("em",{parentName:"p"},"One point every x unit")," so that the sampling is uniform for the point cloud."),(0,r.kt)("p",null,"PointSamplingDistance specifies ",(0,r.kt)("em",{parentName:"p"},"x"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "CompressionMethod":"None"-"LAZ"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"las-compression"},"LAS Compression"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"LAS"),"."),(0,r.kt)("p",null,"Set it to ",(0,r.kt)("em",{parentName:"p"},"LAZ")," in order to compress the point cloud.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "SamplingDistance": double,\n  "ProjectionMode": "HighestPoint"-"LowestPoint",\n  "MaxImagePartDimension": int,\n  "Orthophoto":{\n    "Enabled": bool,\n    "Format": "GeoTIFF"-"JPEG"-"KML_SuperOverlay",\n    "NoDataValue": "255 255 255",\n    "ColorSource": "Reference3dModelVisible"-"OptimizedComputationVisible"-"Reference3dModelThermal"-"OptimizedComputationThermal",\n    "ImageSharpening": 0-100\n  },\n  "DSM":{\n    "Enabled": bool,\n    "Format": "GeoTIFF"-"XYZ"-"ASC",\n    "NoDataValue": double\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"orthophotodsm-settings"},"Orthophoto/DSM settings"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"Orthophoto/DSM"),"."),(0,r.kt)("p",null,"Settings are split between Orthophoto and DSM. You can disable one or the other with the ",(0,r.kt)("em",{parentName:"p"},"Enabled")," property.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," production tutorial! You should now be able to specify production settings in order to export more precisely your formats."),(0,r.kt)("p",null,"To go further and use ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Using cache in ContextCapture",description:"This tutorial focuses on using cache for faster processing in ContextCapture",thumbnail:"/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache",mdxType:"Tile"}),(0,r.kt)(g,{name:"Better calibration in ContextCapture",description:"Learn how to specify calibration settings in ContextCapture, and download the result of a calibration",thumbnail:"/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using ContextCapture API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for ContextCapture, and downloading outputs.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-specifying-production-settings",level:2,title:"1. Specifying production settings",children:[]},{id:"2-list-of-existing-production-settings",level:2,title:"2. List of existing production settings",children:[{id:"texture",level:3,title:"Texture",children:[]},{id:"tile-overlap",level:3,title:"Tile overlap",children:[]},{id:"spatial-reference-system",level:3,title:"Spatial Reference System",children:[]},{id:"srs-origin",level:3,title:"SRS Origin",children:[]},{id:"level-of-details",level:3,title:"Level of details",children:[]},{id:"generate-webapp",level:3,title:"Generate WebApp",children:[]},{id:"double-precision",level:3,title:"Double precision",children:[]},{id:"point-sampling",level:3,title:"Point sampling",children:[]},{id:"las-compression",level:3,title:"LAS Compression",children:[]},{id:"orthophotodsm-settings",level:3,title:"Orthophoto/DSM settings",children:[]}]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},68017:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Using cache in ContextCapture API",tile:{name:"Using cache in ContextCapture API",description:"This tutorial focuses on using cache for faster processing in ContextCapture",thumbnail:"/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache/",durationInMinutes:15,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CodeBlock"),m=p("Alert"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Advanced",durationInMinutes:"15",summaryImageSrc:"/images/cccs-cache-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to leverage the caching mechanism of ",(0,r.kt)("em",{parentName:"p"},"ContextCapture REST API")," in order to speed up your processing."),(0,r.kt)("p",null,"In this tutorial, we will create a job to be cached, then use this cache to export another format without reprocessing the complete data.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"ContextCapture Quick Start tutorial"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start/#3-create-a-workspace"},"Created a workspace")),(0,r.kt)("li",{parentName:"ul"},"Uploaded input data (images and orientations)"))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-cache-re-usage-and-behavior"},"1. Cache re-usage and behavior"),(0,r.kt)("h3",{id:"cache-re-usage"},"Cache re-usage"),(0,r.kt)("p",null,"Before creating jobs, it is important to understand how caching works in ",(0,r.kt)("em",{parentName:"p"},"ContextCapture"),".\nWhen asked for, a cache will be created if the job is successful. If a job is failed or cancelled, no cache will be created."),(0,r.kt)("p",null,"A created cache can be used for later jobs in order to reuse it (new exports for example). This is the table of possible workflows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"}),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Calibration"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Reconstruction"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Full"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Calibration"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Reconstruction"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Full"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")))),(0,r.kt)("p",null,"A new calibration job based on a cached reconstruction will failed for example."),(0,r.kt)("h3",{id:"cache-behavior"},"Cache behavior"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"ContextCapture")," considers that cache is the truth, and will use it as much as possible.\nFor example, if you submit a full job with a ",(0,r.kt)("em",{parentName:"p"},"Draft")," mesh quality to produce a 3MX, then use it as cache for a full job with ",(0,r.kt)("em",{parentName:"p"},"Extra")," mesh quality to produce an OBJ, you will have a ",(0,r.kt)("em",{parentName:"p"},"Draft")," OBJ result."),(0,r.kt)("p",null,"Caches are standalone snapshot of a job. They don\u2019t depend on each other. Note that for large projects, cache can be very large:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Cache upload will then slow marginally your job"),(0,r.kt)("li",{parentName:"ul"},"Usage of Reality Data will increase")),(0,r.kt)("p",null,"Cache can be cleaned: they are uploaded in the ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Data")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-a-job-that-will-be-cache"},"2. Create a job that will be cache"),(0,r.kt)("p",null,"In order to tell ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," we want to create a cache of the job, we just need to specify a setting in the job creation payload.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"A new job with cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"json",code:'{\n  "type": "Full",\n  "name": "My CCCS job to be cached",\n  "workspaceId": "WORKSPACE_ID",\n  "inputs": [\n    {\n      "id": "IMAGECOLLECTION_RD_ID",\n      "description": "Drone ImageCollection"\n    },\n    {\n      "id": "CCORIENTATIONS_RD_ID",\n      "description": "Drone CCOrientations"\n    }\n  ],\n  "settings": {\n    "meshQuality": "Extra",\n    "processingEngines": 0,\n    "outputs": [\n      "OBJ"\n    ],\n    "cacheSettings":\n    {\n      "createCache": True\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a new section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"createCache")," set to ",(0,r.kt)("em",{parentName:"p"},"True"),"."),(0,r.kt)("p",null,"At the end of the job, if it is successful, the cache will be automatically uploaded to ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Data")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),"."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Note the JOB_ID created by this job. It will be useful later for using the cache.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-use-a-cached-job"},"3. Use a cached job"),(0,r.kt)("p",null,"If you want to export your data to another format - 3SM for example, we can use the cached job to speed up the processing time.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"A new job with using cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"json",code:'{\n  "type":"Full",\n  "name":"My CCCS job using cache",\n  "workspaceId":"WORKSPACE_ID",\n  "inputs":[\n    {\n      "id":"IMAGECOLLECTION_RD_ID",\n      "description":"Drone ImageCollection"\n    },\n    {\n      "id":"CCORIENTATIONS_RD_ID",\n      "description":"Drone CCOrientations"\n    }\n  ],\n  "settings":{\n    "meshQuality":"Extra",\n    "processingEngines":0,\n    "outputs":[\n      "3SM"\n    ],\n    "cacheSettings":{\n      "useCache":"JOB_ID_OF_CACHED_JOB"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"useCache")," set to ",(0,r.kt)("em",{parentName:"p"},"JOB_ID_OF_CACHED_JOB"),".\nThis tells ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," to download and use the cached job.\nThat way, your job will be faster, since geometry was cached and only need to be converted to ",(0,r.kt)("em",{parentName:"p"},"3SM")," format."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"It is possible to combine both properties in ",(0,r.kt)("code",null,"cacheSettings"),". For example you may want to use the cache of a ",(0,r.kt)("i",null,"Calibration")," job for a"," ",(0,r.kt)("i",null,"Full")," job, and have the result of this job cached for future exports.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," cache tutorial! You should now be able to create and use cached job for faster processing.\nTo go further and use ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Better calibration in ContextCapture",description:"Learn how to specify calibration settings in ContextCapture, and download the result of a calibration",thumbnail:"/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"}),(0,r.kt)(g,{name:"Better production in ContextCapture",description:"Learn how to specify production settings in ContextCapture",thumbnail:"/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using ContextCapture API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for ContextCapture, and downloading outputs.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-cache-re-usage-and-behavior",level:2,title:"1. Cache re-usage and behavior",children:[{id:"cache-re-usage",level:3,title:"Cache re-usage",children:[]},{id:"cache-behavior",level:3,title:"Cache behavior",children:[]}]},{id:"2-create-a-job-that-will-be-cache",level:2,title:"2. Create a job that will be cache",children:[]},{id:"3-use-a-cached-job",level:2,title:"3. Use a cached job",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},33907:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return w},Jt:function(){return b}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Get started with ContextCapture API",tile:{name:"Get started with ContextCapture API",description:"This tutorial is an introduction to ContextCapture API, explaining the basic workflows.",thumbnail:"/images/cccs-quick-start-thumb.jpg",href:"/tutorials/contextcapture-api-quick-start/",durationInMinutes:30,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("CodeBlock"),h=p("Alert"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("Tile"),f=p("ResourceTile"),T={metadata:l};function w(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"/images/cccs-quick-start-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start tutorial is going to help you work with ContextCapture, and also understand the basic objects of ContextCapture: workspaces and jobs."),(0,r.kt)("p",null,"In this tutorial, we will create a new workspace, submit a simple job, track its progress and check its result.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project created. Try the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"create and query projects guide"),"."),(0,r.kt)("li",{parentName:"ul"},"Knowledge of the ",(0,r.kt)("em",{parentName:"li"},"Reality Data")," API. Try ",(0,r.kt)("a",{parentName:"li",href:"/apis/realitydata"},"Reality Data API"),"."),(0,r.kt)("li",{parentName:"ul"},"Knowledge of the ",(0,r.kt)("em",{parentName:"li"},"CCImageCollection")," and the ",(0,r.kt)("em",{parentName:"li"},"CCOrientations")," formats. Try ",(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ic/"},"CCImageCollection format")," or ",(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ori/"},"CCOrientations format")))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{clientName:"CC basic tutorial",scopes:["contextcapture:read","contextcapture:modify"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"ContextCapture API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"contextcapture:read contextcapture:modify")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make request to the API, a user token is needed. There are several ways to get it. Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-workspace"},"3. Create a workspace"),(0,r.kt)("p",null,"In order to process jobs, we first need to create a workspace.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/contextcapture/workspaces HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"A new workspace is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/workspaces"},"https://api.bentley.com/contextcapture/workspaces")," endpoint with the payload describing the workspace.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "projectId":"PROJECT_ID",\n  "name":"My first CCCS workspace"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"The request body handles two properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name")," - Workspace name (",(0,r.kt)("em",{parentName:"li"},"mandatory"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"projectId")," - Project associated with the workspace")),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note that unless you have an enterprise admin role within your organization, you will need to provide a ",(0,r.kt)("code",null,"projectId"),". For easier project management, we highly recommend you always use a ",(0,r.kt)("code",null,"projectId"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "workspace":{\n    "id":"WORKSPACE_ID",\n    "creationDateTime":"2020-09-14T13:46:11Z",\n    "name":"My first CCCS workspace",\n    "projectId":"PROJECT_ID"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code if the call is successful.\nNote that creating a workspace will also create a new reality data (accessible through the Reality Data API), with a similar id to ",(0,r.kt)("inlineCode",{parentName:"p"},"WORKSPACE_ID"),".\nThough it is not useful in our current tutorial, this reality data becomes necessary for advanced workflows.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-a-job"},"4. Create a job"),(0,r.kt)("p",null,"In order to create a job, we need inputs. CCCS supports 3 types of Reality Data as inputs:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ic"},"CCImageCollection")),(0,r.kt)("li",{parentName:"ul"},"ScanCollection"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ori"},"CCOrientations"))),(0,r.kt)("p",null,"Currently, the only way to create ScanCollection is through a ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," desktop application."),(0,r.kt)("p",null,"Reality data need to be stored in the same region as the project selected for the workspace, and must be accessible to the user for processing.\nWe highly recommend you use the same project for your inputs and for your workspace.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"A new job is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "type":"Full",\n  "name":"My first CCCS job",\n  "workspaceId":"WORKSPACE_ID",\n  "inputs":[\n    {\n      "id":"IMAGECOLLECTION_RD_ID",\n      "description":"Drone ImageCollection"\n    },\n    {\n      "id":"CCORIENTATIONS_RD_ID",\n      "description":"Drone CCOrientations"\n    }\n  ],\n  "settings":{\n    "meshQuality":"Extra",\n    "processingEngines":0,\n    "outputs":[\n      "OBJ"\n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"The request body handles multiple properties"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"type")," - Job type, can be ",(0,r.kt)("em",{parentName:"li"},"Full"),", ",(0,r.kt)("em",{parentName:"li"},"Reconstruction")," or ",(0,r.kt)("em",{parentName:"li"},"Calibration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name")," - Name of the job"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"workspaceId")," - Workspace linked to the job"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"inputs")," - List of inputs, consisting of the reality data ids and descriptions of the inputs"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"settings")," - High level processing settings")),(0,r.kt)("p",null,"There are three types of job:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Calibration"),(0,r.kt)("li",{parentName:"ul"},"Reconstruction"),(0,r.kt)("li",{parentName:"ul"},"Full")),(0,r.kt)("p",null,"A calibration job will take images and point clouds and calibrate them in 3D.\nA reconstruction job will start from calibrated images and/or point clouds and reconstruct them (that is, create a mesh or an orthophoto).\nA full job will do a calibration and reconstruction at once."),(0,r.kt)("p",null,"You need to specify one and only one ",(0,r.kt)("em",{parentName:"p"},"CCOrientations")," in your input list for the job to be valid.\nThe ",(0,r.kt)("em",{parentName:"p"},"CCImageCollection"),"s and ",(0,r.kt)("em",{parentName:"p"},"ScanCollection"),"s are the ones used in the ",(0,r.kt)("em",{parentName:"p"},"CCOrientations"),", though the service won\u2019t checked the correspondence right away."),(0,r.kt)("p",null,"Regarding settings:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Mesh quality can be ",(0,r.kt)("em",{parentName:"li"},"Draft"),", ",(0,r.kt)("em",{parentName:"li"},"Medium")," and ",(0,r.kt)("em",{parentName:"li"},"Extra")),(0,r.kt)("li",{parentName:"ul"},"Processing engines can not be higher than 20 in a normal case. Check the actual limit for your account with the limit endpoint. If set to 0, the service will use the limit of your account."),(0,r.kt)("li",{parentName:"ul"},"Outputs is a list of the format you want to produce",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"In case of calibration job, only ",(0,r.kt)("em",{parentName:"li"},"CCOrientations")," is an acceptable output"),(0,r.kt)("li",{parentName:"ul"},"In case of full/reconstruction job, at least one output must be specified for the job to be valid")))),(0,r.kt)("p",null,"Small note on outputs: most of the time, an output is generated during the reconstruction phase of the job.\nThe exception is the ",(0,r.kt)("em",{parentName:"p"},"CCOrientations")," format, that is produced during the calibration phase of the job.\nTherefore, ",(0,r.kt)("em",{parentName:"p"},"CCOrientations")," can be produced only with a ",(0,r.kt)("em",{parentName:"p"},"Full")," or ",(0,r.kt)("em",{parentName:"p"},"Calibration")," job, while other formats can be produced only with a ",(0,r.kt)("em",{parentName:"p"},"Full")," or ",(0,r.kt)("em",{parentName:"p"},"Reconstruction")," job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "job":{\n    "id":"JOB_ID",\n    "name":"My first CCCS job",\n    "type":"Full",\n    "state":"New",\n    "creationDateTime":"2020-09-14T14:29:55Z",\n    "location":"EastUs",\n    "workspaceID":"WORKSPACE_ID",\n    "email":"john.doe@example.com",\n    "executionInformation":null,\n    "inputs":[\n      {\n        "id":"IMAGECOLLECTION_RD_ID",\n        "description":"Drone ImageCollection"\n      },\n      {\n        "id":"CCORIENTATIONS_RD_ID",\n        "description":"Drone CCOrientations"\n      }\n    ],\n    "settings":{\n      "meshQuality":"Extra",\n      "processingEngines":20,\n      "cacheSettings":null,\n      "outputs":[\n        {\n          "format":"OBJ",\n          "realityDataId":"OBJ_RD_ID"\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-1"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code if the call is successful."),(0,r.kt)("p",null,"You can see the job is in state ",(0,r.kt)("em",{parentName:"p"},"New"),", meaning that it has been created but not yet submitted.\nThis is the only state where you can still delete a job. Once a job is submitted, it cannot be deleted anymore."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"location")," indicates the region in which the job will be submitted. It is determined thanks to the project linked in your workspace."),(0,r.kt)("p",null,"Outputs now have two properties: the ",(0,r.kt)("inlineCode",{parentName:"p"},"format")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"realityDataId"),".\nCreating a job automatically creates output reality data for your formats.\nOnce the job is completed and successful, you will be able to download your output from ",(0,r.kt)("em",{parentName:"p"},"Reality Data API")," thanks to this id.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-submit-a-job"},"5. Submit a job"),(0,r.kt)("p",null,"Now that the job is created, we will submit it for processing.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs/JOB_ID/submit HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-2"},"Request"),(0,r.kt)("p",null,"An existing job is submitted by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs/JOB_ID/submit"},"https://api.bentley.com/contextcapture/jobs/JOB_ID/submit")," endpoint.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "job":{\n    "id":"JOB_ID",\n    "name":"My first CCCS job",\n    "type":"Full",\n    "state":"New",\n    "creationDateTime":"2020-09-14T14:29:55Z",\n    "location":"EastUs",\n    "workspaceID":"WORKSPACE_ID",\n    "email":"john.doe@example.com",\n    "executionInformation":{\n      "submissionDateTime":"2020-09-14T14:34:20Z",\n      "startDateTime":null,\n      "endDateTime":null,\n      "outcome":null,\n      "estimatedUnits":null\n    },\n    "inputs":[\n      {\n        "id":"IMAGECOLLECTION_RD_ID",\n        "description":"Drone ImageCollection"\n      },\n      {\n        "id":"CCORIENTATIONS_RD_ID",\n        "description":"Drone CCOrientations"\n      }\n    ],\n    "settings":{\n      "meshQuality":"Extra",\n      "processingEngines":20,\n      "cacheSettings":null,\n      "outputs":[\n        {\n          "format":"OBJ",\n          "realityDataId":"OBJ_RD_ID"\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-2"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")," status code if the call is successful."),(0,r.kt)("p",null,"You can see the job is now in state ",(0,r.kt)("em",{parentName:"p"},"Active"),", meaning that it is awaiting to be processed or being processed.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-track-a-job-progress"},"6. Track a job progress"),(0,r.kt)("p",null,"In order to follow your job progress, we have a specific endpoint you can call.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/contextcapture/jobs/JOB_ID/progress HTTP/1.\n\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-3"},"Request"),(0,r.kt)("p",null,"Job tracking is done by sending a HTTP GET message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs/JOB_ID/progress"},"https://api.bentley.com/contextcapture/jobs/JOB_ID/progress")," endpoint."),(0,r.kt)("p",null,"In order to reduce stress on the service, we ask you to query with backoff intervals of ","[15, 30, 60, 120]"," seconds.\nThe interval between the first and second query is 15 sec and then 30 sec\u2026 If the percentage changes the sequence is restarted.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "jobProgress":{\n    "percentage":98,\n    "state":"Active",\n    "step":"Reconstruction"\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{language:"json",code:'{\n  "jobProgress":{\n    "percentage":100,\n    "state":"Completed",\n    "step":""\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-3"},"Response body"),(0,r.kt)("p",null,"The response will give you progress percentage of the job, with its state and the current processing step."),(0,r.kt)("p",null,"Once the job is completed, you will see the state as ",(0,r.kt)("em",{parentName:"p"},"Completed"),". It doesn\u2019t mean the job is successful, it states the job cannot evolve anymore.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-retrieve-a-job-result"},"7. Retrieve a job result"),(0,r.kt)("p",null,"Once the job is completed, you can ask for the complete job result.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/contextcapture/jobs/JOB_ID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-4"},"Request"),(0,r.kt)("p",null,"Job information is retrieved by sending a HTTP GET message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs/JOB_ID"},"https://api.bentley.com/contextcapture/jobs/JOB_ID")," endpoint.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "job":{\n    "id":"JOB_ID",\n    "name":"My first CCCS job",\n    "type":"Full",\n    "state":"New",\n    "creationDateTime":"2020-09-14T14:29:55Z",\n    "location":"EastUs",\n    "workspaceID":"WORKSPACE_ID",\n    "email":"john.doe@example.com",\n    "executionInformation":{\n      "submissionDateTime":"2020-09-14T14:34:20Z",\n      "startDateTime":"2020-09-14T14:34:28Z",\n      "endDateTime":"2020-09-14T14:41:49Z",\n      "outcome":"Success",\n      "estimatedUnits":0.05297\n    },\n    "inputs":[\n      {\n        "id":"IMAGECOLLECTION_RD_ID",\n        "description":"Drone ImageCollection"\n      },\n      {\n        "id":"CCORIENTATIONS_RD_ID",\n        "description":"Drone CCOrientations"\n      }\n    ],\n    "settings":{\n      "meshQuality":"Extra",\n      "processingEngines":20,\n      "cacheSettings":null,\n      "outputs":[\n        {\n          "format":"OBJ",\n          "realityDataId":"OBJ_RD_ID"\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-4"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")," status code if the call is successful."),(0,r.kt)("p",null,"You can see the job outcome in the ",(0,r.kt)("inlineCode",{parentName:"p"},"executionInformation")," section.\nIf it is ",(0,r.kt)("em",{parentName:"p"},"Success"),", you can retrieve the job outputs based on their reality data id.\nOutcome can also be ",(0,r.kt)("em",{parentName:"p"},"Failed")," or ",(0,r.kt)("em",{parentName:"p"},"Cancelled")),(0,r.kt)("p",null,"You have some more information about the execution, namely the start time (when your job was picked up by a worker) and the end time.\n",(0,r.kt)("inlineCode",{parentName:"p"},"estimatedUnits")," are an estimate of the units billed for this job. They hold no legal value compared to billing.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"ContextCapture REST API")," tutorial! You should now be able to create a workspace and a job, submit and track a job inside ",(0,r.kt)("em",{parentName:"p"},"ContextCapture"),".\nTo go further and use ",(0,r.kt)("em",{parentName:"p"},"ContextCapture")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{name:"Using cache in ContextCapture",description:"This tutorial focuses on using cache for faster processing in ContextCapture",thumbnail:"/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache",mdxType:"Tile"}),(0,r.kt)(y,{name:"Better calibration in ContextCapture",description:"Learn how to specify calibration settings in ContextCapture, and download the result of a calibration",thumbnail:"/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"}),(0,r.kt)(y,{name:"Better production in ContextCapture",description:"Learn how to specify production settings in ContextCapture",thumbnail:"/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(f,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using ContextCapture API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for ContextCapture, and downloading outputs.",mdxType:"ResourceTile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[]},{id:"3-create-a-workspace",level:2,title:"3. Create a workspace",children:[]},{id:"4-create-a-job",level:2,title:"4. Create a job",children:[]},{id:"5-submit-a-job",level:2,title:"5. Submit a job",children:[]},{id:"6-track-a-job-progress",level:2,title:"6. Track a job progress",children:[]},{id:"7-retrieve-a-job-result",level:2,title:"7. Retrieve a job result",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},61876:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Copy Project Team Members and Roles to another Project",tile:{name:"Copy Project Team Members and Roles to another Project",description:"This tutorial will demonstrate how to copy team members and roles from one Project to another.",href:"/tutorials/copy-project-team-members-and-roles-to-another-project/",durationInMinutes:10,relatedApiIds:["projects"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will demonstrate how to copy team members and roles from one Project to another. This tutorial is accompanied by a sample powershell script located ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Administration/Project-Copy-Users"},"here"),". Authorization is provided as a separate ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Authorization/New-OidcAuthCodePkceLogin.ps1"},"script"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.1"},"PowerShell")," (Recommended 7.0+ version) installed."),(0,r.kt)("li",{parentName:"ul"},"Access to, or create a new, two projects to use this sample.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Process of creating a new project is covered in ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"this tutorial")))),(0,r.kt)("li",{parentName:"ul"},"Your own ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," application/client registered on iTwin Platform.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,r.kt)("strong",{parentName:"li"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:read")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:modify")," scopes enabled."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-request-access-token-for-use-in-authorization-header"},"1. Request access token for use in Authorization header"),(0,r.kt)("p",null,"Authorization is required for all iTwin Platform API endpoints. See the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Authorization"},"Authorization README")," for more information.\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Administration/Project-Copy-Users/Copy-ProjectUsers.ps1"},"This tutorial powershell sample")," already includes code that obtains an authorization token."),(0,r.kt)(u,{mdxType:"Alert"},"These samples require an Authorization Code + PKCE client. Registration of a"," ",(0,r.kt)("strong",null,"Desktop/Mobile")," application/client will give you an Authorization Code + PKCE client.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/roles HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-project-roles-from-the-source-project"},"2. Get project roles from the source project"),(0,r.kt)("p",null,"Getting roles from the source project requires sending a GET request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/roles")," endpoint."),(0,r.kt)("h4",{id:"request-headers"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example response body"),(0,r.kt)(h,{language:"json",code:'{\n  "roles":[\n    {\n      "roleId":"752b5a3d-b9f2-4845-824a-99dd310b4898",\n      "displayName":"Project Reader",\n      "description":"Project Reader description"\n    },\n    {\n      "roleId":"ce5399cc-088c-4c48-9f7b-0bff2d72fc25",\n      "displayName":"Project Contributor",\n      "description":"Project Contributor description"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body"},"Response body"),(0,r.kt)("p",null,"On the successful response you will get returned the array of project roles from the source project.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/roles HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-add-each-role-to-the-destination-project"},"3. Add each role to the destination project"),(0,r.kt)("p",null,"Adding a role to a project requires sending a POST request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/roles")," endpoint."),(0,r.kt)("h4",{id:"request-headers-1"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example request body"),(0,r.kt)(h,{language:"json",code:'{\n  "displayName":"Sample role",\n  "description":"Sample role description"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request body"),(0,r.kt)("p",null,"The request body is specified as JSON and requires ",(0,r.kt)("em",{parentName:"p"},"displayName")," and ",(0,r.kt)("em",{parentName:"p"},"description")," as properties. The API works with one role at a time.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example response body"),(0,r.kt)(h,{language:"json",code:'{\n  "role":{\n    "roleId":"faa3dca1-a901-4659-9da1-d9f29ddcc288",\n    "displayName":"Project Role",\n    "description":"An example project role"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-1"},"Response body"),(0,r.kt)("p",null,"The response returns a JSON object that contains displayName, description and roleId properties. This response body could be used to set roleIds for the users we want to copy from the source project to the destination project.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-get-project-team-members-from-the-source-project"},"4. Get project team members from the source project"),(0,r.kt)("p",null,"Getting team members from the source projects requires sending a GET request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,r.kt)("h4",{id:"request-headers-2"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example response body"),(0,r.kt)(h,{language:"json",code:'{\n  "members":[\n    {\n      "userId":"99cf5e21-735c-4598-99eb-fe3940f96353",\n      "email":"John.Johnson@org.com",\n      "givenName":"John",\n      "surname":"Johnson",\n      "organization":"Organization Corp.",\n      "roles":[\n        "Read Access",\n        "Write Access"\n      ]\n    },\n    {\n      "userId":"25407933-cad2-41a2-acf4-5a074c83046b",\n      "email":"Maria.Miller@org.com",\n      "givenName":"Maria",\n      "surname":"Miller",\n      "organization":"Organization Corp.",\n      "roles":[\n        "Read Access"\n      ]\n    }\n  ],\n  "_links":{\n    "next":{\n      "href":"https://api.bentley.com/projects/806b19d5-c037-48a4-aa98-e297c81453f1/member?$skip=2&$top=2"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-2"},"Response body"),(0,r.kt)("p",null,"On the successful response you will get returned the array of project members from the source project.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-add-each-team-member-to-the-destination-project"},"5. Add each team member to the destination project"),(0,r.kt)("p",null,"Adding a member to a project requires sending a POST request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,r.kt)("h4",{id:"request-headers-3"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example request body"),(0,r.kt)(h,{language:"json",code:'{\n  "userId":"john.doe@my-org.com",\n  "roleIds":[\n    "722b866c-ef99-48e7-8d9b-d59953f2231c"\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request body"),(0,r.kt)("p",null,"The request body is specified as JSON and requires the userId and roleIds properties. The API works with one user at a time. Multiple roles may be assigned to the user via the roleIds array.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Administration API group",href:"/api-groups/administration/",description:"Manage the users, projects, and organizations that interact with your iTwin.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Projects API documentation",href:"/apis/projects/",description:"An overview and detailed Projects API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"iTwin Platform API samples",href:"https://github.com/iTwin/platform-api-samples",description:"PowerShell samples demonstrating API endpoints.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-access-token-for-use-in-authorization-header",level:2,title:"1. Request access token for use in Authorization header",children:[]},{id:"2-get-project-roles-from-the-source-project",level:2,title:"2. Get project roles from the source project",children:[]},{id:"3-add-each-role-to-the-destination-project",level:2,title:"3. Add each role to the destination project",children:[]},{id:"4-get-project-team-members-from-the-source-project",level:2,title:"4. Get project team members from the source project",children:[]},{id:"5-add-each-team-member-to-the-destination-project",level:2,title:"5. Add each team member to the destination project",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},48530:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return C},Jt:function(){return I}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Create & Query Projects",tile:{name:"Create & Query Projects",description:"This tutorial will guide you through the process of creating and querying projects",href:"/tutorials/create-and-query-projects-guide",durationInMinutes:20,relatedApiIds:["projects"],showInFirstSteps:!1,firstStepsSequenceNumber:3}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("GoogleChromeIcon"),h=p("VSCodeIcon"),k=p("PostmanIcon"),g=p("CreateSampleAppButton"),y=p("Alert"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("Tile"),N=p("ResourceTile"),x={metadata:l};function C(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},x,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and querying for an iTwin Project."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to create or query projects.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(m,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(h,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(k,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute http calls. These calls can also be made using the ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, then the user must be an Organization Administrator in order to create a project. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."))),(0,r.kt)(c,{actions:[(0,r.kt)(g,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query Projects tutorial",scopes:["projects:modify","projects:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"projects:modify projects:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/projects/operations/get-project-team-members/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/projects/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "displayName":"Tutorial Sample Project",\n  "projectNumber":"Tutorial Project 123",\n  "geographicLocation":"Exton, PA, USA",\n  "latitude":"40.032970",\n  "longitude":"-75.631538",\n  "timeZone":"Eastern Standard Time",\n  "billingCountry":"US",\n  "allowExternalTeamMembers":true\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 937\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 14:44:18 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 5262b13f-394e-49b8-95ea-a5361d2513a3\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Project":{\n    "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n    "displayName":"Tutorial Sample Project",\n    "projectNumber":"Tutorial Project 123",\n    "registrationDateTime":"2021-06-24T14:44:19.3300000",\n    "registeredBy":"d27f4f7a-cf24-41fa-8044-c17eaaaccfb5",\n    "geographicLocation":"Exton, PA, USA",\n    "latitude":"40.032970",\n    "longitude":"-75.631538",\n    "timeZone":"Eastern Standard Time",\n    "dataCenterLocation":"East US",\n    "billingCountry":"US",\n    "status":"active",\n    "allowExternalTeamMembers":true,\n    "_links":{\n      "storage":{\n        "href":"https://api.bentley.com/storage/folders/ywQwCMGcG028KtYykoggDssEMAjBnBtNvCrWMpKIIA4"\n      },\n      "forms":{\n        "href":"https://api.bentley.com/forms?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "issues":{\n        "href":"https://api.bentley.com/issues?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "imodels":{\n        "href":"https://api.bentley.com/imodels?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-new-itwin-project"},"3. Create a new iTwin Project"),(0,r.kt)("p",null,"The Projects API is used to create and manage projects. A POST call to the projects endpoint will create a new project."),(0,r.kt)("p",null,"Only ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"projectNumber")," are required for creating a new project. They must be unique so if you get a Conflict error then you will need to replace them with unique values. See the ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/create-project/"},"Projects API documentation")," for descriptions of the different properties, including default values. For this example, we will set allowExternalTeamMembers to true. This will allow us to add any user to the project, even users that are not part of our organization."),(0,r.kt)("p",null,"The POST call will return a new project instance. The ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," can be used to query for the project. The project Id is also used in many other iTwin APIs. You may want to save this Id to use in other tutorials.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/083004cb-9cc1-4d1b-bc2a-d6329288200e HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 936\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:10:04 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: fed95960-ea7c-43b5-a9af-66ab5353d073\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Project":{\n    "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n    "displayName":"Tutorial Sample Project",\n    "projectNumber":"Tutorial Project 123",\n    "registrationDateTime":"2021-06-24T14:44:19.3300000",\n    "registeredBy":"d27f4f7a-cf24-41fa-8044-c17eaaaccfb5",\n    "geographicLocation":"Exton, PA, USA",\n    "latitude":"40.032970",\n    "longitude":"-75.631538",\n    "timeZone":"Eastern Standard Time",\n    "dataCenterLocation":"East US",\n    "billingCountry":"US",\n    "status":"active",\n    "allowExternalTeamMembers":true,\n    "_links":{\n      "storage":{\n        "href":"https://api.bentley.com/storage/folders/ywQwCMGcG028KtYykoggDssEMAjBnBtNvCrWMpKIIA4"\n      },\n      "forms":{\n        "href":"https://api.bentley.com/forms?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "issues":{\n        "href":"https://api.bentley.com/issues?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "imodels":{\n        "href":"https://api.bentley.com/imodels?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-an-itwin-project-using-the-project-id"},"4. Query for an iTwin Project Using the Project Id"),(0,r.kt)("p",null,"The project id can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project/"},"query for a specific project"),"."),(0,r.kt)("p",null,"The project will only be returned if you are an Organization Administrator or if you have been added as a member of the project with any role. Only a single project will be returned.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/?projectNumber=Tutorial%20Project%20123 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Prefer: return=representation\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:20:43 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: dd4d68c9-614d-4d67-8e51-7147c18513f8\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Projects":[\n    {\n      "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n      "displayName":"Tutorial Sample Project",\n      "projectNumber":"Tutorial Project 123",\n      "registrationDateTime":"2021-06-24T14:44:19.3300000",\n      "registeredBy":"d27f4f7a-cf24-41fa-8044-c17eaaaccfb5",\n      "geographicLocation":"Exton, PA, USA",\n      "latitude":"40.032970",\n      "longitude":"-75.631538",\n      "timeZone":"Eastern Standard Time",\n      "dataCenterLocation":"East US",\n      "billingCountry":"US",\n      "status":"active",\n      "allowExternalTeamMembers":true,\n      "_links":{\n        "storage":{\n          "href":"https://api.bentley.com/storage/folders/ywQwCMGcG028KtYykoggDssEMAjBnBtNvCrWMpKIIA4"\n        },\n        "forms":{\n          "href":"https://api.bentley.com/forms?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n        },\n        "issues":{\n          "href":"https://api.bentley.com/issues?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n        },\n        "imodels":{\n          "href":"https://api.bentley.com/imodels?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n        }\n      }\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-an-itwin-projects-using-the-project-number"},"5. Query for an iTwin Projects Using the Project Number"),(0,r.kt)("p",null,"The projectNumber query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/my-projects/"},"find a project")," using the projectNumber. Because this is a query, the response will be a list of projects that will usually contain one element. The projectNumber is unique for projects created in your organization. However, it is possible that you are a member of a project in another organization that has the same projectNumber."),(0,r.kt)("p",null,"The api will only return projects that you are able to access. If you expect it to return a specific project and it does not then you may not have access to that project.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/?$search=Tutorial HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Prefer: return=minimal\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:40:47 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 86bc760f-d0c4-4292-b72d-97a078ce1c7a\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Projects":[\n    {\n      "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n      "displayName":"Tutorial Sample Project",\n      "projectNumber":"Tutorial Project 123"\n    },\n    {\n      "id":"0ed7a661-4b7f-44ce-b6c3-f0064bb14c70",\n      "displayName":"A Tutorial Project",\n      "projectNumber":"Project A"\n    },\n    {\n      "id":"bc29f384-bd93-48c9-ae6c-08cb36b40fb0",\n      "displayName":"A Sample Project",\n      "projectNumber":"tutorial A"\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-query-for-an-itwin-projects-using-the-project-number-or-name-wildcard"},"6. Query for an iTwin Projects Using the Project Number or Name (wildcard)"),(0,r.kt)("p",null,"The $search query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/my-projects/"},"find a project")," using a query string that will search using the projectNumber or displayName. This example will find all projects with \u201cTutorial\u201d in the projectNumber or displayName. The query is case sensitive and you should not add wildcard characters to the query string. This example is the SQL equivalent of projectNumber like \u201c%Tutorial%\u201d OR displayName like '%Tutorial%\u2019."),(0,r.kt)("p",null,"Because this is a query, the response will be a list that could contain many projects. Notice that this example is using the prefer header to indicate that only the minimal representation of the projects should be returned. This should be used whenever possible to improve performance and reduce the size of the response payload."),(0,r.kt)("p",null,"The api will only return projects that you are able to access. If you expect it to return a specific project and it does not then you may not have access to that project.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{name:"Manage Project Team Members Guide",description:"Guide on Creating/retrieving team members as well as adding roles/permissions.",href:"/tutorials/manage-project-team-members-guide/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(N,{title:"iTwin Project Sample App",href:"https://github.com/iTwin/iTwin-project-sample-app",description:"Sample application that uses the Projects API to create, update and query for projects.",isExternal:!0,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var I=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-create-a-new-itwin-project",level:2,title:"3. Create a new iTwin Project",children:[]},{id:"4-query-for-an-itwin-project-using-the-project-id",level:2,title:"4. Query for an iTwin Project Using the Project Id",children:[]},{id:"5-query-for-an-itwin-projects-using-the-project-number",level:2,title:"5. Query for an iTwin Projects Using the Project Number",children:[]},{id:"6-query-for-an-itwin-projects-using-the-project-number-or-name-wildcard",level:2,title:"6. Query for an iTwin Projects Using the Project Number or Name (wildcard)",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},2394:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return b},Jt:function(){return v}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Create an empty iModel",tile:{name:"Create an empty iModel",description:"Walk-through how to create an empty iModel which later can be used for synchronization.",href:"/tutorials/create-empty-imodel/",durationInMinutes:5,relatedApiIds:["imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("Alert"),h=p("Title"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T=p("ResourceTile"),w={metadata:l};function b(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"5",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you understand what an iModel is and how to leverage iTwin Platform iModels API for managing it."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to create an empty iModel using iModels API which later on can be used as a destination iModel for your synchronization workflow.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project created and configured. Instructions on how to create a project can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide"},"here"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{scopes:["realitydata:read","imodels:read","imodels:modify","library:read","storage:read","storage:modify"],clientName:"Create empty iModel tutorial",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iModels"),", ",(0,r.kt)("strong",{parentName:"p"},"Library"),", ",(0,r.kt)("strong",{parentName:"p"},"RealityData")," and ",(0,r.kt)("strong",{parentName:"p"},"Storage")," APIs and has ",(0,r.kt)("inlineCode",{parentName:"p"},"realitydata:read imodels:read imodels:modify library:read storage:read storage:modify")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make request to API user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/synchronization/operations/create-connection/"},"Create Connection - Synchronization")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/imodels HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Body"),(0,r.kt)(k,{language:"json",code:'{\n  "projectId":"PROJECT_ID",\n  "name":"Sun City Renewable-energy Plant",\n  "description":"Overall model of solar farms in Sun City",\n  "extent":{\n    "southWest":{\n      "latitude":46.13267702834806,\n      "longitude":7.672120009938448\n    },\n    "northEast":{\n      "latitude":46.302763954781234,\n      "longitude":7.835541640797823\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json\nLocation: https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "iModel":{\n    "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n    "displayName":"Sun City Renewable-energy Plant",\n    "name":"Sun City Renewable-energy Plant",\n    "description":"Overall model of wind and solar farms in Sun City",\n    "initialized":true,\n    "createdDateTime":"2020-10-20T10:51:33.1700000Z",\n    "projectId":"PROJECT_ID",\n    "extent":{\n      "southWest":{\n        "latitude":46.13267702834806,\n        "longitude":7.672120009938448\n      },\n      "northEast":{\n        "latitude":46.302763954781234,\n        "longitude":7.835541640797823\n      }\n    },\n    "_links":{\n      "creator":{\n        "href":"https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d/users/42101fba-847a-4f4e-85a8-a4bed89065e4"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-an-empty-imodel"},"3. Create an empty iModel"),(0,r.kt)("p",null,"An iModel is a specialized information container for exchanging data associated with the lifecycle of infrastructure assets.\niModels were created to facilitate the sharing and distribution of information regardless of the source and format of the information."),(0,r.kt)("p",null,"iTwin Platform iModels API is based on iModelHub cloud service which enables alignment, accountability and accessibility of infrastructure digital twins.\nIt is the control center for iModels and is responsible for coordinating concurrent access to iModels as well as changes made to them."),(0,r.kt)("p",null,"An empty iModel is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/"},"https://api.bentley.com/imodels/")," endpoint with the payload describing the iModel to be created."),(0,r.kt)("p",null,"There are two required properties for the create iModel payload."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"name")," - iModel name is required which uniquely identifies the iModel within the Project. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"projectId")," - provides Project identifier that created iModel will belong to. Project identifier is required property. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"description")," - free form text field so you could give more information about the iModel. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"extent")," - iModels usually are placed at some location on the Earth.\nThis property allows to specify the maximum rectangular area on the Earth which encloses the iModel.\nThe maximum extent is used to help keep your iModel clean.\nWhen new elements are imported, those outside the extent will be flagged for further processing.\nThis extent will also help to zoom to the area of interest in web viewers."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Note: please replace dynamic parameters (JWT_TOKEN and PROJECT_ID) with relevant values from previous steps."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/create-imodel/"},"Create iModel documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Since an empty iModel does not contain any graphical elements or any data it cannot be opened yet for viewing.\nIn order to bring data to the created iModel you may setup synchronization connection which will transform engineering data from native design formats to iModel.\nOnce the synchronization has been setup and executed, viewing session can be started.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Synchronize a file from iTwin Storage",description:"Walk-through how to synchronize a file from iTwin Storage to an iModel using Synchronization API.",href:"/tutorials/synchronization-tutorial",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(T,{title:"Data Management API documentation",href:"/api-groups/data-management/",description:"An overview and detailed Data Management API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(T,{title:"Overview of iModel",href:"https://www.itwinjs.org/learning/imodels/#imodel-overview",description:"An overview of iModel data structure.",isExternal:!0,mdxType:"ResourceTile"}))))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-create-an-empty-imodel",level:2,title:"3. Create an empty iModel",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},92058:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return f},Jt:function(){return T}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Create Multi-Property Validation Rule",tile:{name:"Create Multi-Property Validation Rule",description:"Walk-through to create a multi-property validation rule.",href:"/tutorials/create-multi-property-validation-rule/",thumbnail:"/images/property-validation-thumbnail.png",durationInMinutes:20,relatedApiIds:["validation/propertyValue"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("ResourceTile"),y={metadata:l};function f(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Multi-property validation rules allow you to apply the same validation function to all elements with a property name containing a specified filter string. In this tutorial, you will learn how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Get a list of all property validation rule templates."),(0,r.kt)("li",{parentName:"ul"},"Get a list of all properties in an iModel that contain the specified filter string."),(0,r.kt)("li",{parentName:"ul"},"Create a multi-property validation rule."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/#3-create-an-imodel"},"Access to an iModel")," and the associated projectId and imodelId for that iModel, along with the ",(0,r.kt)("a",{parentName:"li",href:"/apis/imodels/operations/get-imodel-named-version-details/"},"named version ID")," for the version you are testing against"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-request-an-authorization-token-using-one-of-the-methods-below"},"1. Request an authorization token using one of the methods below."),(0,r.kt)("h3",{id:"implement-the-authorization-code-flow-in-the-application"},"Implement the Authorization Code Flow in the application"),(0,r.kt)("p",null,"Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"OAuth2 Authorization")," article to implement an Authorization code workflow in your application. Include the scopes \u201cvalidation:read\u201d and 'validation:modify\u2019."),(0,r.kt)("h3",{id:"retrieve-a-user-token-using-the-api-reference-try-it-out-button"},"Retrieve a user token using the API Reference \u201cTry it out\u201d button."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open ",(0,r.kt)("a",{parentName:"li",href:"/apis/validation/operations/get-validation-propertyvalue-rule-templates/"},"Get property value validation rule templates")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"In the Authorization section, select ",(0,r.kt)("strong",{parentName:"li"},"AuthorizationCode"),"."),(0,r.kt)("li",{parentName:"ol"},"Copy the Authorization token in the Header section for use in this tutorial. It will replace the JWT_TOKEN dynamic parameter in the following steps."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "ruleTemplates": [{\n    "id": "1cKcvg7Ky0e66uT-2u8vpW9vzfUgkKBIp6XGd_WdXPM",\n    "displayName": "MultiPropertyValidation",\n    "description": "Runs a given template on multiple properties in iModel Schema",\n    "prompt": "Runs a given template on multiple properties in iModel Schema",\n    "templateExpression": {\n      "templateId": "a5896553-e248-4619-b7c8-5bcb4878e51c",\n      "functionParameters": {\n        "propertyName": "LastMod"\n      },\n      "schemas": [{\n        "name": "Architecture_rvt_ThreeD_3D",\n        "label": null,\n        "entities": [{\n          "name": "Cameras",\n          "label": null,\n          "properties": [{\n            "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n            "label": "Eye Elevation"\n          }, {\n            "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n            "label": "Far Clip Offset"\n          }, {\n            "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n            "label": "Target Elevation"\n          }]\n        }]\n      }]\n    }\n  }],\n  "_links": {\n    "next": null\n  }\n}\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-property-validation-rule-templates"},"2. Get Property Validation Rule Templates"),(0,r.kt)("p",null,"A property validation rule is used as a basis for verifying the value of a property. A rule can check if the value of a property is defined, within a range of values, matches a pattern, etc."),(0,r.kt)("p",null,"We have provided a variety of property validation rule templates to get you started. An ",(0,r.kt)("code",null,"HTTP GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId%5B&continuationToken%5D%5B&$top%5D"},"https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId[&continuationToken][&$top]"))," request returns all valid property validation rule templates for the given project ID. Choose the template that is best suited for your goals based on the description."),(0,r.kt)("p",null,"For this tutorial we are using the MultiPropertyValidation rule template shown on the right in the response body.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/properties/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000&filter=LENGTH HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "data": {\n    "searchProperty": {\n      "schemas": [\n        {\n          "name": "Architecture_rvt_ThreeD_3D",\n          "label": null,\n          "entities": [\n            {\n              "name": "Cameras",\n              "label": null,\n              "properties": [\n                {\n                  "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Eye Elevation"\n                },\n                {\n                  "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n                  "label": "Far Clip Offset"\n                },\n                {\n                  "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Target Elevation"\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-filtered-validation-properties"},"3. Get Filtered Validation Properties"),(0,r.kt)("p",null,"Before creating a multi-property validation rule, a filtered list of properties may be retrieved for the desired iModel. The hierarchical response contains a list of all schemas in the iModel. Within each schema is a list of all entities and within those are lists of properties."),(0,r.kt)("p",null,"Provide the iModel ID, project ID and filter string in the request."),(0,r.kt)("p",null,"Review the schemas array in the response and then pass it into the request body in Step 4.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/validation/propertyValue/rules HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n  "displayName":"TestRule1",\n  "description":"test rule",\n  "templateId": "0000000000000000000000000000000000000000000",\n  "severity": "high",\n  "ecSchema": "*",\n  "ecClass": "*",\n  "whereClause": "",\n  "dataType": "property",\n  "functionParameters": {\n    "templateId": "0000000000000000000000000000000000000000000",\n    "functionParameters": {\n      "propertyName": "Len"\n    },\n    "schemas": [\n      {\n        "name": "Architecture_rvt_ThreeD_3D",\n        "label": null,\n        "entities": [\n          {\n            "name": "Cameras",\n            "label": null,\n            "properties": [\n              {\n                "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                "label": "Eye Elevation"\n              },\n              {\n                "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n                "label": "Far Clip Offset"\n              },\n              {\n                "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                "label": "Target Elevation"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "rule": {\n    "id": "ZuO3OCC8sUuVcgeXz1Ih_aW46T-rqU1DrOAlAo6t8xc",\n    "displayName": "MultiPropPctAvailRule",\n    "description": "Multi-property percent available test rule",\n    "templateId": "0000000000000000000000000000000000000000000",\n    "severity": "high",\n    "ecSchema": "*",\n    "ecClass": "*",\n    "whereClause": null,\n    "functionParameters": {\n      "templateId": "0000000000000000000000000000000000000000000",\n      "functionParameters": {\n        "propertyName": "Len"\n      },\n      "schemas": [\n        {\n          "name": "Architecture_rvt_ThreeD_3D",\n          "label": null,\n          "entities": [\n            {\n              "name": "Cameras",\n              "label": null,\n              "properties": [\n                {\n                  "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Eye Elevation"\n                },\n                {\n                  "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n                  "label": "Far Clip Offset"\n                },\n                {\n                  "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Target Elevation"\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    },\n    "dataType": "property",\n    "_links": {\n      "self": {\n        "href": "https://dev-api.bentley.com/validation/propertyValue/rules/00000000000000000000000000-0000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-creating-a-multi-property-validation-rule"},"4. Creating a Multi-Property Validation Rule"),(0,r.kt)("p",null,"To create a multi-property validation rule, provide a rule name, description, template ID, severity, data type and, optionally, a ",(0,r.kt)("inlineCode",{parentName:"p"},"whereClause"),".\nIn the ",(0,r.kt)("inlineCode",{parentName:"p"},"functionParameters")," object, set the nested template ID, parameters and schemas as described below. They will be used during processing to apply the rule for each of the properties listed."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"templateId"),": The template ID of the MultiPropertyValidation rule template."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ecSchema"),": Should be set to \u201c*\u201d  since it will be set based on the schemas parameter below."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ecClass"),": Should be set to \u201c*\u201d since it will be set based on the schemas parameter below."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"whereClause"),": (Optional) The syntax is: ","[propertyName][comparison operator]"," ","[value]",", ie USER_LABEL = 'Door\u2019, for multiple properties connectors such as AND/OR can be used as well."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"severity"),": The rule severity can be one of four values: 'veryHigh\u2019, 'high\u2019, 'medium\u2019, 'low\u2019."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"dataType"),": Should be set to 'property\u2019."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"functionParameters/templateId"),": This nested template ID determines which additional parameters are required below."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"functionParameters/functionParameters"),": These are the function parameters listed in the templateExpression object of the rule template (specified by the template ID)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"functionParameters/schemas"),": The list of schemas, entities, and properties retrieved in Step 3 are used to set this parameter.")),(0,r.kt)("p",null,"If your rule creation is successful, it will return the rule metadata and a new rule ID. This ID will be used to associate the rule with a test."),(0,r.kt)("p",null,"On the right, you can see an example of creating a multi-property validation rule which calculates the percentage of elements that have their selected property value set.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/results/000000000000000-000000000000000000000000000000000-00000-00000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "result":[\n    {\n      "elementId": "0x16fc",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Roofs:Type__x0020__Comments_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "0"\n    },\n    {\n      "elementId": "0x16fc",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Roofs:FamilyType)",\n      "ruleIndex": 0,\n      "badValue": "100"\n    },\n    {\n      "elementId": "N/A",\n      "elementLabel": "No property found",\n      "ruleIndex": 0,\n      "badValue": "TypeDefinition is not a valid property."\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Door__x0020__Opening_INVALID_Length_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "20"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:OmniClass__x0020__Number_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "10"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Width_INVALID_Length_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "20"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Depth_INVALID_Length_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "20"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Manufacturer_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "40"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Type__x0020__Comments_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "40"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Type__x0020__Mark_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "0"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:OmniClass__x0020__Title_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "40"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Assembly__x0020__Code_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "70"\n    }\n  ],\n  "ruleList":[\n    {\n      "id":"0000000000000000000000000000000000000000000",\n      "displayName": "MultiPropPctAvailRule"\n     }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-getting-multi-property-validation-test-results"},"5. Getting Multi-Property Validation Test Results"),(0,r.kt)("p",null,"After creating a test with the multi-property validation rule, it was run to produce the (shortened) list of results on the right."),(0,r.kt)("p",null,"The property validation results are formatted with a \u201cresult\u201d array that reports the calculated percentage of elements with available property values. It also includes a \u201cruleList\u201d array that lists all of the rules associated with the test run."),(0,r.kt)("p",null,"Within each object in the \u201cresult\u201d array:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"elementId"),": the first element id of the set containing the reported property "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"elementLabel"),": the schema:class:property being reported"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ruleIndex"),": the index of the rule within \u201cruleList\u201d that this property validation was based on"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"badValue"),": in this case, instead of containing the \u201cbad\u201d value of a property validation failure, this field simply contains the percentage of elements that have a value available for each matching property.")),(0,r.kt)("p",null,"Within each object in the \u201cruleList\u201d array:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"id"),": the rule ID"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"displayName"),": the rule name")),(0,r.kt)("h2",{id:"6-conclusion"},"6. Conclusion"),(0,r.kt)("p",null,"You are now able to successfully create a multi-property validation rule allowing you to easily validate all elements that have a property name containing a specified filtering string.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-an-authorization-token-using-one-of-the-methods-below",level:2,title:"1. Request an authorization token using one of the methods below.",children:[{id:"implement-the-authorization-code-flow-in-the-application",level:3,title:"Implement the Authorization Code Flow in the application",children:[]},{id:"retrieve-a-user-token-using-the-api-reference-try-it-out-button",level:3,title:"Retrieve a user token using the API Reference \u201cTry it out\u201d button.",children:[]}]},{id:"2-get-property-validation-rule-templates",level:2,title:"2. Get Property Validation Rule Templates",children:[]},{id:"3-get-filtered-validation-properties",level:2,title:"3. Get Filtered Validation Properties",children:[]},{id:"4-creating-a-multi-property-validation-rule",level:2,title:"4. Creating a Multi-Property Validation Rule",children:[]},{id:"5-getting-multi-property-validation-test-results",level:2,title:"5. Getting Multi-Property Validation Test Results",children:[]},{id:"6-conclusion",level:2,title:"6. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},10694:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return b},Jt:function(){return v}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Create iModel Named Version",tile:{name:"Create iModel Named Version",description:"Walk-through how to create a new Named Version within existing iModel.",href:"/tutorials/create-named-version/",durationInMinutes:10,relatedApiIds:["imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("Alert"),h=p("Title"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T=p("ResourceTile"),w={metadata:l};function b(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to guide you through the steps to create a new iModel Named Version."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to create a new Named Version within selected iModel using iModels API which later on can be opened with the viewer.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"An empty iModel created.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to create an empty iModel can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-empty-imodel"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Synchronization of design files to the iModel configured and synchronized.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to synchronize a file can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/synchronization-tutorial"},"here")))))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{scopes:["realitydata:read","imodels:read","imodels:modify","library:read","storage:read","storage:modify"],clientName:"Create iModel Named Version tutorial",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iModels"),", ",(0,r.kt)("strong",{parentName:"p"},"Library"),", ",(0,r.kt)("strong",{parentName:"p"},"RealityData")," and ",(0,r.kt)("strong",{parentName:"p"},"Storage")," APIs and has ",(0,r.kt)("inlineCode",{parentName:"p"},"realitydata:read imodels:read imodels:modify library:read storage:read storage:modify")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make request to API user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/imodels/operations/get-project-imodels/"},"Get Project iModels - iModels")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/imodels/?projectId=PROJECT_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:'Content-Type: application/json\nEtag: "P7yWLBoFpMcFbE25CKMLNCqoZ4Q="',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "iModels":[\n    {\n      "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n      "displayName":"Sun City Renewable-energy Plant",\n      "name":"Sun City Renewable-energy Plant",\n      "description":"Overall model of wind and solar farms in Sun City",\n      "initialized":true,\n      "createdDateTime":"2020-10-20T10:51:33.1700000Z",\n      "projectId":"PROJECT_ID",\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d/users/42101fba-847a-4f4e-85a8-a4bed89065e4"\n        },\n        "changesets":{\n          "href":"https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d/changesets"\n        }\n      }\n    },\n    {\n      "id":"e5692781-32b8-473d-8752-908468f46926",\n      "displayName":"Power Town Processing Plant",\n      "name":"Power Town Processing Plant",\n      "description":"Overall model of processing plant in Power town",\n      "initialized":true,\n      "createdDateTime":"2020-10-20T10:51:33.1700000Z",\n      "projectId":"PROJECT_ID",\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/42101fba-847a-4f4e-85a8-a4bed89065e4"\n        },\n        "changesets":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets"\n        }\n      }\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/imodels?projectId=PROJECT_ID&$skip=0&$top=100"\n    },\n    "prev":{\n      "href":"https://api.bentley.com/imodels?projectId=PROJECT_ID&$skip=0&$top=100"\n    },\n    "next":{\n      "href":"https://api.bentley.com/imodels?projectId=PROJECT_ID&$skip=100&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-a-list-of-imodels-in-the-project"},"3. Get a list of iModels in the Project"),(0,r.kt)("p",null,"First of all we need to select an iModel where we want to create a Named Version."),(0,r.kt)("p",null,"To retrieve a list of iModels in the project send a HTTP GET request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/?projectId=PROJECT_ID"},"https://api.bentley.com/imodels/?projectId=PROJECT_ID")," and provide projectId query parameter."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Note: please replace dynamic parameters (JWT_TOKEN and PROJECT_ID) with relevant values from previous steps."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/get-project-imodels/"},"Get project iModels documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Response from the server has a list of iModels in the specified project.\nOnce you find an iModel for which you want to create a Named Version you can use the changesets link to retrieve all Changesets of an iModel.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:'Content-Type: application/json\nEtag: "20EzIoC8ZD/iWVKQt4AnPlr/Otg="',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "changesets":[\n    {\n      "id":"a1ecbdc8c4f6173004f9f881914a57c5511a362b",\n      "displayName":"1",\n      "description":"Changeset 0",\n      "index":1,\n      "parentId":"",\n      "pushDateTime":"2020-10-21T06:34:45.007Z",\n      "application":{\n        "name":"iTwin Synchronizer"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/ea4dfb9f-7f66-4c6f-82c5-0efad1636a1f"\n        },\n        "namedVersion":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions/a9f63fc0-ecab-440b-ba59-1a617e15f543"\n        }\n      }\n    },\n    {\n      "id":"7caef8ab5afcd99c9e618fb37978c3a03d0409c7",\n      "displayName":"2",\n      "description":"Changeset 1",\n      "index":2,\n      "parentId":"a1ecbdc8c4f6173004f9f881914a57c5511a362b",\n      "pushDateTime":"2020-10-21T06:34:48.123Z",\n      "application":{\n        "name":"iTwin Synchronizer"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/ea4dfb9f-7f66-4c6f-82c5-0efad1636a1f"\n        },\n        "namedVersion":null\n      }\n    },\n    {\n      "id":"a587345859410ce5c2811c7c558d4578938efa00",\n      "displayName":"3",\n      "description":"Changeset 2",\n      "index":3,\n      "parentId":"7caef8ab5afcd99c9e618fb37978c3a03d0409c7",\n      "pushDateTime":"2020-10-21T06:34:51.13Z",\n      "application":{\n        "name":"Synchro Modeler"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/27e3ecc7-ae44-4c9d-b0b5-2f65ec146f1d"\n        },\n        "namedVersion":null\n      }\n    },\n    {\n      "id":"13a61888798b687d41f7c748d7414b428766281f",\n      "displayName":"4",\n      "description":"Changeset 3",\n      "index":4,\n      "parentId":"a587345859410ce5c2811c7c558d4578938efa00",\n      "pushDateTime":"2020-10-21T06:34:54.13Z",\n      "application":{\n        "name":"Synchro Modeler"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/27e3ecc7-ae44-4c9d-b0b5-2f65ec146f1d"\n        },\n        "namedVersion":null\n      }\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets?$skip=100&$top=100"\n    },\n    "prev":{\n      "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets?$skip=0&$top=100"\n    },\n    "next":{\n      "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets?$skip=200&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-get-a-list-of-changesets-in-the-imodel"},"4. Get a list of Changesets in the iModel"),(0,r.kt)("p",null,"By sending a HTTP GET message to changesets link retrieved from previous step (",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets"},"https://api.bentley.com/imodels/e5692781\u201332b8\u2013473d-8752\u2013908468f46926/changesets"),") we can retrieve a list of Changesets in the iModel."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/get-imodel-changesets/"},"Get iModel Changesets documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Response contains a list of Changesets.\nIf the Changeset has a Named Version the response contains a link to it otherwise the link is null. You can see that our example has a Named Version created only for the first Changeset.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Body"),(0,r.kt)(k,{language:"json",code:'{\n  "name": "Wind farm design",\n  "description": "Finalized wind farm design in Power Town",\n  "changesetId": "13a61888798b687d41f7c748d7414b428766281f"\n}',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json\nLocation: https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions/8a7d2fef-9613-47ff-b7e4-9081d51b1716",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "namedVersion":{\n    "id":"3020441b-e179-4334-a59a-4fb8deb93df1",\n    "displayName":"Wind farm design",\n    "name":"Wind farm design",\n    "description":"Finalized wind farm design in Power Town",\n    "createdDateTime":"2020-10-21T06:42:57.6700000Z",\n    "state":"visible",\n    "_links":{\n      "creator":{\n        "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/ea4dfb9f-7f66-4c6f-82c5-0efad1636a1f"\n      },\n      "changeset":{\n        "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets/13a61888798b687d41f7c748d7414b428766281f"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-create-a-named-version"},"5. Create a Named Version"),(0,r.kt)("p",null,"Lets say we want to create a new Named Version on the latest Changeset.\nTo do that we need to send a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions"},"https://api.bentley.com/imodels/e5692781\u201332b8\u2013473d-8752\u2013908468f46926/namedversions")," endpoint with the payload describing the Named Version to be created."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"name")," - Named Version name is required which uniquely identifies the Named Version within iModel. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"description")," - free form text field so you could give more information about the Named Version.",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"changesetId")," - provides Changeset identifier the Named Version will be created for. If not provided a baseline iModel Named Version will be created.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/create-imodel-named-version/"},"Create iModel Named Version documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Once the Named Version is created you can start viewing session.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"React to iModel events",description:"Guide on how to use the Webhooks REST API to subscribe to iModel events.",href:"/tutorials/react-to-events-using-webhooks",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(T,{title:"Data Management API documentation",href:"/api-groups/data-management/",description:"An overview and detailed Data Management API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(T,{title:"Overview of iModel",href:"https://www.itwinjs.org/learning/imodels/#imodel-overview",description:"An overview of iModel data structure.",isExternal:!0,mdxType:"ResourceTile"}))))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-get-a-list-of-imodels-in-the-project",level:2,title:"3. Get a list of iModels in the Project",children:[]},{id:"4-get-a-list-of-changesets-in-the-imodel",level:2,title:"4. Get a list of Changesets in the iModel",children:[]},{id:"5-create-a-named-version",level:2,title:"5. Create a Named Version",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},97481:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return m},Jt:function(){return h}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Create a test iModel from a Bentley provided sample",tile:{name:"Create a test iModel from a Bentley provided sample",description:"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data.",thumbnail:"/images/stadium.png",href:"/tutorials/create-test-imodel-sample/",durationInMinutes:10,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u={metadata:l};function m(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{mdxType:"Introduction"}),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"create-a-test-imodel-from-a-bentley-provided-sample-via-the-free-trial-service"},"Create a test iModel from a Bentley provided sample via the Free Trial service"),(0,r.kt)("p",null,"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com"},"https://developer.bentley.com")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Sign In")," button and sign-in using your Bentley account credentials",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you have not already registered, click ",(0,r.kt)("strong",{parentName:"li"},"Register now")," and complete the registration process."))),(0,r.kt)("li",{parentName:"ol"},"Click on your user icon and navigate to the ",(0,r.kt)("a",{parentName:"li",href:"/my-imodels"},(0,r.kt)("strong",{parentName:"a"},"My iModels"))," page"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Create")," button"),(0,r.kt)("li",{parentName:"ol"},"Give your test iModel a name"),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Create iModel from Bentley Sample")),(0,r.kt)("li",{parentName:"ol"},"Choose one of templates"),(0,r.kt)("li",{parentName:"ol"},"[Optional]"," Add the email addresses of anyone else you would like to grant access to the iModel in ",(0,r.kt)("strong",{parentName:"li"},"Project participants")," field",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Any other users will also have to have a Bentley account"))),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Save")," button and wait until your iModel is created"))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"metrostation-sample"},"Metrostation Sample"),(0,r.kt)("p",null,"A metrostation located in Philadelphia. Contains platform, rails, and subway cars."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/metrostation.png",alt:"stadium"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"stadium"},"Stadium"),(0,r.kt)("p",null,"Soccer stadium in Singapore. Features landscape details and a metro station. This is the largest sample iModel."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/stadium.png",alt:"stadium"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"retail-building-sample"},"Retail Building Sample"),(0,r.kt)("p",null,"Cafe and apartments."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/retail-building-sample.png",alt:"retail-building-sample"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"bay-town-process-plant"},"Bay Town Process Plant"),(0,r.kt)("p",null,"Simple processing plant. This is the smallest sample iModel."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/bay-town-process-plant.png",alt:"bay-town-process-plant"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"house-sample"},"House Sample"),(0,r.kt)("p",null,"Features several 2D drawings and sheets."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/house-sample.png",alt:"house-sample"}))))}m.isMDXComponent=!0;var h=function(){return[{id:"create-a-test-imodel-from-a-bentley-provided-sample-via-the-free-trial-service",level:2,title:"Create a test iModel from a Bentley provided sample via the Free Trial service",children:[{id:"metrostation-sample",level:3,title:"Metrostation Sample",children:[]},{id:"stadium",level:3,title:"Stadium",children:[]},{id:"retail-building-sample",level:3,title:"Retail Building Sample",children:[]},{id:"bay-town-process-plant",level:3,title:"Bay Town Process Plant",children:[]},{id:"house-sample",level:3,title:"House Sample",children:[]}]}]}},8996:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return w},Jt:function(){return b}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Creating Your First Issue",tile:{name:"Creating Your First Issue",description:"Learn the basics of the Issues REST API by creating, viewing, and modifying an issue.",thumbnail:null,href:"/tutorials/creating-your-first-issue",durationInMinutes:15,relatedApiIds:["issues"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("ActionLinkButton"),h=p("CodeBlock"),k=p("Alert"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T={metadata:l};function w(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Issues generally represent items of work that come up during a project and often need a particular person/group\u2019s attention by a certain due date. The Issues API lets you create, view, and edit these issues in your project."),(0,r.kt)("p",null,"In this tutorial, you will use the Issues REST API to create, modify, and view an issue. No programming experience is necessary, though familiarity with JSON and HTTP will help. This lesson is meant to begin getting you familiar with the Issues API\u2019s capabilities before you begin writing application code."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"If you haven\u2019t already, please complete the ",(0,r.kt)("a",{parentName:"p",href:"../web-application-quick-start"},"Web Application Quick Start")," tutorial before continuing. This will give you an iModel and a project under which you can create issues. Also, make sure you add the ",(0,r.kt)("strong",{parentName:"p"},"Project Delivery")," API association when ",(0,r.kt)("a",{parentName:"p",href:"/my-apps/"},"registering the application")," on the developer site, or, if you\u2019ve already registered the application, edit it to enable the ",(0,r.kt)("strong",{parentName:"p"},"issues:read")," and ",(0,r.kt)("strong",{parentName:"p"},"issues:modify")," scopes under Issues.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-creating-an-issue"},"1. Creating an Issue")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-project-form-definitions/",target:"_blank",title:"Try the Get Project Form Definitions endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/formDefinitions?projectId=<yourId> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "formDefinitions":[\n    {\n      "id":"e5Ue5Ue5U02hNz19awLcRpwxKq9kmcZEqw123456789",\n      "displayName":"Issue",\n      "type":"Field Data"\n    },\n    {\n      "id":"e5Ue5Ue5U02hNz19awLcRnQIKZ9n-5VNql123456789",\n      "displayName":"Clash Review",\n      "type":"Clash"\n    },\n    {\n      "id":"e5Ue5Ue5U02hNz19awLcRnQIKZ9n-8765l123456789",\n      "displayName":"Data Quality Review",\n      "type":"Data Quality"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-choosing-a-form-definition"},"1.1. Choosing a Form Definition"),(0,r.kt)("p",null,"In order to create an issue, you must associate it with a ",(0,r.kt)("strong",{parentName:"p"},"form definition"),". A form definition simply adds metadata to the issue, including how it should displayed in certain Bentley applications. However, for third-party applications, often the only property that matters is the ",(0,r.kt)("strong",{parentName:"p"},"type"),", as this will determine which type of issue is created."),(0,r.kt)("p",null,"To see all available form definitions in your project, make a request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-project-form-definitions/"},"Get Project Form Definitions")," endpoint as shown under ",(0,r.kt)("strong",{parentName:"p"},"Sample request"),", replacing ",(0,r.kt)("strong",{parentName:"p"},"<","yourId",">")," with the ID of the project you created in a previous step."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"You can try making a request to this endpoint, like any endpoint in the Issues REST API, by clicking the blue Try It Out button on its",(0,r.kt)("a",{href:"/apis/issues-v1/operations/get-project-form-definitions/"},(0,r.kt)("strong",null,"documentation page")),"."),(0,r.kt)("p",null,"This will return a list of form definitions similar to the ",(0,r.kt)("strong",{parentName:"p"},"Sample response"),"."),(0,r.kt)("p",null,"Choose any one of these form definitions returned from your request and note its ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," for the next step.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/create-issue/",target:"_blank",title:"Try the Create Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample method, URL, and headers"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (Copy and use this! Fill in your form ID.)"),(0,r.kt)(h,{language:"json",code:'{\n  "formId":"<your form id>",\n  "subject":"Unspecified material",\n  "description":"The plans do not specify what material this support beam will be made out of.",\n  "dueDate":"2021-07-30T00:00:00Z"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 201 Created\nContent-Type: application/json\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "subject":"Unspecified material",\n    "description":"The plans do not specify what material this support beam will be made out of.",\n    "dueDate":"2021-07-30T00:00:00Z",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-11T18:17:45.4807786Z",\n    "number":"FID-00002",\n    "status":"Draft",\n    "assignee":{\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189",\n      "displayName":"Andrew Menzies"\n    },\n    "assignees":[],\n    "displayName":"FID-00002",\n    "type":"Field Data",\n    "state":"Open"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-posting-the-issue-data"},"1.2. Posting the Issue Data"),(0,r.kt)("p",null,"You can create an issue by making a POST request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/create-issue/"},"Create issue")," endpoint."),(0,r.kt)("h4",{id:"url"},"URL"),(0,r.kt)("p",null,"The URL for creating an issue is always the same: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues")),(0,r.kt)("h4",{id:"body"},"Body"),(0,r.kt)("p",null,"A new issue typically includes a few simple textual properties and, optionally, some metadata properties linking it to an iModel and, potentially, a specific element in that iModel. We\u2019ll go over those metadata properties (anything denoted as ",(0,r.kt)("strong",{parentName:"p"},"\u201cOrigin info\u201d")," on the documentation page) in another tutorial."),(0,r.kt)("p",null,"The only property absolutely required for a new issue request is:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"formId:")," The ID of one of the form definitions in your project, as retrieved from the ",(0,r.kt)("strong",{parentName:"li"},"Get Project Form Definitions")," endpoint.")),(0,r.kt)("p",null,"Other properties that are typically included are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"subject:")," A short descriptive title of the issue, usually less than a sentence."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"description:")," A longer, more detailed explanation of the issue. Can be multiple sentences and can span multiple lines."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"assignee")," or ",(0,r.kt)("strong",{parentName:"li"},"assignees"),": A person, or list of people, respectively, who should review the issue and take action. These must be members of the current project. If neither property is set, ",(0,r.kt)("strong",{parentName:"li"},"assignee")," will default to whoever created the issue, i.e. you."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"dueDate:")," Date by which the assignee(s) should take action on the issue, if applicable. Apps might warn users when an issue is near due or overdue, for instance.")),(0,r.kt)("p",null,"Generally, an app that creates issues would collect these properties from the user, such as by providing a text box for ",(0,r.kt)("strong",{parentName:"p"},"subject"),", a text area for ",(0,r.kt)("strong",{parentName:"p"},"description"),", a dropdown list of project members for ",(0,r.kt)("strong",{parentName:"p"},"assignee"),", and so forth."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Setting ",(0,r.kt)("strong",null,"assignee")," or ",(0,r.kt)("strong",null,"assignees")," requires both a user's display name and ID. These can be obtained using the",(0,r.kt)("a",{href:"/apis/projects/operations/get-project-team-members/"},(0,r.kt)("strong",null,"Get Project Team Members"))," endpoint of the Projects API."),(0,r.kt)("p",null,"Copy the sample body from the pane on the right and visit the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/create-issue/"},"documentation page")," to create your first issue. After you click ",(0,r.kt)("strong",{parentName:"p"},"Try It"),", paste the body into the text area, overwriting any JSON already there. Be sure to replace ",(0,r.kt)("strong",{parentName:"p"},"<","your form id",">")," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," you obtained in Step 1.1."),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"If you\u2019ve made the request correctly, you should receive a response similar to the sample. Note that several properties are automatically filled in by the server, even though you didn\u2019t specify them: ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," is equal to the type of the form definition you chose, and properties such as ",(0,r.kt)("inlineCode",{parentName:"p"},"createdBy")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"createdDateTime")," were automatically set to show who created the issue and when. You will need to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property\u2019s value to make further requests regarding that issue.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-viewing-your-issues"},"2. Viewing Your Issues")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-project-issues/",target:"_blank",title:"Try the Get Project Issues endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample Request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues?projectId=<your-project-ID> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample Response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "issues":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n      "displayName":"FID-00002",\n      "state":"Open",\n      "type":"Field Data",\n      "subject":"Unspecified material"\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/issues?projectId=16298bc6-c7de-4fdb-bdb9-248b3b07c178&$top=1"\n    },\n    "next":{\n      "href":"https://api.bentley.com/issues?projectId=16298bc6-c7de-4fdb-bdb9-248b3b07c178&continuationToken=eyJ0b3AiOjEsInNraXBUb2tlbiI6IntcInRva2VuXCI6XCIrUklEOn5xMEp4QUxUU1ROYmMzZzhBQUFBQURnPT0jUlQ6MSNUUkM6MSNSVEQ6UXRrNDlqVXpNaTdWUElHNElWQUNCVE14TXpJdU1UY3VNakpWTWprN01qZzdOVFl2TlRreE9EZzVOMXNBI0lTVjoyI0lFTzo2NTU1MSNRQ0Y6NyNGUEM6QWdnL0FBQUFBRGdBQUQ4QUFBQUFPQUFBUHdBQUFBQTRBQUFFQU5FZVFCQT1cIixcInJhbmdlXCI6e1wibWluXCI6XCIwNUMxRTlDRDY3MzM5OFwiLFwibWF4XCI6XCIwNUMxRUQ3NTAzOERBQ1wifX0ifQ"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-viewing-all-issues-in-project"},"2.1. Viewing All Issues in Project"),(0,r.kt)("p",null,"Make a request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-project-issues/"},"Get Project Issues")," endpoint to get a summary of all the issues in the project. You must specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"projectId")," in a query parameter, and you can optionally filter by ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," as an additional query parameter."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},'Note: If there are too many issues to be returned in one response, you can request the next "page" of results by making a GET request to the exact URL in'," ",(0,r.kt)("code",null,"next.href"),". (",(0,r.kt)("code",null,"next.href")," will not normally appear if there is just one issue to return, but was included in the sample response for illustrative purposes.)")),(0,r.kt)(c,{subSection:"true",actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-issue-details/",target:"_blank",title:"Try the Get Issue Details endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample Request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-ID> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample Response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "subject":"Unspecified material",\n    "description":"The plans do not specify what material this support beam will be made out of.",\n    "dueDate":"2021-07-30T00:00:00Z",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-11T18:17:45.4807786Z",\n    "number":"FID-00002",\n    "status":"Open",\n    "assignee":{\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189",\n      "displayName":"Andrew Menzies"\n    },\n    "assignees":[\n      \n    ],\n    "displayName":"FID-00002",\n    "type":"Field Data",\n    "state":"Open",\n    "formId":"ZaZaZaYbYav2qwer_-wqer-___wqerqwetaqtewq123"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"22-viewing-a-single-issues-details"},"2.2 Viewing a Single Issue\u2019s Details"),(0,r.kt)("p",null,"To retrieve all properties of an issue, call the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-details/"},"Get issue details")," endpoint."),(0,r.kt)("p",null,"The URL for this request is ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/issues/%3Cid"},"https://api.bentley.com/issues/","<","id"),">"," where ",(0,r.kt)("strong",{parentName:"p"},"<","id",">")," equals the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property of the issue you want to look up (in this case, the one you created in Step 1.2).")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/modify-issue/",target:"_blank",title:"Try the Update Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample method, URL, and headers"),(0,r.kt)(h,{language:"http",code:"PATCH https://api.bentley.com/issues/<your-issue-ID> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (Copy and use this!)"),(0,r.kt)(h,{language:"json",code:'{\n  "description":"Version 1.2 of the plans does not specify what material this support beam will be made out of."\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "description":"Version 1.2 of the plans does not specify what material this support beam will be made out of.",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-14T17:11:27.3959581Z",\n    "status":"Open",\n    "assignee":{\n      "displayName":"Andrew Menzies",\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189"\n    },\n    "number":"FID-00002",\n    "displayName":"FID-00002",\n    "subject":"Unspecified material",\n    "type":"Field Data",\n    "dueDate":"2021-07-30T00:00:00Z",\n    "state":"Open"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-modifying-an-issue"},"3. Modifying an Issue"),(0,r.kt)("p",null,"Once you\u2019ve created an issue, you can call the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/modify-issue/"},"Update issue")," endpoint to modify its properties. Updating an issue can be done simply by making a PATCH request to the same URL where you retrieved its details (ending in the issue\u2019s ID). Provide a JSON object body containing only the properties you want changed; anything not included will keep its saved values. (Note: Including a property with a value of ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," on the will set that property on the saved issue to ",(0,r.kt)("inlineCode",{parentName:"p"},"null"),"; it is not the same as omitting the property from the request entirely.)"),(0,r.kt)("p",null,"For example, if you wanted to make the description slightly more detailed, you could make a request using the body shown to the right. Be sure to set the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," URL parameter to the ID of your newly created issue."),(0,r.kt)(k,{type:"warning",mdxType:"Alert"},"Be aware that some properties returned in the"," ",(0,r.kt)("strong",null,"Get issue details")," request are read-only. The documentation for ",(0,r.kt)("strong",null,"Update issue")," lists only the properties you are allowed to edit."),(0,r.kt)("h4",{id:"url-format"},"URL format"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<ID-of-issue-to-change>"))),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Adding Attachments and Comments to Your Issue",description:"Upload images and documents, and post comments, to make your issue more detailed.",href:"../adding-attachments-and-comments-to-your-issue",mdxType:"Tile"}),(0,r.kt)(f,{name:"Stepping Through an Issue Workflow",description:"Learn how an issue's status can be set to track its progress.",href:"../stepping-through-an-issue-workflow",mdxType:"Tile"}),(0,r.kt)(f,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",mdxType:"Tile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-creating-an-issue",level:2,title:"1. Creating an Issue",children:[{id:"11-choosing-a-form-definition",level:3,title:"1.1. Choosing a Form Definition",children:[]},{id:"12-posting-the-issue-data",level:3,title:"1.2. Posting the Issue Data",children:[]}]},{id:"2-viewing-your-issues",level:2,title:"2. Viewing Your Issues",children:[{id:"21-viewing-all-issues-in-project",level:3,title:"2.1. Viewing All Issues in Project",children:[]},{id:"22-viewing-a-single-issues-details",level:3,title:"2.2 Viewing a Single Issue\u2019s Details",children:[]}]},{id:"3-modifying-an-issue",level:2,title:"3. Modifying an Issue",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},1962:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return b},Jt:function(){return v}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Export data from an iModel",tile:{name:"Export data from an iModel",description:"This tutorial guides you through exporting data from an iModel to other formats, such as IFC or LandXM using the Export API.",href:"/tutorials/export-data-from-imodel/",durationInMinutes:20,relatedApiIds:["export","imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("Alert"),h=p("Title"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T=p("ResourceTile"),w={metadata:l};function b(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you export data from an iModel to different formats like ",(0,r.kt)("a",{parentName:"p",href:"https://www.buildingsmart.org/standards/bsi-standards/industry-foundation-classes/"},"IFC")," or ",(0,r.kt)("a",{parentName:"p",href:"http://www.landxml.org/"},"LandXML")," and store it in the iTwin Storage. Export API works in project and iModel context.\nIn this walk-through, you will be able to start an export.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{scopes:["export:modify","export:read"],clientName:"Export data from an iModel tutorial",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. Use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Export API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"export:modify export:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make requests to the API, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Here you need to use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-out-section"},"Grab a user token from Api reference \u201cTry it out\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/export/operations/startExport/"},"Create Configuration")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it out\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-store-refresh-token-for-user"},"3. Store refresh token for user"),(0,r.kt)("p",null,"The export process usually takes time and is performed in the background. For that, we need to store the user\u2019s refresh token. To get the authorization information, use the Get Authorization Information API. This API will return the current status and a redirect URL where user has to be redirected on the browser if the token has to be renewed.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Get Authorization Information Request Syntax and Headers"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"In order to do that, send a GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL"},"https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL")," request."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ol"},"REDIRECT_URL is a url of where a user should be redirected after successful token renewal."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Get Authorization Information Response Body"),(0,r.kt)(k,{language:"json",code:'{\n    "authorizationInformation": {\n        "isUserAuthorized": true,\n        "_links": {\n            "authorizationUrl": {\n                "href": null\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-if-user-has-a-valid-refresh-token"},"Response if user has a valid refresh token"),(0,r.kt)("p",null,"\u201cisUserAuthorized\u201d with value \u201ctrue\u201d means, user has a valid refresh token and can run long running export.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Get Authorization Information Response Body"),(0,r.kt)(k,{language:"json",code:'{\n    "authorizationInformation": {\n        "isUserAuthorized": false,\n        "_links": {\n            "authorizationUrl": {\n                "href": "https://connect-itwinbridgeportal.bentley.com/authenticate?redirect_url=REDIRECT_URL"\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-if-user-does-not-have-a-valid-refresh-token"},"Response if user does not have a valid refresh token"),(0,r.kt)("p",null,"\u201cisUserAuthorized\u201d with value \u201cfalse\u201d means, user does not have valid refresh token and cannot run long running export. To refresh token user has to be redirected to authorizationUrl from response.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/export/startExport HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Body"),(0,r.kt)(k,{language:"json",code:'{\n  "projectId": "ProjectId",\n  "iModelId": "IModelId",\n  "changesetId": "ChangesetId",\n  "folderId": "FolderId",\n  "mappingFileId": "MappingFileId",\n  "saveLogs": true,\n  "replaceOlderFile": false,\n  "exportType": "ExportType",\n  "ifcVersion": "IfcVersion"\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "start-export-status":{\n    "status": "started"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-start-export"},"4. Start Export"),(0,r.kt)("p",null,"To start the Export, call the endpoint ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/export/startExport"},"Start Export")),(0,r.kt)("p",null,"These are the required properties for the endpoint:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"projectId")," - Project Id."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"iModelId")," - iModel Id of an iModal that is going to be used for the export."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"exportType"),' - Export Type ("IFC" or "LandXML").')),(0,r.kt)("p",null,"These are the optional properties for the endpoint:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"changesetId")," - Changeset Id of the iModel."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"folderId")," - Folder Id to store the output file."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"mappingFileId")," - User-defined mapping file Id."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"saveLogs")," -  Set to save the logs of export."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"replaceOlderFile")," - Set to replace the older file for same imodel."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ifcVersion")," - Ifc Version if the export type is \u201cIFC\u201d (One of 'IFC4.3 RC1\u2019, 'IFC2x3\u2019, 'IFC2x3 CV 2.0\u2019, 'IFC4 RV 1.2\u2019).")),(0,r.kt)("p",null,"To execute the request, go to ",(0,r.kt)("a",{parentName:"p",href:"/apis/export/operations/startExport/"},"StartExport")," page and use the \u201cTry it out\u201d section.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-waiting-for-the-export-to-finish"},"5. Waiting for the export to finish"),(0,r.kt)("p",null,"Once completed the output file will be uploaded to the storage. To get that use the storage API.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-conclusion"},"6. Conclusion"),(0,r.kt)("p",null,"We\u2019ve successfully started an export to export the iModel data.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Synchronize an iModel using Synchronization API",description:"You will learn how to use the synchronization REST API to synchronize data to iModel.",href:"/tutorials/synchronization-tutorial/",mdxType:"Tile"}),(0,r.kt)(f,{name:"Filter an iModel using Transformation API",description:"You will learn how to use the transformation REST API to filter iModel data.",href:"/tutorials/filter-by-view-definition-transformation/",mdxType:"Tile"}),(0,r.kt)(f,{name:"Get started with Storage API",description:"You will learn the main workflows and operations of the storage REST API.",href:"/tutorials/storage-quick-start/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(T,{title:"Export API documentation",href:"/apis/export/overview",description:"An overview and detailed Export API documentation.",mdxType:"ResourceTile"}))))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-out-section",level:3,title:"Grab a user token from Api reference \u201cTry it out\u201d Section",children:[]}]},{id:"3-store-refresh-token-for-user",level:2,title:"3. Store refresh token for user",children:[]},{id:"4-start-export",level:2,title:"4. Start Export",children:[]},{id:"5-waiting-for-the-export-to-finish",level:2,title:"5. Waiting for the export to finish",children:[]},{id:"6-conclusion",level:2,title:"6. Conclusion",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},6937:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return x},Jt:function(){return C}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Transforming an iModel - Filtering data by a view definition",tile:{name:"Transforming an iModel - Filtering data by a view definition",description:"This tutorial will demonstrate how to filter an iModel by a view definition using iModel Transformations API.",thumbnail:"/images/stadium-filtered.png",href:"/tutorials/filter-by-view-definition-transformation/",durationInMinutes:20,relatedApiIds:["transformations"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("VSCodeIcon"),h=p("PostmanIcon"),k=p("CreateSampleAppButton"),g=p("Alert"),y=p("Title"),f=p("CodeBlock"),T=p("ContinueLearningSection"),w=p("TileList"),b=p("Tile"),v=p("ResourceTile"),N={metadata:l};function x(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"20",summaryImageSrc:"/images/stadium.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you create your first iModel Transformation.\nIn this walk-through, you will configure and run a transformation, wait for it to complete and view the result.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(m,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(h,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute http calls. These calls can also be made using the ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it out")," button in the API documentation or any other http request tool."),(0,r.kt)("li",{parentName:"ul"},"A created connected project. You can create a project by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"Create a new iTwin Project"),"."),(0,r.kt)("li",{parentName:"ul"},"A source iModel with some data for the transformation. You can create an iModel from Bentley Sample by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/"},"Create an iModel"),"."),(0,r.kt)("li",{parentName:"ul"},"An empty target iModel for the transformation. You can create an empty iModel by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/"},"Create an iModel"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(k,{scopes:["transformations:modify","transformations:read"],clientName:"Filter iModel by view definition",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Transformations API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"transformations:modify transformations:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make requests to the API, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-out-section"},"Grab a user token from Api reference \u201cTry it out\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/transformations/operations/filterbyviewdefinition/"},"Create Configuration")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it out\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-decide-on-what-data-to-keep-inside-an-imodel"},"3. Decide on what data to keep inside an iModel."),(0,r.kt)("p",null,"Open iModel and take note of data that has to be kept inside an iModel."),(0,r.kt)("p",null,"Easiest way to query for iModel data is by using an iModel Console web application. Open your source iModel by replacing values in this link:\n",(0,r.kt)("a",{parentName:"p",href:"https://imodelconsole.bentley.com/?projectid=%7ByourSourceProjectId%7D&imodelid=%7ByourSourceIModelId%7D"},"https://imodelconsole.bentley.com/?projectid={yourSourceProjectId}&imodelid={yourSourceIModelId}")),(0,r.kt)("h3",{id:"31-a-view-definition"},"3.1 A View definition"),(0,r.kt)("p",null,"A View renders geometry from one or more Models of an iModel in a web browser. iTwin.js applications can embed and interact with Views anywhere on a web page.\nA View is saved in an iModel as an element of the ViewDefinition class. ViewDefinitions hold all the information necessary to show the same content across sessions."),(0,r.kt)("p",null,"A view contains a ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-backend/viewdefinitions/modelselector/"},"model selector")," and a ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-backend/viewdefinitions/categoryselector/"},"category selector"),"\nwhich holds a list of Ids of models and categories that should be displayed in a view. Views are used to hide information in a browser, but the iModel itself holds the full data.\nFilter by view definition transformation relies on the data from model selector and category selector within the view and accepts arrays of Ids to filter on."),(0,r.kt)("h3",{id:"32-query-for-physical-modelspartitions"},"3.2 Query for Physical Models/Partitions"),(0,r.kt)("p",null,"Run ECSQL query:\n",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT ECInstanceId, CodeValue, UserLabel from bis.PhysicalPartition"),"\nTo learn more about ECSQL follow ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/learning/ecsql"},"this")," link."),(0,r.kt)("p",null,"This ECSQL query returns a list of physical partitions inside an iModel. To learn more about iModel internals, follow ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/bis/intro/information-hierarchy/#example-information-hierarchy"},"this")," link."),(0,r.kt)("p",null,"Save all ECInstanceId values and remove those that you would like to filter out."),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Note: If parent model element is omitted from the list, all child elements will get filtered out automatically."),(0,r.kt)("h3",{id:"33-query-for-spatial-categories"},"3.3 Query for Spatial categories"),(0,r.kt)("p",null,"Run ECSQL query:\n",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT ECInstanceId, CodeValue, UserLabel from bis.Spatialcategory")),(0,r.kt)("p",null,"This ECSQL query returns a list of spatial categories inside an iModel. Save all ECInstanceId values and remove those that you would like to filter out."),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Note: If parent category element is omitted from the list, all child elements will get filtered out automatically.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/transformations/configurations/filterbyviewdefinition HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Body"),(0,r.kt)(f,{language:"json",code:'{\n  "transformName":"Filter stadium by a view definition",\n  "sourceProjectId":"SourceProjectId",\n  "sourceIModelId":"SourceIModelId",\n  "targetProjectId":"TargetProjectId",\n  "targetIModelId":"TargetIModelId",\n  "comment":"Example comment",\n  "transformParameters":{\n    "models":[\n      "specify",\n      "all ECInstanceIds",\n      "of PhysicalPartitions",\n      "that you want to keep"\n    ],\n    "categories":[\n      "specify",\n      "all spatial categories",\n      "that you want to keep"\n    ]\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "configuration":{\n    "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n    "transformName":"Filter stadium by a view definition",\n    "comment":"Example comment",\n    "createdDateTime":"2021-08-02T14:51:33.6133333Z",\n    "createdBy":"00000000-0000-0000-0000-000000000000",\n    "modifiedDateTime":"2021-08-02T14:52:33.6133333Z",\n    "lastModifiedBy":"00000000-0000-0000-0000-000000000000",\n    "transformParameters":{\n      "models":[\n        "specify",\n        "all ECInstanceIds",\n        "of PhysicalPartitions",\n        "that you want to keep"\n      ],\n      "categories":[\n        "specify",\n        "all spatial categories",\n        "that you want to keep"\n      ]\n    },\n    "_links":{\n      "sourceIModel":{\n        "href":"https://api.bentley.com/imodels/00000000-0000-0000-0000-000000000000"\n      },\n      "targetIModel":{\n        "href":"https://api.bentley.com/imodels/00000000-0000-0000-0000-000000000000"\n      },\n      "sourceProject":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000"\n      },\n      "targetProject":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-a-configuration"},"4. Create a configuration"),(0,r.kt)("p",null,"A transformation configuration is needed to create an association between source and target iModels with some additional metadata to successfully carry out the transformation.\nCreating a configuration does not start the transformation process itself."),(0,r.kt)("p",null,"A configuration is created by sending a request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations/configurations/filterbyviewdefinition"},"https://api.bentley.com/transformations/configurations/filterbyviewdefinition")," endpoint with the payload describing the source and target iModel association."),(0,r.kt)("p",null,"These are the required properties for the endpoint:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"transformName")," - free form text field so you could name your configuration ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"sourceProjectId")," - source projectId",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"sourceIModelId")," - iModelId of an iModal that is going to be used as a source of the transformation ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"targetProjectId")," - target projectId",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"targetIModelId")," - iModelId of an iModal that is going to be used as a target of the transformation. Initial transformation should always run on an empty target iModel ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"comment")," - a comment of the transformation.\n",(0,r.kt)("strong",{parentName:"p"},"transformData.models")," - an array of ECInstanceIds that specify model elements that should be kept inside an iModel after transformation.\n",(0,r.kt)("strong",{parentName:"p"},"transformData.categories")," - an array of ECInstanceIds that specify category elements that should be kept inside an iModel after transformation."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/filterbyviewdefinition/"},"FilterByViewDefinition")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"After executing the request, save returned Id from the response.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/transformations HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Body"),(0,r.kt)(f,{language:"json",code:'{\n  "configurationId":"your saved configurationId from step number 3."\n}',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n  "status":"Created",\n  "errorMessage":"",\n  "processedElementCount":0,\n  "totalElementCount":0,\n  "startedDateTime":"0000-00-00T00:00:00.0000000Z",\n  "finishedDateTime":"0000-00-00T00:00:00.0000000Z",\n  "sourceChangeSetId":"0",\n  "_links":{\n    "configuration":{\n      "href":"https://api.bentley.com/transformations/configurations/00000000-0000-0000-0000-000000000000"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-create-a-transformation"},"5. Create a transformation"),(0,r.kt)("p",null,"A transformation is created by sending a request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations"},"https://api.bentley.com/transformations")," endpoint with the payload indicating which configuration should be used.\nThe request is submitting a transformation job based on the configuration Id value that was provided."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/create-transformation/"},"Create transformation")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"Response indicates the current status of the transformation. After submitting a transformation the status is \u201cCreated\u201d which means that the transformation is enqueued and waiting to start.\nPossible status messages:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Created")," - transformation is created and waiting to be started. The transformation should start automatically, no additional actions are needed.\n",(0,r.kt)("strong",{parentName:"p"},"Started")," - transformation is started and waiting to finish.\n",(0,r.kt)("strong",{parentName:"p"},"Succeeded")," - transformation succeeded. You can open target iModel and inspect the results.\n",(0,r.kt)("strong",{parentName:"p"},"Failed")," - transformation failed. Check the errorMessage node for more information on what happened."),(0,r.kt)("p",null,"Transformation response objects additionally stores ",(0,r.kt)("strong",{parentName:"p"},"processedElementCount")," and ",(0,r.kt)("strong",{parentName:"p"},"totalElementCount")," to allow rendering progress bars and indicate progress to the end users."),(0,r.kt)("p",null,"After executing the request, save returned transformation Id from the response.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"GET https://api.bentley.com/transformations/{savedTransformationId} HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n  "status":"Started",\n  "errorMessage":"",\n  "processedElementCount":0,\n  "totalElementCount":120000,\n  "startedDateTime":"0000-00-00T00:00:00.0000000Z",\n  "finishedDateTime":"0000-00-00T00:00:00.0000000Z",\n  "sourceChangeSetId":"0",\n  "_links":{\n    "configuration":{\n      "href":"https://api.bentley.com/transformations/configurations/00000000-0000-0000-0000-000000000000"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-waiting-for-transformation-to-finish"},"6. Waiting for transformation to finish"),(0,r.kt)("p",null,"Send a GET request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations/%7ByourTransformationId%7D"},"https://api.bentley.com/transformations/{yourTransformationId}")," endpoint to get an updated transformation status.\nYou can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/get-transformation/"},"Get transformation")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"Query for the transformation multiple times until the ",(0,r.kt)("strong",{parentName:"p"},"status")," changes from ",(0,r.kt)("strong",{parentName:"p"},"Created")," to ",(0,r.kt)("strong",{parentName:"p"},"Started")," and eventually to ",(0,r.kt)("strong",{parentName:"p"},"Succeeded"),"."),(0,r.kt)("p",null,"Go to ",(0,r.kt)("a",{parentName:"p",href:"/my-imodels/"},"my iModels")," section and view the target iModel"),(0,r.kt)("h2",{id:"7-conclusion"},"7. Conclusion"),(0,r.kt)("p",null,"We\u2019ve successfully created a configuration, ran a transformation that filtered iModel data, waited for the transformation to completed and inspected the results.")),(0,r.kt)(T,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(w,{mdxType:"TileList"},(0,r.kt)(b,{name:"React to iModel events using Webhooks API",description:"You will learn how to use the Webhooks REST API to create and manage your webhooks.",href:"/tutorials/react-to-events-using-webhooks/",mdxType:"Tile"}),(0,r.kt)(b,{name:"Changed Elements API Tutorial",description:"The Changed Elements API is a REST API that allows the consumer to inspect what elements have changed in an iModel between two versions of the iModel.",href:"/tutorials/changed-elements-api/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(w,{mdxType:"TileList"},(0,r.kt)(v,{title:"API documentation",href:"/apis/transformations/overview/",description:"iModel Transformations API documentation.",mdxType:"ResourceTile"}))))}x.isMDXComponent=!0;var C=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-out-section",level:3,title:"Grab a user token from Api reference \u201cTry it out\u201d Section",children:[]}]},{id:"3-decide-on-what-data-to-keep-inside-an-imodel",level:2,title:"3. Decide on what data to keep inside an iModel.",children:[{id:"31-a-view-definition",level:3,title:"3.1 A View definition",children:[]},{id:"32-query-for-physical-modelspartitions",level:3,title:"3.2 Query for Physical Models/Partitions",children:[]},{id:"33-query-for-spatial-categories",level:3,title:"3.3 Query for Spatial categories",children:[]}]},{id:"4-create-a-configuration",level:2,title:"4. Create a configuration",children:[]},{id:"5-create-a-transformation",level:2,title:"5. Create a transformation",children:[]},{id:"6-waiting-for-transformation-to-finish",level:2,title:"6. Waiting for transformation to finish",children:[]},{id:"7-conclusion",level:2,title:"7. Conclusion",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},61810:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Import Users into Project",tile:{name:"Import Users into Project",description:"This tutorial will demonstrate how to add users to a Project from a CSV file.",href:"/tutorials/import-users-to-project/",durationInMinutes:5,relatedApiIds:["projects"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"5",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will demonstrate how to add users to a Project from a CSV file. This tutorial is accompanied by a sample powershell script located ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Administration/Project-Import-Users"},"here"),". Authorization is provided as a separate ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Authorization/New-OidcAuthCodePkceLogin.ps1"},"script"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.1"},"PowerShell")," (Recommended 7.0+ version) installed."),(0,r.kt)("li",{parentName:"ul"},"Access to, or create a new, project to use this sample.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Process of creating a new project is covered in ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"this tutorial")))),(0,r.kt)("li",{parentName:"ul"},"Your own ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," application/client registered on iTwin Platform.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,r.kt)("strong",{parentName:"li"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:read")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:modify")," scopes enabled."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-request-access-token-for-use-in-authorization-header"},"1. Request access token for use in Authorization header"),(0,r.kt)("p",null,"Authorization is required for all iTwin Platform API endpoints. See the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Authorization"},"Authorization README")," for more information.\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Administration/Project-Import-Users/Import-ProjectUsers.ps1"},"This tutorial powershell sample")," already includes code that obtains an authorization token."),(0,r.kt)(u,{mdxType:"Alert"},"These samples require an Authorization Code + PKCE client. Registration of a"," ",(0,r.kt)("strong",null,"Desktop/Mobile")," application/client will give you an Authorization Code + PKCE client.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-read-users-from-csv"},"2. Read users from CSV"),(0,r.kt)("p",null,"Reading users from a CSV is dependent upon your particular development framework and is outside the scope of this tutorial."),(0,r.kt)("p",null,"Users CSV file must be in following format:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-CSV","data-language":"CSV","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Email: Roles\nuser1@example.com: &lt;comma-separated list of project roles&gt;\nuser2@example.com: &lt;comma-separated list of project roles&gt;\n"}}))),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/validation/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-add-each-user-to-the-project"},"3. Add each user to the Project"),(0,r.kt)("p",null,"Adding a team member to a project requires POSTing the request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,r.kt)("h4",{id:"request-headers"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example request body"),(0,r.kt)(h,{language:"json",code:'{\n  "email":"john.doe@my-org.com",\n  "roleNames":[\n    "Project Role 1",\n    "Project Role 2"\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request body"),(0,r.kt)("p",null,"The request body is specified as JSON and requires the email and roleNames properties. The API works with one user at a time, thus one ",(0,r.kt)("em",{parentName:"p"},"email"),". Multiple roles may be requested via the ",(0,r.kt)("em",{parentName:"p"},"roleNames")," array.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Administration API group",href:"/api-groups/administration/",description:"Manage the users, projects, and organizations that interact with your iTwin.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Projects API documentation",href:"/apis/projects/",description:"An overview and detailed Projects API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"iTwin Platform API samples",href:"https://github.com/iTwin/platform-api-samples",description:"PowerShell samples demonstrating API endpoints.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-access-token-for-use-in-authorization-header",level:2,title:"1. Request access token for use in Authorization header",children:[]},{id:"2-read-users-from-csv",level:2,title:"2. Read users from CSV",children:[]},{id:"3-add-each-user-to-the-project",level:2,title:"3. Add each user to the Project",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},84514:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return y},Jt:function(){return f}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Exporting iModel to Unreal Datasmith as a combined mesh",tile:{name:"Exporting iModel to Unreal Datasmith as a combined mesh",description:"Follow this tutorial to get iModel data into the Datasmith format as a combined mesh.",thumbnail:"/images/unreal-export-app-fullscreen.png",href:"/tutorials/itwin-unreal-export-combined-meshes",durationInMinutes:20,relatedApiIds:["itwin-unreal"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("TitledImage"),m=p("ContinueLearningSection"),h=p("TileList"),k=p("ResourceTile"),g={metadata:l};function y(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",summaryImageSrc:"/images/unreal-export-app-fullscreen-wide.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will guide you through exporting your iTwin into the Datasmith format, and then importing that file directly\ninto Unreal Engine.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.unrealengine.com/download"},"Unreal Engine 4.26.1")," or later installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"It is recommended to install Unreal before the iTwin Exporter for Datasmith app because\nthe app requires some components that Unreal will install for you. If you want to install\nthe exporter first anyway, the application will direct you to manually install the\ncomponents that Unreal would install."))),(0,r.kt)("li",{parentName:"ul"},"the iTwin Exporter for Datasmith application installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The installer can be downloaded by clicking \u201cDownload now\u201d ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com/unreal/"},"here"),", and then running the installer will complete the installation."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://visualstudio.microsoft.com/downloads"},"Visual Studio")," installed, and the \u201cGame Development with C++\u201d and \u201c.NET desktop development\u201d workloads installed."),(0,r.kt)("li",{parentName:"ul"},"an Unreal project set up, you can use the\n",(0,r.kt)("a",{parentName:"li",href:"https://docs.unrealengine.com/4.27/en-US/Basics/Projects/Browser/"},"following guide")," if you don\u2019t have one.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'we recommend using the "Architecture, Engineering ',"&",' Construction" template so that the required Datasmith importer plugin is enabled.\nIf you choose not to do this, you will need to enable that plugin yourself in your project\u2019s settings.')))),(0,r.kt)("p",null,"Make sure you install both \u201cC++ Game Development\u201d and \u201c.NET desktop development\u201d workloads for Visual Studio"),(0,r.kt)(u,{src:"/images/unreal-export-vs-workloads.png",alt:"visual studio required workloads",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-select-your-imodel"},"1. Select your iModel"),(0,r.kt)("p",null,"The iTwin Exporter for Datasmith opens to the sign in page. Hit the ",(0,r.kt)("strong",{parentName:"p"},"Sign In button")," to be prompted to log in through your\ndefault browser. This will bring you to the ",(0,r.kt)("strong",{parentName:"p"},"iModel Select Screen")," of your most recent project."),(0,r.kt)("p",null,"To access other projects, select the project dropdown in the header and choose one of the recent projects or click\n",(0,r.kt)("strong",{parentName:"p"},"See all my projects")," to open the ",(0,r.kt)("strong",{parentName:"p"},"Project Select Screen"),"."),(0,r.kt)("p",null,"Upon entering either of the select screens, the search box in the top-right is focused, so you can immediately type to filter\nby name and find your iModel or project if you have several."),(0,r.kt)("p",null,"To see not only your most recent project\u2019s models, click the ",(0,r.kt)("strong",{parentName:"p"},"See all your projects")," option in the project dropdown"),(0,r.kt)(u,{src:"/images/unreal-export-see-all-projects.png",alt:"see all projects button placement",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-export-your-imodel-as-a-combined-mesh"},"2. Export your iModel as a combined-mesh"),(0,r.kt)("p",null,"Once you\u2019ve selected your project and found your iModel, you can perform an export immediately by clicking the ",(0,r.kt)("strong",{parentName:"p"},"Export Button"),"."),(0,r.kt)(u,{src:"/images/unreal-export-imodel-tile-quick-export.png",alt:"quick 'export' button on the tile",mdxType:"TitledImage"}),(0,r.kt)("p",null,"This will bring up the ",(0,r.kt)("strong",{parentName:"p"},"Advanced Export Dialog"),", from which you can toggle on the ",(0,r.kt)("strong",{parentName:"p"},"Combine All Meshes Toggle"),", and then\npress the ",(0,r.kt)("strong",{parentName:"p"},"Confirm Export Button")," at the bottom of the dialog."),(0,r.kt)(u,{src:"/images/unreal-export-advanced-dialog-combined.png",alt:"the advanced export dialog as it appears after using the quick export button",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("p",null,"Simply press the button and use your system\u2019s save file dialog to choose under what name and where to save the resulting datasmith\ncontent. Then wait for the export to complete, which is signified by a green success message appearing."),(0,r.kt)("p",null,"You may also click on your iModel card\u2019s image or its ",(0,r.kt)("strong",{parentName:"p"},"View Button"),"\nto enter the viewer, and can run a combined-mesh export with the left-most button in the top-left horizontal toolbar."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/unreal-export-in-viewer-combined-export-button.png",alt:"in-viewer button"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-export-result"},"2.1. Export Result"),(0,r.kt)("p",null,"Once the export has completed,\nyou should have a file as you named it, like ",(0,r.kt)("inlineCode",{parentName:"p"},"myIModelName.udatasmith")," and an ",(0,r.kt)("inlineCode",{parentName:"p"},"_Assets")," folder with the same name as a prefix, for example ",(0,r.kt)("inlineCode",{parentName:"p"},"myIModelName_Assets"),",\nin your chosen export location. You should be able to find them in your file browser."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/unreal-export-result-files-windows.png",alt:"Resulting Datasmith Files"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-install-the-itwin-unreal-datasmith-plugin-in-your-unreal-project"},"3. Install the iTwin Unreal Datasmith Plugin in your Unreal project"),(0,r.kt)("p",null,"Now we can navigate back to the select screen and use the plugin installer button to install the iTwin Unreal Datasmith Plugin to our Unreal project.\nHit the ",(0,r.kt)("strong",{parentName:"p"},"Home Button")," in the top left, or use the project dropdown and press the ",(0,r.kt)("strong",{parentName:"p"},"See all my projects")," option to navigate back to the ",(0,r.kt)("strong",{parentName:"p"},"Project Select Screen"),"."),(0,r.kt)(u,{src:"/images/unreal-export-nav-home.png",alt:"navigate home button placement",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("p",null,"From the select screen, you can press the blue ",(0,r.kt)("strong",{parentName:"p"},"Install Plugin Button")," at the bottom of the application, and in the file dialog find the ",(0,r.kt)("inlineCode",{parentName:"p"},".uproject")," file belonging\nto your Unreal project you created. Just choose that ",(0,r.kt)("inlineCode",{parentName:"p"},".uproject")," file and the plugin will be installed to that project."),(0,r.kt)(u,{src:"/images/unreal-export-install-plugin-button.png",alt:"install plugin button placement",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Make sure to close and reopen the Unreal project if it is open. Upon opening the project for the first time since the installation,\nit will prompt to rebuild the plugin. This is normal, and you should just allow it and wait for it to finish.\nIt may also say that it was designed for a different engine version, but you can ignore this and tell it to continue building.\nIf the rebuild fails, make sure you\u2019ve met all of the ",(0,r.kt)("a",{parentName:"p",href:"#prerequisites"},"prerequisites"),", since\nit can fail if you have an unsupported Unreal Engine version or have not correctly installed the required Visual Studio workloads."),(0,r.kt)("img",{alt:"rebuild prompt",src:"/images/unreal-export-rebuild-prompt.png",class:"sample-img-m"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-import-your-imodel"},"4. Import your iModel"),(0,r.kt)("p",null,"In the Unreal Engine editor, use the Datasmith import button to open a file system dialog and select your ",(0,r.kt)("inlineCode",{parentName:"p"},".udatasmith")," file\nto import it into the scene."),(0,r.kt)(u,{src:"/images/unreal-export-editor-import-button.png",alt:"unreal editor's datasmith import button placement",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Choose a folder to place the content imported from Datasmith into in your content browser, then change any other import settings you need,\nsuch as disabling lightmap UV generation if you will only be using dynamic lights to light your scene in Unreal.\nThen just wait for the import process to finish.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"41-enable-transformation-animations-if-your-scene-is-animated"},"4.1. Enable transformation animations if your scene is animated"),(0,r.kt)("p",null,"If your scene has a schedule script or other animations, a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.unrealengine.com/4.27/en-US/AnimatingObjects/Sequencer/Overview/"},"Level Sequence"),"\nasset will have been created to control the objects with transform animations. Due to limitations in the Datasmith API, you must manually add\nthe level sequence to the scene."),(0,r.kt)("p",null,"Open the ",(0,r.kt)("inlineCode",{parentName:"p"},"Animations")," subfolder in the folder where you chose to import. The folder will only exist if you have transformation animations. You can drag and drop\nthe animation asset into the viewport to add it to the scene."),(0,r.kt)(u,{src:"/images/unreal-export-anim-drag-drop.png",alt:"drag-and-drop-level-sequence",mdxType:"TitledImage"})),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Then, in the properties of the newly spawned Level Sequence Actor, toggle the ",(0,r.kt)("strong",{parentName:"p"},"Auto Play")," checkbox so that it is checked, which matches the default auto play\nset for the ",(0,r.kt)("a",{parentName:"p",href:"/unreal/integration/blueprint-api-reference#AScheduledActor"},"ScheduledActor")," in your combined-mesh scene that controls the non-transformation animations."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/unreal-export-set-autoplay.png",alt:"auto play"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-use-a-realistic-material"},"5. Use a realistic material"),(0,r.kt)("p",null,"Unreal\u2019s starter content comes with a few high-fidelity materials that we can use to test realistic materials on our iModel.\nFor a simple start to applying materials, open ",(0,r.kt)("inlineCode",{parentName:"p"},"StarterContent/Materials")," in the content browser and drag and drop materials\nonto your static meshes."),(0,r.kt)(u,{src:"/images/unreal-export-start-materials.png",alt:"starter content materials from unreal engine",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("p",null,"We dragged and dropped some glass, concrete, metal, grass, wood, and cobblestone into our scene to see some high-fidelity materials."),(0,r.kt)("p",null,"Our sample scene would particularly have benefited from filtering out the tree and grass models and replacing them with more realistic or\nanimated ones, but that is something to explore in your Unreal project."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/unreal-export-high-quality-materials.png",alt:"scene after drag and drop"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"51-opt-in-to-visibility-animation"},"5.1. Opt-in to visibility animation"),(0,r.kt)("p",null,"Materials must opt-in to visibility animation if using the combined-mesh export. You can edit materials attached to your\nmesh by double clicking the material in the material slots of your static mesh actor\u2019s properties."),(0,r.kt)(u,{src:"/images/unreal-export-material-slots.png",alt:"material slots of combined mesh",mdxType:"TitledImage"})),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Then select the material result node, if it is not already automatically selected as you open the editor, and set your\nmaterial\u2019s blend mode in the details panel to \u201cmasked\u201d, unless it is already \u201ctranslucent\u201d in which case leave it as is.\nFor more information on material blend modes in Unreal, see\n",(0,r.kt)("a",{parentName:"p",href:"https://docs.unrealengine.com/4.27/en-US/RenderingAndGraphics/Materials/MaterialProperties/BlendModes/"},"the Unreal Engine documentation"),"."),(0,r.kt)(u,{src:"/images/unreal-export-set-material-blend-mode.png",alt:"material editor blend mode dropdown",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Finally, right click in open space to the left of the result node and use the search to place a ",(0,r.kt)("inlineCode",{parentName:"p"},"MaterialFunctionCall")," node. In the details\npanel, you can select a Material Function to use for this node, use ",(0,r.kt)("inlineCode",{parentName:"p"},"MF_SynchroVisibilityAnimate")," which comes with the plugin.\nDrag the output pin of the function to the ",(0,r.kt)("strong",{parentName:"p"},"Opacity Mask")," result pin (or ",(0,r.kt)("strong",{parentName:"p"},"Opacity")," if the material was translucent)."),(0,r.kt)("p",null,"Now save and apply your material in the top left of the material editor, and your material will animate correctly with the visibility of the scene.")),(0,r.kt)(m,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(h,{mdxType:"TileList"},(0,r.kt)(k,{title:"iTwin Exporter for Datasmith Documentation",href:"/unreal/integration/documentation/",description:"Extended functionality and workflow descriptions in iTwin Exporter for Datasmith",mdxType:"ResourceTile"}),(0,r.kt)(k,{title:"Importing Datasmith content into Unreal",href:"https://docs.unrealengine.com/4.27/en-US/WorkingWithContent/Importing/Datasmith/HowTo/ImportingContent/",description:"Unreal's documentation on importing datasmith content",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(k,{title:"Get started with Unreal's Visual Dataprep",href:"https://docs.unrealengine.com/4.27/en-US/WorkingWithContent/Importing/Dataprep/Overview/",description:"Unreal's documentation on automating content processing with Visual Dataprep",isExternal:!0,mdxType:"ResourceTile"}))))}y.isMDXComponent=!0;var f=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-select-your-imodel",level:2,title:"1. Select your iModel",children:[]},{id:"2-export-your-imodel-as-a-combined-mesh",level:2,title:"2. Export your iModel as a combined-mesh",children:[{id:"21-export-result",level:3,title:"2.1. Export Result",children:[]}]},{id:"3-install-the-itwin-unreal-datasmith-plugin-in-your-unreal-project",level:2,title:"3. Install the iTwin Unreal Datasmith Plugin in your Unreal project",children:[]},{id:"4-import-your-imodel",level:2,title:"4. Import your iModel",children:[{id:"41-enable-transformation-animations-if-your-scene-is-animated",level:3,title:"4.1. Enable transformation animations if your scene is animated",children:[]}]},{id:"5-use-a-realistic-material",level:2,title:"5. Use a realistic material",children:[{id:"51-opt-in-to-visibility-animation",level:3,title:"5.1. Opt-in to visibility animation",children:[]}]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},61882:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:'Customizing the iTwin Viewer - "The Basics"',tile:{name:'Customizing the iTwin Viewer - "The Basics"',description:"This tutorial will take you through the first steps of customizing your iTwin Web Viewer. First you will learn how to add a new user interface component. Later you will customize that component to change the background color of your viewer.",thumbnail:"/images/itwin-viewer-hello-world-sample-small.png",href:"/tutorials/itwin-viewer-hello-world",durationInMinutes:30,relatedApiIds:["visualization"],showInFirstSteps:!0,firstStepsSequenceNumber:2}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"/images/itwin-viewer-hello-world-sample.gif",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the first steps of customizing your ",(0,r.kt)("strong",{parentName:"p"},"iTwin Web Viewer"),". First you will learn ",(0,r.kt)("strong",{parentName:"p"},"how to add a new user interface component"),". Later you will ",(0,r.kt)("strong",{parentName:"p"},"customize that component")," to change the background color of your viewer.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Your own local source for the iTwin Web Viewer based on the template @itwin/web-viewer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions for that can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Configured your local source to open the \u201cHouse Model\u201d sample iModel.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to use this sample iModel can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-test-imodel-sample"},"here"),"."))))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Return statement of App.tsx where the Viewer component is configured"),(0,r.kt)(m,{language:"jsx",code:"return (\n    <div className=\"viewer-container\">\n      <Header\n        handleLogin={onLoginClick}\n        loggedIn={isAuthorized}\n        handleLogout={onLogoutClick}\n      />\n      {isLoggingIn ? (\n        <span>\"Logging in....\"</span>\n      ) : (\n        isAuthorized && (\n          <Viewer\n            iTwinId={process.env.IMJS_ITWIN_ID ?? ''}\n            iModelId={process.env.IMJS_IMODEL_ID ?? ''}\n            authClient={AuthorizationClient.oidcClient}\n          />\n        )\n      )}\n    </div>\n  );",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-add-new-itwin-web-viewer-interface-component"},"1. Add new iTwin Web Viewer interface component"),(0,r.kt)("p",null,"The iTwin Web Viewer viewer template generates several files. To start with, let\u2019s take a look at the ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," file. This is where you should start in customizing your iTwin Viewer."),(0,r.kt)("p",null,"To start with ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," contains a single react functional component fittingly called ",(0,r.kt)("inlineCode",{parentName:"p"},"App"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," component is responsible for:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authenticating the user"),(0,r.kt)("li",{parentName:"ol"},"Rendering the ",(0,r.kt)("inlineCode",{parentName:"li"},"Viewer")," component")),(0,r.kt)("p",null,"At the bottom of ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," you can see the ",(0,r.kt)("inlineCode",{parentName:"p"},"return")," statement where the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component is configured. Let\u2019s focus on that for now.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},'Viewer component with "Hello World" span'),(0,r.kt)(m,{language:"jsx",code:"<div style={{ height: '100%' }}>\n  <span>\"Hello World\"</span>\n  <Viewer\n    iTwinId={process.env.IMJS_ITWIN_ID ?? ''}\n    iModelId={process.env.IMJS_IMODEL_ID ?? ''}\n    authClient={AuthorizationClient.oidcClient}\n  />\n</div>",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"App")," is just a react component. Like any react component, it returns JSX to tell react how to create HTML for the browser to render. Let\u2019s start off by adding some custom code to our JSX. We can render a \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," above the viewer by simply creating the element above the component. Note that this needs to be surrounded in a ",(0,r.kt)("inlineCode",{parentName:"p"},"div")," per the single parent rule for react.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"11-result"},"1.1 Result"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/hello_world_above.png",alt:"HelloWorldAbove"}))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Passing uiProviders prop to Viewer component"),(0,r.kt)(m,{language:"jsx",code:"<Viewer\n  iTwinId={process.env.IMJS_ITWIN_ID ?? ''}\n  iModelId={process.env.IMJS_IMODEL_ID ?? ''}\n  authClient={AuthorizationClient.oidcClient}\n  uiProviders={[new MyFirstUiProvider()]}\n/>",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-your-first-ui-widget"},"2. Your first UI Widget"),(0,r.kt)("p",null,"So far, we haven\u2019t done anything to change the way the viewer works. We\u2019ve only just added a new ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," element ",(0,r.kt)("em",{parentName:"p"},"above")," the viewer. To add our \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," into the viewer, we need to pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop is typed to require an array of objects that implements the ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/"},"UIItemsProvider")," interface. Passing in the array will allow us to extend the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," with custom UI components. To do that, we need to define our ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," class so that it implements the ",(0,r.kt)("inlineCode",{parentName:"p"},"UiItemsProvider")," interface. Our new provider will tell the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," to include our \u201cHello world\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," within the view.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},'"MyFirstUiProvider.tsx" file content'),(0,r.kt)(m,{language:"typescript",code:"import {\n  AbstractWidgetProps,\n  StagePanelLocation,\n  StagePanelSection,\n  UiItemsProvider,\n} from '@bentley/ui-abstract';\n\nimport * as React from 'react';\n\nexport class MyFirstUiProvider implements UiItemsProvider {\n  public readonly id = 'MyFirstProviderId';\n\n  public provideWidgets(\n    stageId: string,\n    stageUsage: string,\n    location: StagePanelLocation,\n    section?: StagePanelSection\n  ): ReadonlyArray<AbstractWidgetProps> {\n    const widgets: AbstractWidgetProps[] = [];\n\n    if (\n      location === StagePanelLocation.Right &&\n      section === StagePanelSection.Start\n    ) {\n      const helloWidget: AbstractWidgetProps = {\n        id: 'HelloWidget',\n        label: 'Hello',\n        getWidgetContent() {\n          return <span>\"Hello World\"</span>;\n        },\n      };\n\n      widgets.push(helloWidget);\n    }\n\n    return widgets;\n  }\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Create a new file called ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.tsx")," with contents shown in a code snippet."),(0,r.kt)("p",null,"Let\u2019s review that code. We\u2019ve defined our new ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," class. In the new class we\u2019ve defined ",(0,r.kt)("inlineCode",{parentName:"p"},"public readonly id")," which is required to distinguish between different providers. Then notice that we\u2019ve defined just one function called ",(0,r.kt)("inlineCode",{parentName:"p"},"provideWidgets"),". This function will be called several times as the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," is building up the user interface. We will return an empty array except for when the ",(0,r.kt)("inlineCode",{parentName:"p"},"location")," is equal to ",(0,r.kt)("inlineCode",{parentName:"p"},"StagePanelLocation.Right")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"section")," is equal to ",(0,r.kt)("inlineCode",{parentName:"p"},"StagePanelSection.Start"),". In that case, we will return a single widget that will supply our \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span"),"."),(0,r.kt)("p",null,"Our ",(0,r.kt)("inlineCode",{parentName:"p"},"helloWidget")," consists of three attributes:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"id")," - used to uniquely identify the widget"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"label")," - description label for our widget"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"getWidgetContent()")," - returns our custom UI component"))),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"MyFirstUiProvider import"),(0,r.kt)(m,{language:"typescript",code:'import { MyFirstUiProvider } from "./MyFirstUiProvider";',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"At this point we need to import ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," at the top of file ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx"),".")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Return statement in App.tsx should look like this:"),(0,r.kt)(m,{language:"typescript",code:"return (\n  <div className=\"viewer-container\">\n    <Header\n      handleLogin={onLoginClick}\n      loggedIn={isAuthorized}\n      handleLogout={onLogoutClick}\n    />\n    {isLoggingIn ? (\n      <span>\"Logging in....\"</span>\n    ) : (\n      isAuthorized && (\n        <Viewer\n          iTwinId={process.env.IMJS_ITWIN_ID ?? ''}\n          iModelId={process.env.IMJS_IMODEL_ID ?? ''}\n          authClient={AuthorizationClient.oidcClient}\n          uiProviders={[new MyFirstUiProvider()]}\n        />\n      )\n    )}\n  </div>\n);",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Finally, let\u2019s clean up the ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"div")," that we added directly into the ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," component earlier.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"21-result"},"2.1 Result"),(0,r.kt)("p",null,"Now we have our \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," displaying in a panel within the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component. It should look like this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/hello_world_widget.png",alt:"HelloWorldWidget"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-beyond-hello-world"},"3. Beyond Hello World"),(0,r.kt)("p",null,"Saying hello to the world can be fun but we need to get past that. For this next step we\u2019ll swap out our trivial ",(0,r.kt)("inlineCode",{parentName:"p"},"helloWidget")," with something a little more interactive: a ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/ui-core/toggle/toggle/"},"Toggle"),". Eventually this toggle will control the background color, so we\u2019ll name our new widget ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundColorWidget"),". Instead of returning a ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," we\u2019ll return a ",(0,r.kt)("inlineCode",{parentName:"p"},"Toggle"),".")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Toggle import"),(0,r.kt)(m,{language:"typescript",code:"import { Toggle } from '@bentley/ui-core';",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Start by navigating back to ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.tsx")," and adding an import for ",(0,r.kt)("inlineCode",{parentName:"p"},"Toggle")," at the top of the file.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Switch out the helloWidget with the new backgroundColorWidget"),(0,r.kt)(m,{language:"typescript",code:"if (location === StagePanelLocation.Right) {\n  const backgroundColorWidget: AbstractWidgetProps = {\n    id: 'BackgroundColorWidget',\n    label: 'Background Color Toggle',\n    getWidgetContent() {\n      return <Toggle />;\n    },\n  };\n\n  widgets.push(backgroundColorWidget);\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Next switch out the ",(0,r.kt)("inlineCode",{parentName:"p"},"helloWidget")," with the new ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundColorWidget"),".")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Notice the only significant difference is that ",(0,r.kt)("inlineCode",{parentName:"p"},"getWidgetContent")," is now returning a ",(0,r.kt)("inlineCode",{parentName:"p"},"Toggle"),". It doesn\u2019t do anything interesting yet, but it should look like this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/background_color_toggle.png",alt:"Background Color Toggle"}))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Passing the onChange prop to the Toggle component"),(0,r.kt)(m,{language:"typescript",code:"return (\n  <Toggle\n    onChange={(toggle) => {\n      if (MyFirstUiProvider.toggledOnce === false) {\n        MyFirstUiProvider.originalColor =\n          IModelApp.viewManager.selectedView!.displayStyle.backgroundColor.tbgr;\n        MyFirstUiProvider.toggledOnce = true;\n      }\n\n      const color = toggle\n        ? ColorDef.computeTbgrFromString('skyblue')\n        : MyFirstUiProvider.originalColor;\n      IModelApp.viewManager.selectedView!.overrideDisplayStyle({\n        backgroundColor: color,\n      });\n    }}\n  />\n);",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-changing-the-background-color"},"4. Changing the background color"),(0,r.kt)("p",null,"For this last step, let\u2019s put our new toggle to work. We want the toggle to control the background color in the view of our house iModel. When the toggle is on, we\u2019ll override the background color to \u201cskyblue\u201d. When the toggle is off, we\u2019ll change the background color back to its original color."),(0,r.kt)("p",null,"To do this, we need to pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"onChange")," prop to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Toggle")," component.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Adding toggledOnce and originalColor variables to MyFirstUiProvider class"),(0,r.kt)(m,{language:"typescript",code:"export class MyFirstUiProvider implements UiItemsProvider {\n  public readonly id = 'HelloWorldProvider';\n  public static toggledOnce: boolean = false;\n  public static originalColor: number;",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Since we\u2019re using two new static variables here, we need to add this to to our ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," class at the beginning of our definition.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Completed MyFirstUiProvider.tsx file"),(0,r.kt)(m,{language:"typescript",code:"import { ColorDef } from '@bentley/imodeljs-common';\nimport { IModelApp } from '@bentley/imodeljs-frontend';\nimport {\n  AbstractWidgetProps,\n  StagePanelLocation,\n  StagePanelSection,\n  UiItemsProvider,\n} from '@bentley/ui-abstract';\nimport { Toggle } from '@bentley/ui-core';\n\nimport * as React from 'react';\n\nexport class MyFirstUiProvider implements UiItemsProvider {\n  public readonly id = 'HelloWorldProvider';\n  public static toggledOnce: boolean = false;\n  public static originalColor: number;\n\n  public provideWidgets(\n    stageId: string,\n    stageUsage: string,\n    location: StagePanelLocation,\n    section?: StagePanelSection\n  ): ReadonlyArray<AbstractWidgetProps> {\n    const widgets: AbstractWidgetProps[] = [];\n    if (\n      location === StagePanelLocation.Right &&\n      section === StagePanelSection.Start\n    ) {\n      const backgroundColorWidget: AbstractWidgetProps = {\n        id: 'BackgroundColorWidget',\n        label: 'Background Color Toggle',\n        getWidgetContent() {\n          return (\n            <Toggle\n              onChange={(toggle) => {\n                if (MyFirstUiProvider.toggledOnce === false) {\n                  MyFirstUiProvider.originalColor =\n                    IModelApp.viewManager.selectedView!.displayStyle.backgroundColor.tbgr;\n                  MyFirstUiProvider.toggledOnce = true;\n                }\n\n                const color = toggle\n                  ? ColorDef.computeTbgrFromString('skyblue')\n                  : MyFirstUiProvider.originalColor;\n                IModelApp.viewManager.selectedView!.overrideDisplayStyle({\n                  backgroundColor: color,\n                });\n              }}\n            />\n          );\n        },\n      };\n\n      widgets.push(backgroundColorWidget);\n    }\n\n    return widgets;\n  }\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"The first condition checks for only the first trigger of the toggle using boolean ",(0,r.kt)("inlineCode",{parentName:"p"},"toggledOnce"),". If true, we need to store the original color in static variable ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.originalColor"),". We are using the global singleton ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/imodelapp/imodelapp/"},"IModelApp")," to get to the viewManager that can provide the current ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundColor"),". We also need to flip variable ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.toggledOnce")," to true to make sure we only store the original color once."),(0,r.kt)("p",null,"Notice we\u2019re using the function ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/views/viewport/overridedisplaystyle/"},"overrideDisplayStyle()")," on the currently selected view. To get the view, we use the same global singleton ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/imodelapp/imodelapp/"},"IModelApp")," to get to the ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/views/viewmanager/"},"viewManager"),"."),(0,r.kt)("p",null,"Our completed ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.tsx")," file should look similar to the one shown in a code snippet.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"51-result"},"5.1 Result"),(0,r.kt)("p",null,"Result when the toggle is on:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/background_toggled_blue.png",alt:"Background blue"})),(0,r.kt)("p",null,"Result when the toggle is off:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/original_background_color.png",alt:"Background original"}))),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Adding showcase widgets to your iTwin Viewer",thumbnail:"/images/view_attributes_ported_results.png",description:"This tutorial will take widgets from the sample showcase and add them into your iTwin Viewer using the `uiProviders` prop.",href:"/tutorials/adding-showcase-widgets-to-your-itwin-viewer/",mdxType:"Tile"}),(0,r.kt)(g,{name:"Start building a Viewer App",thumbnail:"/images/retail-tutorial-sample-small.png",description:"This quick start is intended to help you get started with using iTwin Platform visualization components. By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).",href:"/tutorials/web-application-quick-start/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Create a test iModel from a Bentley provided sample",href:"/tutorials/create-test-imodel-sample",description:"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Sample House Model",href:"/tutorials/create-test-imodel-sample/#house-sample",description:"Bentley provided sample of a House for test iModel creation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"UI Provider",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/",description:"Describes interface of objects that want to provide UI component to the running IModelApp.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"IModelApp",href:"https://www.itwinjs.org/reference/imodeljs-frontend/imodelapp/imodelapp/",description:"Global singleton that connects the user interface with the iTwin.js services.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Visit the iTwin Code Sandbox",href:"https://www.itwinjs.org/sandboxes/",description:"The iTwin Code Sandbox provides many samples demonstrating options for customizing the iTwin viewer.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-add-new-itwin-web-viewer-interface-component",level:2,title:"1. Add new iTwin Web Viewer interface component",children:[]},{id:"2-your-first-ui-widget",level:2,title:"2. Your first UI Widget",children:[]},{id:"3-beyond-hello-world",level:2,title:"3. Beyond Hello World",children:[]},{id:"4-changing-the-background-color",level:2,title:"4. Changing the background color",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},94530:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return x},Jt:function(){return C}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Manage Project Team Members",tile:{name:"Manage Project Team Members",description:"This tutorial will guide you through the process of managing project team members",href:"/tutorials/manage-project-team-members-guide",durationInMinutes:15,relatedApiIds:["projects"],showInFirstSteps:!1,firstStepsSequenceNumber:3}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("GoogleChromeIcon"),h=p("VSCodeIcon"),k=p("PostmanIcon"),g=p("CreateSampleAppButton"),y=p("Alert"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:l};function x(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the process of creating roles, adding team members, and retrieving team members for a given iTwin Project."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to create roles, add & assign permissions to the role, invite users to a project, and retrieve the list of project members.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(m,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(h,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(k,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"Project")),(0,r.kt)("li",{parentName:"ul"},"A tool such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute http calls. These calls can also be made using the ",(0,r.kt)("inlineCode",{parentName:"li"},"TryIt")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, then the user must be an Organization Administrator in order to manage team members for a project. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."))),(0,r.kt)(c,{actions:[(0,r.kt)(g,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Manage Project Team Members tutorial",scopes:["projects:modify","projects:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"projects:modify projects:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/projects/operations/get-project-team-members/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/projects/{id}/roles/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "displayName":"Project Administrator",\n  "description":"Project Administrator"\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 203\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 17:26:10 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 74e263d7-ded7-45a5-8347-ca1f98ffab86\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "role":{\n    "id":"14b391cf-ce9e-43d3-8fee-c49e57c2680d",\n    "displayName":"Project Administrator",\n    "description":"A description of Project Administrator",\n    "permissions":[\n      \n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-project-role"},"3. Create Project Role"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/create-project-role/"},"Create project role")," endpoint is used to create project roles. After role is created permissions can be assigned."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"project id")," is required to create a role. A ",(0,r.kt)("inlineCode",{parentName:"p"},"display name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"description")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will return a new role instance. The returned ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," along with the ",(0,r.kt)("inlineCode",{parentName:"p"},"project id")," will be used to add permissions in the next step.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"PATCH https://api.bentley.com/projects/{id}/roles/{roleId} HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "permissions":[\n    "administration_invite_member",\n    "administration_manage_roles",\n    "administration_remove_member"\n  ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 324\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 18:17:39 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: f16d2765-4a9c-40a4-995e-bd7c6b8b8d4a\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "role":{\n    "id":"10a2d277-ea41-4e81-b309-f7a9aea09d51",\n    "displayName":"Project Administrator",\n    "description":"A description of Project Administrator",\n    "permissions":[\n      "administration_invite_member",\n      "administration_manage_roles",\n      "administration_remove_member"\n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-update-project-role-using-the-project-id-and-role-id"},"4. Update Project Role Using the Project Id and Role Id"),(0,r.kt)("p",null,"To assign ",(0,r.kt)("inlineCode",{parentName:"p"},"permissions")," Role needs to be ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/update-project-role/"},"updated"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"project id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," are required. The POST body should contain ",(0,r.kt)("inlineCode",{parentName:"p"},"list of permissions"),"."),(0,r.kt)("p",null,"The response will contain the role details along with the list of permissions assigned.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/d9102abc-abfc-4617-b19d-804896064cea/roles HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:'HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 18:26:19 GMT\netag: "QosNxHidwaC0+OqsAO9D5HQ9s0g="\nmas-request-id: 280616fa-b078-4276-8cb6-b93b8e38433f\nmas-server: Bentley-WSG/4.0.12,Bentley-WebAPI/2.9\npragma: no-cache\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: 06f3046a-5973-4571-b09b-747cbdddf2c1\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "roles":[\n    {\n      "id":"10a2d277-ea41-4e81-b309-f7a9aea09d51",\n      "displayName":"Project Administrator",\n      "description":"A description of Project Administrator",\n      "permissions":[\n        "administration_invite_member",\n        "administration_manage_roles",\n        "administration_remove_member"\n      ]\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/d9102abc-abfc-4617-b19d-804896064cea/roles?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-roles-using-the-project-id"},"5. Query for Roles using the Project Id"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Project Id")," can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project-roles/"},"retrieve a list of project roles"),"."),(0,r.kt)("p",null,"The api will return a list of roles for a given project.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/projects/2ff085cf-c255-46a9-9c6f-7d88f59bcbf9/members HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "email":"John.Doe@bentley.com",\n  "roleNames":[\n    "Project Administrator"\n  ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:30:40 GMT\nlocation: https://api.bentley.com/projects/2ff085cf-c255-46a9-9c6f-7d88f59bcbf9/members/56c58c0c-28a9-4cd2-b50b-102e33b657f2\nmas-request-id: 744155a0-f492-44a9-b78d-3a8c516f53ee\nmas-server: Bentley-WSG/4.0.12,Bentley-WebAPI/2.9\npragma: no-cache\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: d1999ea1-62bd-4e84-8e5d-1a8aac040de4\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:"NO CONTENT",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-add-project-team-member"},"6. Add Project Team Member"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/add-project-team-member/"},"Add project team member")," endpoint is used to add team members to a given project."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"project id")," is a required parameter. User ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"list of role names")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will only return the headers.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/{id}/members HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK \ncontent-length: 480\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:46:24 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 7a199ff9-317f-4d4f-ba82-70ba25f31d32\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "members":[\n    {\n      "userId":"7caa33e9-9d4d-4446-be0e-4c012071e636",\n      "email":"John.Doe@bentley.com",\n      "givenName":"John",\n      "surname":"Doe",\n      "organization":"Bentley Systems Inc",\n      "roles":[\n        "Team Member",\n        "Project Administrator"\n      ]\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/d9102abc-abfc-4617-b19d-804896064cea/roles?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-query-for-team-members-using-the-project-id"},"7. Query for Team Members using the Project Id"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Id")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project-team-members/"},"retrieve a list of team members")," using the ",(0,r.kt)("inlineCode",{parentName:"p"},"Project Id"),"."),(0,r.kt)("p",null,"The api will return a list of team members for the given project.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"iTwin Project Sample App",href:"https://github.com/iTwin/iTwin-project-sample-app",description:"Sample application that uses the Projects API to create roles and add users to projects.",isExternal:!0,mdxType:"ResourceTile"}))))}x.isMDXComponent=!0;var C=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-create-project-role",level:2,title:"3. Create Project Role",children:[]},{id:"4-update-project-role-using-the-project-id-and-role-id",level:2,title:"4. Update Project Role Using the Project Id and Role Id",children:[]},{id:"5-query-for-roles-using-the-project-id",level:2,title:"5. Query for Roles using the Project Id",children:[]},{id:"6-add-project-team-member",level:2,title:"6. Add Project Team Member",children:[]},{id:"7-query-for-team-members-using-the-project-id",level:2,title:"7. Query for Team Members using the Project Id",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},83906:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return x},Jt:function(){return C}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"React to iModel events using Webhooks API",tile:{name:"React to iModel events using Webhooks API",description:"This tutorial will teach you how to use Webhooks API to subscribe to iModel events and introduce basic event handling workflows.",href:"/tutorials/react-to-events-using-webhooks/",durationInMinutes:45,relatedApiIds:["webhooks"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("NodeJsIcon"),h=p("GitIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("Title"),f=p("CodeBlock"),T=p("Alert"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:l};function x(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"45",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial, you will learn how to use the Webhooks REST API to create and manage your webhooks. Also you will learn how to validate the webhook signature and process received event messages in your application.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Basic knowledge on ",(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Webhook"},"webhooks")," and how they work."),(0,r.kt)("li",{parentName:"ul"},"Knowledge on web application deployment or experience using ",(0,r.kt)("a",{parentName:"li",href:"https://www.heroku.com/about"},"Heroku"),"/",(0,r.kt)("a",{parentName:"li",href:"https://www.netlify.com/"},"Netlify"),"."),(0,r.kt)("li",{parentName:"ul"},"Already registered your own application/client on iTwin Platform.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,r.kt)("strong",{parentName:"li"},"Webhooks API")," and has ",(0,r.kt)("inlineCode",{parentName:"li"},"webhooks:read")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"webhooks:modify")," scopes enabled."))),(0,r.kt)("li",{parentName:"ul"},"Any existing ",(0,r.kt)("strong",{parentName:"li"},"iModel")," that your application/client has access and contains at least one changeset that has not a named version created on.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"In order to create one you need to run the synchronization for an iModel which is described in this ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/synchronization-tutorial"},"tutorial"),". Or you can ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-test-imodel-sample"},"create a new iModel")," from Bentley provided sample."))),(0,r.kt)("li",{parentName:"ul"},"Knowledge on creating named versions for your iModel.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"A tutorial on how to create a named version can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-named-version"},"here"),"."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-set-up-your-environment"},"1. Set up your environment")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://nodejs.org",target:"_blank",title:"Node.js",icon:(0,r.kt)(m,{mdxType:"NodeJsIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://git-scm.com/downloads",target:"_blank",title:"Git",icon:(0,r.kt)(h,{mdxType:"GitIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-required-materials"},"1.1 Required materials"),(0,r.kt)("h5",{id:"a-hrefhttpsnodejsorg-target_blanknodejs-14x-lts-versiona"},(0,r.kt)("a",{href:"https://nodejs.org",target:"_blank"},"Node.js (14.x LTS version)")),(0,r.kt)("p",null,"This tool provides the backend JavaScript runtime necessary for your computer to read and render code appropriately. It also allows you to run NPM command line."),(0,r.kt)("h5",{id:"a-hrefhttpsgit-scmcomdownloads-target_blankgita"},(0,r.kt)("a",{href:"https://git-scm.com/downloads",target:"_blank"},"Git")),(0,r.kt)("p",null,"This is the common source code control system.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"VS Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-suggested-materials"},"1.2 Suggested materials"),(0,r.kt)("h5",{id:"a-hrefhttpscodevisualstudiocom-target_blankvisual-studio-codea"},(0,r.kt)("a",{href:"https://code.visualstudio.com/",target:"_blank"},"Visual Studio Code")),(0,r.kt)("p",null,"This is our recommended editor and debugger tool for developing iTwin.js applications. It is free, open source and includes a GUI for working with GIT."),(0,r.kt)("h5",{id:"a-hrefhttpswwwpostmancomdownloads-target_blankpostmana"},(0,r.kt)("a",{href:"https://www.postman.com/downloads/",target:"_blank"},"Postman")),(0,r.kt)("p",null,"If you want to test the REST API calls directly, you can use ",(0,r.kt)("a",{parentName:"p",href:"https://www.postman.com/downloads/"},"Postman")," or any other solution capable of sending HTTP requests. If you do it this way, you will require an authorization token for the requests to work."),(0,r.kt)("h5",{id:"a-hrefhttpssignupherokucom-target_blankheroku-accounta"},(0,r.kt)("a",{href:"https://signup.heroku.com/",target:"_blank"},"Heroku account")),(0,r.kt)("p",null,"Heroku will be used to deploy the test application during this tutorial.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-your-application"},"2. Create your application"),(0,r.kt)("p",null,"Since webhooks are sending the events via HTTP requests you need to have an application running that exposes a public HTTP endpoint - callback URL. In this tutorial we are going to use ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en"},"Node.js")," together with ",(0,r.kt)("a",{parentName:"p",href:"https://expressjs.com/"},"Express")," for test application.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Project initialization"),(0,r.kt)(f,{language:"bash",code:"cd your-project\nnpm init -y\nnpm install express\nnpm install -D typescript @types/express\ntsc --init",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"tsconfig.json"),(0,r.kt)(f,{language:"json",code:'"outDir":"dist"',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"package.json"),(0,r.kt)(f,{language:"json",code:'"main":"dist/index.js"',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"json",code:'"scripts":{\n  "start":"tsc && node dist/index.js"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-initialize-the-project"},"2.1 Initialize the project"),(0,r.kt)("p",null,"To start off, create new directory for your application and execute the following initialization commands. These commands will initialize new npm project, install required dependencies and configure typescript. After initialization, update freshly generated ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," file by setting ",(0,r.kt)("inlineCode",{parentName:"p"},"outDir")," property to ",(0,r.kt)("inlineCode",{parentName:"p"},'"dist"'),". Next step will be updating ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file to update the application entry point and ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," script. After that is done, the project is ready for the next step."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},'If you are running into "tsc is not recognized" problems, try installing typescript globally "npm install typescript -g".')),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import express from "express";\n\nconst app = express();\napp.use(express.text({ type: "application/json" }));\n\napp.post("/events", () => {\n  // Handle the event\n});\n\nconst port = 5000;\napp.listen(port, () => {\n  console.log("Application was started.");\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"22-create-express-server"},"2.2 Create express server"),(0,r.kt)("p",null,"Now let\u2019s start implementing the application. At first, create a new file in your project directory ",(0,r.kt)("inlineCode",{parentName:"p"},"src/index.ts"),". This is going to be the application starting point. From example on the side you can see that we are going to have a public HTTP endpoint that will be accepting POST requests ",(0,r.kt)("inlineCode",{parentName:"p"},'app.post("/events", () => {})'),". This is because event messages are sent using POST method. Note that above there is a line ",(0,r.kt)("inlineCode",{parentName:"p"},'app.use(express.text({ type: "application/json" }))')," that makes the server treat the requests with json content as text and not deserialize them initially because raw payload will be required for event authorization in one of the upcoming steps.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'\napp.options("/events", async (req, res) => {\n  const requestedOrigin = req.headers["webhook-request-origin"] as string;\n\n  res.setHeader("allow", ["POST"]);\n  res.setHeader("webhook-allowed-origin", requestedOrigin);\n  res.sendStatus(200);\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"23-add-callback-validation-handler"},"2.3 Add callback validation handler"),(0,r.kt)("p",null,"Before we start working with event handling, first we need to make sure that newly created webhook gets activated by passing the callback URL validation. To handle this, we need to add one more HTTP endpoint that accepts OPTIONS requests ",(0,r.kt)("inlineCode",{parentName:"p"},'app.options("/events", () => {})')," and performs the validation handshake as described in ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks/#callbackvalidation"},"documentation"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import crypto from "crypto";',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"typescript",code:'function validateSignature(payload: string, signatureHeader: string): boolean {\n  // Replace with your own webhook secret later\n  const secret = "4eb25d308ef2a9722ffbd7a2b7e5026f9d1f2feaca5999611d4ef8692b1ad70d";\n\n  const [algorithm, signature] = signatureHeader.split("=");\n  const generated_sig = crypto.createHmac(algorithm, secret).update(payload, "utf-8").digest("hex");\n\n  return generated_sig.toLowerCase() === signature.toLowerCase();\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"24-add-event-authorization"},"2.4 Add event authorization"),(0,r.kt)("p",null,"In order to authorize the event source, we need to add event signature validation. Event signature is ",(0,r.kt)("inlineCode",{parentName:"p"},"HMAC-SHA256")," string that is included in the request ",(0,r.kt)("inlineCode",{parentName:"p"},"Signature")," header. For validation we will be using Node.js ",(0,r.kt)("inlineCode",{parentName:"p"},"crypto")," utility which basically lets us to generate the same type of signature in our end. Generated signature and the signature included in the request should match to pass the authorization. Let\u2019s start adding validation by creating a new function ",(0,r.kt)("inlineCode",{parentName:"p"},"function validateSignature(payload: string, signatureHeader: string)"),". As a first parameter it will to expect raw request payload and as a second parameter it will expect signature header value. This function will also need the webhook ",(0,r.kt)("inlineCode",{parentName:"p"},"secret")," which we are going to add later on we create a webhook. Since, the signature header value also contains the cryptographic algorithm name and the signature value separated by ",(0,r.kt)("inlineCode",{parentName:"p"},"="),", we need to extract these values into separate variables ",(0,r.kt)("inlineCode",{parentName:"p"},'const [algorithm, signature] = signatureHeader.split("=")'),". Then at this point, using all the existing variables we can generate a signature ",(0,r.kt)("inlineCode",{parentName:"p"},'crypto.createHmac(algorithm, secret).update(payload, "utf-8").digest("hex")'),". Lastly, we need to check if both signatures match and return the result.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/models.ts"),(0,r.kt)(f,{language:"typescript",code:"export type Event = {\n  content: IModelEvent | NamedVersionCreatedEvent;\n  contentType: string;\n  enqueuedDateTime: string;\n  messageId: string;\n  subscriptionId: string;\n};\n\nexport type IModelEvent = {\n  imodelId: string;\n  projectId: string;\n};\n\nexport type NamedVersionCreatedEvent = {\n  changesetId: string;\n  changesetIndex: string;\n  versionId: string;\n  versionName: string;\n} & IModelEvent;",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"25-define-data-models"},"2.5 Define data models"),(0,r.kt)("p",null,"Before we can start receiving the events, we need to prepare the models for expected data. You can find events schema by downloading API definition file from ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks"},"API reference"),". Select preferred schema type on the right and click Export. Now from that point, create a new file ",(0,r.kt)("inlineCode",{parentName:"p"},"src/models.ts")," and create event types by matching the schema.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import { Event, NamedVersionCreatedEvent } from "./models";',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"typescript",code:'app.post("/events", (req, res) => {\n  const signatureHeader = req.headers["signature"] as string;\n  if (!signatureHeader || !req.body) res.sendStatus(401);\n\n  if (!validateSignature(req.body, signatureHeader)) {\n    res.sendStatus(401);\n  } else {\n    const event = JSON.parse(req.body) as Event;\n    switch (event.contentType) {\n      case "NamedVersionCreatedEvent": {\n        const content = event.content as NamedVersionCreatedEvent;\n        console.log(`New named version (ID: ${content.versionId}, Name: ${content.versionName}) was created for iModel (ID: ${content.imodelId})`);\n        break;\n      }\n      default:\n        res.sendStatus(400); //Unexpected event type\n    }\n  }\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"26-event-handling"},"2.6 Event handling"),(0,r.kt)("p",null,"Now that we have everything ready for event handling, we can start implementing it. Firstly, we want to return ",(0,r.kt)("inlineCode",{parentName:"p"},"401 Unauthorized")," for any request that does not have a event signature header or any payload, because these are required components for passing the validation ",(0,r.kt)("inlineCode",{parentName:"p"},"if (!signatureHeader || !req.body) res.sendStatus(401)"),". If request does have these components then we can proceed with further processing logic and try to validate the event signature using the function we defined in step 2.3 ",(0,r.kt)("inlineCode",{parentName:"p"},"if (!validateSignature(req.body, signatureHeader)) res.sendStatus(401)"),". If validation fails, we can assume that the event was sent from unexpected source and safely return ",(0,r.kt)("inlineCode",{parentName:"p"},"401 Unauthorized")," as well. In other case, when validation passes, proceed by deserializing the event and react accordingly to its type.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"27-deploy"},"2.7 Deploy"),(0,r.kt)("p",null,"For this application to work, you have to deploy it to be publicly accessible. If you have any preferences for the deployment, go ahead and use your own deployment method and platform. If not, you can keep following the tutorial and deploy the application using ",(0,r.kt)("a",{parentName:"p",href:"https://www.heroku.com/about"},"Heroku"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create new Heroku application and empty Heroku Git repository ",(0,r.kt)("a",{parentName:"li",href:"https://devcenter.heroku.com/articles/git#for-a-new-heroku-app"},"https://devcenter.heroku.com/articles/git#for-a-new-heroku-app"),"."),(0,r.kt)("li",{parentName:"ol"},"Deploy by pushing the code ",(0,r.kt)("a",{parentName:"li",href:"https://devcenter.heroku.com/articles/git#deploying-code"},"https://devcenter.heroku.com/articles/git#deploying-code"),"."),(0,r.kt)("li",{parentName:"ol"},"Use ",(0,r.kt)("inlineCode",{parentName:"li"},"heroku logs --tail")," for monitoring the behavior of the application.")),(0,r.kt)("p",null,"Once you have the application deployed and running, we can move on to the webhook creation.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-webhook"},"3. Create a webhook"),(0,r.kt)("p",null,"Webhooks are one way that apps can send automated messages or information to other apps. In this case, we are going to create a webhook for an existing iModel events.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},'Example HTTP request for "Create iModel events webhook" operation'),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/webhooks/imodels HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"31-request"},"3.1 Request"),(0,r.kt)("p",null,"A webhook for iModel events is created by sending a POST request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/webhooks/imodels"},"https://api.bentley.com/webhooks/imodels"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with valid Bearer access token is required.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Example request body"),(0,r.kt)(f,{language:"json",code:'{\n  "imodelId":"IMODEL_ID",\n  "callbackUrl":"https://HOSTNAME/events",\n  "eventTypes":[\n    "NamedVersionCreatedEvent"\n  ],\n  "expirationDateTime":"2021-06-07T08:27:42Z"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"32-request-body"},"3.2 Request body"),(0,r.kt)("p",null,"Webhook creation has 3 required properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"imodelId")," - related iModel ID of which events you want to receive."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"callbackUrl")," - a public endpoint of your application where you expect the event to be sent."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"eventTypes")," - a list of iModel event types you want to subscribe to."),(0,r.kt)("li",{parentName:"ul"},"expirationDateTime - ",(0,r.kt)("em",{parentName:"li"},"(optional)")," date and time when the webhook will not longer be active. If the value is not specified, webhook will expire in 30 days.")),(0,r.kt)("p",null,"For more information see the ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks/operations/create-imodels-webhook"},"documentation"),"."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},'Don\'t forget to replace the "IMODEL_ID" placeholder value with an existing iModel ID and "HOSTNAME" placeholder value with your deployed application hostname.')),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},'Example response "Location" header'),(0,r.kt)(f,{language:"http",code:"Location: https://api.bentley.com/webhooks/f6f3aff5-7e28-4874-a3ff-22dbc62d94c9",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Example response result"),(0,r.kt)(f,{language:"json",code:'{\n  "webhook":{\n    "id": "b41adbb6-2ecc-4770-a626-1721dff5be1e",\n    "secret":"4eb25d308ef2a9722ffbd7a2b7e5026f9d1f2feaca5999611d4ef8692b1ad70d"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"33-response"},"3.3 Response"),(0,r.kt)("p",null,"On the successful response you will get returned the webhook secret which will be needed later validating received events. The location of created webhook will be included in response ",(0,r.kt)("inlineCode",{parentName:"p"},"Location")," header value. Generally you would need to store both webhook location or ID and secret in your application storage in order to prepare for receiving events, but for this tutorial just use it to replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"const secret")," value in ",(0,r.kt)("inlineCode",{parentName:"p"},"function validateSignature")," from step 2.3."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},"Note that the webhook secret should not be shared with anyone and treated as a private key.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-trigger-imodel-event"},"4. Trigger iModel event"),(0,r.kt)("p",null,"Since we created the webhook specifically for ",(0,r.kt)("inlineCode",{parentName:"p"},"NamedVersionCreatedEvent")," event type, you will need to trigger this event manually. Use Get iModel Changesets ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/create-named-version"},"operation"),". For detailed explanation on how to create a named version see this ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-named-version"},"tutorial"),"."),(0,r.kt)("p",null,"After you create a named version, webhook event will be triggered and sent to your application (callback URL) for further processing. If you have deployed your test application using Heroku, use ",(0,r.kt)("inlineCode",{parentName:"p"},"heroku logs --tail")," command to monitor your application logs and wait for the event to be captured and processed.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Events API group documentation",href:"/api-groups/events",description:"An overview and detailed Events API group documentation.",mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Data Management API group documentation",href:"/api-groups/data-management",description:"An overview and detailed Data Management API group documentation.",mdxType:"ResourceTile"}))))}x.isMDXComponent=!0;var C=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-set-up-your-environment",level:2,title:"1. Set up your environment",children:[{id:"11-required-materials",level:3,title:"1.1 Required materials",children:[]},{id:"12-suggested-materials",level:3,title:"1.2 Suggested materials",children:[]}]},{id:"2-create-your-application",level:2,title:"2. Create your application",children:[{id:"21-initialize-the-project",level:3,title:"2.1 Initialize the project",children:[]},{id:"22-create-express-server",level:3,title:"2.2 Create express server",children:[]},{id:"23-add-callback-validation-handler",level:3,title:"2.3 Add callback validation handler",children:[]},{id:"24-add-event-authorization",level:3,title:"2.4 Add event authorization",children:[]},{id:"25-define-data-models",level:3,title:"2.5 Define data models",children:[]},{id:"26-event-handling",level:3,title:"2.6 Event handling",children:[]},{id:"27-deploy",level:3,title:"2.7 Deploy",children:[]}]},{id:"3-create-a-webhook",level:2,title:"3. Create a webhook",children:[{id:"31-request",level:3,title:"3.1 Request",children:[]},{id:"32-request-body",level:3,title:"3.2 Request body",children:[]},{id:"33-response",level:3,title:"3.3 Response",children:[]}]},{id:"4-trigger-imodel-event",level:2,title:"4. Trigger iModel event",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},88774:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return T},Jt:function(){return w}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Retrieve Validation Model Data",tile:{name:"Retrieve Validation Model Data",description:"Walk-through of the retrieving and understanding basic model information needed for various validation functions.",href:"/tutorials/retrieve-validation-model-data/",thumbnail:"/images/ClashDetectionSample.png",durationInMinutes:20,relatedApiIds:["clashdetection"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:l};function T(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Model validation functions are used to check a model you\u2019ve created to make sure everything is as expected. In the case of property validation, this means making sure element properties fit specific criteria. In the case of clash detection, this means certain elements are not touching or are within a certain range of each other.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-optional-create-a-sample-imodel-for-testing"},"1. (Optional) Create a sample iModel for testing"),(0,r.kt)("p",null,"Follow the steps listed ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-test-imodel-sample/"},"here")),(0,r.kt)("p",null,"You will be redirected to the \u201cMy sample iModels\u201d page. Wait a few minutes while the create process completes. Once it is, you can click \u201cShow\u201d in the IDs column to easily access the iTwin ID (also referred to as the project ID) and the iModel ID, both which will be frequently used throughout validation API calls. To get the changeset ID, you can either follow Step 4 in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-named-version"},"this tutorial"),", or, when viewing the model in the iTwinViewer, copying the string after \u201cChangeSetId=\u201d in the URL."),(0,r.kt)("p",null,"Note that in the following sections and related tutorials, the sample code will include actual results and data from this model outside of project/iModel/named version IDs, which will be specific to your project upon creation, and any ID values generated via API functions. While in most cases the results will be truncated for brevity, they should give you an idea of what you\u2019re looking for so you can easily determine if something has gone awry.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make request to the API a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application. You will need to include the scopes clashdetection:read and clashdetection:modify."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/clash-detection/operations/create-clashdetection-tests/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/modelsAndCategories/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "models":[\n    {\n      "id":"0x21",\n      "displayName":"ProcessPhysicalModel"\n    }\n  ],\n  "categories":[\n    {\n      "id":"0x20000000002",\n      "displayName":"Uncategorized"\n    },\n    {\n      "id":"0x30000000048",\n      "displayName":"PID LineStyle Default"\n    },\n    {\n      "id":"0x3000000004a",\n      "displayName":"Border"\n    },\n    {\n      "id":"0x4000000000d",\n      "displayName":"Tag-Category"\n    },\n    {\n      "id":"0x40000000e71",\n      "displayName":"Structure"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-retrieving-models-and-categories"},"2. Retrieving Models and Categories"),(0,r.kt)("p",null,"For creating any Clash Detection test, you will need a list of the models or categories you wish to check for clashing elements."),(0,r.kt)("p",null,"To do this, we need to send an HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/modelsAndCategories/imodels/{modelId}?projectId={projectId}")," using your projectId in place of {projectId}. This is an asynchronous request; if model information has never been previously requested for iModel, the data extraction will need time to process and the job will return a status of 202. You can repeat this request periodically until it returns a status of 200, at which point it will include the full response."),(0,r.kt)("p",null,"The response will include a complete list of models and categories, with their respective ids and display names. You will only need the ids for any validation functions, but to determine which models you are looking for, you will probably want to reference the display name, which should describe the model/categories and would be the same name you would see when looking at a model list or element when the iModel is open in any viewer.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/modelsAndCategories/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "schema":[\n    {\n      "name":"ECDbMeta",\n      "label":null,\n      "entityClass":[\n        {\n          "name":"ECClassDef",\n          "label":"ECClass",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECSchemaDef",\n          "label":"ECSchema",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"Alias",\n              "label":null\n            },\n            {\n              "name":"VersionMajor",\n              "label":null\n            },\n            {\n              "name":"VersionWrite",\n              "label":null\n            },\n            {\n              "name":"VersionMinor",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECPropertyDef",\n          "label":"ECProperty",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"IsReadonly",\n              "label":null\n            },\n            {\n              "name":"Priority",\n              "label":null\n            },\n            {\n              "name":"Ordinal",\n              "label":null\n            },\n            {\n              "name":"ExtendedTypeName",\n              "label":null\n            },\n            {\n              "name":"ArrayMinOccurs",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECEnumerationDef",\n          "label":"ECEnumeration",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"IsStrict",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"KindOfQuantityDef",\n          "label":"KindOfQuantity",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"PersistenceUnit",\n              "label":null\n            },\n            {\n              "name":"RelativeError",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"PropertyCategoryDef",\n          "label":"PropertyCategory",\n          "properties":[\n            {\n              "name":"Name",\n              "label":null\n            },\n            {\n              "name":"DisplayLabel",\n              "label":null\n            },\n            {\n              "name":"Description",\n              "label":null\n            },\n            {\n              "name":"Priority",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        },\n        {\n          "name":"ECRelationshipConstraintDef",\n          "label":null,\n          "properties":[\n            {\n              "name":"MultiplicityLowerLimit",\n              "label":null\n            },\n            {\n              "name":"MultiplicityUpperLimit",\n              "label":null\n            },\n            {\n              "name":"IsPolymorphic",\n              "label":null\n            },\n            {\n              "name":"RoleLabel",\n              "label":null\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        }\n      ]\n    },\n    {\n      "name":"ProcessPhysical",\n      "label":null,\n      "entityClass":[\n        {\n          "name":"PIPING_COMPONENT",\n          "label":"Piping Component",\n          "properties":[\n            {\n              "name":"COMPONENT_NAME",\n              "label":"Component Name"\n            },\n            {\n              "name":"STATE",\n              "label":"Component State"\n            },\n            {\n              "name":"LENGTH_EFFECTIVE",\n              "label":"Length Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_BRANCH_END_EFFECTIVE",\n              "label":"Design Length Center To Branch End Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_OUTLET_END_EFFECTIVE",\n              "label":"Design Length Center To Outlet End Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_RUN_END_EFFECTIVE",\n              "label":"Design Length Center To Run End Effective"\n            },\n            {\n              "name":"WALL_THICKNESS",\n              "label":"Wall Thickness"\n            },\n            {\n              "name":"UPDATE_GRAPHICS",\n              "label":"Update Graphics"\n            },\n            {\n              "name":"NOMINAL_DIAMETER_RUN_END",\n              "label":"Nominal Diameter Run End"\n            },\n            {\n              "name":"Geometry",\n              "label":"Element Geometry"\n            },\n            {\n              "name":"SPOOL_ID",\n              "label":"Spool Id"\n            },\n            {\n              "name":"SPOOL_NUMBER",\n              "label":"Spool Number"\n            },\n            {\n              "name":"OPTION_CODE",\n              "label":"Option Code"\n            },\n            {\n              "name":"NOTES",\n              "label":"Notes"\n            },\n            {\n              "name":"CATALOG_NAME",\n              "label":"Catalog Name"\n            },\n            {\n              "name":"EC_CLASS_NAME",\n              "label":"EC Class Name"\n            },\n            {\n              "name":"UNIT_OF_MEASURE",\n              "label":"Unit Of Measure"\n            },\n            {\n              "name":"PIECE_MARK",\n              "label":"Piece Mark"\n            },\n            {\n              "name":"FABRICATION_CATEGORY",\n              "label":"Fabrication Category"\n            },\n            {\n              "name":"LINENUMBER",\n              "label":"Line Number"\n            },\n            {\n              "name":"INSULATION_THICKNESS",\n              "label":"Insulation Thickness"\n            },\n            {\n              "name":"INSULATION",\n              "label":"Insulation Material"\n            },\n            {\n              "name":"LENGTH",\n              "label":"Length"\n            },\n            {\n              "name":"INSIDE_DIAMETER",\n              "label":"Inside Diameter"\n            },\n            {\n              "name":"NORMAL_OPERATING_PRESSURE",\n              "label":"Normal Operating Pressure"\n            },\n            {\n              "name":"OUTSIDE_DIAMETER",\n              "label":"Outside Diameter"\n            },\n            {\n              "name":"PIPE_FLANGE_TYPE",\n              "label":"Pipe Flange Type"\n            },\n            {\n              "name":"GRADE",\n              "label":"Grade"\n            },\n            {\n              "name":"SHOP_FIELD",\n              "label":"Shop Field"\n            },\n            {\n              "name":"HUB_DEPTH",\n              "label":"Hub Depth"\n            },\n            {\n              "name":"HUB_WIDTH",\n              "label":"Hub Width"\n            },\n            {\n              "name":"TRACING",\n              "label":"Tracing"\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        }\n      ]\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-schema-info"},"3. Get Schema Info"),(0,r.kt)("p",null,"For creating Property Validation tests you will need access to the property information for elements with which validate against. To do this you will need to retrieve the schema info via an HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/schemas/imodels/{modelId}?projectId={projectId}")," using your projectId in place of {projectId}."),(0,r.kt)("p",null,"Similarly to the Get Models and Categories step, this is an asynchronous request and if schema extraction has never been done for this iModel before, it will need time to process and return a 202 status until extraction is complete. The user can repeat this request periodically until it returns a status of 200, which will include the full response."),(0,r.kt)("p",null,"The response will include a complete list of classes, labels of the classes if they\u2019re available, and all of the associated properties with that class and their respective names and labels. For creating tests and rules, you will be using the name properties, usually in the format of {className}.{propertyName} although the labels may help you figure out which classes and properties you\u2019re looking for.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-conclusion"},"4. Conclusion"),(0,r.kt)("p",null,"You should be able to successfully retrieve the related IDs and schema info for your model. While this information is of limited value on its own, it is useful and necessary for creating clash detection and property validation tests, so check out the continue learning section to put your new knowledge to use.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Clash Test Basics",href:"/tutorials/clash-test-basics",description:"A tutorial that covers the basics of the clash detection lifecycle and usage.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-optional-create-a-sample-imodel-for-testing",level:2,title:"1. (Optional) Create a sample iModel for testing",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"2-retrieving-models-and-categories",level:2,title:"2. Retrieving Models and Categories",children:[]},{id:"3-get-schema-info",level:2,title:"3. Get Schema Info",children:[]},{id:"4-conclusion",level:2,title:"4. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},81968:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return w},Jt:function(){return b}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Running the Design Element Classification ML Pipeline on an iModel",tile:{name:"Running the Design Element Classification ML Pipeline on an iModel",description:"Walk-through how to run your iModel against the Design Element Classification ML Model and and get Results.",href:"/tutorials/running-the-design-element-classification-ml-pipeline-on-an-imodel/",durationInMinutes:15,relatedApiIds:["designelementclassification"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("Alert"),h=p("Title"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("ResourceTile"),T={metadata:l};function w(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you understand how to create a Design Element Classification\ninference run and how to retrieve its results."),(0,r.kt)("p",null,"By the end of this walk-through, you will have all the tools you need to take any iModel and\nrun it through the classification pipeline. You will gain familiarity with the workflow and all APIs\ninvolved and be able to integrate the Design Element Classification model into your iTwin-Powered\napplications.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project created and configured. Instructions on how to create a project can be found\n",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide"},"here"),". You can use an existing Project\nif you have access to one."),(0,r.kt)("li",{parentName:"ul"},"iModel created.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Create new iModel ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-empty-imodel/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Or use an existing iModel."))),(0,r.kt)("li",{parentName:"ul"},"iModel Named Version created. Instruction on how to create named version can be found\n",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-named-version/"},"here"),".")),(0,r.kt)("p",null,"Use of the Design Element Classification APIs requires Project level Permissions. For\nthese Permissions, you must be an Organization Administrator for the Organization that\nowns a given Project or have ",(0,r.kt)("inlineCode",{parentName:"p"},"administration_manage_roles")," Permission assigned at the\nProject level. If you do not have admin access to the Project or iModel you would like\nto use, contact somebody who is a Project Administrator. As a Project Administrator,\nyou can use APIs described in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/manage-project-team-members-guide/"},"Manage Project Team Members"),"\ntutorial to create a Role and update it with ",(0,r.kt)("inlineCode",{parentName:"p"},'"permissions": ["MLRunInference"]'),".\nOnce this is done and the Role is assigned to you, you can use any iModel inside your\nProject to finish this tutorial.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{scopes:["designelementclassification:read","designelementclassification:modify"],clientName:"Design Element Classification client",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Design Element Classification API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"designelementclassification:read designelementclassification:modify")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make requests to this APIs a valid user token is required. There are several ways to get one."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement the\nAuthorization Code workflow in your application."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Here you can use the Client ID generated from previous application registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to the ",(0,r.kt)("a",{parentName:"li",href:"/apis/designelementclassification/operations/mcl-model-list/"},"API Documentation"),"."),(0,r.kt)("li",{parentName:"ol"},"Click the \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"For Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After the login popup closes, the Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save your user token value to reuse later.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace the 'JWT_TOKEN' placeholder parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/designelementclassification/models HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "models":[\n    {\n      "version":"2021.07.07.1",\n      "lastModifiedDateTime":"2021-07-20T07:56:20.0428972+00:00"\n    },\n    {\n      "version":"2021.08.08.1",\n      "lastModifiedDateTime":"2021-08-20T07:56:20.0428972+00:00"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-available-design-element-classification-model-versions"},"3. Get available Design Element Classification Model versions"),(0,r.kt)("p",null,"First you need to select an existing model version to use for your inference Run. To get available\nversions, use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-model-list/"},"Get Design Element Classification models"),"\nendpoint. Take note of a model version from the API response to use later on the Run Creation step in this tutorial."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Typically one would select the latest model version. But for backwards compatibility you can use an older one.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/designelementclassification/runs HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Body"),(0,r.kt)(k,{language:"json",code:'{\n  "modelVersion":"2021.06.20.1",\n  "iModelId":"466ba62e-2841-4568-89b5-deabf2c6c858",\n  "changeSetId":"096f51524e0ed3f088ea298a6833efd1a2285f88"\n}',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "run":{\n    "id":"3a3cb94c-86e1-4359-8caf-25aef1c39e0d",\n    "modelVersion":"2021.04.29.4",\n    "status":"InProgress",\n    "lastModifiedDateTime":"2021-07-20T07:56:20.0428972+00:00",\n    "_links":{\n      "imodel":{\n        "href":"https://api.bentley.com/imodels/ea349f77-f670-4e53-912b-2de45ce824ec"\n      },\n      "changeSet":{\n        "href":"https://api.bentley.com/imodels/ea349f77-f670-4e53-912b-2de45ce824ec/changesets/ee1f94bbf53ee6bc4a524e5580c4e9a4fb49c98e"\n      },\n      "project":{\n        "href":"https://api.bentley.com/projects/41d1720b-c84f-492e-8561-05429610eec6"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-a-new-run"},"4. Create a new Run"),(0,r.kt)("p",null,"Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-run-create/"},"Create Design Element Classification Run"),"\nAPI to create and start a new Design Element Classification inference Run for the provided iModel\nand Named Version specified by changeSetId."),(0,r.kt)("p",null,"Design Element Classification allows for some configuration. Let\u2019s quickly go over all parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"modelVersion")," - Design Element Classification Model version retrieved from an earlier step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"iModelId")," - iModel to check classifications for."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"changeSetId")," - Change Set Id of the iModel\u2019s Named Version to check classifications for.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Run status might be ",(0,r.kt)("b",null,"NotStarted")," for short period of time while the process kicks off."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Note the Run ID that is returned when creating a Run will be needed in later steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/designelementclassification/runs/RUN_ID/status HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "status":"NotStarted"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"query-status"},"Query status"),(0,r.kt)("p",null,"Once a Run is created you will need to wait until the Run is finished. You can use the\n",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-run-status/"},"Get Design Element Classification Run Status"),"\nAPI to check if Run has run to completion."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Completed")," - Run has successfully completed. Results are ready to be used."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Canceled")," - Run was canceled by user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Failed")," - Run failed to complete."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"NotStarted")," - Run was created, but has not started yet."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"InProgress")," - Run was created and has started. Waiting for completion."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-retrieve-run-output"},"5. Retrieve Run output"),(0,r.kt)("p",null,"Once a Design Element Classification Run has successfully completed its results can be downloaded.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/designelementclassification/runs/RUN_ID/results HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "results":[\n    {\n      "name":"misclassifications.json"\n    },\n    {\n      "name":"metadata.json"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"get-all-results"},"Get All Results"),(0,r.kt)("p",null,"All pipeline Results can be fetched using the ",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-run-result-list/"},"Get Design Element Classification Results"),"\nAPI.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/designelementclassification/runs/RUN_ID/results/misclassifications.json HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"get-result"},"Get Result"),(0,r.kt)("p",null,"To get just a specific Result, use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-run-result-get/"},"Get Design Element Classification Result"),"\nAPI. On success, this endpoint will produce a ",(0,r.kt)("inlineCode",{parentName:"p"},"302 Found")," response and redirect your\nrequest to download the desired file contents.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/designelementclassification/runs?projectId=PROJECT_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "runs":[\n    {\n      "id":"03adc578-927a-4fbd-b7d7-5622e24397f0",\n      "modelVersion":"2021.04.29.4",\n      "status":"Finished",\n      "metadata":{\n        "countOfIssues":0,\n        "countOfProcessed":15,\n        "countOfElements":15\n      },\n      "lastModifiedDateTime":"2021-07-20T07:56:20.0428972+00:00",\n      "_links":{\n        "imodel":{\n          "href":"https://api.bentley.com/imodels/IMODEL_ID"\n        },\n        "changeSet":{\n          "href":"https://api.bentley.com/imodels/IMODEL_ID/changesets/CHANGE_SET_ID"\n        },\n        "project":{\n          "href":"https://api.bentley.com/projects/PROJECT_ID"\n        }\n      }\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-get-previous-runs-in-a-project"},"6. Get previous Runs in a Project"),(0,r.kt)("p",null,"All Design Element Classification Runs are associated with a Project. To get a history of all Runs\nyou can call the ",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-run-list/"},"Get Design Element Classification Runs"),"\nAPI."),(0,r.kt)("p",null,"The Run object contains some metadata you might find useful:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"countOfIssues")," - count of misclassified elements in a named version of an iModel found with this Design Element Classification model."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"countOfProcessed")," - count of elements checked for classifications in iModel."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"countOfElements")," - total count of elements found in iModel."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-advanced"},"7. Advanced"),(0,r.kt)("p",null,"We provide some additional APIs that provide a little more control and management over your Classification Runs.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/designelementclassification/runs/RUN_ID/cancel HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"cancel-run"},"Cancel Run"),(0,r.kt)("p",null,"Design Element Classification Runs are complex and can take a long time to complete. Runs can be cancelled using\nthe ",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-run-cancel/"},"Cancel Design Element Classification Run")," API\nso you don\u2019t have to waste time waiting for Runs to naturally fail or complete when unnecessary.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"DELETE https://api.bentley.com/designelementclassification/runs/RUN_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"delete-run"},"Delete Run"),(0,r.kt)("p",null,"We strongly recommend deleting canceled Runs. You might also want to clean up a Project of stale or unnecessary\nhistorical Runs. Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/designelementclassification/operations/mcl-run-delete/"},"Delete Design Element Classification Run"),"\nAPI for this."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Only completed Runs can be deleted. Completed Run statuses:"," ",(0,r.kt)("b",null,"Failed, Canceled, Completed"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Congratulations on completing this tutorial, at this point you should have been able to create Design Element Classification run for named version of an iModel, query run status and finally download run results. The result file contains metadata about elements in an iModel like predicted class, confidence, etc. This metadata can help to identify problematic elements and even make suggestions as to what the proper classifications should have been.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{title:"Design Element Classification",href:"/apis/designelementclassification",description:"An overview of Design Element Classification APIs and Machine Learning model.",mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Reporting & Insights",href:"/api-groups/reporting-insights",description:"An overview and detailed Reporting & Insights API group documentation.",mdxType:"ResourceTile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-get-available-design-element-classification-model-versions",level:2,title:"3. Get available Design Element Classification Model versions",children:[]},{id:"4-create-a-new-run",level:2,title:"4. Create a new Run",children:[{id:"query-status",level:3,title:"Query status",children:[]}]},{id:"5-retrieve-run-output",level:2,title:"5. Retrieve Run output",children:[{id:"get-all-results",level:3,title:"Get All Results",children:[]},{id:"get-result",level:3,title:"Get Result",children:[]}]},{id:"6-get-previous-runs-in-a-project",level:2,title:"6. Get previous Runs in a Project",children:[]},{id:"7-advanced",level:2,title:"7. Advanced",children:[{id:"cancel-run",level:3,title:"Cancel Run",children:[]},{id:"delete-run",level:3,title:"Delete Run",children:[]}]},{id:"conclusion",level:2,title:"Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},76715:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return w},Jt:function(){return b}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Stepping Through an Issue Workflow",tile:{name:"Stepping Through an Issue Workflow",description:"Use a workflow to track the status of an issue created through the Issues REST API.",thumbnail:null,href:"/tutorials/stepping-through-an-issue-workflow",durationInMinutes:15,relatedApiIds:["issues"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("ActionLinkButton"),h=p("CodeBlock"),k=p("Alert"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T={metadata:l};function w(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Each issue type by default is associated with a workflow. Workflows help users keep track of which of their issues they have addressed and how far along they are with each."),(0,r.kt)("p",null,"In this tutorial you will learn how to look up the workflow for the issue you created and then step the issue through the workflow\u2019s statuses until it is considered closed (i.e., done)."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"You will need to first complete the tutorial ",(0,r.kt)("a",{parentName:"p",href:"../creating-your-first-issue/"},"Creating Your First Issue")," so that you have an issue to modify."),(0,r.kt)("p",null,"Take note of the issue\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," properties, as you will need them here.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-workflow/",title:"Try the Get Workflow endpoint",target:"_blank",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/workflows/<your-issue-type>?projectId=<your-project-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\n\n{\n  "workflow":{\n    "id":"xospFt7H20-9uSSLOwfBeMrXBKJQWpdOqXbvQ8xzG7s",\n    "startStates":["Open"],\n    "type":"Field Data",\n    "states":[\n      {\n        "name":"Open",\n        "color":"#ff0000",\n        "editableProperties":[],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Assigned",\n        "color":"#ff9900",\n        "editableProperties":[\n          "AssignedTo",\n          "AssignedToId",\n          "_DueDate",\n          "_AssignedUsers"\n        ],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Review",\n        "color":"#ffff00",\n        "editableProperties":[\n          "AssignedTo",\n          "AssignedToId",\n          "_DueDate",\n          "_AssignedUsers"\n        ],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Approved",\n        "color":"#66cc00",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      },\n      {\n        "name":"Rejected",\n        "color":"#990000",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      },\n      {\n        "name":"Voided",\n        "color":"#999999",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      }\n    ],\n    "transitions":[\n      {\n        "displayName":"Assign",\n        "start":"Open",\n        "end":"Assigned",\n        "notes":"None"\n      },\n      {\n        "displayName":"Void",\n        "start":"Open",\n        "end":"Voided",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send for Review",\n        "start":"Assigned",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send back",\n        "start":"Assigned",\n        "end":"Open",\n        "notes":"None"\n      },\n      {\n        "displayName":"Approve",\n        "start":"Review",\n        "end":"Approved",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reject",\n        "start":"Review",\n        "end":"Rejected",\n        "notes":"None"\n      },\n      {\n        "displayName":"Void",\n        "start":"Review",\n        "end":"Voided",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send back",\n        "start":"Review",\n        "end":"Assigned",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Approved",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Rejected",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Voided",\n        "end":"Review",\n        "notes":"None"\n      }\n    ],\n    "startingTransitions":[\n      {\n        "displayName":"Create as Open",\n        "start":null,\n        "end":"Open",\n        "notes":"None"\n      }\n    ],\n    "uninitializedState":{\n      "name":null,\n      "color":null,\n      "editableProperties":[],\n      "stateCategory":null\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-look-up-the-workflow"},"1. Look Up the Workflow"),(0,r.kt)("p",null,"Make a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-workflow/"},"Get Workflow")," endpoint to retrieve the workflow definition."),(0,r.kt)("h4",{id:"url"},"URL"),(0,r.kt)("p",null,"The URL of the request includes a path of ",(0,r.kt)("inlineCode",{parentName:"p"},"/workflows")," followed by your issue type. You must also provide ",(0,r.kt)("strong",{parentName:"p"},"projectId")," as a query string parameter."),(0,r.kt)("p",null,"Format: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/workflows/<type>?projectId=<projectId>")),(0,r.kt)("h4",{id:"understanding-the-workflow-definition"},"Understanding the Workflow Definition"),(0,r.kt)("p",null,"The workflow definition in the response body consists of two main concepts: ",(0,r.kt)("strong",{parentName:"p"},"states")," and ",(0,r.kt)("strong",{parentName:"p"},"transitions"),". States are named statuses that an issue can have as the value of its ",(0,r.kt)("inlineCode",{parentName:"p"},"status")," property. Transitions dictate the possible changes between states; if an issue is in Status A, then it can be changed to Status B if and only if there is a transition with a ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," of A and an ",(0,r.kt)("inlineCode",{parentName:"p"},"end")," of B."),(0,r.kt)("p",null,"Thus, a workflow can be pictured as a flowchart where states are bubbles and transitions are arrows. Below is a visual representation of the workflow shown in the sample response body."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/images/issue-workflow.png",alt:"Visualized Workflow"})),(0,r.kt)("p",null,"Examine the sample response and note that one of the states in the list of states has a ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," of \u201cOpen\u201d. Also, there are transitions named \u201cAssign\u201d and \u201cVoid\u201d that both have a ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," of \u201cOpen\u201d, and have ",(0,r.kt)("inlineCode",{parentName:"p"},"end")," values of \u201cAssigned\u201d and \u201cVoided\u201d, respectively. Thus, an issue with a ",(0,r.kt)("inlineCode",{parentName:"p"},"status")," of \u201cOpen\u201d can be changed to have a ",(0,r.kt)("inlineCode",{parentName:"p"},"status")," of \u201cAssigned\u201d or \u201cVoided\u201d, but no other values."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Tip for application designers: Usually, a UI element for setting an issue's workflow status consists of a dropdown list. Each transition that's available for the current status (i.e., has the current status as its ",(0,r.kt)("code",null,"start"),") appears as an option in the list with text equal to the transition's ",(0,r.kt)("code",null,"displayName"),". Selecting the option modifies the issue's status to the value of ",(0,r.kt)("code",null,"end")," for that transition.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/modify-issue/",target:"_blank",title:"Try the Update Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(h,{language:"http",code:"PATCH https://api.bentley.com/issues/<your-issue-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (1)"),(0,r.kt)(h,{language:"json",code:'{\n  "status":"Assigned"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (2)"),(0,r.kt)(h,{language:"json",code:'{\n  "status":"Review"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (3)"),(0,r.kt)(h,{language:"json",code:'{\n  "status":"Approved"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "status":"Approved",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-21T19:43:55.146858Z",\n    "assignee":{\n      "displayName":"Andrew Menzies",\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189"\n    },\n    "number":"FID-00002",\n    "displayName":"FID-00002",\n    "subject":"Which Material? With model ID",\n    "description":"Version 1.2 of the plans does not specify what material this support beam will be made out of.",\n    "type":"Field Data",\n    "container":{\n      "id":"2374523948759432"\n    },\n    "item":{\n      "id":"9090096798506970"\n    },\n    "dueDate":"2021-07-30T00:00:00Z",\n    "state":"Closed",\n    "properties":{\n      "_StatusColor":"#66cc00"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-update-the-issues-status"},"2. Update the Issue\u2019s Status"),(0,r.kt)("p",null,"An issue\u2019s ",(0,r.kt)("strong",{parentName:"p"},"status")," property dictates what step of the workflow it\u2019s currently on. When you create an issue, you can set its ",(0,r.kt)("strong",{parentName:"p"},"status")," to one of the strings listed in the ",(0,r.kt)("strong",{parentName:"p"},"startStates")," array. Since you didn\u2019t set a status when creating your issue in the ",(0,r.kt)("strong",{parentName:"p"},"Creating Your First Issue")," tutorial, it was automatically set to the first ",(0,r.kt)("inlineCode",{parentName:"p"},"startState"),", \u201cOpen\u201d."),(0,r.kt)("p",null,"To change the issue\u2019s status, make a PATCH request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/modify-issue/"},"Update Issue")," endpoint, just as you did in the ",(0,r.kt)("strong",{parentName:"p"},"Creating Your First Issue")," tutorial. Include the ",(0,r.kt)("strong",{parentName:"p"},"status")," property, making sure to set its value according to the workflow transitions."),(0,r.kt)("p",null,"For instance, to change your issue from \u201cOpen\u201d to \u201cAssigned\u201d, make a request with the body shown in \u201cSample Body (1)\u201d."),(0,r.kt)("p",null,"To keep stepping the issue through the workflow, make additional Update Issue requests, using \u201cSample Body (2)\u201d and then \u201cSample Body (3)\u201d. This will change the issue from \u201cAssigned\u201d to \u201cReview\u201d and then \u201cApproved\u201d. Once all of these requests are done, you should get the response shown under \u201cSample response\u201d."),(0,r.kt)("p",null,"Note that the \u201cApproved\u201d status in the workflow definition has a ",(0,r.kt)("strong",{parentName:"p"},"stateCategory")," of \u201cClosed\u201d rather than \u201cOpen\u201d. ",(0,r.kt)("inlineCode",{parentName:"p"},"stateCategory")," is a conceptual grouping of workflow states into one of three types: \u201cOpen\u201d, \u201cClosed\u201d, and \u201cDraft\u201d. Conceptually, to users, an issue in an Open state generally requires attention; one in Closed has been taken care of (or deemed not a problem). A Draft issue is being worked on by its creator and may not be ready for review by others yet. In terms of functionality, Open and Draft issues can both be edited like normal, but a Closed issue cannot be edited except to change its ",(0,r.kt)("strong",{parentName:"p"},"status"),"."),(0,r.kt)(k,{mdxType:"Alert"},"Note: The ",(0,r.kt)("strong",null,"state")," property of an issue (not to be confused with"," ",(0,r.kt)("strong",null,"status"),") corresponds to the ",(0,r.kt)("strong",null,"stateCategory")," of the issue's current ",(0,r.kt)("strong",null,"status")," in the workflow definition. The"," ",(0,r.kt)("strong",null,"state")," property is set automatically and cannot be included in the body of ",(0,r.kt)("strong",null,"Create Issue")," or ",(0,r.kt)("strong",null,"Update Issue")," ","requests."),(0,r.kt)("p",null,"Well done! You now understand how to use the Issues REST API to find an issue\u2019s workflow, how the workflow affects updating the issue (the ",(0,r.kt)("strong",{parentName:"p"},"status")," property), and how the issue becomes ",(0,r.kt)("em",{parentName:"p"},"open")," or ",(0,r.kt)("em",{parentName:"p"},"closed")," as a result.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Stepping Through an Issue Workflow",description:"Learn how an issue's status can be set to track its progress.",href:"../stepping-through-an-issue-workflow",mdxType:"Tile"}),(0,r.kt)(f,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",mdxType:"Tile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-look-up-the-workflow",level:2,title:"1. Look Up the Workflow",children:[]},{id:"2-update-the-issues-status",level:2,title:"2. Update the Issue\u2019s Status",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},70880:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},ZP:function(){return I},Jt:function(){return S}});var i=n(159),a=n(91164),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Get Started!",tile:{name:"Start building a Viewer App",description:"This quick start is intended to help you get started with using iTwin Platform visualization components. By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).",thumbnail:"/images/retail-tutorial-sample-small.png",href:"/tutorials/web-application-quick-start/",durationInMinutes:30,relatedApiIds:["visualization"],showInFirstSteps:!0,firstStepsSequenceNumber:1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("NodeJsIcon"),h=p("GitIcon"),k=p("GoogleChromeIcon"),g=p("VSCodeIcon"),y=p("CodeBlock"),f=p("CreateSampleAppButton"),T=p("CreateSampleiModelButton"),w=p("Alert"),b=p("ContinueLearningSection"),v=p("TileList"),N=p("Tile"),x=p("ResourceTile"),C={metadata:l};function I(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:l.tile.durationInMinutes,summaryImageSrc:"/images/retail-tutorial-sample.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you get started with using iTwin Platform visualization components. In this walk-through, you will be introduced to the ",(0,r.kt)("strong",{parentName:"p"},"iTwin Viewer"),", a customizable viewer that offers basic tooling and widgets for viewing an infrastructure digital twin and can be further extended with iTwin.js extensions."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-set-up-your-environment"},"1. Set up your environment"),(0,r.kt)("p",null,"Before you start this walk-through, you will need to download and install the following software on your machine.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://nodejs.org",target:"_blank",title:"Node.js",icon:(0,r.kt)(m,{mdxType:"NodeJsIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://git-scm.com/downloads",target:"_blank",title:"Git",icon:(0,r.kt)(h,{mdxType:"GitIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-required-materials"},"1.1 Required materials"),(0,r.kt)("h5",{id:"nodejs-lts-version"},(0,r.kt)("a",{parentName:"h5",href:"https://nodejs.org"},"Node.js (LTS version)")),(0,r.kt)("p",null,"This tool provides the backend JavaScript runtime necessary for your computer to read and render code appropriately. It also allows you to run NPM command line (required for every iTwin project)."),(0,r.kt)("h5",{id:"git"},(0,r.kt)("a",{parentName:"h5",href:"https://git-scm.com/downloads"},"Git")),(0,r.kt)("p",null,"This is the source code control system for the iTwin repositories.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(k,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(g,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-suggested-materials"},"1.2 Suggested materials"),(0,r.kt)("h5",{id:"google-chrome"},(0,r.kt)("a",{parentName:"h5",href:"https://www.google.com/chrome/"},"Google Chrome")),(0,r.kt)("p",null,"This software can help you to develop and debug frontend JavaScript problems."),(0,r.kt)("h5",{id:"visual-studio-code"},(0,r.kt)("a",{parentName:"h5",href:"https://code.visualstudio.com/"},"Visual Studio Code")),(0,r.kt)("p",null,"This is our recommended editor and debugger tool for developing iTwin.js applications. It is free, open source and includes a GUI for working with GIT.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{language:"bash",code:"npx create-react-app your-app-name --template @itwin/web-viewer --scripts-version @bentley/react-scripts",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-the-code"},"2. Get the code"),(0,r.kt)("p",null,"The iTwin Viewer is available on GitHub at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/viewer/tree/master/packages/modules/web-viewer-react"},"link"),". To download the iTwin Viewer code:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open Terminal or a Command Prompt."),(0,r.kt)("li",{parentName:"ol"},"In the terminal, run the following command:\n",(0,r.kt)("inlineCode",{parentName:"li"},"npx create-react-app your-app-name --template @itwin/web-viewer --scripts-version @bentley/react-scripts"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"This will generate a new application based on the iTwin Viewer React component."),(0,r.kt)("li",{parentName:"ul"},"By default, the viewer will be stored in a directory called ",(0,r.kt)("strong",{parentName:"li"},"your-app-name")))))),(0,r.kt)(c,{actions:[(0,r.kt)(f,{clientName:"Web Application Quick Start tutorial",scopes:["imodelaccess:read","imodels:read","realitydata:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-register-an-application"},"3. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to use the iTwin Viewer with the iModel you will generate next."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button. You will need to copy them in the ",(0,r.kt)("strong",{parentName:"p"},".env")," file from the application folder downloaded in the previous step."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Visualization API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"imodelaccess:read imodels:read realitydata:read")," scopes enabled."))),(0,r.kt)(c,{actions:[(0,r.kt)(T,{iModelName:"Web Application Quick Start tutorial",mdxType:"CreateSampleiModelButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-an-imodel"},"4. Create an iModel"),(0,r.kt)("p",null,"To view your engineering design content, you will first need to synchronize your design files into an iModel. An iModel is a distributed relational database holding information about an infrastructure asset defined in a common schema. To learn more, click ",(0,r.kt)("a",{href:"https://www.itwinjs.org/learning/imodel-connectors/?term=connectors",target:"_blank"},"here"),"."),(0,r.kt)("p",null,"Click the ",(0,r.kt)("strong",{parentName:"p"},"Create iModel")," button to automatically create an iModel for use with this quick start.\nYou can find created iModel in ",(0,r.kt)("a",{parentName:"p",href:"/my-imodels"},"My iModels")," page."),(0,r.kt)("h4",{id:"optional-manual-imodel-creation-process"},"Optional: Manual iModel creation process"),(0,r.kt)("p",null,"To manually create an iModel using your own engineering design files (DGN, RVT, SP3D, etc):"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com"},"https://developer.bentley.com")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Sign In")," button and sign-in using your Bentley account credentials",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you have not already registered, click ",(0,r.kt)("strong",{parentName:"li"},"Register now")," and complete the registration process."))),(0,r.kt)("li",{parentName:"ol"},"Click on your user icon and navigate to the ",(0,r.kt)("strong",{parentName:"li"},"My iModels")," page"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Create")," button"),(0,r.kt)("li",{parentName:"ol"},"Give your iModel a name"),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Create iModel from Local File")," and provide the needed file.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you don\u2019t have your own engineering design files, you can select ",(0,r.kt)("strong",{parentName:"li"},"Create iModel from Bentley Sample")," and choose the ",(0,r.kt)("strong",{parentName:"li"},"Retail Building Sample")," template"))),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Save")," button and wait until your iModel is created")),(0,r.kt)(w,{type:"informational",mdxType:"Alert"},"Note that after completing this step, you will be provided with both an iTwinId (i.e. ProjectId) and an iModelID which will be required in a later step.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-run-the-code"},"5. Run the code"),(0,r.kt)("p",null,"After you have successfully downloaded the code, you are ready to run the sample. To run the sample:"),(0,r.kt)(w,{type:"informational",mdxType:"Alert"},"Note: the following instructions show how to run the code using VS Code, but the same commands can be completed in a terminal."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Launch Visual Studio Code"),(0,r.kt)("li",{parentName:"ol"},"Click File > Open Folder and open the ",(0,r.kt)("strong",{parentName:"li"},"your-app-name")," directory that was created in the previous step.")),(0,r.kt)("p",null,"Next, you will need to configure the application with the client and iModel information that you created in the previous steps or any other SPA ",(0,r.kt)("a",{parentName:"p",href:"/my-apps"},"app")," and ",(0,r.kt)("a",{parentName:"p",href:"/my-imodels"},"iModel")," from your account."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open the .env file"),(0,r.kt)("li",{parentName:"ol"},"Enter the appropriate values for:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID"),": Enter the ClientID for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI"),": Enter the Redirect URI for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI"),": Enter the Post Logout Redirect URI for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES"),": Enter the Scopes for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_ITWIN_ID"),": Enter the iTwinId that was generated during the ",(0,r.kt)("strong",{parentName:"li"},"Create an iModel")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_IMODEL_ID"),": Enter the iModelID that was generated during the ",(0,r.kt)("strong",{parentName:"li"},"Create an iModel")," step"))),(0,r.kt)("li",{parentName:"ol"},"Open a terminal from the menu bar View > Terminal."),(0,r.kt)("li",{parentName:"ol"},"In the terminal window, enter ",(0,r.kt)("inlineCode",{parentName:"li"},"npm start"),". This will serve the application with live reloading.")),(0,r.kt)(w,{type:"informational",mdxType:"Alert"},"Note: You can add/update/remove files as needed. If running `npm start` while making changes, your application will automatically recompile and reload."),(0,r.kt)("p",null,"Congratulations, running npm start should launch a web browser and display your iModel in the iTwin Viewer Starter App. If you use your own file, this may take a few minutes to load depending on the file size you used."),(0,r.kt)("p",null,"If the iTwin Viewer does not automatically open, you can open a browser and load the URL ",(0,r.kt)("a",{parentName:"p",href:"https://localhost:3000"},"https://localhost:3000"),".")),(0,r.kt)(b,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for the completion of your first viewer app! You\u2019ve now know a lot on the subject, but there\u2019s still possibilities to learn more to unleash the platform capabilities."),(0,r.kt)(v,{mdxType:"TileList"},(0,r.kt)(N,{name:'Customizing the iTwin Viewer - "The Basics"',thumbnail:"/images/itwin-viewer-hello-world-sample-small.png",description:"This tutorial will take you through the first steps of customizing your iTwin Web Viewer. First you will learn how to add a new user interface component. Later you will customize that component to change the background color of your viewer.",href:"/tutorials/itwin-viewer-hello-world",mdxType:"Tile"}),(0,r.kt)(N,{name:"Adding showcase widgets to your iTwin Viewer",thumbnail:"/images/view_attributes_ported_results.png",description:"This tutorial will take widgets from the sample showcase and add them into your iTwin Viewer using the `uiProviders` prop.",href:"/tutorials/adding-showcase-widgets-to-your-itwin-viewer/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(v,{mdxType:"TileList"},(0,r.kt)(x,{title:"Create React App",href:"https://create-react-app.dev",description:"Set up a modern web app by running one command.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(x,{title:"iTwin Viewer React",href:"https://www.npmjs.com/package/@itwin/web-viewer-react",description:(0,r.kt)(o.Fragment,null,"The iTwin Viewer is a configurable iTwin.js viewer that offers basic tooling and widgets out-of-the-box and can be further extended through the use of ",(0,r.kt)("a",{href:"https://github.com/imodeljs/extension-sample",target:"_blank"},"iTwin.js extensions"),". This package contains the Viewer as a React component and some additional Typescript APIs."),isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(x,{title:"iTwin Viewer Create React App Template",href:"https://www.npmjs.com/package/@itwin/cra-template-web-viewer",description:(0,r.kt)(o.Fragment,null,"This is a template for applications that are based on the ",(0,r.kt)("a",{href:"https://github.com/iTwin/viewer/tree/master/packages/modules/web-viewer-react",target:"_blank"},"iTwin Viewer")," for ",(0,r.kt)("a",{href:"https://github.com/facebook/create-react-app",target:"_blank"},"Create React App"),"."),isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(x,{title:"Bentley React Scripts",href:"https://www.npmjs.com/package/@bentley/react-scripts",description:"This is the iTwin.js fork of react-scripts.",isExternal:!0,mdxType:"ResourceTile"}))))}I.isMDXComponent=!0;var S=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-set-up-your-environment",level:2,title:"1. Set up your environment",children:[{id:"11-required-materials",level:3,title:"1.1 Required materials",children:[]},{id:"12-suggested-materials",level:3,title:"1.2 Suggested materials",children:[]}]},{id:"2-get-the-code",level:2,title:"2. Get the code",children:[]},{id:"3-register-an-application",level:2,title:"3. Register an Application",children:[]},{id:"4-create-an-imodel",level:2,title:"4. Create an iModel",children:[]},{id:"5-run-the-code",level:2,title:"5. Run the code",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},81878:function(e,t,n){"use strict";n(31345),n(67294);var i=n(56261),a=n(85893);t.Z=function(e){return e.breadcrumbs?(0,a.jsx)("div",{id:"page-header-with-breadcrumbs",children:(0,a.jsxs)("div",{className:"page-header-content-container",children:[e.breadcrumbs&&(0,a.jsx)(i.O,{className:"breadcrumbs",children:e.breadcrumbs}),(0,a.jsx)("div",{className:"page-header-content",children:e.content})]})}):(0,a.jsx)("div",{id:"page-header",children:e.content})}},31727:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});n(67294),n(33543);var i=n(85893);var a=function(e){var t=e.sideMenu,n=e.children;return(0,i.jsxs)("div",{id:"page-body",children:[t,n]})},o=n(81878);var r=function(e){var t=e.headerContent,n=e.breadcrumbs,r=e.sideMenu,s=e.children;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{content:t,breadcrumbs:n}),(0,i.jsx)(a,{sideMenu:r,children:s})]})}},4862:function(e,t,n){"use strict";n.d(t,{D:function(){return p}});var i=n(92809),a=n(67294),o=n(49149),r=n(54963),s=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var p=function(e){return a.useEffect((function(){r.l.isRuntime&&n.e(578).then(n.bind(n,57273)).then((function(e){e.default.init()}))})),(0,s.jsx)(o.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},56110:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var i=n(92809),a=n(159),o=n(60508),r=n(85893);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){var t=(0,a.Z)({},e);return(0,r.jsx)(o.i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}},10246:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(61565),a=n(92809),o=n(15390),r=n(29e3),s=n(23109),l=n(56188),p=n(36432),d=n(46764),c=n(3058),u=n(9250),m=n(60508),h=n(41664),k=(n(67294),n(85893));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={h1:function(e){return(0,k.jsx)(r.s,y({className:"documentation-headline"},e))},h2:function(e){return(0,k.jsxs)(s.D,{className:"documentation-title",children:[(0,k.jsx)("a",y({href:"#".concat(e.id)},e)),(0,k.jsx)(o.wM7,{className:"permalink"})]})},h3:function(e){return(0,k.jsxs)(l.p,{className:"documentation-subheading",children:[(0,k.jsx)("a",y({href:"#".concat(e.id)},e)),(0,k.jsx)(o.wM7,{className:"permalink"})]})},h4:function(e){return(0,k.jsxs)(p.V,{className:"documentation-leading",children:[(0,k.jsx)("a",y({href:"#".concat(e.id)},e)),(0,k.jsx)(o.wM7,{className:"permalink"})]})},blockquote:function(e){return(0,k.jsx)(d.u,{className:"documentation-paragraph",children:(0,k.jsx)(c.V,y({},e))})},code:function(e){return(0,k.jsx)(u.E,y({},e))},pre:function(e){return(0,k.jsx)(d.u,{className:"documentation-paragraph",children:(0,k.jsx)("pre",y({className:"documentation-codeblock"},e))})},p:function(e){return(0,k.jsx)(d.u,y({className:"documentation-paragraph"},e))},a:function(e){var t;return(0,k.jsx)(h.default,y(y({},e),{},{children:(0,k.jsx)("a",y(y({},e),{},{target:"#"===(null===(t=e.href)||void 0===t?void 0:t[0])?void 0:"_blank"}))}))},hr:function(e){return(0,k.jsx)("hr",y({className:"documentation-divider"},e))},em:function(e){return(0,k.jsx)("em",y({},e))},ul:function(e){return(0,k.jsx)("ul",y({},e))},ol:function(e){return(0,k.jsx)("ol",y({},e))},table:function(e){var t=(0,i.Z)(e.children,2),n=t[0],o=t[1],r=(0,i.Z)(n.props.children,1)[0],s=o.props.children,l=r.props.children,p=s.map((function(e){return e.props.children})),d=l.map((function(e){return e.props.children[0]})),c=p.map((function(e){return e.map((function(e){return e.props.children[0]}))}));return(0,k.jsx)(m.i,{style:{marginTop:10},columns:[{Header:"Table",columns:d.map((function(e,t){return{id:e,Header:e,accessor:"".concat(t)}}))}],data:c.map((function(e){return e.map((function(e,t){return(0,a.Z)({},"".concat(t),e)})).reduce((function(e,t){return y(y({},e),t)}),{})})),emptyTableContent:"No data."})}}},94479:function(e,t,n){"use strict";n(67294);var i=n(4862),a=n(10246),o=n(85893);t.Z=function(e){var t=e.mdContent;return t?(0,o.jsx)(i.D,{markdown:t,components:a.Z,options:{tables:!0,emoji:!0,openLinksInNewWindow:!0}}):(0,o.jsx)(o.Fragment,{})}},53076:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(61565),a=n(67294),o=n(71125),r=(n(67988),n(17951)),s=(n(50371),n(41664)),l=n(85893),p=function(e){var t=e.item,n=e.setActiveItem,i=e.className,a=e.activeItem,o=e.apiName;if(!t.path)return(0,l.jsx)("div",{className:"menuItem-container",children:(0,l.jsx)("span",{onClick:function(){return n(t.id)},className:"".concat(i," ").concat(t.id===a?"active":""),children:(0,l.jsx)("span",{children:t.displayName})})});var r=t.fullPath?t.path:"/apis/[apiName]/[[...tab]]",p=t.fullPath?void 0:"/apis/".concat(o).concat(t.path);return(0,l.jsx)("div",{className:"menuItem-container",children:(0,l.jsx)(s.default,{href:r,as:p,children:(0,l.jsx)("a",{children:(0,l.jsxs)("span",{onClick:function(){return n(t.id)},className:"".concat(i).concat(t.id===a?" active":""),children:[t.prefix&&(0,l.jsx)("span",{className:"".concat(t.prefix.toLowerCase()," method"),children:t.prefix}),(0,l.jsx)("span",{children:t.displayName})]})})})})},d=function(e){var t=e.items,n=e.setActiveItem,i=e.activeItem,a=e.apiName;return(0,l.jsx)(l.Fragment,{children:t.map((function(e,t){return(0,l.jsxs)("div",{className:"sideMenu-".concat(e.level),children:[(0,l.jsx)(p,{item:e,className:"sideMenuItem-".concat(e.level),setActiveItem:n,activeItem:i,apiName:a},e.id),e.children.map((function(e,t){return(0,l.jsx)("div",{className:"sideMenu-".concat(e.level),children:(0,l.jsx)(r.P,{title:e.displayName,children:e.children.map((function(e,t){return(0,l.jsx)("div",{className:"sideMenu-".concat(e.level),children:(0,l.jsx)(p,{item:e,className:"sideMenuItem-".concat(e.level),setActiveItem:n,activeItem:i,apiName:a},e.id)},"sideMenu-".concat(e.id).concat(t))}))})},"sideMenu-".concat(e.id).concat(t))}))]},"sideMenu-".concat(e.id).concat(t))}))})},c=function(e){var t=a.useState(!1),n=(0,i.Z)(t,2),r=n[0],s=n[1],p=function(){s(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{isOpened:r,onClick:r?p:function(){s(!0)}}),(0,l.jsx)("div",{id:"api-documentation-side-navigation-pane",className:"sticky-container".concat(r&&" opened"),children:(0,l.jsx)("div",{className:"sideMenu sticky-element",children:(0,l.jsxs)("div",{className:"sideMenu-large",children:[e.header,(0,l.jsx)(d,{items:e.items,setActiveItem:function(t){e.setActiveItemId(t),r&&p()},activeItem:e.activeItemId,apiName:e.apiName})]})})})]})}},21017:function(e,t,n){"use strict";n(60806);var i=n(23109),a=n(46764),o=(n(67294),n(61686)),r=n(73351),s=n(75813),l=n(85893);t.Z=function(e){var t=e.tutorialsMetadata,n=e.apis;return(0,l.jsxs)("div",{className:"related-tutorials",children:[(0,l.jsx)(i.D,{className:"documentation-title",children:"Tutorials"}),(0,l.jsx)("div",{className:"tutorials-list-section",children:t&&t.length>0?(0,l.jsx)(s.Z,{apis:n,tutorialsToShow:t}):(0,l.jsx)(a.u,{isMuted:!0,children:"This API does not have published tutorials yet."})}),(0,l.jsx)("div",{className:"see-all-tutorials-link",children:(0,l.jsx)(r.D,{href:o.eU,children:"See all tutorials"})})]})}},75813:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(92809),a=(n(57779),n(86668)),o=n(33304),r=n(6656),s=n(73351),l=n(39209),p=n(61890),d=n(5880),c=n(85893);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var h=function(e){var t=function(){return m?(0,c.jsx)(c.Fragment,{children:m.map((function(e){return(0,c.jsx)(a.u,{content:e.displayName,children:(0,c.jsx)("div",{style:{marginRight:8,flexShrink:0,width:20,height:20},children:(0,c.jsx)(p.B,{apiGroupId:e.id,id:e.id,fill:e.color,className:"grid-icon"},e.id)})},e.id)}))}):(0,c.jsx)(c.Fragment,{})},n=function(){return e.durationInMinutes?(0,c.jsx)(o.C,{className:"badge no-text-transform",backgroundColor:"#008be1",children:"".concat(e.durationInMinutes," min")}):(0,c.jsx)(c.Fragment,{})},i=function(e){return m&&m[0]?(0,c.jsx)("div",{className:"thumbnail-container",style:{backgroundColor:"".concat(m[0].backgroundColor),width:"100%",height:"100%"},children:(0,c.jsx)(p.B,{apiGroupId:m[0].id,id:m[0].id,fill:m[0].color,className:"group-icon iui-picture"},m[0].id)}):(0,c.jsx)(d.Z,{className:e?"tutorial-tile-thumbnail-placeholder":"tutorial-tile-thumbnail-placeholder-not-clickable"})},m=function(e){var t,n=l.q.apiGroups,i=[],a=u(e);try{var o=function(){var e=t.value,a=n.find((function(t){return t.id===e}));a&&i.push(a)};for(a.s();!(t=a.n()).done;)o()}catch(r){a.e(r)}finally{a.f()}return i}(e.groups);return e.href?(0,c.jsx)(s.D,{href:e.href,children:(0,c.jsx)(r.n,{className:"tutorial-tile",name:e.name,description:(0,c.jsx)(a.u,{content:e.description,placement:"bottom",children:(0,c.jsx)("div",{children:e.description})}),thumbnail:e.thumbnail?e.thumbnail:i(!0),badge:(0,c.jsx)(n,{}),metadata:(0,c.jsx)(t,{})})}):(0,c.jsx)(r.n,{className:"tutorial-tile",name:e.name,description:(0,c.jsx)(a.u,{content:e.description,placement:"bottom",children:(0,c.jsx)("div",{children:e.description})}),thumbnail:e.thumbnail?e.thumbnail:i(!1),badge:(0,c.jsx)(o.C,{backgroundColor:"#9ba5ae",className:"badge no-text-transform",children:"Coming soon"}),metadata:(0,c.jsx)(t,{})})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=function(e){var t=e.apis,n=e.tutorialsToShow;return(0,c.jsx)("div",{className:"tutorial-tile-list",children:n&&n.filter((function(e){return e&&e.tile})).map((function(e){var n=new Set;if(t){var a,o,r=g(null!==(a=e.tile.relatedApiIds)&&void 0!==a?a:[]);try{var s=function(){var e=o.value,i=t.find((function(t){return(null===t||void 0===t?void 0:t.path)===e}));i&&n.add(i.apiGroupId)};for(r.s();!(o=r.n()).done;)s()}catch(l){r.e(l)}finally{r.f()}}return(0,c.jsx)(h,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({groups:Array.from(n)},e.tile),e.title)}))})}},94588:function(e,t,n){"use strict";var i,a;n.d(t,{l:function(){return i},L:function(){return a}}),function(e){e.DesignElementClassificationV1="designelementclassification",e.IssuesV1="issues-v1",e.VisualizationV1="visualization",e.ITwinUnrealV1="itwin-unreal"}(i||(i={})),function(e){e.ChangedElements="changedelements",e.ClashDetection="clashdetection",e.ContextCapture="contextcapture",e.DesignElementClassification="designelementclassification",e.Insights="insights",e.Reporting="insights/reporting",e.Issues="issues",e.Library="library",e.Projects="projects",e.RealityData="realitydata",e.Storage="storage",e.Synchronization="synchronization",e.Transformations="transformations",e.Validation="validation",e.Visualization="visualization",e.Webhooks="webhooks",e.iModels="imodels",e.ITwinUnreal="itwin-unreal"}(a||(a={}))},69144:function(e,t,n){"use strict";n.d(t,{s:function(){return i},U:function(){return c}});var i,a=n(86818),o=n(68216),r=n(25997),s=n(7276),l=n(94588);function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}!function(e){e.Overview="overview",e.Documentation="documentation",e.Tutorials="tutorials",e.Samples="samples",e.ReleaseNotes="release-notes",e.Reference="operations",e.SupportedFormats="supported-formats",e.CCImageCollection="cc-ic",e.CCOrientations="cc-ori",e.RDDetails="rd-details",e.ApiKeys="api-keys",e.Events="events",e.BlueprintApiReference="blueprint-api-reference"}(i||(i={}));var c=function(){function e(){(0,o.Z)(this,e)}return(0,r.Z)(e,null,[{key:"allApiGroups",get:function(){return(0,a.Z)(s.vf)}},{key:"menuItems",get:function(){return[{id:i.Overview,children:[],level:"1",displayName:"Overview",path:"/".concat(i.Overview)},{id:i.SupportedFormats,children:[],level:"1",displayName:"Supported formats",renderFunc:function(e){return e.apiPath===l.L.Synchronization},path:"/".concat(i.SupportedFormats)},{id:i.CCImageCollection,children:[],level:"1",displayName:"CC Image Collection",renderFunc:function(e){return e.apiPath===l.L.ContextCapture},path:"/".concat(i.CCImageCollection)},{id:i.CCOrientations,children:[],level:"1",displayName:"CC Orientations",renderFunc:function(e){return e.apiPath===l.L.ContextCapture},path:"/".concat(i.CCOrientations)},{id:i.RDDetails,children:[],level:"1",displayName:"RealityData Properties",renderFunc:function(e){return e.apiPath===l.L.RealityData},path:"/".concat(i.RDDetails)},{id:i.Events,children:[],level:"1",displayName:"Events",renderFunc:function(e){return e.apiPath===l.L.Webhooks},path:"/".concat(i.Events)},{id:i.Tutorials,children:[],level:"1",displayName:"Tutorials",path:"/".concat(i.Tutorials),renderFunc:function(e){var t=e.tutorials;return!(null===t||void 0===t||!t.length)}},{id:i.Samples,children:[],level:"1",displayName:"Samples",path:"/".concat(i.Samples),renderFunc:function(){return!0}},{id:i.Reference,children:[],level:"1",displayName:"Reference",renderFunc:function(e){return e.apiPath!==l.L.Visualization},path:"/".concat(i.Reference)},{id:i.ReleaseNotes,children:[],level:"1",displayName:"Release notes",renderFunc:function(e){return e.apiPath!==l.L.Visualization},path:"/".concat(i.ReleaseNotes)},{id:i.ApiKeys,children:[],level:"1",displayName:"API Keys",renderFunc:function(e){var t=e.apiPath;return t===l.L.Reporting||t===l.L.Insights},path:"/".concat(i.ApiKeys)}]}},{key:"getMenuItems",value:function(t,n){return e.menuItems.filter((function(e){return!e.renderFunc||e.renderFunc({apiPath:t,tutorials:n})}))}},{key:"getMenuItemsWithOperations",value:function(t,n,a){return e.getMenuItems(t,a).map((function(e){if(e.id===i.Reference){var t,a=p(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;e.children.push({id:o.tag,children:o.items.map((function(t){return{id:t.name,children:[],level:"3",displayName:"".concat(t.displayName),path:"".concat(e.path,"/").concat(t.name),prefix:t.method}})).sort((function(e,t){return e.displayName<t.displayName?-1:1})),level:"2",displayName:"".concat(o.tag)})}}catch(r){a.e(r)}finally{a.f()}}return e.children=e.children.sort((function(e,t){return"Untagged"===t.displayName?-1:"Untagged"===e.displayName?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})),e}))}}]),e}()},57706:function(e,t,n){"use strict";n.d(t,{Y:function(){return G}});n(809);var i=n(35986),a=n(22544),o=n(6198),r=n(78865),s=n(61876),l=n(48530),p=n(2394),d=n(10694),c=n(97481),u=n(8996),m=n(61810),h=n(61882),k=n(94530),g=n(83906),y=n(95016),f=n(76715),T=n(12485),w=n(54746),b=n(1962),v=n(70880),N=n(33907),x=n(68017),C=n(41905),I=n(115),S=n(26100),A=n(50372),P=n(92058),j=n(54625),R=n(90304),_=n(88774),M=n(81968),E=n(6937),D=n(31086),B=n(75200),q=n(93493),O=n(76737),L=n(20398),z=n(94922),U=n(91272),W=n(84514),H=[i.Pu,a.Pu,o.Pu,s.Pu,l.Pu,p.Pu,d.Pu,c.Pu,u.Pu,m.Pu,h.Pu,k.Pu,g.Pu,y.Pu,f.Pu,T.Pu,w.Pu,b.Pu,v.Pu,N.Pu,x.Pu,C.Pu,I.Pu,S.Pu,A.Pu,P.Pu,j.Pu,R.Pu,_.Pu,r.Pu,M.Pu,E.Pu,D.Pu,B.Pu,q.Pu,O.Pu,z.Pu,U.Pu,L.Pu,W.Pu];function G(e){return H.filter((function(t){var n;return t.tile&&(null===(n=t.tile.relatedApiIds)||void 0===n?void 0:n.includes(e))}))}},33543:function(){},31345:function(){},5886:function(){},67988:function(){},60806:function(){}}]);