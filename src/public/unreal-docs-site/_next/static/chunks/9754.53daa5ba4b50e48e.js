"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9754],{9754:function(e,n,t){t.r(n),n.default='## CC Orientations\n\n*CC Orientations* is an XML format that stores Images and Point clouds positioning information, for usage in *ContextCapture API* or *ContextCapture* desktop applications.\n\n# File format\n\n## Root node\n\n```xml\n<?xml version="1.0" encoding="utf-8"?>\n<BlocksExchange version="2.1">\n\n</BlocksExchange>\n```\n\nThis is the node that will contain all the subsequent sections.\n\n## Spatial Reference Systems\n\n```xml\n\t<SpatialReferenceSystems>\n\t\t<SRS>\n\t\t\t\x3c!-- SRS Identifier --\x3e\n\t\t\t<Id>0</Id>\n\t\t\t\x3c!-- User-friendly SRS name. --\x3e\n\t\t\t<Name>Lambert 93</Name>\n\t\t\t\x3c!-- The spatial reference system definition can be either a Well Known Text definition (e.g. WGS84), "EPSG: " or a PROJ.4 definition. --\x3e\n\t\t\t<Definition>EPSG:2154</Definition>\n\t\t</SRS>\n\t</SpatialReferenceSystems>\n```\n\nThis node is used to provide the list of SRS used in the *CC Orientations*. Multiple SRS can be defined here. `<Id>`s have to be integer.\n\n## Block\n\nThe block is the main component of the *CC Orientations*. We will split it in different section for easier understanding.\n\n### Base information\n\n```xml\n<Block>\n    \x3c!-- Block name and description are optional but recommended --\x3e\n    <Name>My first CCOrientations</Name>\n    <Description>This is my first CCOrientations</Description>\n    \x3c!-- The type of block is optional. Supported types: Generic (default if not specified), Aerial, Nadir and Orbit. --\x3e\n    <Type>Nadir</Type>\n    \x3c!-- Minmum and maximum viewing distance can be optionally provided with <MinimumViewingDistance> and <MaximumViewingDistance> tags --\x3e\n    <MinimumViewingDistance>150</MinimumViewingDistance>\n    <MaximumViewingDistance>500</MaximumViewingDistance>\n    \x3c!-- ID of the base SRS used in the block. By default, the spatial reference system is assumed to be a local Cartesian coordinate system. --\x3e\n    <SRSId>0</SRSId>\n</Block>\n```\n\n*Name* and *Description* are optional, but we recommend you use them for prettier import in *ContextCapture*.\n\n*Type* is optional. If your acquisition corresponds to an aerial flight - that is Nadir+Oblique images - we recommend you use the *Aerial* type. If your acquisition consists only of nadir images, use the *Nadir* type. Finally, if you are orbiting around a structure - like a Telecom Tower, use the *Orbit* type.\n\n*MinimumViewingDistance* and *MaximumViewingDistance* are used for more robust computations. They apply to all the images in the *CC Orientations*. If you are using *Nadir* block type, we strongly recommend you set these values based on the height of your flight.\n\nFinally, *SRSId* should point to an existing id in the *SpatialReferenceSystems* section.\n\n### Photogroups\n\nA photogroup regroups images sharing the same optical properties - image dimensions, focal length, sensor size, distortion, etc. Multiple photogroups are allowed in a *CC Orientations*.\n\n```xml\n<Photogroups>\n    \x3c!-- All photos taken using the same physical camera, with identical focal length and dimensions must be gathered in a photogroup. --\x3e\n    <Photogroup>\n        \x3c!-- Optional a different spatial reference system can be specified for each photogroup with the <SRSId> tag. By default, the SRS of the block is assumed. --\x3e\n        <SRSId>0</SRSId>\n        \x3c!-- Optionally, a name with the <Name> tag, and a description with a <Description> tag. --\x3e\n        <Name>Sony A5000 - 50mm</Name>\n        <Description>Acquired on 2020-09-06</Description>\n        \x3c!-- Image dimensions, in pixels. --\x3e\n        <ImageDimensions>\n            <Width>5456</Width>\n            <Height>3632</Height>\n        </ImageDimensions>\n        \x3c!-- Optional camera model type Perspective (default) or Fisheye --\x3e\n        <CameraModelType>Perspective</CameraModelType>\n        \x3c!-- Optional camera model band Visible (default) or Thermal --\x3e\n        <CameraModelBand>Visible</CameraModelBand>\n        \x3c!-- Optional multicamera rig index (no rig is used if this tag is unspecified). --\x3e\n        \x3c!-- <Rig>1</Rig> --\x3e\n        \x3c!-- Sensor\'s largest dimension, in millimeters. --\x3e\n        <SensorSize>23.5</SensorSize>\n        \x3c!-- Focal length, in millimeters. This can be either the nominal specification or a closer estimate. --\x3e\n        <FocalLength>50</FocalLength>\n        \x3c!-- CameraOrientation: XRightYDown (default), XRightYUp (more frequent in photogrammetry), XLeftYDown, XLeftYUp, XDownYRight, XDownYLeft, XUpYRight, XUpYLeft --\x3e\n        <CameraOrientation>XRightYDown</CameraOrientation>\n        \x3c!-- Principal point, with respect to the sensor center. This field is optional: by default, the sensor center is used as an initial estimate of the principal point. --\x3e\n        <PrincipalPoint>\n            \x3c!-- 2D image position of the principal point, in pixels. --\x3e\n            \x3c!-- The origin is the center of the upper-left image pixel, the x-axis is oriented to the right side of the image, and the y-axis is oriented to the bottom of the image. --\x3e\n            <x>2799.72836989663</x>\n            <y>1664.19084530151</y>\n        </PrincipalPoint>\n        \x3c!-- Lens distortion coefficients. This field is optional: by default, no distortion is assumed as an initial estimate. --\x3e\n        \x3c!-- Distortion coefficients correspond to the classical Brown\'s distortion model, as described in http://en.wikipedia.org/wiki/Distortion_(optics). --\x3e\n        <Distortion>\n            <K1>0.091784043461384</K1>\n            <K2>-0.389773692160792</K2>\n            <K3>-0.164530007624487</K3>\n            <P1>0.00338559469641398</P1>\n            <P2>0.00195577545434898</P2>\n        </Distortion>\n        \x3c!-- Fisheye focal matrix used only for the camera model type Fisheye. --\x3e\n        <FisheyeFocalMatrix>\n            <M_00>1960</M_00>\n            <M_01>0</M_01>\n            <M_10>0</M_10>\n            <M_11>1960</M_11>\n        </FisheyeFocalMatrix>\n        \x3c!-- Fisheye distortion coefficients used only for the camera model type Fisheye. --\x3e\n        <FisheyeDistortion>\n            <P0>0</P0>\n            <P1>1</P1>\n            <P2>0</P2>\n            <P3>0</P3>\n            <P4>0</P4>\n        </FisheyeDistortion>\n        \x3c!-- Multiple photos in a photogroup --\x3e\n        <Photo>\n            \x3c!-- The ID of a photograph must be unique over the whole block (in other words, even across other photogroups). If you are using Rig, we use this id for photo order--\x3e\n            <Id>0</Id>\n            \x3c!-- Path of the image based on its CCImageCollection id --\x3e\n            <ImagePath>3e4742f9-87fc-4bfa-8ee3-6103555f325f/DSC03885.jpg</ImagePath>\n            \x3c!-- Optional path of the image mask based on its CCImageCollection id --\x3e\n            <MaskPath>7f7a664f-e11b-4658-84fa-5ada1b0ee7c1/DSC03885_msk.jpg</MaskPath>\n            \x3c!-- Optional component Id: 1 is the main component (default), 0 is no component. Photos with incomplete pose cannot belong to the main component --\x3e\n            <Component>0</Component>\n            \x3c!-- Exterior orientation of the camera, as estimated by navigation devices or aerotriangulation. This field is optional. --\x3e\n            <Pose>\n                \x3c!-- 3D rotation of the camera in the spatial reference system defined above. --\x3e\n                \x3c!-- It defines the rotation matrix transforming world coordinates (in the specified SRS)--\x3e\n                \x3c!-- into camera coordinates (with axes defined by the CameraOrientation of the photogroup). --\x3e\n                \x3c!-- The rotation is optional: the pose can be limited to the 3D position of the camera center (e.g. when GPS position only is available). --\x3e\n                <Rotation>\n                    \x3c!-- A 3x3 matrix, using the <M_ij> tags, where M_ij denotes the coefficient of the (i+1)th row and the (j+1)th column of the rotation matrix. --\x3e\n                    <M_00>-0.9999982912233401</M_00>\n                    <M_01>-0.001636319085375301</M_01>\n                    <M_02>-0.0008602425863163225</M_02>\n                    <M_10>-0.001631068695467463</M_10>\n                    <M_11>0.9999802528616577</M_11>\n                    <M_12>-0.00606906089589293</M_12>\n                    <M_20>0.0008701565192966738</M_20>\n                    <M_21>-0.006067647409696231</M_21>\n                    <M_22>-0.9999812130648239</M_22>\n                </Rotation>\n                \x3c!-- 3D position of the camera center in the spatial reference system defined above. --\x3e\n                \x3c!-- Depending on the SRS, x/y may stand either for longitude/latitude, for map projection coordinates, or for something else. --\x3e\n                \x3c!-- Depending on the SRS, z may stand either for a geoid height, for an orthometric height, or for something else. --\x3e\n                <Center>\n                    <x>651999.7159189156</x>\n                    <y>6863073.633923346</y>\n                    <z>1318.897690166719</z>\n                </Center>\n            </Pose>\n            \x3c!-- Optional depth information can be provided with <NearDepth>, <MedianDepth>, and <FarDepth> tags --\x3e\n            \x3c!-- Optional Exif data (each exif data property is optional) --\x3e\n            <ExifData>\n                <ImageDimensions>\n                    <Width>5456</Width>\n                    <Height>3632</Height>\n                </ImageDimensions>\n                <PixelDimensions>\n                    <Width>0.02</Width>\n                    <Height>0.02</Height>\n                </PixelDimensions>\n                <GPS>\n                    <Latitude>45.5686684</Latitude>\n                    <Longitude>2.6551104</Longitude>\n                    <Altitude>1589.5469</Altitude>\n                </GPS>\n                <FocalLength>50</FocalLength>\n                <FocalLength35mmEq>75</FocalLength35mmEq>\n                <Make>SONY</Make>\n                <Model>ILCE-5000</Model>\n                <LensModel>E 50mm F1.8 OSS</LensModel>\n                <DateTimeOriginal>2020-04-29T06:40:26</DateTimeOriginal>\n            </ExifData>\n        </Photo>\n    </Photogroup>\n</Photogroups>\n```\n\nSome precisions:\n\n* *FocalLength* is the nominal or closer estimate of the focal length in millimeters. *SensorSize* is the largest dimension (usually the width) of the sensor in millimeters.\n* *CameraOrientation* describes the camera. For more information on this topic, on rotations and distortions, see this [documentation page](https://docs.bentley.com/LiveContent/web/ContextCapture%20Help-v10/en/GUID-2D452A8A-A4FE-450D-A0CA-9336DCF1238A.html).\n* If you are using the Rig option: this option enforce a rigid registration between corresponding images in photogroup. Images correspondence is based on photo ids: if you have two photogroups with 3 images each, numbered 0-1-2 and 3-4-5 that are rigged, 0 goes with 3, 1 with 4 and 2 with 5.\n\nThe simplest photogroup you can create will look like this:\n\n```xml\n<Photogroup>\n    <Name>My Photogroup</Name>\n    <ImageDimensions>\n        <Width>5456</Width>\n        <Height>3632</Height>\n    </ImageDimensions>\n    <CameraModelType>Perspective</CameraModelType>\n    <CameraModelBand>Visible</CameraModelBand>\n    <FocalLength>50</FocalLength>\n    <SensorSize>23.5</SensorSize>\n    <CameraOrientation>XRightYDown</CameraOrientation>\n    <Photo>\n        <Id>0</Id>\n        <ImagePath>3e4742f9-87fc-4bfa-8ee3-6103555f325f/DSC03885.JPG</ImagePath>\n        <Component>0</Component>\n    </Photo>\n    <Photo>\n        <Id>1</Id>\n        <ImagePath>3e4742f9-87fc-4bfa-8ee3-6103555f325f/DSC03886.JPG</ImagePath>\n        <Component>0</Component>\n    </Photo>\n    <Photo>\n        <Id>2</Id>\n        <ImagePath>3e4742f9-87fc-4bfa-8ee3-6103555f325f/DSC03887.JPG</ImagePath>\n        <Component>0</Component>\n    </Photo>\n</Photogroup>\n```\n\nAcross photogroups, we need at least 3 images in order to process a *CC Orientations* in *ContextCapture* or *CCCS*.\n\n### Control points\n\n```xml\n<ControlPoints>\n    \x3c!-- Optionally, a different spatial reference system can be specified with the <SRSId> tag.--\x3e\n    \x3c!-- By default, the SRS of the block is assumed. --\x3e\n    <ControlPoint>\n        <Name>Control point #1</Name>\n        \x3c!-- Optionally, a different spatial reference system can be specified for each control point with the <SRSId> tag.--\x3e\n        \x3c!-- By default, the SRS of the control points container is assumed. --\x3e\n        \x3c!-- If specified, a control point can be Full (default), Horizontal or Vertical --\x3e\n\t\t<Category>Full</Category>\n        \x3c!-- 3D position of the control point in the active spatial reference system. --\x3e\n        \x3c!-- Depending on the SRS, x/y may stand either for longitude/latitude, for map projection coordinates, or for something else. --\x3e\n        \x3c!-- Depending on the SRS, z may stand either for a geoid height, for an orthometric height, or for something else. --\x3e\n        <Position>\n            <x>652788.0525588237</x> \x3c!-- Not needed if Category:Vertical --\x3e\n            <y>6863015.362218254</y> \x3c!-- Not needed if Category:Vertical --\x3e\n            <z>78.07000000122935</z> \x3c!-- Not needed if Category:Horizontal --\x3e\n        </Position>\n        \x3c!-- Optionally, a control point may be a check point (default: false)--\x3e\n        <CheckPoint>true</CheckPoint>\n        \x3c!-- If specified, a control point may have accuracies --\x3e\n        <HorizontalAccuracy>0.01</HorizontalAccuracy> \x3c!-- Not needed if Category:Vertical --\x3e\n        <VerticalAccuracy>0.10</VerticalAccuracy> \x3c!-- Not needed if Category:Horizontal --\x3e\n\n        \x3c!-- Image measurements --\x3e\n        <Measurement>\n            \x3c!-- ID of the photo where the measurement is taken. The measurements of a control point must have different photo IDs. --\x3e\n            <PhotoId>151</PhotoId>\n            \x3c!-- 2D image position of the measurement, in pixels. --\x3e\n            \x3c!-- The origin is the center of the upper-left image pixel, the x-axis is oriented to the right side of the image, and the y-axis is oriented to the bottom of the image. --\x3e\n            <x>7270.31</x>\n            <y>6599.44</y>\n        </Measurement>\n        <Measurement>\n            <PhotoId>158</PhotoId>\n            <x>1496.69</x>\n            <y>6589.94</y>\n        </Measurement>\n        <Measurement>\n            <PhotoId>2104</PhotoId>\n            <x>4820.34</x>\n            <y>5631.15</y>\n        </Measurement>\n    </ControlPoint>\n</ControlPoints>\n```\n\n*ControlPoints* are not mandatory. They are used to register the images in a specific SRS if needed, or to check the quality of the calibration.\n\n### Tiepoints\n\n```xml\n<TiePoints>\n    \x3c!-- Optionally, a different spatial reference system can be specified with the <SRSId> tag. By default, the SRS of the block is assumed. --\x3e\n    <TiePoint>\n        <Name>Left window corner</Name> \x3c!-- Optional, recommended for User Tie Points --\x3e\n        <Description></Description> \x3c!-- Description field is only used for internal metadata, do not modify it --\x3e\n        \x3c!-- Optionally, a different spatial reference system can be specified for each tie point with the <SRSId> tag. By default, the SRS of the tie points container is assumed. --\x3e\n        \x3c!-- Optional id (required for a User tie point if it is referenced in a positioning constraint). --\x3e\n\t\t<id>0</id>\n        <Color> \x3c!-- Optional, value between 0 and 1 --\x3e\n\t\t\t<Red>0.59</Red>\n\t\t\t<Green>1.0</Green>\n        \t<Blue>0.0</Blue>\n\t\t</Color>\n        \x3c!-- If specified, a tie point may be a check point (default: false)--\x3e\n        <CheckPoint>true</CheckPoint>\n        \x3c!-- Optional position of the tie point in the active spatial reference system --\x3e\n        <Position>\n            <x>652119.8871409688</x>\n            <y>6863304.305716386</y>\n            <z>87.79328384995461</z>\n        </Position>\n        <Measurement>\n\t\t\t\x3c!-- Optional measurement type User or Automatic (default) --\x3e\n\t\t\t<Type>User</Type>\n\t\t\t<PhotoId>146</PhotoId>\n\t\t\t\x3c!-- 2D image position of the measurement, in pixels.--\x3e\n      \x3c!-- The origin is the center of the upper-left image pixel, the x-axis is oriented to the right side of the image, and the y-axis is oriented to the bottom of the image. --\x3e\n            <x>3324.26001</x>\n            <y>9930.269531</y>\n\t\t</Measurement>\n    </TiePoint>\n</TiePoints>\n```\n\nTie points can be stored in an external file:\n\n```xml\n<TiePoints>\n    <Path>TiePoints.xml</Path>\n</TiePoint>\n```\n\nWith `TiePoints.xml` looking like:\n\n```xml\n<?xml version="1.0" encoding="utf-8"?>\n<TiePoint>\n\t<Position>\n\t\t<x>-34.4750012078745</x>\n\t\t<y>1.15274149210525</y>\n\t\t<z>-8.18177676215297</z>\n\t</Position>\n\t<Color>\n\t\t<Red>0.501960784313725</Red>\n\t\t<Green>0.498039215686275</Green>\n\t\t<Blue>0.450980392156863</Blue>\n\t</Color>\n\t<Measurement>\n\t\t<PhotoId>0</PhotoId>\n\t\t<x>1660.05517578125</x>\n\t\t<y>3084.59497070313</y>\n\t</Measurement>\n\t<Measurement>\n\t\t<PhotoId>1</PhotoId>\n\t\t<x>1346.03332519531</x>\n\t\t<y>3067.69970703125</y>\n\t</Measurement>\n\t<Measurement>\n\t\t<PhotoId>2</PhotoId>\n\t\t<x>1366.38330078125</x>\n\t\t<y>2920.05126953125</y>\n\t</Measurement>\n</TiePoint>\n<TiePoint>\n\t<Position>\n\t\t<x>-28.2683141902494</x>\n\t\t<y>0.235531157377353</y>\n\t\t<z>-8.31343880296754</z>\n\t</Position>\n\t<Color>\n\t\t<Red>0.584313725490196</Red>\n\t\t<Green>0.592156862745098</Green>\n\t\t<Blue>0.513725490196078</Blue>\n\t</Color>\n\t<Measurement>\n\t\t<PhotoId>0</PhotoId>\n\t\t<x>3169.814453125</x>\n\t\t<y>3148.72875976563</y>\n\t</Measurement>\n\t<Measurement>\n\t\t<PhotoId>1</PhotoId>\n\t\t<x>2818.83056640625</x>\n\t\t<y>3156.552734375</y>\n\t</Measurement>\n\t<Measurement>\n\t\t<PhotoId>2</PhotoId>\n\t\t<x>2755.80639648438</x>\n\t\t<y>3047.31640625</y>\n\t</Measurement>\n\t<Measurement>\n\t\t<PhotoId>3</PhotoId>\n\t\t<x>2708.74145507813</x>\n\t\t<y>3092.60327148438</y>\n\t</Measurement>\n</TiePoint>\n```\n\n## Constraints\n\n```xml\n<PositioningConstraints>\n    <OriginConstraint> \x3c!-- Maximum one Origin constraint --\x3e\n        <O>2</O> \x3c!-- Tiepoint id --\x3e\n    </OriginConstraint>\n    <ScaleConstraint> \x3c!-- Multiple allowed --\x3e\n        <A>0</A>\n        <B>3</B>\n        <DistanceAB>56.350</DistanceAB>\n    </ScaleConstraint>\n    <AxisConstraint> \x3c!-- Maximum one Axis or Orientation constraint --\x3e\n        <A>0</A>\n        <B>3</B>\n        <AxisAB>z</AxisAB> \x3c!-- x, y, or z --\x3e\n    </AxisConstraint>\n    <OrientationConstraint> \x3c!-- Maximum one Orientation or Axis constraint --\x3e\n        <A>0</A>\n        <B>3</B>\n        <C>2</C>\n        <AxisAB>z</AxisAB> \x3c!-- x, y or z --\x3e\n        <AxisSideC>upperX</AxisSideC> \x3c!-- lowerX, upperX, lowerY, upperY, lowerZ, or upperZ --\x3e\n    </OrientationConstraint>\n</PositioningConstraints>\n```\n\nPositioning constraints are optional.\n\n# Upload CC Orientations on *RDS/PWCS*\n\nYou can save the file as *CCOrientations.xml*. For lower space usage, you can zip it and name it as *CCOrientations.xmlz*. Tie points file can also be zipped. We recommend the tie points file be named *CCOrientations - Tiepoints.xml* or *CCOrientations - Tiepoints.xmlz*. Once the files are saved, create a Reality Data using *Reality Data API* with reality data type *CCOrientations*, and upload the file(s) to the root of the reality data.'}}]);