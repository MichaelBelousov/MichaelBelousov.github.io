(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6102],{99100:function(e,t,n){"use strict";var r;n.d(t,{U:function(){return o},_:function(){return s}}),function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO"}(r||(r={}));class o{constructor(e,t){this._nextPolicy=e,this._options=t}shouldLog(e){return this._options.shouldLog(e)}log(e,t){this._options.log(e,t)}}class s{constructor(e){this._logger=e}shouldLog(e){return!!this._logger&&e!==r.OFF&&e<=this._logger.minimumLogLevel}log(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)}}},31552:function(e,t,n){"use strict";n.d(t,{bM:function(){return ka}});var r=n(25934);const o="$",s="_";var i=n(34155);const a=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,c="undefined"!==typeof i&&!!i.version&&!!i.versions&&!!i.versions.node;function l(){return(0,r.Z)()}const p=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function d(e,t,n){return e&&t?e.split(t).join(n||""):e}function u(e){const t=e;return t&&"function"===typeof t.getToken&&(void 0===t.signRequest||t.getToken.length>0)}const m=new Error("ProxyPolicy is not supported in browser environment");function h(e){return{create:(e,t)=>{throw m}}}class g{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(e,t){const n=t;if(e)if(void 0!==n&&null!==n){const t=Array.isArray(n)?n:n.toString();this._rawQuery[e]=t}else delete this._rawQuery[e]}get(e){return e?this._rawQuery[e]:void 0}toString(){let e="";for(const t in this._rawQuery){e&&(e+="&");const n=this._rawQuery[t];if(Array.isArray(n)){const r=[];for(const e of n)r.push(`${t}=${e}`);e+=r.join("&")}else e+=`${t}=${n}`}return e}static parse(e){const t=new g;if(e){e.startsWith("?")&&(e=e.substring(1));let n="ParameterName",r="",o="";for(let s=0;s<e.length;++s){const i=e[s];switch(n){case"ParameterName":switch(i){case"=":n="ParameterValue";break;case"&":r="",o="";break;default:r+=i}break;case"ParameterValue":switch(i){case"&":t.set(r,o),r="",o="",n="ParameterName";break;default:o+=i}break;default:throw new Error("Unrecognized URLQuery parse state: "+n)}}"ParameterValue"===n&&t.set(r,o)}return t}}class f{setScheme(e){e?this.set(e,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(e){void 0===e||null===e||""===e?this._port=void 0:this.set(e.toString(),"PORT")}getPort(){return this._port}setPath(e){if(e){const t=e.indexOf("://");if(-1!==t){const n=e.lastIndexOf("/",t);this.set(-1===n?e:e.substr(n+1),"SCHEME")}else this.set(e,"PATH")}else this._path=void 0}appendPath(e){if(e){let t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}}getPath(){return this._path}setQuery(e){this._query=e?g.parse(e):void 0}setQueryParameter(e,t){e&&(this._query||(this._query=new g),this._query.set(e,t))}getQueryParameterValue(e){return this._query?this._query.get(e):void 0}getQuery(){return this._query?this._query.toString():void 0}set(e,t){const n=new b(e,t);for(;n.next();){const e=n.current();let t;if(e)switch(e.type){case"SCHEME":this._scheme=e.text||void 0;break;case"HOST":this._host=e.text||void 0;break;case"PORT":this._port=e.text||void 0;break;case"PATH":t=e.text||void 0,this._path&&"/"!==this._path&&"/"===t||(this._path=t);break;case"QUERY":this._query=g.parse(e.text);break;default:throw new Error(`Unrecognized URLTokenType: ${e.type}`)}}}toString(){let e="";return this._scheme&&(e+=`${this._scheme}://`),this._host&&(e+=this._host),this._port&&(e+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+=`?${this._query.toString()}`),e}replaceAll(e,t){e&&(this.setScheme(d(this.getScheme(),e,t)),this.setHost(d(this.getHost(),e,t)),this.setPort(d(this.getPort(),e,t)),this.setPath(d(this.getPath(),e,t)),this.setQuery(d(this.getQuery(),e,t)))}static parse(e){const t=new f;return t.set(e,"SCHEME_OR_HOST"),t}}class y{constructor(e,t){this.text=e,this.type=t}static scheme(e){return new y(e,"SCHEME")}static host(e){return new y(e,"HOST")}static port(e){return new y(e,"PORT")}static path(e){return new y(e,"PATH")}static query(e){return new y(e,"QUERY")}}class b{constructor(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=void 0!==t&&null!==t?t:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(v(this))switch(this._currentState){case"SCHEME":!function(e){const t=function(e){return C(e,(e=>function(e){const t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122}(e)))}(e);e._currentToken=y.scheme(t),v(e)?e._currentState="HOST":e._currentState="DONE"}(this);break;case"SCHEME_OR_HOST":!function(e){const t=O(e,":","/","?");v(e)?":"===S(e)?"://"===x(e,3)?(e._currentToken=y.scheme(t),e._currentState="HOST"):(e._currentToken=y.host(t),e._currentState="PORT"):(e._currentToken=y.host(t),"/"===S(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=y.host(t),e._currentState="DONE")}(this);break;case"HOST":!function(e){"://"===x(e,3)&&P(e,3);const t=O(e,":","/","?");e._currentToken=y.host(t),v(e)?":"===S(e)?e._currentState="PORT":"/"===S(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===S(e)&&P(e);const t=O(e,"/","?");e._currentToken=y.port(t),v(e)?"/"===S(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function(e){const t=O(e,"?");e._currentToken=y.path(t),v(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function(e){"?"===S(e)&&P(e);const t=function(e){let t="";e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength);return t}(e);e._currentToken=y.query(t),e._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function v(e){return e._currentIndex<e._textLength}function S(e){return e._text[e._currentIndex]}function P(e,t){v(e)&&(t||(t=1),e._currentIndex+=t)}function x(e,t){let n=e._currentIndex+t;return e._textLength<n&&(n=e._textLength),e._text.substring(e._currentIndex,n)}function C(e,t){let n="";for(;v(e);){const r=S(e);if(!t(r))break;n+=r,P(e)}return n}function O(e,...t){return C(e,(e=>-1===t.indexOf(e)))}var w="object"===typeof globalThis?globalThis:window,R="1.0.3",E=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var N=function(e){var t=new Set([e]),n=new Set,r=e.match(E);if(!r)return function(){return!1};var o=+r[1],s=+r[2],i=+r[3];if(null!=r[4])return function(t){return t===e};function a(e){return n.add(e),!1}function c(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(E);if(!r)return a(e);var l=+r[1],p=+r[2],d=+r[3];return null!=r[4]||o!==l?a(e):0===o?s===p&&i<=d?c(e):a(e):s<=p?c(e):a(e)}}(R),M=R.split(".")[0],T=Symbol.for("opentelemetry.js.api."+M),A=w;function I(e,t,n,r){var o;void 0===r&&(r=!1);var s=A[T]=null!==(o=A[T])&&void 0!==o?o:{version:R};if(!r&&s[e]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(i.stack||i.message),!1}if(s.version!==R){i=new Error("@opentelemetry/api: All API registration versions must match");return n.error(i.stack||i.message),!1}return s[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+"1.0.3."),!0}function q(e){var t,n,r=null===(t=A[T])||void 0===t?void 0:t.version;if(r&&N(r))return null===(n=A[T])||void 0===n?void 0:n[e]}function B(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+"1.0.3.");var n=A[T];n&&delete n[e]}var L,k=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z("verbose",this._namespace,e)},e}();function z(e,t,n){var r=q("diag");if(r)return n.unshift(t),r[e].apply(r,n)}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(L||(L={}));var j=function(){function e(){function e(e){return function(){var t=q("diag");if(t)return t[e].apply(t,arguments)}}var t=this;t.setLogger=function(e,n){var r,o;if(void 0===n&&(n=L.INFO),e===t){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=s.stack)&&void 0!==r?r:s.message),!1}var i=q("diag"),a=function(e,t){function n(n,r){var o=t[n];return"function"===typeof o&&e>=r?o.bind(t):function(){}}return e<L.NONE?e=L.NONE:e>L.ALL&&(e=L.ALL),t=t||{},{error:n("error",L.ERROR),warn:n("warn",L.WARN),info:n("info",L.INFO),debug:n("debug",L.DEBUG),verbose:n("verbose",L.VERBOSE)}}(n,e);if(i){var c=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";i.warn("Current logger will be overwritten from "+c),a.warn("Current logger will overwrite one already registered from "+c)}return I("diag",a,t,!0)},t.disable=function(){B("diag",t)},t.createComponentLogger=function(e){return new k(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),_=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new e(this._entries),o=0,s=t;o<s.length;o++){var i=s[o];r._entries.delete(i)}return r},e.prototype.clear=function(){return new e},e}();Symbol("BaggageEntryMetadata"),j.instance();function H(e){return void 0===e&&(e={}),new _(new Map(Object.entries(e)))}var U={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},D={set:function(e,t,n){null!=e&&(e[t]=n)}};function $(e){return Symbol.for(e)}var F,V=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},K=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},X=function(){function e(){}return e.prototype.active=function(){return V},e.prototype.with=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return t.call.apply(t,K([n],r))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Q=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},G="context",W=new X,J=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return I(G,e,j.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,Q([e,t,n],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return q(G)||W},e.prototype.disable=function(){this._getContextManager().disable(),B(G,j.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(F||(F={}));var Y="0000000000000000",Z="00000000000000000000000000000000",ee={traceId:Z,spanId:Y,traceFlags:F.NONE},te=function(){function e(e){void 0===e&&(e=ee),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),ne=$("OpenTelemetry Context Key SPAN");function re(e){return e.getValue(ne)||void 0}function oe(e,t){return e.setValue(ne,t)}function se(e){return e.deleteValue(ne)}function ie(e,t){return oe(e,new te(t))}function ae(e){var t;return null===(t=re(e))||void 0===t?void 0:t.spanContext()}var ce=/^([0-9a-f]{32})$/i,le=/^[0-9a-f]{16}$/i;function pe(e){return n=e.traceId,ce.test(n)&&n!==Z&&(t=e.spanId,le.test(t)&&t!==Y);var t,n}function de(e){return new te(e)}var ue=J.getInstance(),me=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(Boolean(null===t||void 0===t?void 0:t.root))return new te;var r,o=n&&ae(n);return"object"===typeof(r=o)&&"string"===typeof r.spanId&&"string"===typeof r.traceId&&"number"===typeof r.traceFlags&&pe(o)?new te(o):new te},e.prototype.startActiveSpan=function(e,t,n,r){var o,s,i;if(!(arguments.length<2)){2===arguments.length?i=t:3===arguments.length?(o=t,i=n):(o=t,s=n,i=r);var a=null!==s&&void 0!==s?s:ue.active(),c=this.startSpan(e,o,a),l=oe(a,c);return ue.with(l,i,void 0,c)}},e}();var he,ge,fe,ye=new me,be=function(){function e(e,t,n){this._provider=e,this.name=t,this.version=n}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):ye},e}(),ve=new(function(){function e(){}return e.prototype.getTracer=function(e,t){return new me},e}()),Se=function(){function e(){}return e.prototype.getTracer=function(e,t){var n;return null!==(n=this.getDelegateTracer(e,t))&&void 0!==n?n:new be(this,e,t)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:ve},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t)},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(he||(he={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(ge||(ge={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(fe||(fe={}));var Pe="trace",xe=function(){function e(){this._proxyTracerProvider=new Se,this.wrapSpanContext=de,this.isSpanContextValid=pe,this.deleteSpan=se,this.getSpan=re,this.getSpanContext=ae,this.setSpan=oe,this.setSpanContext=ie}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=I(Pe,this._proxyTracerProvider,j.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return q(Pe)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){B(Pe,j.instance()),this._proxyTracerProvider=new Se},e}(),Ce=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),Oe=$("OpenTelemetry Baggage Key");function we(e){return e.getValue(Oe)||void 0}function Re(e,t){return e.setValue(Oe,t)}function Ee(e){return e.deleteValue(Oe)}var Ne,Me="propagation",Te=new Ce,Ae=function(){function e(){this.createBaggage=H,this.getBaggage=we,this.setBaggage=Re,this.deleteBaggage=Ee}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return I(Me,e,j.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=D),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=U),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){B(Me,j.instance())},e.prototype._getGlobalPropagator=function(){return q(Me)||Te},e}(),Ie=J.getInstance(),qe=xe.getInstance();Ae.getInstance(),j.instance();function Be(e,t){return qe.setSpan(e,t)}!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(Ne||(Ne={}));const Le=Ie;var ke;!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(ke||(ke={}));class ze{constructor(e,t={}){this.originalResponse=e}get acceptRanges(){return this.originalResponse.acceptRanges}get cacheControl(){return this.originalResponse.cacheControl}get contentDisposition(){return this.originalResponse.contentDisposition}get contentEncoding(){return this.originalResponse.contentEncoding}get contentLanguage(){return this.originalResponse.contentLanguage}get blobSequenceNumber(){return this.originalResponse.blobSequenceNumber}get blobType(){return this.originalResponse.blobType}get contentLength(){return this.originalResponse.contentLength}get contentMD5(){return this.originalResponse.contentMD5}get contentRange(){return this.originalResponse.contentRange}get contentType(){return this.originalResponse.contentType}get copyCompletedOn(){}get copyId(){return this.originalResponse.copyId}get copyProgress(){return this.originalResponse.copyProgress}get copySource(){return this.originalResponse.copySource}get copyStatus(){return this.originalResponse.copyStatus}get copyStatusDescription(){return this.originalResponse.copyStatusDescription}get leaseDuration(){return this.originalResponse.leaseDuration}get leaseState(){return this.originalResponse.leaseState}get leaseStatus(){return this.originalResponse.leaseStatus}get date(){return this.originalResponse.date}get blobCommittedBlockCount(){return this.originalResponse.blobCommittedBlockCount}get etag(){return this.originalResponse.etag}get errorCode(){return this.originalResponse.errorCode}get isServerEncrypted(){return this.originalResponse.isServerEncrypted}get blobContentMD5(){return this.originalResponse.blobContentMD5}get lastModified(){return this.originalResponse.lastModified}get metadata(){return this.originalResponse.metadata}get requestId(){return this.originalResponse.requestId}get clientRequestId(){return this.originalResponse.clientRequestId}get version(){return this.originalResponse.version}get encryptionKeySha256(){return this.originalResponse.encryptionKeySha256}get contentCrc64(){return this.originalResponse.contentCrc64}get blobBody(){throw Error("Quick query in browser is not supported yet.")}get readableStreamBody(){}get _response(){return this.originalResponse._response}}var je=n(5607);class _e{}var He=function(e,t){return(He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};Object.create;Object.create;function Ue(e){var t;const{requestOptions:n,tracingOptions:r}=e;let o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["requestOptions","tracingOptions"]);return n&&(o=Object.assign(Object.assign({},o),n)),r&&(o.tracingContext=r.tracingContext,o.spanOptions=null===(t=r)||void 0===t?void 0:t.spanOptions),o}function De(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function $e(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}class Fe{constructor(e={},t){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,n){const r=(e,r)=>{throw new Error(`"${n}" with value "${t}" should satisfy the constraint "${e}": ${r}.`)};if(e.constraints&&void 0!=t){const n=t,{ExclusiveMaximum:o,ExclusiveMinimum:s,InclusiveMaximum:i,InclusiveMinimum:a,MaxItems:c,MaxLength:l,MinItems:p,MinLength:d,MultipleOf:u,Pattern:m,UniqueItems:h}=e.constraints;void 0!=o&&n>=o&&r("ExclusiveMaximum",o),void 0!=s&&n<=s&&r("ExclusiveMinimum",s),void 0!=i&&n>i&&r("InclusiveMaximum",i),void 0!=a&&n<a&&r("InclusiveMinimum",a);const g=t;if(void 0!=c&&g.length>c&&r("MaxItems",c),void 0!=l&&g.length>l&&r("MaxLength",l),void 0!=p&&g.length<p&&r("MinItems",p),void 0!=d&&g.length<d&&r("MinLength",d),void 0!=u&&n%u!==0&&r("MultipleOf",u),m){const e="string"===typeof m?new RegExp(m):m;"string"===typeof t&&null!==t.match(e)||r("Pattern",m)}h&&g.some(((e,t,n)=>n.indexOf(e)!==t))&&r("UniqueItems",h)}}serialize(e,t,n,r={}){var i,c,l;const d={rootName:null!==(i=r.rootName)&&void 0!==i?i:"",includeRoot:null!==(c=r.includeRoot)&&void 0!==c&&c,xmlCharKey:null!==(l=r.xmlCharKey)&&void 0!==l?l:s};let u={};const m=e.type.name;n||(n=e.serializedName),null!==m.match(/^Sequence$/i)&&(u=[]),e.isConstant&&(t=e.defaultValue);const{required:h,nullable:g}=e;if(h&&g&&void 0===t)throw new Error(`${n} cannot be undefined.`);if(h&&!g&&void 0==t)throw new Error(`${n} cannot be null or undefined.`);if(!h&&!1===g&&null===t)throw new Error(`${n} cannot be null.`);if(void 0==t)u=t;else if(this.validateConstraints(e,t,n),null!==m.match(/^any$/i))u=t;else if(null!==m.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i))u=function(e,t,n){if(null!==n&&void 0!==n)if(null!==e.match(/^Number$/i)){if("number"!==typeof n)throw new Error(`${t} with value ${n} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!==typeof n.valueOf())throw new Error(`${t} with value "${n}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if("string"!==typeof n.valueOf()||(r=n,!a.test(r)))throw new Error(`${t} with value "${n}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!==typeof n)throw new Error(`${t} with value ${n} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){const e=typeof n;if("string"!==e&&"function"!==e&&!(n instanceof ArrayBuffer)&&!ArrayBuffer.isView(n)&&("function"!==typeof Blob&&"object"!==typeof Blob||!(n instanceof Blob)))throw new Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}var r;return n}(m,n,t);else if(null!==m.match(/^Enum$/i)){u=function(e,t,n){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some((e=>"string"===typeof e.valueOf()?e.toLowerCase()===n.toLowerCase():e===n)))throw new Error(`${n} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return n}(n,e.type.allowedValues,t)}else null!==m.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?u=function(e,t,n){if(void 0!=t)if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"===typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${n} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=function(e){if(!e)return;"string"===typeof e.valueOf()&&(e=new Date(e));return Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)&&!function(e){return p.test(e)}(t))throw new Error(`${n} must be a string in ISO 8601 format. Instead was "${t}".`);return t}(m,t,n):null!==m.match(/^ByteArray$/i)?u=function(e,t){let n="";if(void 0!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);n=De(t)}return n}(n,t):null!==m.match(/^Base64Url$/i)?u=function(e,t){let n="";if(void 0!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);n=function(e){if(!e)return;if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(e,t){let n=e.length;for(;n-1>=0&&e[n-1]===t;)--n;return e.substr(0,n)}(De(e),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)||""}return n}(n,t):null!==m.match(/^Sequence$/i)?u=function(e,t,n,r,s,i){if(!Array.isArray(n))throw new Error(`${r} must be of type Array.`);const a=t.type.element;if(!a||"object"!==typeof a)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${r}.`);const c=[];for(let l=0;l<n.length;l++){const t=e.serialize(a,n[l],r,i);if(s&&a.xmlNamespace){const e=a.xmlNamespacePrefix?`xmlns:${a.xmlNamespacePrefix}`:"xmlns";"Composite"===a.type.name?(c[l]=Object.assign({},t),c[l][o]={[e]:a.xmlNamespace}):(c[l]={},c[l][i.xmlCharKey]=t,c[l][o]={[e]:a.xmlNamespace})}else c[l]=t}return c}(this,e,t,n,Boolean(this.isXML),d):null!==m.match(/^Dictionary$/i)?u=function(e,t,n,r,s,i){if("object"!==typeof n)throw new Error(`${r} must be of type object.`);const a=t.type.value;if(!a||"object"!==typeof a)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${r}.`);const c={};for(const o of Object.keys(n)){const t=e.serialize(a,n[o],r,i);c[o]=Qe(a,t,s,i)}if(s&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns",n=c;return n[o]={[e]:t.xmlNamespace},n}return c}(this,e,t,n,Boolean(this.isXML),d):null!==m.match(/^Composite$/i)&&(u=function(e,t,n,r,s,i){Je(e,t)&&(t=We(e,t,n,"clientName"));if(void 0!=n){const a={},c=Xe(e,t,r);for(const p of Object.keys(c)){const l=c[p];if(l.readOnly)continue;let d,u=a;if(e.isXML)d=l.xmlIsWrapped?l.xmlName:l.xmlElementName||l.xmlName;else{const e=Ve(l.serializedName);d=e.pop();for(const t of e){void 0!=u[t]||void 0==n[p]&&void 0===l.defaultValue||(u[t]={}),u=u[t]}}if(void 0!=u){if(s&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";u[o]=Object.assign(Object.assign({},u[o]),{[e]:t.xmlNamespace})}const a=""!==l.serializedName?r+"."+l.serializedName:r;let c=n[p];const m=Je(e,t);m&&m.clientName===p&&void 0==c&&(c=t.serializedName);const h=e.serialize(l,c,a,i);if(void 0!==h&&void 0!=d){const e=Qe(l,h,s,i);s&&l.xmlIsAttribute?(u[o]=u[o]||{},u[o][d]=h):s&&l.xmlIsWrapped?u[d]={[l.xmlElementName]:e}:u[d]=e}}}const l=function(e,t,n){const r=t.type.additionalProperties;if(!r&&t.type.className){const r=Ke(e,t,n);return null===r||void 0===r?void 0:r.type.additionalProperties}return r}(e,t,r);if(l){const t=Object.keys(c);for(const o in n){t.every((e=>e!==o))&&(a[o]=e.serialize(l,n[o],r+'["'+o+'"]',i))}}return a}return n}(this,e,t,n,Boolean(this.isXML),d));return u}deserialize(e,t,n,r={}){var i,a,c;const l={rootName:null!==(i=r.rootName)&&void 0!==i?i:"",includeRoot:null!==(a=r.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(c=r.xmlCharKey)&&void 0!==c?c:s};if(void 0==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let p;const d=e.type.name;if(n||(n=e.serializedName),null!==d.match(/^Composite$/i))p=function(e,t,n,r,s){var i;Je(e,t)&&(t=We(e,t,n,"serializedName"));const a=Xe(e,t,r);let c={};const l=[];for(const d of Object.keys(a)){const p=a[d],u=Ve(a[d].serializedName);l.push(u[0]);const{serializedName:m,xmlName:h,xmlElementName:g}=p;let f=r;""!==m&&void 0!==m&&(f=r+"."+m);const y=p.headerCollectionPrefix;if(y){const t={};for(const r of Object.keys(n))r.startsWith(y)&&(t[r.substring(y.length)]=e.deserialize(p.type.value,n[r],f,s)),l.push(r);c[d]=t}else if(e.isXML)if(p.xmlIsAttribute&&n[o])c[d]=e.deserialize(p,n[o][h],f,s);else{const t=g||h||m;if(p.xmlIsWrapped){const t=n[h],r=null!==(i=null===t||void 0===t?void 0:t[g])&&void 0!==i?i:[];c[d]=e.deserialize(p,r,f,s)}else{const r=n[t];c[d]=e.deserialize(p,r,f,s)}}else{let r,o=n;for(const e of u){if(!o)break;o=o[e]}r=o;const i=t.type.polymorphicDiscriminator;let l;if(i&&d===i.clientName&&void 0==r&&(r=t.serializedName),Array.isArray(n[d])&&""===a[d].serializedName){r=n[d];const t=e.deserialize(p,r,f,s);for(const[e,n]of Object.entries(c))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=n);c=t}else void 0===r&&void 0===p.defaultValue||(l=e.deserialize(p,r,f,s),c[d]=l)}}const p=t.type.additionalProperties;if(p){const t=e=>{for(const t in a){if(Ve(a[t].serializedName)[0]===e)return!1}return!0};for(const o in n)t(o)&&(c[o]=e.deserialize(p,n[o],r+'["'+o+'"]',s))}else if(n)for(const o of Object.keys(n))void 0!==c[o]||l.includes(o)||Ge(o,s)||(c[o]=n[o]);return c}(this,e,t,n,l);else{if(this.isXML){const e=l.xmlCharKey,n=t;void 0!=n[o]&&void 0!=n[e]&&(t=n[e])}null!==d.match(/^Number$/i)?(p=parseFloat(t),isNaN(p)&&(p=t)):null!==d.match(/^Boolean$/i)?p="true"===t||"false"!==t&&t:null!==d.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?p=t:null!==d.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?p=new Date(t):null!==d.match(/^UnixTime$/i)?p=function(e){if(!e)return;return new Date(1e3*e)}(t):null!==d.match(/^ByteArray$/i)?p=$e(t):null!==d.match(/^Base64Url$/i)?p=function(e){if(!e)return;if(e&&"string"!==typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return $e(e=e.replace(/-/g,"+").replace(/_/g,"/"))}(t):null!==d.match(/^Sequence$/i)?p=function(e,t,n,r,o){const s=t.type.element;if(!s||"object"!==typeof s)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${r}`);if(n){Array.isArray(n)||(n=[n]);const t=[];for(let i=0;i<n.length;i++)t[i]=e.deserialize(s,n[i],`${r}[${i}]`,o);return t}return n}(this,e,t,n,l):null!==d.match(/^Dictionary$/i)&&(p=function(e,t,n,r,o){const s=t.type.value;if(!s||"object"!==typeof s)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${r}`);if(n){const t={};for(const i of Object.keys(n))t[i]=e.deserialize(s,n[i],r,o);return t}return n}(this,e,t,n,l))}return e.isConstant&&(p=e.defaultValue),p}}function Ve(e){const t=[];let n="";if(e){const r=e.split(".");for(const e of r)"\\"===e.charAt(e.length-1)?n+=e.substr(0,e.length-1)+".":(n+=e,t.push(n),n="")}return t}function Ke(e,t,n){const r=t.type.className;if(!r)throw new Error(`Class name for model "${n}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[r]}function Xe(e,t,n){let r=t.type.modelProperties;if(!r){const o=Ke(e,t,n);if(!o)throw new Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(r=null===o||void 0===o?void 0:o.type.modelProperties,!r)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(o)}" of type "${t.type.className}" for object "${n}".`)}return r}function Qe(e,t,n,r){if(!n||!e.xmlNamespace)return t;const s={[e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns"]:e.xmlNamespace};if(["Composite"].includes(e.type.name)){if(t[o])return t;{const e=Object.assign({},t);return e[o]=s,e}}const i={};return i[r.xmlCharKey]=t,i[o]=s,i}function Ge(e,t){return[o,t.xmlCharKey].includes(e)}function We(e,t,n,r){const o=Je(e,t);if(o){const s=o[r];if(void 0!=s){const r=n[s];if(void 0!=r){const n=t.type.uberParent||t.type.className,o=r===n?r:n+"."+r,s=e.modelMappers.discriminators[o];s&&(t=s)}}}return t}function Je(e,t){return t.type.polymorphicDiscriminator||Ye(e,t.type.uberParent)||Ye(e,t.type.className)}function Ye(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}const Ze=function(e){const t={};for(const n of e)t[n]=n;return t}(["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"]);var et,tt=n(15940);!function(e){e.Csv=",",e.Ssv=" ",e.Tsv="\t",e.Pipes="|",e.Multi="Multi"}(et||(et={}));const nt={parameterPath:["options","contentType"],mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},rt=(tt.BlobServiceProperties,{parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}}),ot={parameterPath:"url",mapper:{serializedName:"url",required:!0,xmlName:"url",type:{name:"String"}},skipEncoding:!0},st={parameterPath:"comp",mapper:{defaultValue:"properties",isConstant:!0,serializedName:"comp",type:{name:"String"}}},it={parameterPath:["options","timeoutInSeconds"],mapper:{constraints:{InclusiveMinimum:0},serializedName:"timeout",xmlName:"timeout",type:{name:"Number"}}},at={parameterPath:"version",mapper:{defaultValue:"2020-10-02",isConstant:!0,serializedName:"x-ms-version",type:{name:"String"}}},ct={parameterPath:["options","requestId"],mapper:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}},lt={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},pt={parameterPath:"comp",mapper:{defaultValue:"list",isConstant:!0,serializedName:"comp",type:{name:"String"}}},dt={parameterPath:["options","prefix"],mapper:{serializedName:"prefix",xmlName:"prefix",type:{name:"String"}}},ut={parameterPath:["options","marker"],mapper:{serializedName:"marker",xmlName:"marker",type:{name:"String"}}},mt={parameterPath:["options","maxPageSize"],mapper:{constraints:{InclusiveMinimum:1},serializedName:"maxresults",xmlName:"maxresults",type:{name:"Number"}}},ht=(et.Csv,tt.KeyInfo,{parameterPath:"restype",mapper:{defaultValue:"account",isConstant:!0,serializedName:"restype",type:{name:"String"}}}),gt={parameterPath:"contentLength",mapper:{serializedName:"Content-Length",required:!0,xmlName:"Content-Length",type:{name:"Number"}}},ft={parameterPath:"restype",mapper:{defaultValue:"container",isConstant:!0,serializedName:"restype",type:{name:"String"}}},yt={parameterPath:["options","metadata"],mapper:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"}},bt={parameterPath:["options","access"],mapper:{serializedName:"x-ms-blob-public-access",xmlName:"x-ms-blob-public-access",type:{name:"Enum",allowedValues:["container","blob"]}}},vt={parameterPath:["options","leaseAccessConditions","leaseId"],mapper:{serializedName:"x-ms-lease-id",xmlName:"x-ms-lease-id",type:{name:"String"}}},St={parameterPath:["options","modifiedAccessConditions","ifModifiedSince"],mapper:{serializedName:"If-Modified-Since",xmlName:"If-Modified-Since",type:{name:"DateTimeRfc1123"}}},Pt={parameterPath:["options","modifiedAccessConditions","ifUnmodifiedSince"],mapper:{serializedName:"If-Unmodified-Since",xmlName:"If-Unmodified-Since",type:{name:"DateTimeRfc1123"}}},xt={parameterPath:"comp",mapper:{defaultValue:"metadata",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Ct={parameterPath:"comp",mapper:{defaultValue:"acl",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Ot={parameterPath:"comp",mapper:{defaultValue:"undelete",isConstant:!0,serializedName:"comp",type:{name:"String"}}},wt={parameterPath:"comp",mapper:{defaultValue:"lease",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Rt={parameterPath:"action",mapper:{defaultValue:"acquire",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},Et={parameterPath:["options","duration"],mapper:{serializedName:"x-ms-lease-duration",xmlName:"x-ms-lease-duration",type:{name:"Number"}}},Nt={parameterPath:["options","proposedLeaseId"],mapper:{serializedName:"x-ms-proposed-lease-id",xmlName:"x-ms-proposed-lease-id",type:{name:"String"}}},Mt={parameterPath:"action",mapper:{defaultValue:"release",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},Tt={parameterPath:"leaseId",mapper:{serializedName:"x-ms-lease-id",required:!0,xmlName:"x-ms-lease-id",type:{name:"String"}}},At={parameterPath:"action",mapper:{defaultValue:"renew",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},It={parameterPath:"action",mapper:{defaultValue:"break",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},qt={parameterPath:["options","breakPeriod"],mapper:{serializedName:"x-ms-lease-break-period",xmlName:"x-ms-lease-break-period",type:{name:"Number"}}},Bt={parameterPath:"action",mapper:{defaultValue:"change",isConstant:!0,serializedName:"x-ms-lease-action",type:{name:"String"}}},Lt={parameterPath:"proposedLeaseId",mapper:{serializedName:"x-ms-proposed-lease-id",required:!0,xmlName:"x-ms-proposed-lease-id",type:{name:"String"}}},kt={parameterPath:["options","include"],mapper:{serializedName:"include",xmlName:"include",xmlElementName:"ListBlobsIncludeItem",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["copy","deleted","metadata","snapshots","uncommittedblobs","versions","tags","immutabilitypolicy","legalhold","deletedwithversions"]}}}},collectionFormat:et.Csv},zt={parameterPath:["options","snapshot"],mapper:{serializedName:"snapshot",xmlName:"snapshot",type:{name:"String"}}},jt={parameterPath:["options","versionId"],mapper:{serializedName:"versionid",xmlName:"versionid",type:{name:"String"}}},_t={parameterPath:["options","range"],mapper:{serializedName:"x-ms-range",xmlName:"x-ms-range",type:{name:"String"}}},Ht={parameterPath:["options","cpkInfo","encryptionKey"],mapper:{serializedName:"x-ms-encryption-key",xmlName:"x-ms-encryption-key",type:{name:"String"}}},Ut={parameterPath:["options","cpkInfo","encryptionKeySha256"],mapper:{serializedName:"x-ms-encryption-key-sha256",xmlName:"x-ms-encryption-key-sha256",type:{name:"String"}}},Dt={parameterPath:["options","encryptionAlgorithm"],mapper:{defaultValue:"AES256",isConstant:!0,serializedName:"x-ms-encryption-algorithm",type:{name:"String"}}},$t={parameterPath:["options","modifiedAccessConditions","ifMatch"],mapper:{serializedName:"If-Match",xmlName:"If-Match",type:{name:"String"}}},Ft={parameterPath:["options","modifiedAccessConditions","ifNoneMatch"],mapper:{serializedName:"If-None-Match",xmlName:"If-None-Match",type:{name:"String"}}},Vt={parameterPath:["options","modifiedAccessConditions","ifTags"],mapper:{serializedName:"x-ms-if-tags",xmlName:"x-ms-if-tags",type:{name:"String"}}},Kt={parameterPath:["options","blobHttpHeaders","blobCacheControl"],mapper:{serializedName:"x-ms-blob-cache-control",xmlName:"x-ms-blob-cache-control",type:{name:"String"}}},Xt={parameterPath:["options","blobHttpHeaders","blobContentType"],mapper:{serializedName:"x-ms-blob-content-type",xmlName:"x-ms-blob-content-type",type:{name:"String"}}},Qt={parameterPath:["options","blobHttpHeaders","blobContentMD5"],mapper:{serializedName:"x-ms-blob-content-md5",xmlName:"x-ms-blob-content-md5",type:{name:"ByteArray"}}},Gt={parameterPath:["options","blobHttpHeaders","blobContentEncoding"],mapper:{serializedName:"x-ms-blob-content-encoding",xmlName:"x-ms-blob-content-encoding",type:{name:"String"}}},Wt={parameterPath:["options","blobHttpHeaders","blobContentLanguage"],mapper:{serializedName:"x-ms-blob-content-language",xmlName:"x-ms-blob-content-language",type:{name:"String"}}},Jt={parameterPath:["options","blobHttpHeaders","blobContentDisposition"],mapper:{serializedName:"x-ms-blob-content-disposition",xmlName:"x-ms-blob-content-disposition",type:{name:"String"}}},Yt={parameterPath:"comp",mapper:{defaultValue:"immutabilityPolicies",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Zt={parameterPath:["options","immutabilityPolicyExpiry"],mapper:{serializedName:"x-ms-immutability-policy-until-date",xmlName:"x-ms-immutability-policy-until-date",type:{name:"DateTimeRfc1123"}}},en={parameterPath:["options","immutabilityPolicyMode"],mapper:{serializedName:"x-ms-immutability-policy-mode",xmlName:"x-ms-immutability-policy-mode",type:{name:"Enum",allowedValues:["Mutable","Unlocked","Locked"]}}},tn={parameterPath:["options","encryptionScope"],mapper:{serializedName:"x-ms-encryption-scope",xmlName:"x-ms-encryption-scope",type:{name:"String"}}},nn={parameterPath:["options","tier"],mapper:{serializedName:"x-ms-access-tier",xmlName:"x-ms-access-tier",type:{name:"Enum",allowedValues:["P4","P6","P10","P15","P20","P30","P40","P50","P60","P70","P80","Hot","Cool","Archive"]}}},rn={parameterPath:["options","rehydratePriority"],mapper:{serializedName:"x-ms-rehydrate-priority",xmlName:"x-ms-rehydrate-priority",type:{name:"Enum",allowedValues:["High","Standard"]}}},on={parameterPath:["options","sourceModifiedAccessConditions","sourceIfModifiedSince"],mapper:{serializedName:"x-ms-source-if-modified-since",xmlName:"x-ms-source-if-modified-since",type:{name:"DateTimeRfc1123"}}},sn={parameterPath:["options","sourceModifiedAccessConditions","sourceIfUnmodifiedSince"],mapper:{serializedName:"x-ms-source-if-unmodified-since",xmlName:"x-ms-source-if-unmodified-since",type:{name:"DateTimeRfc1123"}}},an={parameterPath:["options","sourceModifiedAccessConditions","sourceIfMatch"],mapper:{serializedName:"x-ms-source-if-match",xmlName:"x-ms-source-if-match",type:{name:"String"}}},cn={parameterPath:["options","sourceModifiedAccessConditions","sourceIfNoneMatch"],mapper:{serializedName:"x-ms-source-if-none-match",xmlName:"x-ms-source-if-none-match",type:{name:"String"}}},ln={parameterPath:["options","sourceModifiedAccessConditions","sourceIfTags"],mapper:{serializedName:"x-ms-source-if-tags",xmlName:"x-ms-source-if-tags",type:{name:"String"}}},pn={parameterPath:"copySource",mapper:{serializedName:"x-ms-copy-source",required:!0,xmlName:"x-ms-copy-source",type:{name:"String"}}},dn={parameterPath:["options","blobTagsString"],mapper:{serializedName:"x-ms-tags",xmlName:"x-ms-tags",type:{name:"String"}}},un={parameterPath:["options","legalHold"],mapper:{serializedName:"x-ms-legal-hold",xmlName:"x-ms-legal-hold",type:{name:"Boolean"}}},mn={parameterPath:["options","sourceContentMD5"],mapper:{serializedName:"x-ms-source-content-md5",xmlName:"x-ms-source-content-md5",type:{name:"ByteArray"}}},hn={parameterPath:["options","copySourceAuthorization"],mapper:{serializedName:"x-ms-copy-source-authorization",xmlName:"x-ms-copy-source-authorization",type:{name:"String"}}},gn={parameterPath:["options","queryRequest"],mapper:tt.QueryRequest},fn={parameterPath:"comp",mapper:{defaultValue:"tags",isConstant:!0,serializedName:"comp",type:{name:"String"}}},yn={parameterPath:["options","tags"],mapper:tt.BlobTags},bn={parameterPath:["options","transactionalContentMD5"],mapper:{serializedName:"Content-MD5",xmlName:"Content-MD5",type:{name:"ByteArray"}}},vn={parameterPath:["options","transactionalContentCrc64"],mapper:{serializedName:"x-ms-content-crc64",xmlName:"x-ms-content-crc64",type:{name:"ByteArray"}}},Sn={parameterPath:"blobContentLength",mapper:{serializedName:"x-ms-blob-content-length",required:!0,xmlName:"x-ms-blob-content-length",type:{name:"Number"}}},Pn={parameterPath:["options","blobSequenceNumber"],mapper:{serializedName:"x-ms-blob-sequence-number",xmlName:"x-ms-blob-sequence-number",type:{name:"Number"}}},xn={parameterPath:["options","contentType"],mapper:{defaultValue:"application/octet-stream",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},Cn={parameterPath:"body",mapper:{serializedName:"body",required:!0,xmlName:"body",type:{name:"Stream"}}},On={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},wn={parameterPath:"comp",mapper:{defaultValue:"page",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Rn={parameterPath:"pageWrite",mapper:{defaultValue:"update",isConstant:!0,serializedName:"x-ms-page-write",type:{name:"String"}}},En={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberLessThanOrEqualTo"],mapper:{serializedName:"x-ms-if-sequence-number-le",xmlName:"x-ms-if-sequence-number-le",type:{name:"Number"}}},Nn={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberLessThan"],mapper:{serializedName:"x-ms-if-sequence-number-lt",xmlName:"x-ms-if-sequence-number-lt",type:{name:"Number"}}},Mn={parameterPath:["options","sequenceNumberAccessConditions","ifSequenceNumberEqualTo"],mapper:{serializedName:"x-ms-if-sequence-number-eq",xmlName:"x-ms-if-sequence-number-eq",type:{name:"Number"}}},Tn={parameterPath:"sourceUrl",mapper:{serializedName:"x-ms-copy-source",required:!0,xmlName:"x-ms-copy-source",type:{name:"String"}}},An={parameterPath:["options","sourceContentCrc64"],mapper:{serializedName:"x-ms-source-content-crc64",xmlName:"x-ms-source-content-crc64",type:{name:"ByteArray"}}},In={parameterPath:"comp",mapper:{defaultValue:"pagelist",isConstant:!0,serializedName:"comp",type:{name:"String"}}},qn={parameterPath:"comp",mapper:{defaultValue:"appendblock",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Bn={parameterPath:["options","appendPositionAccessConditions","maxSize"],mapper:{serializedName:"x-ms-blob-condition-maxsize",xmlName:"x-ms-blob-condition-maxsize",type:{name:"Number"}}},Ln={parameterPath:["options","appendPositionAccessConditions","appendPosition"],mapper:{serializedName:"x-ms-blob-condition-appendpos",xmlName:"x-ms-blob-condition-appendpos",type:{name:"Number"}}},kn={parameterPath:["options","sourceRange"],mapper:{serializedName:"x-ms-source-range",xmlName:"x-ms-source-range",type:{name:"String"}}},zn={parameterPath:"blobType",mapper:{defaultValue:"BlockBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}},jn={parameterPath:"comp",mapper:{defaultValue:"block",isConstant:!0,serializedName:"comp",type:{name:"String"}}},_n={parameterPath:"blockId",mapper:{serializedName:"blockid",required:!0,xmlName:"blockid",type:{name:"String"}}},Hn={parameterPath:"blocks",mapper:tt.BlockLookupList},Un={parameterPath:"comp",mapper:{defaultValue:"blocklist",isConstant:!0,serializedName:"comp",type:{name:"String"}}};class Dn{constructor(e){this.client=e}download(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Fn)}getProperties(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Vn)}delete(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Kn)}undelete(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Xn)}setExpiry(e,t){const n={expiryOptions:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Qn)}setHttpHeaders(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Gn)}setImmutabilityPolicy(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Wn)}deleteImmutabilityPolicy(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Jn)}setLegalHold(e,t){const n={legalHold:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Yn)}setMetadata(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Zn)}acquireLease(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,er)}releaseLease(e,t){const n={leaseId:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,tr)}renewLease(e,t){const n={leaseId:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,nr)}changeLease(e,t,n){const r={leaseId:e,proposedLeaseId:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,rr)}breakLease(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,or)}createSnapshot(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,sr)}startCopyFromURL(e,t){const n={copySource:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,ir)}copyFromURL(e,t){const n={copySource:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,ar)}abortCopyFromURL(e,t){const n={copyId:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,cr)}setTier(e,t){const n={tier:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,lr)}getAccountInfo(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,pr)}query(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,dr)}getTags(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,ur)}setTags(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,mr)}}const $n=new Fe(tt,!0),Fn={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:tt.BlobDownloadHeaders},206:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:tt.BlobDownloadHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobDownloadExceptionHeaders}},queryParameters:[it,zt,jt],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,_t,{parameterPath:["options","rangeGetContentMD5"],mapper:{serializedName:"x-ms-range-get-content-md5",xmlName:"x-ms-range-get-content-md5",type:{name:"Boolean"}}},{parameterPath:["options","rangeGetContentCRC64"],mapper:{serializedName:"x-ms-range-get-content-crc64",xmlName:"x-ms-range-get-content-crc64",type:{name:"Boolean"}}},Ht,Ut,Dt,$t,Ft,Vt],isXML:!0,serializer:$n},Vn={path:"/{containerName}/{blob}",httpMethod:"HEAD",responses:{200:{headersMapper:tt.BlobGetPropertiesHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobGetPropertiesExceptionHeaders}},queryParameters:[it,zt,jt],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt],isXML:!0,serializer:$n},Kn={path:"/{containerName}/{blob}",httpMethod:"DELETE",responses:{202:{headersMapper:tt.BlobDeleteHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobDeleteExceptionHeaders}},queryParameters:[it,zt,jt,{parameterPath:["options","blobDeleteType"],mapper:{serializedName:"deletetype",xmlName:"deletetype",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,$t,Ft,Vt,{parameterPath:["options","deleteSnapshots"],mapper:{serializedName:"x-ms-delete-snapshots",xmlName:"x-ms-delete-snapshots",type:{name:"Enum",allowedValues:["include","only"]}}}],isXML:!0,serializer:$n},Xn={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobUndeleteHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobUndeleteExceptionHeaders}},queryParameters:[it,Ot],urlParameters:[ot],headerParameters:[at,ct,lt],isXML:!0,serializer:$n},Qn={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobSetExpiryHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobSetExpiryExceptionHeaders}},queryParameters:[it,{parameterPath:"comp",mapper:{defaultValue:"expiry",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,{parameterPath:"expiryOptions",mapper:{serializedName:"x-ms-expiry-option",required:!0,xmlName:"x-ms-expiry-option",type:{name:"String"}}},{parameterPath:["options","expiresOn"],mapper:{serializedName:"x-ms-expiry-time",xmlName:"x-ms-expiry-time",type:{name:"String"}}}],isXML:!0,serializer:$n},Gn={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobSetHttpHeadersHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobSetHttpHeadersExceptionHeaders}},queryParameters:[st,it],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,$t,Ft,Vt,Kt,Xt,Qt,Gt,Wt,Jt],isXML:!0,serializer:$n},Wn={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobSetImmutabilityPolicyHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobSetImmutabilityPolicyExceptionHeaders}},queryParameters:[it,Yt],urlParameters:[ot],headerParameters:[at,ct,lt,Pt,Zt,en],isXML:!0,serializer:$n},Jn={path:"/{containerName}/{blob}",httpMethod:"DELETE",responses:{200:{headersMapper:tt.BlobDeleteImmutabilityPolicyHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobDeleteImmutabilityPolicyExceptionHeaders}},queryParameters:[it,Yt],urlParameters:[ot],headerParameters:[at,ct,lt],isXML:!0,serializer:$n},Yn={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobSetLegalHoldHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobSetLegalHoldExceptionHeaders}},queryParameters:[it,{parameterPath:"comp",mapper:{defaultValue:"legalhold",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,{parameterPath:"legalHold",mapper:{serializedName:"x-ms-legal-hold",required:!0,xmlName:"x-ms-legal-hold",type:{name:"Boolean"}}}],isXML:!0,serializer:$n},Zn={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobSetMetadataHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobSetMetadataExceptionHeaders}},queryParameters:[it,xt],urlParameters:[ot],headerParameters:[at,ct,lt,yt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,tn],isXML:!0,serializer:$n},er={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.BlobAcquireLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobAcquireLeaseExceptionHeaders}},queryParameters:[it,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Rt,Et,Nt,$t,Ft,Vt],isXML:!0,serializer:$n},tr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobReleaseLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobReleaseLeaseExceptionHeaders}},queryParameters:[it,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Mt,Tt,$t,Ft,Vt],isXML:!0,serializer:$n},nr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobRenewLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobRenewLeaseExceptionHeaders}},queryParameters:[it,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Tt,At,$t,Ft,Vt],isXML:!0,serializer:$n},rr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobChangeLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobChangeLeaseExceptionHeaders}},queryParameters:[it,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Tt,Bt,Lt,$t,Ft,Vt],isXML:!0,serializer:$n},or={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:tt.BlobBreakLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobBreakLeaseExceptionHeaders}},queryParameters:[it,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,It,qt,$t,Ft,Vt],isXML:!0,serializer:$n},sr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.BlobCreateSnapshotHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobCreateSnapshotExceptionHeaders}},queryParameters:[it,{parameterPath:"comp",mapper:{defaultValue:"snapshot",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,yt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,tn],isXML:!0,serializer:$n},ir={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:tt.BlobStartCopyFromURLHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobStartCopyFromURLExceptionHeaders}},queryParameters:[it],urlParameters:[ot],headerParameters:[at,ct,lt,yt,vt,St,Pt,$t,Ft,Vt,Zt,en,nn,rn,on,sn,an,cn,ln,pn,dn,{parameterPath:["options","sealBlob"],mapper:{serializedName:"x-ms-seal-blob",xmlName:"x-ms-seal-blob",type:{name:"Boolean"}}},un],isXML:!0,serializer:$n},ar={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:tt.BlobCopyFromURLHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobCopyFromURLExceptionHeaders}},queryParameters:[it],urlParameters:[ot],headerParameters:[at,ct,lt,yt,vt,St,Pt,$t,Ft,Vt,Zt,en,nn,on,sn,an,cn,pn,dn,un,{parameterPath:"xMsRequiresSync",mapper:{defaultValue:"true",isConstant:!0,serializedName:"x-ms-requires-sync",type:{name:"String"}}},mn,hn],isXML:!0,serializer:$n},cr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{204:{headersMapper:tt.BlobAbortCopyFromURLHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobAbortCopyFromURLExceptionHeaders}},queryParameters:[it,{parameterPath:"comp",mapper:{defaultValue:"copy",isConstant:!0,serializedName:"comp",type:{name:"String"}}},{parameterPath:"copyId",mapper:{serializedName:"copyid",required:!0,xmlName:"copyid",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,vt,{parameterPath:"copyActionAbortConstant",mapper:{defaultValue:"abort",isConstant:!0,serializedName:"x-ms-copy-action",type:{name:"String"}}}],isXML:!0,serializer:$n},lr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.BlobSetTierHeaders},202:{headersMapper:tt.BlobSetTierHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobSetTierExceptionHeaders}},queryParameters:[it,zt,jt,{parameterPath:"comp",mapper:{defaultValue:"tier",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,vt,Vt,rn,{parameterPath:"tier",mapper:{serializedName:"x-ms-access-tier",required:!0,xmlName:"x-ms-access-tier",type:{name:"Enum",allowedValues:["P4","P6","P10","P15","P20","P30","P40","P50","P60","P70","P80","Hot","Cool","Archive"]}}}],isXML:!0,serializer:$n},pr={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{headersMapper:tt.BlobGetAccountInfoHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobGetAccountInfoExceptionHeaders}},queryParameters:[st,ht],urlParameters:[ot],headerParameters:[at,lt],isXML:!0,serializer:$n},dr={path:"/{containerName}/{blob}",httpMethod:"POST",responses:{200:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:tt.BlobQueryHeaders},206:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:tt.BlobQueryHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobQueryExceptionHeaders}},requestBody:gn,queryParameters:[it,zt,{parameterPath:"comp",mapper:{defaultValue:"query",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[nt,rt,at,ct,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:$n},ur={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:tt.BlobTags,headersMapper:tt.BlobGetTagsHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobGetTagsExceptionHeaders}},queryParameters:[it,zt,jt,fn],urlParameters:[ot],headerParameters:[at,ct,lt,vt,Vt],isXML:!0,serializer:$n},mr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{204:{headersMapper:tt.BlobSetTagsHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlobSetTagsExceptionHeaders}},requestBody:yn,queryParameters:[it,jt,fn],urlParameters:[ot],headerParameters:[nt,rt,at,ct,vt,Vt,bn,vn],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:$n};class hr{constructor(e){this.client=e}create(e,t){const n={contentLength:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,yr)}appendBlock(e,t,n){const r={contentLength:e,body:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,br)}appendBlockFromUrl(e,t,n){const r={sourceUrl:e,contentLength:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,vr)}seal(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Sr)}}const gr=new Fe(tt,!0),fr=new Fe(tt,!1),yr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.AppendBlobCreateHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.AppendBlobCreateExceptionHeaders}},queryParameters:[it],urlParameters:[ot],headerParameters:[at,ct,lt,gt,yt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,Kt,Xt,Qt,Gt,Wt,Jt,Zt,en,tn,dn,un,{parameterPath:"blobType",mapper:{defaultValue:"AppendBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}}],isXML:!0,serializer:gr},br={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.AppendBlobAppendBlockHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.AppendBlobAppendBlockExceptionHeaders}},requestBody:Cn,queryParameters:[it,qn],urlParameters:[ot],headerParameters:[at,ct,gt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,tn,bn,vn,xn,On,Bn,Ln],mediaType:"binary",serializer:fr},vr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.AppendBlobAppendBlockFromUrlHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.AppendBlobAppendBlockFromUrlExceptionHeaders}},queryParameters:[it,qn],urlParameters:[ot],headerParameters:[at,ct,lt,gt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,tn,on,sn,an,cn,mn,hn,bn,Tn,An,Bn,Ln,kn],isXML:!0,serializer:gr},Sr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.AppendBlobSealHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.AppendBlobSealExceptionHeaders}},queryParameters:[it,{parameterPath:"comp",mapper:{defaultValue:"seal",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,$t,Ft,Ln],isXML:!0,serializer:gr};class Pr{constructor(e){this.client=e}upload(e,t,n){const r={contentLength:e,body:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,Or)}putBlobFromUrl(e,t,n){const r={contentLength:e,copySource:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,wr)}stageBlock(e,t,n,r){const o={blockId:e,contentLength:t,body:n,options:Ue(r||{})};return this.client.sendOperationRequest(o,Rr)}stageBlockFromURL(e,t,n,r){const o={blockId:e,contentLength:t,sourceUrl:n,options:Ue(r||{})};return this.client.sendOperationRequest(o,Er)}commitBlockList(e,t){const n={blocks:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Nr)}getBlockList(e,t){const n={listType:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Mr)}}const xr=new Fe(tt,!0),Cr=new Fe(tt,!1),Or={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.BlockBlobUploadHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlockBlobUploadExceptionHeaders}},requestBody:Cn,queryParameters:[it],urlParameters:[ot],headerParameters:[at,ct,gt,yt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,Kt,Xt,Qt,Gt,Wt,Jt,Zt,en,tn,nn,dn,un,bn,xn,On,zn],mediaType:"binary",serializer:Cr},wr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.BlockBlobPutBlobFromUrlHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlockBlobPutBlobFromUrlExceptionHeaders}},queryParameters:[it],urlParameters:[ot],headerParameters:[at,ct,lt,gt,yt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,Kt,Xt,Qt,Gt,Wt,Jt,tn,nn,on,sn,an,cn,ln,pn,dn,mn,hn,bn,zn,{parameterPath:["options","copySourceBlobProperties"],mapper:{serializedName:"x-ms-copy-source-blob-properties",xmlName:"x-ms-copy-source-blob-properties",type:{name:"Boolean"}}}],isXML:!0,serializer:xr},Rr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.BlockBlobStageBlockHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlockBlobStageBlockExceptionHeaders}},requestBody:Cn,queryParameters:[it,jn,_n],urlParameters:[ot],headerParameters:[at,ct,gt,vt,Ht,Ut,Dt,tn,bn,vn,xn,On],mediaType:"binary",serializer:Cr},Er={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.BlockBlobStageBlockFromURLHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlockBlobStageBlockFromURLExceptionHeaders}},queryParameters:[it,jn,_n],urlParameters:[ot],headerParameters:[at,ct,lt,gt,vt,Ht,Ut,Dt,tn,on,sn,an,cn,mn,hn,Tn,An,kn],isXML:!0,serializer:xr},Nr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.BlockBlobCommitBlockListHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlockBlobCommitBlockListExceptionHeaders}},requestBody:Hn,queryParameters:[it,Un],urlParameters:[ot],headerParameters:[nt,rt,at,ct,yt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,Kt,Xt,Qt,Gt,Wt,Jt,Zt,en,tn,nn,dn,un,bn,vn],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:xr},Mr={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:tt.BlockList,headersMapper:tt.BlockBlobGetBlockListHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.BlockBlobGetBlockListExceptionHeaders}},queryParameters:[it,zt,Un,{parameterPath:"listType",mapper:{defaultValue:"committed",serializedName:"blocklisttype",required:!0,xmlName:"blocklisttype",type:{name:"Enum",allowedValues:["committed","uncommitted","all"]}}}],urlParameters:[ot],headerParameters:[at,ct,lt,vt,Vt],isXML:!0,serializer:xr};class Tr{constructor(e){this.client=e}create(e,t,n){const r={contentLength:e,blobContentLength:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,qr)}uploadPages(e,t,n){const r={contentLength:e,body:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,Br)}clearPages(e,t){const n={contentLength:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Lr)}uploadPagesFromURL(e,t,n,r,o){const s={sourceUrl:e,sourceRange:t,contentLength:n,range:r,options:Ue(o||{})};return this.client.sendOperationRequest(s,kr)}getPageRanges(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,zr)}getPageRangesDiff(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,jr)}resize(e,t){const n={blobContentLength:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,_r)}updateSequenceNumber(e,t){const n={sequenceNumberAction:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Hr)}copyIncremental(e,t){const n={copySource:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Ur)}}const Ar=new Fe(tt,!0),Ir=new Fe(tt,!1),qr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.PageBlobCreateHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobCreateExceptionHeaders}},queryParameters:[it],urlParameters:[ot],headerParameters:[at,ct,lt,gt,yt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,Kt,Xt,Qt,Gt,Wt,Jt,Zt,en,tn,nn,dn,un,{parameterPath:"blobType",mapper:{defaultValue:"PageBlob",isConstant:!0,serializedName:"x-ms-blob-type",type:{name:"String"}}},Sn,Pn],isXML:!0,serializer:Ar},Br={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.PageBlobUploadPagesHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobUploadPagesExceptionHeaders}},requestBody:Cn,queryParameters:[it,wn],urlParameters:[ot],headerParameters:[at,ct,gt,vt,St,Pt,_t,Ht,Ut,Dt,$t,Ft,Vt,tn,bn,vn,xn,On,Rn,En,Nn,Mn],mediaType:"binary",serializer:Ir},Lr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.PageBlobClearPagesHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobClearPagesExceptionHeaders}},queryParameters:[it,wn],urlParameters:[ot],headerParameters:[at,ct,lt,gt,vt,St,Pt,_t,Ht,Ut,Dt,$t,Ft,Vt,tn,En,Nn,Mn,{parameterPath:"pageWrite",mapper:{defaultValue:"clear",isConstant:!0,serializedName:"x-ms-page-write",type:{name:"String"}}}],isXML:!0,serializer:Ar},kr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{201:{headersMapper:tt.PageBlobUploadPagesFromURLHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobUploadPagesFromURLExceptionHeaders}},queryParameters:[it,wn],urlParameters:[ot],headerParameters:[at,ct,lt,gt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,tn,on,sn,an,cn,mn,hn,Rn,En,Nn,Mn,Tn,{parameterPath:"sourceRange",mapper:{serializedName:"x-ms-source-range",required:!0,xmlName:"x-ms-source-range",type:{name:"String"}}},An,{parameterPath:"range",mapper:{serializedName:"x-ms-range",required:!0,xmlName:"x-ms-range",type:{name:"String"}}}],isXML:!0,serializer:Ar},zr={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:tt.PageList,headersMapper:tt.PageBlobGetPageRangesHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobGetPageRangesExceptionHeaders}},queryParameters:[it,zt,In],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,_t,$t,Ft,Vt],isXML:!0,serializer:Ar},jr={path:"/{containerName}/{blob}",httpMethod:"GET",responses:{200:{bodyMapper:tt.PageList,headersMapper:tt.PageBlobGetPageRangesDiffHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobGetPageRangesDiffExceptionHeaders}},queryParameters:[it,zt,In,{parameterPath:["options","prevsnapshot"],mapper:{serializedName:"prevsnapshot",xmlName:"prevsnapshot",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,_t,$t,Ft,Vt,{parameterPath:["options","prevSnapshotUrl"],mapper:{serializedName:"x-ms-previous-snapshot-url",xmlName:"x-ms-previous-snapshot-url",type:{name:"String"}}}],isXML:!0,serializer:Ar},_r={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.PageBlobResizeHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobResizeExceptionHeaders}},queryParameters:[st,it],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,Ht,Ut,Dt,$t,Ft,Vt,tn,Sn],isXML:!0,serializer:Ar},Hr={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{200:{headersMapper:tt.PageBlobUpdateSequenceNumberHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobUpdateSequenceNumberExceptionHeaders}},queryParameters:[st,it],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt,$t,Ft,Vt,Pn,{parameterPath:"sequenceNumberAction",mapper:{serializedName:"x-ms-sequence-number-action",required:!0,xmlName:"x-ms-sequence-number-action",type:{name:"Enum",allowedValues:["max","update","increment"]}}}],isXML:!0,serializer:Ar},Ur={path:"/{containerName}/{blob}",httpMethod:"PUT",responses:{202:{headersMapper:tt.PageBlobCopyIncrementalHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.PageBlobCopyIncrementalExceptionHeaders}},queryParameters:[it,{parameterPath:"comp",mapper:{defaultValue:"incrementalcopy",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,$t,Ft,Vt,pn],isXML:!0,serializer:Ar},Dr="2020-10-02",$r=268435456,Fr=4194304e3,Vr=5e4,Kr=4194304,Xr={FORCE_BROWSER_NO_CACHE:"_",SIGNATURE:"sig",SNAPSHOT:"snapshot",VERSIONID:"versionid",TIMEOUT:"timeout"},Qr="Content-Length",Gr="Cookie",Wr="User-Agent",Jr="",Yr=["Access-Control-Allow-Origin","Cache-Control","Content-Length","Content-Type","Date","Request-Id","traceparent","Transfer-Encoding","User-Agent","x-ms-client-request-id","x-ms-date","x-ms-error-code","x-ms-request-id","x-ms-return-client-request-id","x-ms-version","Accept-Ranges","Content-Disposition","Content-Encoding","Content-Language","Content-MD5","Content-Range","ETag","Last-Modified","Server","Vary","x-ms-content-crc64","x-ms-copy-action","x-ms-copy-completion-time","x-ms-copy-id","x-ms-copy-progress","x-ms-copy-status","x-ms-has-immutability-policy","x-ms-has-legal-hold","x-ms-lease-state","x-ms-lease-status","x-ms-range","x-ms-request-server-encrypted","x-ms-server-encrypted","x-ms-snapshot","x-ms-source-range","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","x-ms-access-tier","x-ms-access-tier-change-time","x-ms-access-tier-inferred","x-ms-account-kind","x-ms-archive-status","x-ms-blob-append-offset","x-ms-blob-cache-control","x-ms-blob-committed-block-count","x-ms-blob-condition-appendpos","x-ms-blob-condition-maxsize","x-ms-blob-content-disposition","x-ms-blob-content-encoding","x-ms-blob-content-language","x-ms-blob-content-length","x-ms-blob-content-md5","x-ms-blob-content-type","x-ms-blob-public-access","x-ms-blob-sequence-number","x-ms-blob-type","x-ms-copy-destination-snapshot","x-ms-creation-time","x-ms-default-encryption-scope","x-ms-delete-snapshots","x-ms-delete-type-permanent","x-ms-deny-encryption-scope-override","x-ms-encryption-algorithm","x-ms-if-sequence-number-eq","x-ms-if-sequence-number-le","x-ms-if-sequence-number-lt","x-ms-incremental-copy","x-ms-lease-action","x-ms-lease-break-period","x-ms-lease-duration","x-ms-lease-id","x-ms-lease-time","x-ms-page-write","x-ms-proposed-lease-id","x-ms-range-get-content-md5","x-ms-rehydrate-priority","x-ms-sequence-number-action","x-ms-sku-name","x-ms-source-content-md5","x-ms-source-if-match","x-ms-source-if-modified-since","x-ms-source-if-none-match","x-ms-source-if-unmodified-since","x-ms-tag-count","x-ms-encryption-key-sha256","x-ms-if-tags","x-ms-source-if-tags"],Zr=["comp","maxresults","rscc","rscd","rsce","rscl","rsct","se","si","sip","sp","spr","sr","srt","ss","st","sv","include","marker","prefix","copyid","restype","blockid","blocklisttype","delimiter","prevsnapshot","ske","skoid","sks","skt","sktid","skv","snapshot"];var eo,to;function no(e){if(void 0!==e)return e}function ro(e,t){if(e&&!t)throw new RangeError("Customer-provided encryption key must be used over HTTPS.");e&&!e.encryptionAlgorithm&&(e.encryptionAlgorithm="AES256")}function oo(e){const t=(e._response.parsedBody.pageRange||[]).map((e=>({offset:e.start,count:e.end-e.start}))),n=(e._response.parsedBody.clearRange||[]).map((e=>({offset:e.start,count:e.end-e.start})));return Object.assign(Object.assign({},e),{pageRange:t,clearRange:n,_response:Object.assign(Object.assign({},e._response),{parsedBody:{pageRange:t,clearRange:n}})})}!function(e){e.Hot="Hot",e.Cool="Cool",e.Archive="Archive"}(eo||(eo={})),function(e){e.P4="P4",e.P6="P6",e.P10="P10",e.P15="P15",e.P20="P20",e.P30="P30",e.P40="P40",e.P50="P50",e.P60="P60",e.P70="P70",e.P80="P80"}(to||(to={}));var so=n(34155);function io(e){return function(t,n){const r=function(e,t){return qe.getTracer(e||"azure/core-tracing",t)}(),o=(null===n||void 0===n?void 0:n.tracingOptions)||{},s=Object.assign({kind:Ne.INTERNAL},o.spanOptions),i=e.packagePrefix?`${e.packagePrefix}.${t}`:t;let a;a=function(){var e;if("undefined"===typeof so)return!1;const t=null===(e=so.env.AZURE_TRACING_DISABLED)||void 0===e?void 0:e.toLowerCase();return"false"!==t&&"0"!==t&&Boolean(t)}()?qe.wrapSpanContext(ee):r.startSpan(i,s,o.tracingContext),e.namespace&&a.setAttribute("az.namespace",e.namespace);let c=o.spanOptions||{};a.isRecording()&&e.namespace&&(c=Object.assign(Object.assign({},o.spanOptions),{attributes:Object.assign(Object.assign({},s.attributes),{"az.namespace":e.namespace})}));const l=Object.assign(Object.assign({},o),{spanOptions:c,tracingContext:Be(o.tracingContext||Le.active(),a)});return{span:a,updatedOptions:Object.assign(Object.assign({},n),{tracingOptions:l})}}}var ao=n(99100);var co=n(58955);const lo="undefined"!==typeof co&&co.env&&co.env.DEBUG||void 0;let po,uo=[],mo=[];const ho=[];lo&&fo(lo);const go=Object.assign((e=>bo(e)),{enable:fo,enabled:yo,disable:function(){const e=po||"";return fo(""),e},log:function(...e){if(e.length>0){const t=String(e[0]);t.includes(":error")?console.error(...e):t.includes(":warning")?console.warn(...e):t.includes(":info")?console.info(...e):(t.includes(":verbose"),console.debug(...e))}}});function fo(e){po=e,uo=[],mo=[];const t=/\*/g,n=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const r of n)r.startsWith("-")?mo.push(new RegExp(`^${r.substr(1)}$`)):uo.push(new RegExp(`^${r}$`));for(const r of ho)r.enabled=yo(r.namespace)}function yo(e){if(e.endsWith("*"))return!0;for(const t of mo)if(t.test(e))return!1;for(const t of uo)if(t.test(e))return!0;return!1}function bo(e){const t=Object.assign((function(...n){if(!t.enabled)return;n.length>0&&(n[0]=`${e} ${n[0]}`);t.log(...n)}),{enabled:yo(e),destroy:vo,log:go.log,namespace:e,extend:So});return ho.push(t),t}function vo(){const e=ho.indexOf(this);return e>=0&&(ho.splice(e,1),!0)}function So(e){const t=bo(`${this.namespace}:${e}`);return t.log=this.log,t}var Po=go,xo=n(58955);const Co=new Set,Oo="undefined"!==typeof xo&&xo.env&&xo.env.AZURE_LOG_LEVEL||void 0;let wo;const Ro=Po("azure");Ro.log=(...e)=>{Po.log(...e)};const Eo=["verbose","info","warning","error"];Oo&&(qo(Oo)?function(e){if(e&&!qo(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${Eo.join(",")}`);wo=e;const t=[];for(const n of Co)Io(n)&&t.push(n.namespace);Po.enable(t.join(","))}(Oo):console.error(`AZURE_LOG_LEVEL set to unknown log level '${Oo}'; logging is not enabled. Acceptable values: ${Eo.join(", ")}.`));const No={verbose:400,info:300,warning:200,error:100};function Mo(e){const t=Ro.extend(e);return To(Ro,t),{error:Ao(t,"error"),warning:Ao(t,"warning"),info:Ao(t,"info"),verbose:Ao(t,"verbose")}}function To(e,t){t.log=(...t)=>{e.log(...t)}}function Ao(e,t){const n=Object.assign(e.extend(t),{level:t});if(To(e,n),Io(n)){const e=Po.disable();Po.enable(e+","+n.namespace)}return Co.add(n),n}function Io(e){return!!(wo&&No[e.level]<=No[wo])}function qo(e){return Eo.includes(e)}const Bo=Mo("core-http"),Lo=io({packagePrefix:"",namespace:""});function ko(e={}){return{create:(t,n)=>new zo(t,n,e)}}class zo extends ao.U{constructor(e,t,n){super(e,t),this.userAgent=n.userAgent}async sendRequest(e){if(!e.tracingContext)return this._nextPolicy.sendRequest(e);const t=this.tryCreateSpan(e);if(!t)return this._nextPolicy.sendRequest(e);try{const n=await this._nextPolicy.sendRequest(e);return this.tryProcessResponse(t,n),n}catch(n){throw this.tryProcessError(t,n),n}}tryCreateSpan(e){var t;try{const n=f.parse(e.url).getPath()||"/",{span:r}=Lo(n,{tracingOptions:{spanOptions:Object.assign(Object.assign({},e.spanOptions),{kind:Ne.CLIENT}),tracingContext:e.tracingContext}});if(!r.isRecording())return void r.end();const o=null===(t=e.tracingContext)||void 0===t?void 0:t.getValue(Symbol.for("az.namespace"));"string"===typeof o&&r.setAttribute("az.namespace",o),r.setAttributes({"http.method":e.method,"http.url":e.url,requestId:e.requestId}),this.userAgent&&r.setAttribute("http.user_agent",this.userAgent);const s=r.spanContext(),i=function(e){const t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),t.length)return;const n=(e.traceFlags||0).toString(16),r=1===n.length?`0${n}`:n;return`00-${e.traceId}-${e.spanId}-${r}`}(s);if(i&&function(e){return qe.isSpanContextValid(e)}(s)){e.headers.set("traceparent",i);const t=s.traceState&&s.traceState.serialize();t&&e.headers.set("tracestate",t)}return r}catch(n){return void Bo.warning(`Skipping creating a tracing span due to an error: ${n.message}`)}}tryProcessError(e,t){try{e.setStatus({code:ke.ERROR,message:t.message}),t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(n){Bo.warning(`Skipping tracing span processing due to an error: ${n.message}`)}}tryProcessResponse(e,t){try{e.setAttribute("http.status_code",t.status);const n=t.headers.get("x-ms-request-id");n&&e.setAttribute("serviceRequestId",n),e.setStatus({code:ke.OK}),e.end()}catch(n){Bo.warning(`Skipping tracing span processing due to an error: ${n.message}`)}}}const jo={enable:!0};class _o extends ao.U{constructor(e,t,n){super(e,t),this.keepAliveOptions=n}async sendRequest(e){return e.keepAlive=this.keepAliveOptions.enable,this._nextPolicy.sendRequest(e)}}function Ho(e="x-ms-client-request-id"){return{create:(t,n)=>new Uo(t,n,e)}}class Uo extends ao.U{constructor(e,t,n){super(e,t),this._requestIdHeaderName=n}sendRequest(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,e.requestId),this._nextPolicy.sendRequest(e)}}const Do={},$o="REDACTED",Fo=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],Vo=["api-version"];class Ko{constructor({allowedHeaderNames:e=[],allowedQueryParameters:t=[]}={}){e=Array.isArray(e)?Fo.concat(e):Fo,t=Array.isArray(t)?Vo.concat(t):Vo,this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,n)=>{if(n instanceof Error)return Object.assign(Object.assign({},n),{name:n.name,message:n.message});if("_headersMap"===e)return this.sanitizeHeaders(n);if("url"===e)return this.sanitizeUrl(n);if("query"===e)return this.sanitizeQuery(n);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(n)||"object"===typeof(r=n)&&null!==r&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)){if(t.has(n))return"[Circular]";t.add(n)}var r;return n}}),2)}sanitizeHeaders(e){return this.sanitizeObject(e,this.allowedHeaderNames,((e,t)=>e[t].value))}sanitizeQuery(e){return this.sanitizeObject(e,this.allowedQueryParameters,((e,t)=>e[t]))}sanitizeObject(e,t,n){if("object"!==typeof e||null===e)return e;const r={};for(const o of Object.keys(e))t.has(o.toLowerCase())?r[o]=n(e,o):r[o]=$o;return r}sanitizeUrl(e){if("string"!==typeof e||null===e)return e;const t=f.parse(e),n=t.getQuery();if(!n)return e;const r=g.parse(n);for(const o of r.keys())this.allowedQueryParameters.has(o.toLowerCase())||r.set(o,$o);return t.setQuery(r.toString()),t.toString()}}const Xo=new Ko;class Qo extends Error{constructor(e,t,n,r,o){super(e),this.name="RestError",this.code=t,this.statusCode=n,this.request=r,this.response=o,Object.setPrototypeOf(this,Qo.prototype)}[Do](){return`RestError: ${this.message} \n ${Xo.sanitize(this)}`}}if(Qo.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",Qo.PARSE_ERROR="PARSE_ERROR",!self.document||!self.DOMParser||!self.Node||!self.XMLSerializer)throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');const Go=document.implementation.createDocument(null,null,null),Wo=new DOMParser;function Jo(e,t={}){var n,r,o;try{const i={rootName:null!==(n=t.rootName)&&void 0!==n?n:"",includeRoot:null!==(r=t.includeRoot)&&void 0!==r&&r,xmlCharKey:null!==(o=t.xmlCharKey)&&void 0!==o?o:s},a=Wo.parseFromString(e,"application/xml");let c;return function(e){const t=e.getElementsByTagName("parsererror");if(t.length>0&&function(){var e;if(void 0===Yo)try{Yo=null!==(e=Wo.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==e?e:""}catch(t){Yo=""}return Yo}())for(let n=0;n<t.length;n++)if(t[n].namespaceURI===Yo)throw new Error(t[n].innerHTML)}(a),c=i.includeRoot?Zo(a,i):Zo(a.childNodes[0],i),Promise.resolve(c)}catch(i){return Promise.reject(i)}}let Yo;function Zo(e,t){let n={};const r=e.childNodes.length,s=e.childNodes[0],i=s&&1===r&&s.nodeType===Node.TEXT_NODE&&s.nodeValue||void 0,a=function(e){return function(e){return!!e.attributes}(e)&&e.hasAttributes()?e:void 0}(e);if(a){n[o]={};for(let e=0;e<a.attributes.length;e++){const t=a.attributes[e];n[o][t.nodeName]=t.nodeValue}i&&(n[t.xmlCharKey]=i)}else 0===r?n="":i&&(n=i);if(!i)for(let o=0;o<r;o++){const r=e.childNodes[o];if(r.nodeType!==Node.TEXT_NODE){const e=Zo(r,t);n[r.nodeName]?Array.isArray(n[r.nodeName])?n[r.nodeName].push(e):n[r.nodeName]=[n[r.nodeName],e]:n[r.nodeName]=e}}return n}const es=new XMLSerializer;function ts(e,t={}){var n,r,o;const i={rootName:null!==(n=t.rootName)&&void 0!==n?n:"root",includeRoot:null!==(r=t.includeRoot)&&void 0!==r&&r,xmlCharKey:null!==(o=t.xmlCharKey)&&void 0!==o?o:s},a=rs(e,i.rootName,i)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+es.serializeToString(a)}function ns(e){const t=[];for(const n of Object.keys(e)){const r=Go.createAttribute(n);r.value=e[n].toString(),t.push(r)}return t}function rs(e,t,n){if(void 0===e||null===e||"string"===typeof e||"number"===typeof e||"boolean"===typeof e){const n=Go.createElement(t);return n.textContent=void 0===e||null===e?"":e.toString(),[n]}if(Array.isArray(e)){const r=[];for(const o of e)for(const e of rs(o,t,n))r.push(e);return r}if("object"===typeof e){const r=Go.createElement(t);for(const t of Object.keys(e))if(t===o)for(const n of ns(e[t]))r.attributes.setNamedItem(n);else if(t===n.xmlCharKey)r.textContent=e[t].toString();else for(const o of rs(e[t],t,n))r.appendChild(o);return[r]}throw new Error(`Illegal value passed to buildObject: ${e}`)}function os(e,t){return{create:(n,r)=>new as(n,r,e,t)}}const ss=["application/json","text/json"],is=["application/xml","application/atom+xml"];class as extends ao.U{constructor(e,t,n,r={}){var o;super(e,t),this.jsonContentTypes=n&&n.json||ss,this.xmlContentTypes=n&&n.xml||is,this.xmlCharKey=null!==(o=r.xmlCharKey)&&void 0!==o?o:s}async sendRequest(e){return this._nextPolicy.sendRequest(e).then((e=>function(e,t,n,r={}){var o,i,a;const c={rootName:null!==(o=r.rootName)&&void 0!==o?o:"",includeRoot:null!==(i=r.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(a=r.xmlCharKey)&&void 0!==a?a:s};return function(e,t,n,r){var o;const s=e=>{const t=`Error "${e}" occurred while parsing the response body - ${n.bodyAsText}.`,r=e.code||Qo.PARSE_ERROR,o=new Qo(t,r,n.status,n.request,n);return Promise.reject(o)};if(!(null===(o=n.request.streamResponseStatusCodes)||void 0===o?void 0:o.has(n.status))&&!n.request.streamResponseBody&&n.bodyAsText){const o=n.bodyAsText,i=n.headers.get("Content-Type")||"",a=i?i.split(";").map((e=>e.toLowerCase())):[];if(0===a.length||a.some((t=>-1!==e.indexOf(t))))return new Promise((e=>{n.parsedBody=JSON.parse(o),e(n)})).catch(s);if(a.some((e=>-1!==t.indexOf(e))))return Jo(o,r).then((e=>(n.parsedBody=e,n))).catch(s)}return Promise.resolve(n)}(e,t,n,c).then((e=>{if(!function(e){const t=e.request.shouldDeserialize;let n;n=void 0===t||("boolean"===typeof t?t:t(e));return n}(e))return e;const t=e.request.operationSpec;if(!t||!t.responses)return e;const o=function(e){let t;const n=e.request,r=n.operationSpec;if(r){const o=n.operationResponseGetter;t=o?o(r,e):r.responses[e.status]}return t}(e),{error:s,shouldReturnResponse:i}=function(e,t,n){var r;const o=200<=e.status&&e.status<300;if(function(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?o:n){if(!n)return{error:null,shouldReturnResponse:!1};if(!n.isError)return{error:null,shouldReturnResponse:!1}}const s=null!==n&&void 0!==n?n:t.responses.default,i=(null===(r=e.request.streamResponseStatusCodes)||void 0===r?void 0:r.has(e.status))||e.request.streamResponseBody?`Unexpected status code: ${e.status}`:e.bodyAsText,a=new Qo(i,void 0,e.status,e.request,e);if(!s)throw a;const c=s.bodyMapper,l=s.headersMapper;try{if(e.parsedBody){const n=e.parsedBody;let r;if(c){let e=n;t.isXML&&c.type.name===Ze.Sequence&&(e="object"===typeof n?n[c.xmlElementName]:[]),r=t.serializer.deserialize(c,e,"error.response.parsedBody")}const o=n.error||r||n;a.code=o.code,o.message&&(a.message=o.message),c&&(a.response.parsedBody=r)}e.headers&&l&&(a.response.parsedHeaders=t.serializer.deserialize(l,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(p){a.message=`Error "${p.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:a,shouldReturnResponse:!1}}(e,t,o);if(s)throw s;if(i)return e;if(o){if(o.bodyMapper){let n=e.parsedBody;t.isXML&&o.bodyMapper.type.name===Ze.Sequence&&(n="object"===typeof n?n[o.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(o.bodyMapper,n,"operationRes.parsedBody",r)}catch(a){throw new Qo(`Error ${a} occurred in deserializing the responseBody - ${e.bodyAsText}`,void 0,e.status,e.request,e)}}else"HEAD"===t.httpMethod&&(e.parsedBody=n.status>=200&&n.status<300);o.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(o.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders",r))}return e}))}(this.jsonContentTypes,this.xmlContentTypes,e,{xmlCharKey:this.xmlCharKey})))}}function cs(e={}){return{create:(t,n)=>new ls(t,n,e)}}class ls extends ao.U{constructor(e,t,{logger:n=Bo.info,allowedHeaderNames:r=[],allowedQueryParameters:o=[]}={}){super(e,t),this.logger=n,this.sanitizer=new Ko({allowedHeaderNames:r,allowedQueryParameters:o})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(e){this.sanitizer.allowedHeaderNames=e}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(e){this.sanitizer.allowedQueryParameters=e}sendRequest(e){return this.logger.enabled?(this.logRequest(e),this._nextPolicy.sendRequest(e).then((e=>this.logResponse(e)))):this._nextPolicy.sendRequest(e)}logRequest(e){this.logger(`Request: ${this.sanitizer.sanitize(e)}`)}logResponse(e){return this.logger(`Response status code: ${e.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(e.headers)}`),e}}const ps=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");const ds="2.2.2",us={HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429,ServiceUnavailable:503}},ms={AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"};var hs=new WeakMap,gs=new WeakMap,fs=function(){function e(){this.onabort=null,hs.set(this,[]),gs.set(this,!1)}return Object.defineProperty(e.prototype,"aborted",{get:function(){if(!gs.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return gs.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"none",{get:function(){return new e},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,t){if(!hs.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");hs.get(this).push(t)},e.prototype.removeEventListener=function(e,t){if(!hs.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var n=hs.get(this),r=n.indexOf(t);r>-1&&n.splice(r,1)},e.prototype.dispatchEvent=function(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")},e}();function ys(e){if(!e.aborted){e.onabort&&e.onabort.call(e);var t=hs.get(e);t&&t.slice().forEach((function(t){t.call(e,{type:"abort"})})),gs.set(e,!0)}}var bs=function(e){function t(t){var n=e.call(this,t)||this;return n.name="AbortError",n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}He(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);!function(){function e(e){var t=this;if(this._signal=new fs,e){Array.isArray(e)||(e=arguments);for(var n=0,r=e;n<r.length;n++){var o=r[n];o.aborted?this.abort():o.addEventListener("abort",(function(){t.abort()}))}}}Object.defineProperty(e.prototype,"signal",{get:function(){return this._signal},enumerable:!1,configurable:!0}),e.prototype.abort=function(){ys(this._signal)},e.timeout=function(e){var t=new fs,n=setTimeout(ys,e,t);return"function"===typeof n.unref&&n.unref(),t}}();function vs(e,t,n){return new Promise(((r,o)=>{let s,i;const a=()=>o(new bs((null===n||void 0===n?void 0:n.abortErrorMsg)?null===n||void 0===n?void 0:n.abortErrorMsg:"The operation was aborted.")),c=()=>{(null===n||void 0===n?void 0:n.abortSignal)&&i&&n.abortSignal.removeEventListener("abort",i)};if(i=()=>{var e;return"undefined"!==typeof(e=s)&&null!==e&&clearTimeout(s),c(),a()},(null===n||void 0===n?void 0:n.abortSignal)&&n.abortSignal.aborted)return a();s=setTimeout((()=>{c(),r(t)}),e),(null===n||void 0===n?void 0:n.abortSignal)&&n.abortSignal.addEventListener("abort",i)}))}const Ss={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function Ps(e,t,n){let r=null,o=null;const s=Object.assign(Object.assign({},Ss),n),i={get isRefreshing(){return null!==r},get shouldRefresh(){var e;return!i.isRefreshing&&(null!==(e=null===o||void 0===o?void 0:o.expiresOnTimestamp)&&void 0!==e?e:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return null===o||o.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function a(n){var a;if(!i.isRefreshing){r=async function(e,t,n){async function r(){if(!(Date.now()<n)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(a){return null}}let o=await r();for(;null===o;)await vs(t),o=await r();return o}((()=>e.getToken(t,n)),s.retryIntervalInMs,null!==(a=null===o||void 0===o?void 0:o.expiresOnTimestamp)&&void 0!==a?a:Date.now()).then((e=>(r=null,o=e,o))).catch((e=>{throw r=null,o=null,e}))}return r}return async e=>i.mustRefresh?a(e):(i.shouldRefresh&&a(e),o)}function xs(e,t){const n=Ps(e,t);class r extends ao.U{constructor(e,t){super(e,t)}async sendRequest(e){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:t}=await n({abortSignal:e.abortSignal,tracingOptions:{tracingContext:e.tracingContext}});return e.headers.set(ms.AUTHORIZATION,`Bearer ${t}`),this._nextPolicy.sendRequest(e)}}return{create:(e,t)=>new r(e,t)}}const Cs=Mo("storage-blob");var Os,ws=n(48764).Buffer;function Rs(e){const t=f.parse(e);let n=t.getPath();return n=n||"/",n=encodeURIComponent(n).replace(/%2F/g,"/").replace(/'/g,"%27").replace(/\+/g,"%20").replace(/%25/g,"%"),t.setPath(n),t.toString()}function Es(e,t){const n=e.split(";");for(const r of n)if(r.trim().startsWith(t))return r.trim().match(t+"=(.*)")[1];return""}function Ns(e){let t="";e.startsWith("UseDevelopmentStorage=true")&&(t=function(e){let t="";if(-1!==e.search("DevelopmentStorageProxyUri=")){const n=e.split(";");for(const e of n)e.trim().startsWith("DevelopmentStorageProxyUri=")&&(t=e.trim().match("DevelopmentStorageProxyUri=(.*)")[1])}return t}(e),e="DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://127.0.0.1:10000/devstoreaccount1;");let n=Es(e,"BlobEndpoint");if(n=n.endsWith("/")?n.slice(0,-1):n,-1!==e.search("DefaultEndpointsProtocol=")&&-1!==e.search("AccountKey=")){let r="",o="",s=ws.from("accountKey","base64"),i="";if(o=Es(e,"AccountName"),s=ws.from(Es(e,"AccountKey"),"base64"),!n){r=Es(e,"DefaultEndpointsProtocol");const t=r.toLowerCase();if("https"!==t&&"http"!==t)throw new Error("Invalid DefaultEndpointsProtocol in the provided Connection String. Expecting 'https' or 'http'");if(i=Es(e,"EndpointSuffix"),!i)throw new Error("Invalid EndpointSuffix in the provided Connection String");n=`${r}://${o}.blob.${i}`}if(!o)throw new Error("Invalid AccountName in the provided Connection String");if(0===s.length)throw new Error("Invalid AccountKey in the provided Connection String");return{kind:"AccountConnString",url:n,accountName:o,accountKey:s,proxyUri:t}}{const t=Es(e,"SharedAccessSignature"),r=Bs(n);if(!n)throw new Error("Invalid BlobEndpoint in the provided SAS Connection String");if(!t)throw new Error("Invalid SharedAccessSignature in the provided SAS Connection String");return{kind:"SASConnString",url:n,accountName:r,accountSas:t}}}function Ms(e,t){const n=f.parse(e);let r=n.getPath();return r=r?r.endsWith("/")?`${r}${t}`:`${r}/${t}`:t,n.setPath(r),n.toString()}function Ts(e,t,n){const r=f.parse(e);return r.setQueryParameter(t,n),r.toString()}function As(e,t){return f.parse(e).getQueryParameterValue(t)}function Is(e,t=!0){const n=e.toISOString();return t?n.substring(0,n.length-1)+"0000Z":n.substring(0,n.length-5)+"Z"}function qs(e,t){e.length>42&&(e=e.slice(0,42));const n=e+function(e,t,n=" "){if(String.prototype.padStart)return e.padStart(t,n);return n=n||" ",e.length>t?e:((t-=e.length)>n.length&&(n+=n.repeat(t/n.length)),n.slice(0,t)+e)}(t.toString(),48-e.length,"0");return r=n,c?ws.from(r).toString("base64"):btoa(r);var r}function Bs(e){const t=f.parse(e);let n;try{return n="blob"===t.getHost().split(".")[1]?t.getHost().split(".")[0]:Ls(t)?t.getPath().split("/")[1]:"",n}catch(r){throw new Error("Unable to extract accountName with provided information.")}}function Ls(e){if(void 0===e.getHost())return!1;const t=e.getHost()+(void 0===e.getPort()?"":":"+e.getPort());return/^.*:.*:.*$|^localhost(:[0-9]+)?$|^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])(\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3}(:[0-9]+)?$/.test(t)}function ks(e){if(void 0===e)return;const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];t.push(`${encodeURIComponent(n)}=${encodeURIComponent(r)}`)}return t.join("&")}function zs(e){if(void 0===e)return;const t={blobTagSet:[]};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];t.blobTagSet.push({key:n,value:r})}return t}function js(e){if(void 0===e)return;const t={};for(const n of e.blobTagSet)t[n.key]=n.value;return t}function _s(e){if(void 0!==e)switch(e.kind){case"csv":return{format:{type:"delimited",delimitedTextConfiguration:{columnSeparator:e.columnSeparator||",",fieldQuote:e.fieldQuote||"",recordSeparator:e.recordSeparator,escapeChar:e.escapeCharacter||"",headersPresent:e.hasHeaders||!1}}};case"json":return{format:{type:"json",jsonTextConfiguration:{recordSeparator:e.recordSeparator}}};case"arrow":return{format:{type:"arrow",arrowConfiguration:{schema:e.schema}}};case"parquet":return{format:{type:"parquet"}};default:throw Error("Invalid BlobQueryTextConfiguration.")}}function Hs(e){if(!e)return;if("policy-id"in e)return;const t=[];for(const n in e){const r=n.split("_"),o="or-";r[0].startsWith(o)&&(r[0]=r[0].substring(o.length));const s={ruleId:r[1],replicationStatus:e[n]},i=t.findIndex((e=>e.policyId===r[0]));i>-1?t[i].rules.push(s):t.push({policyId:r[0],rules:[s]})}return t}function Us(e){return e?e.scheme+" "+e.value:void 0}class Ds extends ao.U{constructor(e,t){super(e,t)}async sendRequest(e){return c||("GET"!==e.method.toUpperCase()&&"HEAD"!==e.method.toUpperCase()||(e.url=Ts(e.url,Xr.FORCE_BROWSER_NO_CACHE,(new Date).getTime().toString())),e.headers.remove(Gr),e.headers.remove(Qr)),this._nextPolicy.sendRequest(e)}}class $s{create(e,t){return new Ds(e,t)}}!function(e){e[e.EXPONENTIAL=0]="EXPONENTIAL",e[e.FIXED=1]="FIXED"}(Os||(Os={}));const Fs={maxRetryDelayInMs:12e4,maxTries:4,retryDelayInMs:4e3,retryPolicyType:Os.EXPONENTIAL,secondaryHost:"",tryTimeoutInMs:void 0},Vs=new bs("The operation was aborted.");class Ks extends ao.U{constructor(e,t,n=Fs){super(e,t),this.retryOptions={retryPolicyType:n.retryPolicyType?n.retryPolicyType:Fs.retryPolicyType,maxTries:n.maxTries&&n.maxTries>=1?Math.floor(n.maxTries):Fs.maxTries,tryTimeoutInMs:n.tryTimeoutInMs&&n.tryTimeoutInMs>=0?n.tryTimeoutInMs:Fs.tryTimeoutInMs,retryDelayInMs:n.retryDelayInMs&&n.retryDelayInMs>=0?Math.min(n.retryDelayInMs,n.maxRetryDelayInMs?n.maxRetryDelayInMs:Fs.maxRetryDelayInMs):Fs.retryDelayInMs,maxRetryDelayInMs:n.maxRetryDelayInMs&&n.maxRetryDelayInMs>=0?n.maxRetryDelayInMs:Fs.maxRetryDelayInMs,secondaryHost:n.secondaryHost?n.secondaryHost:Fs.secondaryHost}}async sendRequest(e){return this.attemptSendRequest(e,!1,1)}async attemptSendRequest(e,t,n){const r=e.clone(),o=t||!this.retryOptions.secondaryHost||!("GET"===e.method||"HEAD"===e.method||"OPTIONS"===e.method)||n%2===1;let s;o||(r.url=function(e,t){const n=f.parse(e);return n.setHost(t),n.toString()}(r.url,this.retryOptions.secondaryHost)),this.retryOptions.tryTimeoutInMs&&(r.url=Ts(r.url,Xr.TIMEOUT,Math.floor(this.retryOptions.tryTimeoutInMs/1e3).toString()));try{if(Cs.info(`RetryPolicy: =====> Try=${n} ${o?"Primary":"Secondary"}`),s=await this._nextPolicy.sendRequest(r),!this.shouldRetry(o,n,s))return s;t=t||!o&&404===s.status}catch(i){if(Cs.error(`RetryPolicy: Caught error, message: ${i.message}, code: ${i.code}`),!this.shouldRetry(o,n,s,i))throw i}return await this.delay(o,n,e.abortSignal),this.attemptSendRequest(e,t,++n)}shouldRetry(e,t,n,r){if(t>=this.retryOptions.maxTries)return Cs.info(`RetryPolicy: Attempt(s) ${t} >= maxTries ${this.retryOptions.maxTries}, no further try.`),!1;const o=["ETIMEDOUT","ESOCKETTIMEDOUT","ECONNREFUSED","ECONNRESET","ENOENT","ENOTFOUND","TIMEOUT","EPIPE","REQUEST_SEND_ERROR"];if(r)for(const s of o)if(r.name.toUpperCase().includes(s)||r.message.toUpperCase().includes(s)||r.code&&r.code.toString().toUpperCase()===s)return Cs.info(`RetryPolicy: Network error ${s} found, will retry.`),!0;if(n||r){const t=n?n.status:r?r.statusCode:0;if(!e&&404===t)return Cs.info("RetryPolicy: Secondary access with 404, will retry."),!0;if(503===t||500===t)return Cs.info(`RetryPolicy: Will retry for status code ${t}.`),!0}return!("PARSE_ERROR"!==(null===r||void 0===r?void 0:r.code)||!(null===r||void 0===r?void 0:r.message.startsWith('Error "Error: Unclosed root tag')))&&(Cs.info("RetryPolicy: Incomplete XML response likely due to service timeout, will retry."),!0)}async delay(e,t,n){let r=0;if(e)switch(this.retryOptions.retryPolicyType){case Os.EXPONENTIAL:r=Math.min((Math.pow(2,t-1)-1)*this.retryOptions.retryDelayInMs,this.retryOptions.maxRetryDelayInMs);break;case Os.FIXED:r=this.retryOptions.retryDelayInMs}else r=1e3*Math.random();return Cs.info(`RetryPolicy: Delay for ${r}ms`),async function(e,t,n){return new Promise(((r,o)=>{let s;const i=()=>{void 0!==s&&clearTimeout(s),o(n)};s=setTimeout((()=>{void 0!==t&&t.removeEventListener("abort",i),r()}),e),void 0!==t&&t.addEventListener("abort",i)}))}(r,n,Vs)}}class Xs{constructor(e){this.retryOptions=e}create(e,t){return new Ks(e,t,this.retryOptions)}}var Qs=n(64598);function Gs(e){return e.toLowerCase()}function Ws(e){if(e&&"object"===typeof e){const t=e;if("function"===typeof t.rawHeaders&&"function"===typeof t.clone&&"function"===typeof t.get&&"function"===typeof t.set&&"function"===typeof t.contains&&"function"===typeof t.remove&&"function"===typeof t.headersArray&&"function"===typeof t.headerValues&&"function"===typeof t.headerNames&&"function"===typeof t.toJson)return!0}return!1}class Js{constructor(e){if(this._headersMap={},e)for(const t in e)this.set(t,e[t])}set(e,t){this._headersMap[Gs(e)]={name:e,value:t.toString()}}get(e){const t=this._headersMap[Gs(e)];return t?t.value:void 0}contains(e){return!!this._headersMap[Gs(e)]}remove(e){const t=this.contains(e);return delete this._headersMap[Gs(e)],t}rawHeaders(){const e={};for(const t in this._headersMap){const n=this._headersMap[t];e[n.name.toLowerCase()]=n.value}return e}headersArray(){const e=[];for(const t in this._headersMap)e.push(this._headersMap[t]);return e}headerNames(){const e=[],t=this.headersArray();for(let n=0;n<t.length;++n)e.push(t[n].name);return e}headerValues(){const e=[],t=this.headersArray();for(let n=0;n<t.length;++n)e.push(t[n].value);return e}toJson(){return this.rawHeaders()}toString(){return JSON.stringify(this.toJson())}clone(){const e={};for(const t in this._headersMap){const n=this._headersMap[t];e[n.name]=n.value}return new Js(e)}}class Ys extends ao.U{constructor(e,t,n){super(e,t),this.telemetry=n}async sendRequest(e){return c&&(e.headers||(e.headers=new Js),e.headers.get(Wr)||e.headers.set(Wr,this.telemetry)),this._nextPolicy.sendRequest(e)}}var Zs=n(21408);class ei{constructor(e){const t=[];if(c){if(e){const n=e.userAgentPrefix||"";n.length>0&&-1===t.indexOf(n)&&t.push(n)}const n="azsdk-js-storageblob/12.8.0";-1===t.indexOf(n)&&t.push(n);const r=`(NODE-VERSION ${Zs.version}; ${Qs.type()} ${Qs.release()})`;-1===t.indexOf(r)&&t.push(r)}this.telemetryString=t.join(" ")}create(e,t){return new Ys(e,t,this.telemetryString)}}class ti{sendRequest(e){var t;const n=new XMLHttpRequest;if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const r=e.abortSignal;if(r){if(r.aborted)return Promise.reject(new bs("The operation was aborted."));const e=()=>{n.abort()};r.addEventListener("abort",e),n.addEventListener("readystatechange",(()=>{n.readyState===XMLHttpRequest.DONE&&r.removeEventListener("abort",e)}))}if(ni(n.upload,e.onUploadProgress),ni(n,e.onDownloadProgress),e.formData){const t=e.formData,n=new FormData,r=(e,t)=>{t&&Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"options")?n.append(e,t.value,t.options):n.append(e,t)};for(const e of Object.keys(t)){const n=t[e];if(Array.isArray(n))for(let t=0;t<n.length;t++)r(e,n[t]);else r(e,n)}e.body=n,e.formData=void 0;const o=e.headers.get("Content-Type");o&&-1!==o.indexOf("multipart/form-data")&&e.headers.remove("Content-Type")}n.open(e.method,e.url),n.timeout=e.timeout,n.withCredentials=e.withCredentials;for(const o of e.headers.headersArray())n.setRequestHeader(o.name,o.value);return n.responseType=(null===(t=e.streamResponseStatusCodes)||void 0===t?void 0:t.size)||e.streamResponseBody?"blob":"text",n.send(void 0===e.body?null:e.body),"blob"===n.responseType?new Promise(((t,r)=>{!function(e,t,n,r){e.addEventListener("readystatechange",(()=>{var o;if(e.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(t.streamResponseBody||(null===(o=t.streamResponseStatusCodes)||void 0===o?void 0:o.has(e.status))){const r=new Promise(((n,r)=>{e.addEventListener("load",(()=>{n(e.response)})),oi(t,e,r)}));n({request:t,status:e.status,headers:ri(e),blobBody:r})}else e.addEventListener("load",(()=>{if(e.response){const o=new FileReader;o.onload=function(r){var o;const s=null===(o=r.target)||void 0===o?void 0:o.result;n({request:t,status:e.status,headers:ri(e),bodyAsText:s})},o.onerror=function(e){r(o.error)},o.readAsText(e.response,"UTF-8")}else n({request:t,status:e.status,headers:ri(e)})}))}))}(n,e,t,r),oi(e,n,r)})):new Promise((function(t,r){n.addEventListener("load",(()=>t({request:e,status:n.status,headers:ri(n),bodyAsText:n.responseText}))),oi(e,n,r)}))}}function ni(e,t){t&&e.addEventListener("progress",(e=>t({loadedBytes:e.loaded})))}function ri(e){const t=new Js,n=e.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const r of n){const e=r.indexOf(":"),n=r.slice(0,e),o=r.slice(e+2);t.set(n,o)}return t}function oi(e,t,n){t.addEventListener("error",(()=>n(new Qo(`Failed to send request to ${e.url}`,Qo.REQUEST_SEND_ERROR,void 0,e))));const r=new bs("The operation was aborted.");t.addEventListener("abort",(()=>n(r))),t.addEventListener("timeout",(()=>n(r)))}const si=new ti;function ii(e){if(!e||"object"!==typeof e)return!1;const t=e;return Array.isArray(t.factories)&&"object"===typeof t.options&&"function"===typeof t.toServiceClientOptions}class ai{constructor(e,t={}){this.factories=e,this.options=Object.assign(Object.assign({},t),{httpClient:t.httpClient||si})}toServiceClientOptions(){return{httpClient:this.options.httpClient,requestPolicyFactories:this.factories}}}function ci(e,t={}){void 0===e&&(e=new je.O);const n=new ei(t.userAgentOptions),r=[ko({userAgent:n.telemetryString}),(o=t.keepAliveOptions,{create:(e,t)=>new _o(e,t,o||jo)}),n,Ho(),new $s,new Xs(t.retryOptions),os(void 0,{xmlCharKey:"#"}),cs({logger:Cs.info,allowedHeaderNames:Yr,allowedQueryParameters:Zr})];var o;return c&&(r.push(h(t.proxyOptions)),r.push({create:(e,t)=>{throw ps}})),r.push(u(e)?function(e,t){return e.credential=t,e}(xs(e,"https://storage.azure.com/.default"),e):e),new ai(r,t)}class li extends Error{constructor(e){super(e),this.name="PollerStoppedError",Object.setPrototypeOf(this,li.prototype)}}class pi extends Error{constructor(e){super(e),this.name="PollerCancelledError",Object.setPrototypeOf(this,pi.prototype)}}class di extends class{constructor(e){this.stopped=!0,this.pollProgressCallbacks=[],this.operation=e,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),this.promise.catch((()=>{}))}async startPolling(){for(this.stopped&&(this.stopped=!1);!this.isStopped()&&!this.isDone();)await this.poll(),await this.delay()}async pollOnce(e={}){try{this.isDone()||(this.operation=await this.operation.update({abortSignal:e.abortSignal,fireProgress:this.fireProgress.bind(this)}),this.isDone()&&this.resolve&&this.resolve(this.operation.state.result))}catch(t){throw this.operation.state.error=t,this.reject&&this.reject(t),t}}fireProgress(e){for(const t of this.pollProgressCallbacks)t(e)}async cancelOnce(e={}){this.operation=await this.operation.cancel(e),this.reject&&this.reject(new pi("Poller cancelled"))}poll(e={}){if(!this.pollOncePromise){this.pollOncePromise=this.pollOnce(e);const t=()=>{this.pollOncePromise=void 0};this.pollOncePromise.then(t,t).catch(this.reject)}return this.pollOncePromise}async pollUntilDone(){return this.stopped&&this.startPolling().catch(this.reject),this.promise}onProgress(e){return this.pollProgressCallbacks.push(e),()=>{this.pollProgressCallbacks=this.pollProgressCallbacks.filter((t=>t!==e))}}isDone(){const e=this.operation.state;return Boolean(e.isCompleted||e.isCancelled||e.error)}stopPolling(){this.stopped||(this.stopped=!0,this.reject&&this.reject(new li("This poller is already stopped")))}isStopped(){return this.stopped}cancelOperation(e={}){if(this.stopped||(this.stopped=!0),this.cancelPromise){if(e.abortSignal)throw new Error("A cancel request is currently pending")}else this.cancelPromise=this.cancelOnce(e);return this.cancelPromise}getOperationState(){return this.operation.state}getResult(){return this.operation.state.result}toString(){return this.operation.toString()}}{constructor(e){const{blobClient:t,copySource:n,intervalInMs:r=15e3,onProgress:o,resumeFrom:s,startCopyFromURLOptions:i}=e;let a;s&&(a=JSON.parse(s).state);super(gi(Object.assign(Object.assign({},a),{blobClient:t,copySource:n,startCopyFromURLOptions:i}))),"function"===typeof o&&this.onProgress(o),this.intervalInMs=r}delay(){return vs(this.intervalInMs)}}const ui=async function(e={}){const t=this.state,{copyId:n}=t;return t.isCompleted?gi(t):n?(await t.blobClient.abortCopyFromURL(n,{abortSignal:e.abortSignal}),t.isCancelled=!0,gi(t)):(t.isCancelled=!0,gi(t))},mi=async function(e={}){const t=this.state,{blobClient:n,copySource:r,startCopyFromURLOptions:o}=t;if(t.isStarted){if(!t.isCompleted)try{const n=await t.blobClient.getProperties({abortSignal:e.abortSignal}),{copyStatus:r,copyProgress:o}=n,s=t.copyProgress;o&&(t.copyProgress=o),"pending"===r&&o!==s&&"function"===typeof e.fireProgress?e.fireProgress(t):"success"===r?(t.result=n,t.isCompleted=!0):"failed"===r&&(t.error=new Error(`Blob copy failed with reason: "${n.copyStatusDescription||"unknown"}"`),t.isCompleted=!0)}catch(s){t.error=s,t.isCompleted=!0}}else{t.isStarted=!0;const e=await n.startCopyFromURL(r,o);t.copyId=e.copyId,"success"===e.copyStatus&&(t.result=e,t.isCompleted=!0)}return gi(t)},hi=function(){return JSON.stringify({state:this.state},((e,t)=>{if("blobClient"!==e)return t}))};function gi(e){return{state:Object.assign({},e),cancel:ui,toString:hi,update:mi}}function fi(e){if(e.offset<0)throw new RangeError("Range.offset cannot be smaller than 0.");if(e.count&&e.count<=0)throw new RangeError("Range.count must be larger than 0. Leave it undefined if you want a range from offset to the end.");return e.count?`bytes=${e.offset}-${e.offset+e.count-1}`:`bytes=${e.offset}-`}function yi(e){return bi(e.parameterPath,e.mapper)}function bi(e,t){let n;return n="string"===typeof e?e:Array.isArray(e)?e.join("."):t.serializedName,n}const vi=3e4,Si=9e4;function Pi(e){return"number"===typeof e}function xi(e,t,n,r,o){return!!t(r,o)&&n.retryCount<e}function Ci(e,t={retryCount:0,retryInterval:0},n){n&&(t.error&&(n.innerError=t.error),t.error=n),t.retryCount++;let r=Math.pow(2,t.retryCount-1)-1;return r*=.8*e.retryInterval+Math.floor(Math.random()*(.4*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+r,e.maxRetryInterval),t}var Oi;!function(e){e[e.Exponential=0]="Exponential"}(Oi||(Oi={}));class wi extends ao.U{constructor(e,t,n,r,o){super(e,t),this.retryCount=Pi(n)?n:3,this.retryInterval=Pi(r)?r:vi,this.maxRetryInterval=Pi(o)?o:Si}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then((t=>Ri(this,e,t))).catch((t=>Ri(this,e,t.response,void 0,t)))}}async function Ri(e,t,n,r,o){r=Ci({retryInterval:e.retryInterval,minRetryInterval:0,maxRetryInterval:e.maxRetryInterval},r,o);const s=t.abortSignal&&t.abortSignal.aborted;if(s||!xi(e.retryCount,(function(e){const t=null===e||void 0===e?void 0:e.status;return(503!==t||!(null===n||void 0===n?void 0:n.headers.get(ms.RETRY_AFTER)))&&!(void 0===t||t<500&&408!==t||501===t||505===t)}),r,n)){if(s||o||!n){throw r.error||new Qo("Failed to send the request.",Qo.REQUEST_SEND_ERROR,n&&n.status,n&&n.request,n)}return n}Bo.info(`Retrying request in ${r.retryInterval}`);try{await vs(r.retryInterval);const n=await e._nextPolicy.sendRequest(t.clone());return Ri(e,t,n,r)}catch(i){return Ri(e,t,n,r,i)}}function Ei(){return"x-ms-useragent"}const Ni=Ei;function Mi(){const e=[{key:"core-http",value:ds}],t=function(){const e=self.navigator;return[{key:"OS",value:(e.oscpu||e.platform).replace(" ","")}]}();return function(e,t=" ",n="/"){return e.map((e=>{const t=e.value?`${n}${e.value}`:"";return`${e.key}${t}`})).join(t)}(e.concat(t))}class Ti extends ao.U{constructor(e,t,n,r){super(e,t),this._nextPolicy=e,this._options=t,this.headerKey=n,this.headerValue=r}sendRequest(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)}addUserAgentHeader(e){e.headers||(e.headers=new Js),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)}}const Ai=["GET","HEAD"];class Ii extends ao.U{constructor(e,t,n=20){super(e,t),this.maxRetries=n}sendRequest(e){return this._nextPolicy.sendRequest(e).then((e=>qi(this,e,0)))}}function qi(e,t,n){const{request:r,status:o}=t,s=t.headers.get("location");if(s&&(300===o||301===o&&Ai.includes(r.method)||302===o&&Ai.includes(r.method)||303===o&&"POST"===r.method||307===o)&&(!e.maxRetries||n<e.maxRetries)){const t=f.parse(r.url);return t.setPath(s),r.url=t.toString(),303===o&&(r.method="GET",delete r.body),e._nextPolicy.sendRequest(r).then((t=>qi(e,t,n+1)))}return Promise.resolve(t)}class Bi extends ao.U{constructor(e,t,n=30){super(e,t),this._retryTimeout=n}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then((t=>function(e,t,n){if(409===n.status){const r=function(e){let t,n;if(e){try{n=JSON.parse(e)}catch(r){}if(n&&n.error&&n.error.message&&n.error.code&&"MissingSubscriptionRegistration"===n.error.code){const e=n.error.message.match(/.*'(.*)'/i);e&&(t=e.pop())}}return t}(n.bodyAsText);if(r){const o=function(e){let t;const n=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!n||!n[0])throw new Error(`Unable to extract subscriptionId from the given url - ${e}.`);t=n[0];return t}(t.url);return async function(e,t,n,r){const o=`${t}providers/${n}/register?api-version=2016-02-01`,s=`${t}providers/${n}?api-version=2016-02-01`,i=Li(r);i.method="POST",i.url=o;if(200!==(await e._nextPolicy.sendRequest(i)).status)throw new Error(`Autoregistration of ${n} failed. Please try registering manually.`);return ki(e,s,r)}(e,o,r,t).catch((()=>!1)).then((r=>r?(t.headers.set("x-ms-client-request-id",l()),e._nextPolicy.sendRequest(t.clone())):n))}}return Promise.resolve(n)}(this,e,t)))}}function Li(e,t=!1){const n=e.clone();return t&&(n.url=e.url),n.headers.set("x-ms-client-request-id",l()),n.headers.set("Content-Type","application/json; charset=utf-8"),n}async function ki(e,t,n){const r=Li(n);r.url=t,r.method="GET";const o=await e._nextPolicy.sendRequest(r),s=o.parsedBody;return!(!o.parsedBody||!s.registrationState||"Registered"!==s.registrationState)||(await vs(1e3*e._retryTimeout),ki(e,t,n))}class zi extends ao.U{constructor(e,t,n,r,o,s){super(e,t),this.retryCount=Pi(n)?n:3,this.retryInterval=Pi(r)?r:vi,this.minRetryInterval=Pi(o)?o:3e3,this.maxRetryInterval=Pi(s)?s:Si}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).catch((t=>ji(this,e,t.response,t)))}}async function ji(e,t,n,r,o){if(o=Ci(e,o,r),!xi(e.retryCount,(function(e,t){return!(!t||!t.code||"ETIMEDOUT"!==t.code&&"ESOCKETTIMEDOUT"!==t.code&&"ECONNREFUSED"!==t.code&&"ECONNRESET"!==t.code&&"ENOENT"!==t.code)}),o,n,r))return r?Promise.reject(o.error):n;try{return await vs(o.retryInterval),e._nextPolicy.sendRequest(t.clone())}catch(s){return ji(e,t,n,s,o)}}class _i{constructor(e,t,n,r,o,s,i,a,c,p,d,u,m,h,g){this.streamResponseBody=s,this.streamResponseStatusCodes=g,this.url=e||"",this.method=t||"GET",this.headers=Ws(o)?o:new Js(o),this.body=n,this.query=r,this.formData=void 0,this.withCredentials=i||!1,this.abortSignal=a,this.timeout=c||0,this.onUploadProgress=p,this.onDownloadProgress=d,this.proxySettings=u,this.keepAlive=m,this.decompressResponse=h,this.requestId=this.headers.get("x-ms-client-request-id")||l()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(e){if(!e)throw new Error("options object is required");if(void 0===e.method||null===e.method||"string"!==typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if((void 0===e.pathTemplate||null===e.pathTemplate||"string"!==typeof e.pathTemplate.valueOf())&&(void 0===e.url||null===e.url||"string"!==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!==typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){const t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){const{pathTemplate:t,pathParameters:n}=e;if("string"!==typeof t)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");const r=e.baseUrl;let o=r+(r.endsWith("/")?"":"/")+(t.startsWith("/")?t.slice(1):t);const s=o.match(/({[\w-]*\s*[\w-]*})/gi);if(s&&s.length){if(!n)throw new Error(`pathTemplate: ${t} has been provided. Hence, options.pathParameters must also be provided.`);s.forEach((function(e){const r=e.slice(1,-1),s=n[r];if(null===s||void 0===s||"string"!==typeof s&&"object"!==typeof s){const e=JSON.stringify(n,void 0,2);throw new Error(`pathTemplate: ${t} contains the path parameter ${r} however, it is not present in parameters: ${e}.The value of the path parameter can either be a "string" of the form { ${r}: "some sample value" } or it can be an "object" of the form { "${r}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"===typeof s.valueOf()&&(o=o.replace(e,encodeURIComponent(s))),"object"===typeof s.valueOf()){if(!s.value)throw new Error(`options.pathParameters[${r}] is of type "object" but it does not contain a "value" property.`);o=s.skipUrlEncoding?o.replace(e,s.value):o.replace(e,encodeURIComponent(s.value))}}))}this.url=o}if(e.queryParameters){const t=e.queryParameters;if("object"!==typeof t)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const n=[];this.query={};for(const e in t){const r=t[e];if(r)if("string"===typeof r)n.push(e+"="+encodeURIComponent(r)),this.query[e]=encodeURIComponent(r);else if("object"===typeof r){if(!r.value)throw new Error(`options.queryParameters[${e}] is of type "object" but it does not contain a "value" property.`);r.skipUrlEncoding?(n.push(e+"="+r.value),this.query[e]=r.value):(n.push(e+"="+encodeURIComponent(r.value)),this.query[e]=encodeURIComponent(r.value))}}this.url+=n.join("&")}if(e.headers){const t=e.headers;for(const n of Object.keys(e.headers))this.headers.set(n,t[n])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,void 0!==e.body&&null!==e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new Fe(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),e.spanOptions&&(this.spanOptions=e.spanOptions),e.tracingContext&&(this.tracingContext=e.tracingContext),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this}clone(){const e=new _i(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(e.formData=this.formData),this.operationSpec&&(e.operationSpec=this.operationSpec),this.shouldDeserialize&&(e.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(e.operationResponseGetter=this.operationResponseGetter),e}}const Hi=us.StatusCodes;const Ui="The operation was aborted.";class Di extends ao.U{constructor(e,t,n){super(e,t),this.numberOfRetries=0,this._handleResponse=n||this._defaultResponseHandler}async sendRequest(e){const t=await this._nextPolicy.sendRequest(e.clone());return t.status!==Hi.TooManyRequests&&t.status!==Hi.ServiceUnavailable?t:this._handleResponse(e,t)}async _defaultResponseHandler(e,t){var n;const r=t.headers.get(ms.RETRY_AFTER);if(r){const t=Di.parseRetryAfterHeader(r);if(t){if(this.numberOfRetries+=1,await vs(t,void 0,{abortSignal:e.abortSignal,abortErrorMsg:Ui}),null===(n=e.abortSignal)||void 0===n?void 0:n.aborted)throw new bs(Ui);return this.numberOfRetries<3?this.sendRequest(e):this._nextPolicy.sendRequest(e)}}return t}static parseRetryAfterHeader(e){const t=Number(e);return Number.isNaN(t)?Di.parseDateRetryAfterHeader(e):1e3*t}static parseDateRetryAfterHeader(e){try{const t=Date.now(),n=Date.parse(e)-t;return Number.isNaN(n)?void 0:n}catch(t){return}}}class $i extends ao.U{constructor(e,t,n){super(e,t),this.authenticationProvider=n}signRequest(e){return this.authenticationProvider.signRequest(e)}sendRequest(e){return this.signRequest(e).then((e=>this._nextPolicy.sendRequest(e)))}}const Fi=URL;let Vi;function Ki(e,t){let n;return"string"===typeof e?n=e:(n=t(),"function"===typeof e&&(n=e(n))),n}function Xi(e,t,n,r){return Qi(e,t,n.parameterPath,n.mapper,r)}function Qi(e,t,n,r,o){var s;let i;"string"===typeof n&&(n=[n]);const a=null===(s=t.options)||void 0===s?void 0:s.serializerOptions;if(Array.isArray(n)){if(n.length>0){if(r.isConstant)i=r.defaultValue;else{let o=Gi(t,n);o.propertyFound||(o=Gi(e,n));let s=!1;o.propertyFound||(s=r.required||"options"===n[0]&&2===n.length),i=s?r.defaultValue:o.propertyValue}const s=bi(n,r);o.serialize(r,i,s,a)}}else{r.required&&(i={});for(const s in n){const c=r.type.modelProperties[s],l=n[s],p=Qi(e,t,l,c,o),d=bi(l,c);o.serialize(c,p,d,a),void 0!==p&&null!==p&&(i||(i={}),i[s]=p)}}return i}function Gi(e,t){const n={propertyFound:!1};let r=0;for(;r<t.length;++r){const n=t[r];if(void 0===e||null===e||!(n in e))break;e=e[n]}return r===t.length&&(n.propertyValue=e,n.propertyFound=!0),n}function Wi(e,t){const n=e.parsedHeaders,r=t&&t.bodyMapper,o=t=>Object.defineProperty(t,"_response",{value:e});if(r){const t=r.type.name;if("Stream"===t)return o(Object.assign(Object.assign({},n),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));const s="Composite"===t&&r.type.modelProperties||{},i=Object.keys(s).some((e=>""===s[e].serializedName));if("Sequence"===t||i){const t=[...e.parsedBody||[]];for(const n of Object.keys(s))s[n].serializedName&&(t[n]=e.parsedBody[n]);if(n)for(const e of Object.keys(n))t[e]=n[e];return o(t),t}if("Composite"===t||"Dictionary"===t)return o(Object.assign(Object.assign({},n),e.parsedBody))}return r||"HEAD"===e.request.method||("object"!==typeof(s=e.parsedBody)&&"function"!==typeof s||null===s)?o(Object.assign(Object.assign({},n),{body:e.parsedBody})):o(Object.assign(Object.assign({},n),e.parsedBody));var s}class Ji extends class{constructor(e,t){let n;if(t||(t={}),this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||(Vi||(Vi=new ti),Vi),this._requestPolicyOptions=new ao._(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))Bo.info("ServiceClient: using custom request policies"),n=t.requestPolicyFactories;else{let o;if(u(e)){Bo.info("ServiceClient: creating bearer token authentication policy from provided credentials");o=(()=>{let n;const r=this,o=t;return{create(t,s){const i=function(e,t){if(null===e||void 0===e?void 0:e.credentialScopes){const t=e.credentialScopes;return Array.isArray(t)?t.map((e=>new Fi(e).toString())):new Fi(t).toString()}if(t)return`${t}/.default`;return}(o,r.baseUri);if(!i)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return void 0!==n&&null!==n||(n=xs(e,i)),n.create(t,s)}}})()}else if(e&&"function"===typeof e.signRequest)Bo.info("ServiceClient: creating signing policy from provided credentials"),r=e,o={create:(e,t)=>new $i(e,t,r)};else if(void 0!==e&&null!==e)throw new Error("The credentials argument must implement the TokenCredential interface");if(Bo.info("ServiceClient: using default request policies"),n=function(e,t){const n=[];t.generateClientRequestIdHeader&&n.push(Ho(t.clientRequestIdHeaderName));e&&n.push(e);const r=Ki(t.userAgentHeaderName,Ni),o=Ki(t.userAgent,Mi);r&&o&&n.push(function(e){const t=e&&void 0!==e.key&&null!==e.key?e.key:"x-ms-useragent",n=e&&void 0!==e.value&&null!==e.value?e.value:Mi();return{create:(e,r)=>new Ti(e,r,t,n)}}({key:r,value:o}));n.push(function(e=20){return{create:(t,n)=>new Ii(t,n,e)}}()),n.push(function(e=30){return{create:(t,n)=>new Bi(t,n,e)}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(n.push({create:(e,t)=>new wi(e,t,s,i,a)}),n.push(function(e,t,n,r){return{create:(o,s)=>new zi(o,s,e,t,n,r)}}()),n.push({create:(e,t)=>new Di(e,t)}));var s,i,a;n.push(os(t.deserializationContentTypes)),c&&n.push(h(t.proxySettings));return n.push(cs({logger:Bo.info})),n}(o,t),t.requestPolicyFactories){const e=t.requestPolicyFactories(n);e&&(n=e)}}var r;this._requestPolicyFactories=n}sendRequest(e){if(null===e||void 0===e||"object"!==typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");let t;try{!function(e){if(e&&"object"===typeof e){const t=e;if("string"===typeof t.url&&"string"===typeof t.method&&"object"===typeof t.headers&&Ws(t.headers)&&"function"===typeof t.validateRequestProperties&&"function"===typeof t.prepare&&"function"===typeof t.clone)return!0}return!1}(e)?(t=new _i,t=t.prepare(e)):(e.validateRequestProperties(),t=e)}catch(r){return Promise.reject(r)}let n=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let o=this._requestPolicyFactories.length-1;o>=0;--o)n=this._requestPolicyFactories[o].create(n,this._requestPolicyOptions);return n.sendRequest(t)}async sendOperationRequest(e,t,n){var r;"function"===typeof e.options&&(n=e.options,e.options=void 0);const i=null===(r=e.options)||void 0===r?void 0:r.serializerOptions,a=new _i;let c;try{const n=t.baseUrl||this.baseUri;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");a.method=t.httpMethod,a.operationSpec=t;const r=f.parse(n);if(t.path&&r.appendPath(t.path),t.urlParameters&&t.urlParameters.length>0)for(const o of t.urlParameters){let n=Xi(this,e,o,t.serializer);n=t.serializer.serialize(o.mapper,n,yi(o),i),o.skipEncoding||(n=encodeURIComponent(n)),r.replaceAll(`{${o.mapper.serializedName||yi(o)}}`,n)}if(t.queryParameters&&t.queryParameters.length>0)for(const o of t.queryParameters){let n=Xi(this,e,o,t.serializer);if(void 0!==n&&null!==n){if(n=t.serializer.serialize(o.mapper,n,yi(o),i),void 0!==o.collectionFormat&&null!==o.collectionFormat)if(o.collectionFormat===et.Multi){if(0===n.length)continue;for(const e in n){const t=n[e];n[e]=void 0===t||null===t?"":t.toString()}}else o.collectionFormat!==et.Ssv&&o.collectionFormat!==et.Tsv||(n=n.join(o.collectionFormat));if(!o.skipEncoding)if(Array.isArray(n))for(const e in n)void 0!==n[e]&&null!==n[e]&&(n[e]=encodeURIComponent(n[e]));else n=encodeURIComponent(n);void 0!==o.collectionFormat&&null!==o.collectionFormat&&o.collectionFormat!==et.Multi&&o.collectionFormat!==et.Ssv&&o.collectionFormat!==et.Tsv&&(n=n.join(o.collectionFormat)),r.setQueryParameter(o.mapper.serializedName||yi(o),n)}}a.url=r.toString();const l=t.contentType||this.requestContentType;if(l&&t.requestBody&&a.headers.set("Content-Type",l),t.headerParameters)for(const o of t.headerParameters){let n=Xi(this,e,o,t.serializer);if(void 0!==n&&null!==n){n=t.serializer.serialize(o.mapper,n,yi(o),i);const e=o.mapper.headerCollectionPrefix;if(e)for(const t of Object.keys(n))a.headers.set(e+t,n[t]);else a.headers.set(o.mapper.serializedName||yi(o),n)}}const d=e.options;if(d){if(d.customHeaders)for(const e in d.customHeaders)a.headers.set(e,d.customHeaders[e]);d.abortSignal&&(a.abortSignal=d.abortSignal),d.timeout&&(a.timeout=d.timeout),d.onUploadProgress&&(a.onUploadProgress=d.onUploadProgress),d.onDownloadProgress&&(a.onDownloadProgress=d.onDownloadProgress),d.spanOptions&&(a.spanOptions=d.spanOptions),d.tracingContext&&(a.tracingContext=d.tracingContext),void 0!==d.shouldDeserialize&&null!==d.shouldDeserialize&&(a.shouldDeserialize=d.shouldDeserialize)}let u,m;a.withCredentials=this._withCredentials,function(e,t,n,r){var i,a,c,l,p,d;const u=null!==(a=null===(i=n.options)||void 0===i?void 0:i.serializerOptions)&&void 0!==a?a:{},m={rootName:null!==(c=u.rootName)&&void 0!==c?c:"",includeRoot:null!==(l=u.includeRoot)&&void 0!==l&&l,xmlCharKey:null!==(p=u.xmlCharKey)&&void 0!==p?p:s},h=u.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=Xi(e,n,r.requestBody,r.serializer);const s=r.requestBody.mapper,{required:i,xmlName:a,xmlElementName:c,serializedName:l,xmlNamespace:p,xmlNamespacePrefix:u}=s,f=s.type.name;try{if(void 0!==t.body&&null!==t.body||i){const e=yi(r.requestBody);t.body=r.serializer.serialize(s,t.body,e,m);const n=f===Ze.Stream;if(r.isXML){const e=u?`xmlns:${u}`:"xmlns",r=function(e,t,n,r,s){if(e&&!["Composite","Sequence","Dictionary"].includes(n)){const n={};return n[s.xmlCharKey]=r,n[o]={[t]:e},n}return r}(p,e,f,t.body,m);f===Ze.Sequence?t.body=ts(function(e,t,n,r){if(Array.isArray(e)||(e=[e]),!n||!r)return{[t]:e};const s={[t]:e};return s[o]={[n]:r},s}(r,c||a||l,e,p),{rootName:a||l,xmlCharKey:h}):n||(t.body=ts(r,{rootName:a||l,xmlCharKey:h}))}else{if(f===Ze.String&&((null===(d=r.contentType)||void 0===d?void 0:d.match("text/plain"))||"text"===r.mediaType))return;n||(t.body=JSON.stringify(t.body))}}}catch(g){throw new Error(`Error "${g.message}" occurred in serializing the payload - ${JSON.stringify(l,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(const o of r.formDataParameters){const s=Xi(e,n,o,r.serializer);if(void 0!==s&&null!==s){const e=o.mapper.serializedName||yi(o);t.formData[e]=r.serializer.serialize(o.mapper,s,yi(o),m)}}}}(this,a,e,t),void 0===a.streamResponseStatusCodes&&(a.streamResponseStatusCodes=function(e){const t=new Set;for(const n in e.responses){const r=e.responses[n];r.bodyMapper&&r.bodyMapper.type.name===Ze.Stream&&t.add(Number(n))}return t}(t));try{u=await this.sendRequest(a)}catch(p){m=p}m?(m.response&&(m.details=Wi(m.response,t.responses[m.statusCode]||t.responses.default)),c=Promise.reject(m)):c=Promise.resolve(Wi(u,t.responses[u.status]))}catch(p){c=Promise.reject(p)}const l=n;return l&&c.then((e=>l(null,e._response.parsedBody,e._response.request,e._response))).catch((e=>l(e))),c}}{constructor(e,t){if(void 0===e)throw new Error("'url' cannot be null");if(t||(t={}),!t.userAgent){const e=Mi();t.userAgent=`azure-storage-blob/12.8.0 ${e}`}super(void 0,t),this.requestContentType="application/json; charset=utf-8",this.baseUri=t.endpoint||"{url}",this.url=e,this.version=t.version||"2020-10-02"}}var Yi,Zi=n(17187);!function(e){e[e.Good=0]="Good",e[e.Error=1]="Error"}(Yi||(Yi={}));class ea{constructor(e=5){if(this.actives=0,this.completed=0,this.offset=0,this.operations=[],this.state=Yi.Good,e<1)throw new RangeError("concurrency must be larger than 0");this.concurrency=e,this.emitter=new Zi.EventEmitter}addOperation(e){this.operations.push((async()=>{try{this.actives++,await e(),this.actives--,this.completed++,this.parallelExecute()}catch(t){this.emitter.emit("error",t)}}))}async do(){return 0===this.operations.length?Promise.resolve():(this.parallelExecute(),new Promise(((e,t)=>{this.emitter.on("finish",e),this.emitter.on("error",(e=>{this.state=Yi.Error,t(e)}))})))}nextOperation(){return this.offset<this.operations.length?this.operations[this.offset++]:null}parallelExecute(){if(this.state!==Yi.Error)if(this.completed>=this.operations.length)this.emitter.emit("finish");else for(;this.actives<this.concurrency;){const e=this.nextOperation();if(!e)return;e()}}}class ta{}const na=io({packagePrefix:"Azure.Storage.Blob",namespace:"Microsoft.Storage"});function ra(e){var t,n;return{spanOptions:null===(t=null===e||void 0===e?void 0:e.tracingOptions)||void 0===t?void 0:t.spanOptions,tracingContext:null===(n=null===e||void 0===e?void 0:e.tracingOptions)||void 0===n?void 0:n.tracingContext}}class oa{constructor(){this.read=!1,this.add=!1,this.create=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.tag=!1,this.move=!1,this.execute=!1,this.setImmutabilityPolicy=!1}static parse(e){const t=new oa;for(const n of e)switch(n){case"r":t.read=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"x":t.deleteVersion=!0;break;case"t":t.tag=!0;break;case"m":t.move=!0;break;case"e":t.execute=!0;break;case"i":t.setImmutabilityPolicy=!0;break;default:throw new RangeError(`Invalid permission: ${n}`)}return t}static from(e){const t=new oa;return e.read&&(t.read=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.deleteVersion&&(t.deleteVersion=!0),e.tag&&(t.tag=!0),e.move&&(t.move=!0),e.execute&&(t.execute=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),t}toString(){const e=[];return this.read&&e.push("r"),this.add&&e.push("a"),this.create&&e.push("c"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.tag&&e.push("t"),this.move&&e.push("m"),this.execute&&e.push("e"),this.setImmutabilityPolicy&&e.push("i"),e.join("")}}class sa{constructor(){this.read=!1,this.add=!1,this.create=!1,this.write=!1,this.delete=!1,this.deleteVersion=!1,this.list=!1,this.tag=!1,this.move=!1,this.execute=!1,this.setImmutabilityPolicy=!1}static parse(e){const t=new sa;for(const n of e)switch(n){case"r":t.read=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"l":t.list=!0;break;case"t":t.tag=!0;break;case"x":t.deleteVersion=!0;break;case"m":t.move=!0;break;case"e":t.execute=!0;break;case"i":t.setImmutabilityPolicy=!0;break;default:throw new RangeError(`Invalid permission ${n}`)}return t}static from(e){const t=new sa;return e.read&&(t.read=!0),e.add&&(t.add=!0),e.create&&(t.create=!0),e.write&&(t.write=!0),e.delete&&(t.delete=!0),e.list&&(t.list=!0),e.deleteVersion&&(t.deleteVersion=!0),e.tag&&(t.tag=!0),e.move&&(t.move=!0),e.execute&&(t.execute=!0),e.setImmutabilityPolicy&&(t.setImmutabilityPolicy=!0),t}toString(){const e=[];return this.read&&e.push("r"),this.add&&e.push("a"),this.create&&e.push("c"),this.write&&e.push("w"),this.delete&&e.push("d"),this.deleteVersion&&e.push("x"),this.list&&e.push("l"),this.tag&&e.push("t"),this.move&&e.push("m"),this.execute&&e.push("e"),this.setImmutabilityPolicy&&e.push("i"),e.join("")}}class ia{}function aa(e){return e.end?`${e.start}-${e.end}`:e.start}var ca;!function(e){e.Https="https",e.HttpsAndHttp="https,http"}(ca||(ca={}));class la{constructor(e,t,n,r,o,s,i,a,c,l,p,d,u,m,h,g,f,y,b){this.version=e,this.signature=t,void 0!==n&&"string"!==typeof n?(this.permissions=n.permissions,this.services=n.services,this.resourceTypes=n.resourceTypes,this.protocol=n.protocol,this.startsOn=n.startsOn,this.expiresOn=n.expiresOn,this.ipRangeInner=n.ipRange,this.identifier=n.identifier,this.resource=n.resource,this.cacheControl=n.cacheControl,this.contentDisposition=n.contentDisposition,this.contentEncoding=n.contentEncoding,this.contentLanguage=n.contentLanguage,this.contentType=n.contentType,n.userDelegationKey&&(this.signedOid=n.userDelegationKey.signedObjectId,this.signedTenantId=n.userDelegationKey.signedTenantId,this.signedStartsOn=n.userDelegationKey.signedStartsOn,this.signedExpiresOn=n.userDelegationKey.signedExpiresOn,this.signedService=n.userDelegationKey.signedService,this.signedVersion=n.userDelegationKey.signedVersion,this.preauthorizedAgentObjectId=n.preauthorizedAgentObjectId,this.correlationId=n.correlationId)):(this.services=r,this.resourceTypes=o,this.expiresOn=a,this.permissions=n,this.protocol=s,this.startsOn=i,this.ipRangeInner=c,this.identifier=l,this.resource=p,this.cacheControl=d,this.contentDisposition=u,this.contentEncoding=m,this.contentLanguage=h,this.contentType=g,f&&(this.signedOid=f.signedObjectId,this.signedTenantId=f.signedTenantId,this.signedStartsOn=f.signedStartsOn,this.signedExpiresOn=f.signedExpiresOn,this.signedService=f.signedService,this.signedVersion=f.signedVersion,this.preauthorizedAgentObjectId=y,this.correlationId=b))}get ipRange(){if(this.ipRangeInner)return{end:this.ipRangeInner.end,start:this.ipRangeInner.start}}toString(){const e=["sv","ss","srt","spr","st","se","sip","si","skoid","sktid","skt","ske","sks","skv","sr","sp","sig","rscc","rscd","rsce","rscl","rsct","saoid","scid"],t=[];for(const n of e)switch(n){case"sv":this.tryAppendQueryParameter(t,n,this.version);break;case"ss":this.tryAppendQueryParameter(t,n,this.services);break;case"srt":this.tryAppendQueryParameter(t,n,this.resourceTypes);break;case"spr":this.tryAppendQueryParameter(t,n,this.protocol);break;case"st":this.tryAppendQueryParameter(t,n,this.startsOn?Is(this.startsOn,!1):void 0);break;case"se":this.tryAppendQueryParameter(t,n,this.expiresOn?Is(this.expiresOn,!1):void 0);break;case"sip":this.tryAppendQueryParameter(t,n,this.ipRange?aa(this.ipRange):void 0);break;case"si":this.tryAppendQueryParameter(t,n,this.identifier);break;case"skoid":this.tryAppendQueryParameter(t,n,this.signedOid);break;case"sktid":this.tryAppendQueryParameter(t,n,this.signedTenantId);break;case"skt":this.tryAppendQueryParameter(t,n,this.signedStartsOn?Is(this.signedStartsOn,!1):void 0);break;case"ske":this.tryAppendQueryParameter(t,n,this.signedExpiresOn?Is(this.signedExpiresOn,!1):void 0);break;case"sks":this.tryAppendQueryParameter(t,n,this.signedService);break;case"skv":this.tryAppendQueryParameter(t,n,this.signedVersion);break;case"sr":this.tryAppendQueryParameter(t,n,this.resource);break;case"sp":this.tryAppendQueryParameter(t,n,this.permissions);break;case"sig":this.tryAppendQueryParameter(t,n,this.signature);break;case"rscc":this.tryAppendQueryParameter(t,n,this.cacheControl);break;case"rscd":this.tryAppendQueryParameter(t,n,this.contentDisposition);break;case"rsce":this.tryAppendQueryParameter(t,n,this.contentEncoding);break;case"rscl":this.tryAppendQueryParameter(t,n,this.contentLanguage);break;case"rsct":this.tryAppendQueryParameter(t,n,this.contentType);break;case"saoid":this.tryAppendQueryParameter(t,n,this.preauthorizedAgentObjectId);break;case"scid":this.tryAppendQueryParameter(t,n,this.correlationId)}return t.join("&")}tryAppendQueryParameter(e,t,n){n&&(t=encodeURIComponent(t),n=encodeURIComponent(n),t.length>0&&n.length>0&&e.push(`${t}=${n}`))}}function pa(e,t,n){const r=e.version?e.version:Dr,o=t instanceof _e?t:void 0;let s;if(void 0===o&&void 0!==n&&(s=new ia(n,t)),void 0===o&&void 0===s)throw TypeError("Invalid sharedKeyCredential, userDelegationKey or accountName.");if(r>="2018-11-09")return void 0!==o?function(e,t){if(!(e=ua(e)).identifier&&!(e.permissions&&e.expiresOn))throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let n,r="c",o=e.snapshotTime;e.blobName&&(r="b",e.snapshotTime?r="bs":e.versionId&&(r="bv",o=e.versionId));e.permissions&&(n=e.blobName?oa.parse(e.permissions.toString()).toString():sa.parse(e.permissions.toString()).toString());const s=[n||"",e.startsOn?Is(e.startsOn,!1):"",e.expiresOn?Is(e.expiresOn,!1):"",da(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?aa(e.ipRange):"",e.protocol?e.protocol:"",e.version,r,o,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),i=t.computeHMACSHA256(s);return new la(e.version,i,n,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,r,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType)}(e,o):r>="2020-02-10"?function(e,t){if(!(e=ua(e)).permissions||!e.expiresOn)throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let n,r="c",o=e.snapshotTime;e.blobName&&(r="b",e.snapshotTime?r="bs":e.versionId&&(r="bv",o=e.versionId));e.permissions&&(n=e.blobName?oa.parse(e.permissions.toString()).toString():sa.parse(e.permissions.toString()).toString());const s=[n||"",e.startsOn?Is(e.startsOn,!1):"",e.expiresOn?Is(e.expiresOn,!1):"",da(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?Is(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?Is(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.preauthorizedAgentObjectId,void 0,e.correlationId,e.ipRange?aa(e.ipRange):"",e.protocol?e.protocol:"",e.version,r,o,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),i=t.computeHMACSHA256(s);return new la(e.version,i,n,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,r,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey,e.preauthorizedAgentObjectId,e.correlationId)}(e,s):function(e,t){if(!(e=ua(e)).permissions||!e.expiresOn)throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when generating user delegation SAS.");let n,r="c",o=e.snapshotTime;e.blobName&&(r="b",e.snapshotTime?r="bs":e.versionId&&(r="bv",o=e.versionId));e.permissions&&(n=e.blobName?oa.parse(e.permissions.toString()).toString():sa.parse(e.permissions.toString()).toString());const s=[n||"",e.startsOn?Is(e.startsOn,!1):"",e.expiresOn?Is(e.expiresOn,!1):"",da(t.accountName,e.containerName,e.blobName),t.userDelegationKey.signedObjectId,t.userDelegationKey.signedTenantId,t.userDelegationKey.signedStartsOn?Is(t.userDelegationKey.signedStartsOn,!1):"",t.userDelegationKey.signedExpiresOn?Is(t.userDelegationKey.signedExpiresOn,!1):"",t.userDelegationKey.signedService,t.userDelegationKey.signedVersion,e.ipRange?aa(e.ipRange):"",e.protocol?e.protocol:"",e.version,r,o,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType].join("\n"),i=t.computeHMACSHA256(s);return new la(e.version,i,n,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,r,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType,t.userDelegationKey)}(e,s);if(r>="2015-04-05"){if(void 0!==o)return function(e,t){if(!(e=ua(e)).identifier&&!(e.permissions&&e.expiresOn))throw new RangeError("Must provide 'permissions' and 'expiresOn' for Blob SAS generation when 'identifier' is not provided.");let n,r="c";e.blobName&&(r="b");e.permissions&&(n=e.blobName?oa.parse(e.permissions.toString()).toString():sa.parse(e.permissions.toString()).toString());const o=[n||"",e.startsOn?Is(e.startsOn,!1):"",e.expiresOn?Is(e.expiresOn,!1):"",da(t.accountName,e.containerName,e.blobName),e.identifier,e.ipRange?aa(e.ipRange):"",e.protocol?e.protocol:"",e.version,e.cacheControl?e.cacheControl:"",e.contentDisposition?e.contentDisposition:"",e.contentEncoding?e.contentEncoding:"",e.contentLanguage?e.contentLanguage:"",e.contentType?e.contentType:""].join("\n"),s=t.computeHMACSHA256(o);return new la(e.version,s,n,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier,r,e.cacheControl,e.contentDisposition,e.contentEncoding,e.contentLanguage,e.contentType)}(e,o);throw new RangeError("'version' must be >= '2018-11-09' when generating user delegation SAS using user delegation key.")}throw new RangeError("'version' must be >= '2015-04-05'.")}function da(e,t,n){const r=[`/blob/${e}/${t}`];return n&&r.push(`/${n}`),r.join("")}function ua(e){const t=e.version?e.version:Dr;if(e.snapshotTime&&t<"2018-11-09")throw RangeError("'version' must be >= '2018-11-09' when providing 'snapshotTime'.");if(void 0===e.blobName&&e.snapshotTime)throw RangeError("Must provide 'blobName' when providing 'snapshotTime'.");if(e.versionId&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'versionId'.");if(void 0===e.blobName&&e.versionId)throw RangeError("Must provide 'blobName' when providing 'versionId'.");if(e.permissions&&e.permissions.setImmutabilityPolicy&&t<"2020-08-04")throw RangeError("'version' must be >= '2020-08-04' when provided 'i' permission.");if(e.permissions&&e.permissions.deleteVersion&&t<"2019-10-10")throw RangeError("'version' must be >= '2019-10-10' when providing 'x' permission.");if(e.permissions&&e.permissions.tag&&t<"2019-12-12")throw RangeError("'version' must be >= '2019-12-12' when providing 't' permission.");if(t<"2020-02-10"&&e.permissions&&(e.permissions.move||e.permissions.execute))throw RangeError("'version' must be >= '2020-02-10' when providing the 'm' or 'e' permission.");if(t<"2020-02-10"&&(e.preauthorizedAgentObjectId||e.correlationId))throw RangeError("'version' must be >= '2020-02-10' when providing 'preauthorizedAgentObjectId' or 'correlationId'.");return e.version=t,e}class ma{constructor(e){this.client=e}create(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,ga)}getProperties(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,fa)}delete(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,ya)}setMetadata(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,ba)}getAccessPolicy(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,va)}setAccessPolicy(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Sa)}restore(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Pa)}rename(e,t){const n={sourceContainerName:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,xa)}submitBatch(e,t,n,r){const o={contentLength:e,multipartContentType:t,body:n,options:Ue(r||{})};return this.client.sendOperationRequest(o,Ca)}acquireLease(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Oa)}releaseLease(e,t){const n={leaseId:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,wa)}renewLease(e,t){const n={leaseId:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Ra)}breakLease(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Ea)}changeLease(e,t,n){const r={leaseId:e,proposedLeaseId:t,options:Ue(n||{})};return this.client.sendOperationRequest(r,Na)}listBlobFlatSegment(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Ma)}listBlobHierarchySegment(e,t){const n={delimiter:e,options:Ue(t||{})};return this.client.sendOperationRequest(n,Ta)}getAccountInfo(e){const t={options:Ue(e||{})};return this.client.sendOperationRequest(t,Aa)}}const ha=new Fe(tt,!0),ga={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:tt.ContainerCreateHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerCreateExceptionHeaders}},queryParameters:[it,ft],urlParameters:[ot],headerParameters:[at,ct,lt,yt,bt,{parameterPath:["options","containerEncryptionScope","defaultEncryptionScope"],mapper:{serializedName:"x-ms-default-encryption-scope",xmlName:"x-ms-default-encryption-scope",type:{name:"String"}}},{parameterPath:["options","containerEncryptionScope","preventEncryptionScopeOverride"],mapper:{serializedName:"x-ms-deny-encryption-scope-override",xmlName:"x-ms-deny-encryption-scope-override",type:{name:"Boolean"}}}],isXML:!0,serializer:ha},fa={path:"/{containerName}",httpMethod:"GET",responses:{200:{headersMapper:tt.ContainerGetPropertiesHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerGetPropertiesExceptionHeaders}},queryParameters:[it,ft],urlParameters:[ot],headerParameters:[at,ct,lt,vt],isXML:!0,serializer:ha},ya={path:"/{containerName}",httpMethod:"DELETE",responses:{202:{headersMapper:tt.ContainerDeleteHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerDeleteExceptionHeaders}},queryParameters:[it,ft],urlParameters:[ot],headerParameters:[at,ct,lt,vt,St,Pt],isXML:!0,serializer:ha},ba={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:tt.ContainerSetMetadataHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerSetMetadataExceptionHeaders}},queryParameters:[it,ft,xt],urlParameters:[ot],headerParameters:[at,ct,lt,yt,vt,St],isXML:!0,serializer:ha},va={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}},serializedName:"SignedIdentifiers",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier"},headersMapper:tt.ContainerGetAccessPolicyHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerGetAccessPolicyExceptionHeaders}},queryParameters:[it,ft,Ct],urlParameters:[ot],headerParameters:[at,ct,lt,vt],isXML:!0,serializer:ha},Sa={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:tt.ContainerSetAccessPolicyHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerSetAccessPolicyExceptionHeaders}},requestBody:{parameterPath:["options","containerAcl"],mapper:{serializedName:"containerAcl",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}}},queryParameters:[it,ft,Ct],urlParameters:[ot],headerParameters:[nt,rt,at,ct,bt,vt,St,Pt],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:ha},Pa={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:tt.ContainerRestoreHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerRestoreExceptionHeaders}},queryParameters:[it,ft,Ot],urlParameters:[ot],headerParameters:[at,ct,lt,{parameterPath:["options","deletedContainerName"],mapper:{serializedName:"x-ms-deleted-container-name",xmlName:"x-ms-deleted-container-name",type:{name:"String"}}},{parameterPath:["options","deletedContainerVersion"],mapper:{serializedName:"x-ms-deleted-container-version",xmlName:"x-ms-deleted-container-version",type:{name:"String"}}}],isXML:!0,serializer:ha},xa={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:tt.ContainerRenameHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerRenameExceptionHeaders}},queryParameters:[it,ft,{parameterPath:"comp",mapper:{defaultValue:"rename",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt,{parameterPath:"sourceContainerName",mapper:{serializedName:"x-ms-source-container-name",required:!0,xmlName:"x-ms-source-container-name",type:{name:"String"}}},{parameterPath:["options","sourceLeaseId"],mapper:{serializedName:"x-ms-source-lease-id",xmlName:"x-ms-source-lease-id",type:{name:"String"}}}],isXML:!0,serializer:ha},Ca={path:"/{containerName}",httpMethod:"POST",responses:{202:{bodyMapper:{type:{name:"Stream"},serializedName:"parsedResponse"},headersMapper:tt.ContainerSubmitBatchHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerSubmitBatchExceptionHeaders}},requestBody:{parameterPath:"body",mapper:{serializedName:"body",required:!0,xmlName:"body",type:{name:"Stream"}}},queryParameters:[it,{parameterPath:"comp",mapper:{defaultValue:"batch",isConstant:!0,serializedName:"comp",type:{name:"String"}}},ft],urlParameters:[ot],headerParameters:[nt,rt,at,ct,gt,{parameterPath:"multipartContentType",mapper:{serializedName:"Content-Type",required:!0,xmlName:"Content-Type",type:{name:"String"}}}],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:ha},Oa={path:"/{containerName}",httpMethod:"PUT",responses:{201:{headersMapper:tt.ContainerAcquireLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerAcquireLeaseExceptionHeaders}},queryParameters:[it,ft,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Rt,Et,Nt],isXML:!0,serializer:ha},wa={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:tt.ContainerReleaseLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerReleaseLeaseExceptionHeaders}},queryParameters:[it,ft,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Mt,Tt],isXML:!0,serializer:ha},Ra={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:tt.ContainerRenewLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerRenewLeaseExceptionHeaders}},queryParameters:[it,ft,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Tt,At],isXML:!0,serializer:ha},Ea={path:"/{containerName}",httpMethod:"PUT",responses:{202:{headersMapper:tt.ContainerBreakLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerBreakLeaseExceptionHeaders}},queryParameters:[it,ft,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,It,qt],isXML:!0,serializer:ha},Na={path:"/{containerName}",httpMethod:"PUT",responses:{200:{headersMapper:tt.ContainerChangeLeaseHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerChangeLeaseExceptionHeaders}},queryParameters:[it,ft,wt],urlParameters:[ot],headerParameters:[at,ct,lt,St,Pt,Tt,Bt,Lt],isXML:!0,serializer:ha},Ma={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:tt.ListBlobsFlatSegmentResponse,headersMapper:tt.ContainerListBlobFlatSegmentHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerListBlobFlatSegmentExceptionHeaders}},queryParameters:[it,pt,dt,ut,mt,ft,kt],urlParameters:[ot],headerParameters:[at,ct,lt],isXML:!0,serializer:ha},Ta={path:"/{containerName}",httpMethod:"GET",responses:{200:{bodyMapper:tt.ListBlobsHierarchySegmentResponse,headersMapper:tt.ContainerListBlobHierarchySegmentHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerListBlobHierarchySegmentExceptionHeaders}},queryParameters:[it,pt,dt,ut,mt,ft,kt,{parameterPath:"delimiter",mapper:{serializedName:"delimiter",required:!0,xmlName:"delimiter",type:{name:"String"}}}],urlParameters:[ot],headerParameters:[at,ct,lt],isXML:!0,serializer:ha},Aa={path:"/{containerName}",httpMethod:"GET",responses:{200:{headersMapper:tt.ContainerGetAccountInfoHeaders},default:{bodyMapper:tt.StorageError,headersMapper:tt.ContainerGetAccountInfoExceptionHeaders}},queryParameters:[st,ht],urlParameters:[ot],headerParameters:[at,lt],isXML:!0,serializer:ha};class Ia{constructor(e,t){const n=new Ji(e.url,e.pipeline.toServiceClientOptions());this._url=e.url,void 0===e.name?(this._isContainer=!0,this._containerOrBlobOperation=new ma(n)):(this._isContainer=!1,this._containerOrBlobOperation=new Dn(n)),t||(t=l()),this._leaseId=t}get leaseId(){return this._leaseId}get url(){return this._url}async acquireLease(e,t={}){var n,r,o,s,i,a;const{span:c,updatedOptions:l}=na("BlobLeaseClient-acquireLease",t);if(this._isContainer&&((null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)&&(null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)!==Jr||(null===(o=t.conditions)||void 0===o?void 0:o.ifNoneMatch)&&(null===(s=t.conditions)||void 0===s?void 0:s.ifNoneMatch)!==Jr||(null===(i=t.conditions)||void 0===i?void 0:i.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.acquireLease(Object.assign({abortSignal:t.abortSignal,duration:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(a=t.conditions)||void 0===a?void 0:a.tagConditions}),proposedLeaseId:this._leaseId},ra(l)))}catch(p){throw c.setStatus({code:ke.ERROR,message:p.message}),p}finally{c.end()}}async changeLease(e,t={}){var n,r,o,s,i,a;const{span:c,updatedOptions:l}=na("BlobLeaseClient-changeLease",t);if(this._isContainer&&((null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)&&(null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)!==Jr||(null===(o=t.conditions)||void 0===o?void 0:o.ifNoneMatch)&&(null===(s=t.conditions)||void 0===s?void 0:s.ifNoneMatch)!==Jr||(null===(i=t.conditions)||void 0===i?void 0:i.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{const n=await this._containerOrBlobOperation.changeLease(this._leaseId,e,Object.assign({abortSignal:t.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(a=t.conditions)||void 0===a?void 0:a.tagConditions})},ra(l)));return this._leaseId=e,n}catch(p){throw c.setStatus({code:ke.ERROR,message:p.message}),p}finally{c.end()}}async releaseLease(e={}){var t,n,r,o,s,i;const{span:a,updatedOptions:c}=na("BlobLeaseClient-releaseLease",e);if(this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(n=e.conditions)||void 0===n?void 0:n.ifMatch)!==Jr||(null===(r=e.conditions)||void 0===r?void 0:r.ifNoneMatch)&&(null===(o=e.conditions)||void 0===o?void 0:o.ifNoneMatch)!==Jr||(null===(s=e.conditions)||void 0===s?void 0:s.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.releaseLease(this._leaseId,Object.assign({abortSignal:e.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(i=e.conditions)||void 0===i?void 0:i.tagConditions})},ra(c)))}catch(l){throw a.setStatus({code:ke.ERROR,message:l.message}),l}finally{a.end()}}async renewLease(e={}){var t,n,r,o,s,i;const{span:a,updatedOptions:c}=na("BlobLeaseClient-renewLease",e);if(this._isContainer&&((null===(t=e.conditions)||void 0===t?void 0:t.ifMatch)&&(null===(n=e.conditions)||void 0===n?void 0:n.ifMatch)!==Jr||(null===(r=e.conditions)||void 0===r?void 0:r.ifNoneMatch)&&(null===(o=e.conditions)||void 0===o?void 0:o.ifNoneMatch)!==Jr||(null===(s=e.conditions)||void 0===s?void 0:s.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{return await this._containerOrBlobOperation.renewLease(this._leaseId,Object.assign({abortSignal:e.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(i=e.conditions)||void 0===i?void 0:i.tagConditions})},ra(c)))}catch(l){throw a.setStatus({code:ke.ERROR,message:l.message}),l}finally{a.end()}}async breakLease(e,t={}){var n,r,o,s,i,a;const{span:c,updatedOptions:l}=na("BlobLeaseClient-breakLease",t);if(this._isContainer&&((null===(n=t.conditions)||void 0===n?void 0:n.ifMatch)&&(null===(r=t.conditions)||void 0===r?void 0:r.ifMatch)!==Jr||(null===(o=t.conditions)||void 0===o?void 0:o.ifNoneMatch)&&(null===(s=t.conditions)||void 0===s?void 0:s.ifNoneMatch)!==Jr||(null===(i=t.conditions)||void 0===i?void 0:i.tagConditions)))throw new RangeError("The IfMatch, IfNoneMatch and tags access conditions are ignored by the service. Values other than undefined or their default values are not acceptable.");try{const n=Object.assign({abortSignal:t.abortSignal,breakPeriod:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(a=t.conditions)||void 0===a?void 0:a.tagConditions})},ra(l));return await this._containerOrBlobOperation.breakLease(n)}catch(p){throw c.setStatus({code:ke.ERROR,message:p.message}),p}finally{c.end()}}}var qa=n(48764).Buffer;class Ba extends class{constructor(e,t){var n,r;this.url=Rs(e),this.accountName=Bs(e),this.pipeline=t,this.storageClientContext=new Ji(this.url,t.toServiceClientOptions()),this.isHttps=(n=function(e){return f.parse(e).getScheme()}(this.url)||"",r="https",n.toLocaleLowerCase()===r.toLocaleLowerCase()),this.credential=new je.O;for(const o of this.pipeline.factories)c&&o instanceof _e||o instanceof je.O?this.credential=o:u(o.credential)&&(this.credential=o.credential);this.storageClientContext.requestContentType=void 0}}{constructor(e,t,n,r){let o,s;if(r=r||{},ii(t))s=e,o=t;else if(c&&t instanceof _e||t instanceof je.O||u(t))s=e,o=ci(t,r=n);else if(t||"string"===typeof t){if(!t||"string"!==typeof t||!n||"string"!==typeof n)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const i=t,a=n,l=Ns(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new _e(l.accountName,l.accountKey);s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a)),r.proxyOptions=void l.proxyUri,o=ci(e,r)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a))+"?"+l.accountSas,o=ci(new je.O,r)}}}else s=e,o=ci(new je.O,r);super(s,o),({blobName:this._name,containerName:this._containerName}=this.getBlobAndContainerNamesFromUrl()),this.blobContext=new Dn(this.storageClientContext),this._snapshot=As(this.url,Xr.SNAPSHOT),this._versionId=As(this.url,Xr.VERSIONID)}get name(){return this._name}get containerName(){return this._containerName}withSnapshot(e){return new Ba(Ts(this.url,Xr.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}withVersion(e){return new Ba(Ts(this.url,Xr.VERSIONID,0===e.length?void 0:e),this.pipeline)}getAppendBlobClient(){return new La(this.url,this.pipeline)}getBlockBlobClient(){return new ka(this.url,this.pipeline)}getPageBlobClient(){return new za(this.url,this.pipeline)}async download(e=0,t,n={}){var r;n.conditions=n.conditions||{},n.conditions=n.conditions||{},ro(n.customerProvidedKey,this.isHttps);const{span:o,updatedOptions:s}=na("BlobClient-download",n);try{const i=await this.blobContext.download(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(r=n.conditions)||void 0===r?void 0:r.tagConditions}),requestOptions:{onDownloadProgress:c?void 0:n.onProgress},range:0!==e||t?fi({offset:e,count:t}):void 0,rangeGetContentMD5:n.rangeGetContentMD5,rangeGetContentCRC64:n.rangeGetContentCrc64,snapshot:n.snapshot,cpkInfo:n.customerProvidedKey},ra(s))),a=Object.assign(Object.assign({},i),{_response:i._response,objectReplicationDestinationPolicyId:i.objectReplicationPolicyId,objectReplicationSourceProperties:Hs(i.objectReplicationRules)});if(!c)return a;if((void 0===n.maxRetryRequests||n.maxRetryRequests<0)&&(n.maxRetryRequests=5),void 0===i.contentLength)throw new RangeError("File download response doesn't contain valid content length header");if(!i.etag)throw new RangeError("File download response doesn't contain valid etag header");return new 1(a,(async t=>{var r;const o={leaseAccessConditions:n.conditions,modifiedAccessConditions:{ifMatch:n.conditions.ifMatch||i.etag,ifModifiedSince:n.conditions.ifModifiedSince,ifNoneMatch:n.conditions.ifNoneMatch,ifUnmodifiedSince:n.conditions.ifUnmodifiedSince,ifTags:null===(r=n.conditions)||void 0===r?void 0:r.tagConditions},range:fi({count:e+i.contentLength-t,offset:t}),rangeGetContentMD5:n.rangeGetContentMD5,rangeGetContentCRC64:n.rangeGetContentCrc64,snapshot:n.snapshot,cpkInfo:n.customerProvidedKey};return(await this.blobContext.download(Object.assign({abortSignal:n.abortSignal},o))).readableStreamBody}),e,i.contentLength,{maxRetryRequests:n.maxRetryRequests,onProgress:n.onProgress})}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async exists(e={}){const{span:t,updatedOptions:n}=na("BlobClient-exists",e);try{return ro(e.customerProvidedKey,this.isHttps),await this.getProperties({abortSignal:e.abortSignal,customerProvidedKey:e.customerProvidedKey,conditions:e.conditions,tracingOptions:n.tracingOptions}),!0}catch(r){if(404===r.statusCode)return t.setStatus({code:ke.ERROR,message:"Expected exception when checking blob existence"}),!1;throw t.setStatus({code:ke.ERROR,message:r.message}),r}finally{t.end()}}async getProperties(e={}){var t;const{span:n,updatedOptions:r}=na("BlobClient-getProperties",e);try{e.conditions=e.conditions||{},ro(e.customerProvidedKey,this.isHttps);const o=await this.blobContext.getProperties(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey},ra(r)));return Object.assign(Object.assign({},o),{_response:o._response,objectReplicationDestinationPolicyId:o.objectReplicationPolicyId,objectReplicationSourceProperties:Hs(o.objectReplicationRules)})}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async delete(e={}){var t;const{span:n,updatedOptions:r}=na("BlobClient-delete",e);e.conditions=e.conditions||{};try{return await this.blobContext.delete(Object.assign({abortSignal:e.abortSignal,deleteSnapshots:e.deleteSnapshots,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},ra(r)))}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async deleteIfExists(e={}){var t,n;const{span:r,updatedOptions:o}=na("BlobClient-deleteIfExists",e);try{const e=await this.delete(o);return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(s){if("BlobNotFound"===(null===(t=s.details)||void 0===t?void 0:t.errorCode))return r.setStatus({code:ke.ERROR,message:"Expected exception when deleting a blob or snapshot only if it exists."}),Object.assign(Object.assign({succeeded:!1},null===(n=s.response)||void 0===n?void 0:n.parsedHeaders),{_response:s.response});throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async undelete(e={}){const{span:t,updatedOptions:n}=na("BlobClient-undelete",e);try{return await this.blobContext.undelete(Object.assign({abortSignal:e.abortSignal},ra(n)))}catch(r){throw t.setStatus({code:ke.ERROR,message:r.message}),r}finally{t.end()}}async setHTTPHeaders(e,t={}){var n;const{span:r,updatedOptions:o}=na("BlobClient-setHTTPHeaders",t);t.conditions=t.conditions||{};try{return ro(t.customerProvidedKey,this.isHttps),await this.blobContext.setHttpHeaders(Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:e,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions})},ra(o)))}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async setMetadata(e,t={}){var n;const{span:r,updatedOptions:o}=na("BlobClient-setMetadata",t);t.conditions=t.conditions||{};try{return ro(t.customerProvidedKey,this.isHttps),await this.blobContext.setMetadata(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:e,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope},ra(o)))}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async setTags(e,t={}){var n;const{span:r,updatedOptions:o}=na("BlobClient-setTags",t);try{return await this.blobContext.setTags(Object.assign(Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions})},ra(o)),{tags:zs(e)}))}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async getTags(e={}){var t;const{span:n,updatedOptions:r}=na("BlobClient-getTags",e);try{const o=await this.blobContext.getTags(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},ra(r)));return Object.assign(Object.assign({},o),{_response:o._response,tags:js({blobTagSet:o.blobTagSet})||{}})}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}getBlobLeaseClient(e){return new Ia(this,e)}async createSnapshot(e={}){var t;const{span:n,updatedOptions:r}=na("BlobClient-createSnapshot",e);e.conditions=e.conditions||{};try{return ro(e.customerProvidedKey,this.isHttps),await this.blobContext.createSnapshot(Object.assign({abortSignal:e.abortSignal,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope},ra(r)))}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async beginCopyFromURL(e,t={}){const n=new di({blobClient:{abortCopyFromURL:(...e)=>this.abortCopyFromURL(...e),getProperties:(...e)=>this.getProperties(...e),startCopyFromURL:(...e)=>this.startCopyFromURL(...e)},copySource:e,intervalInMs:t.intervalInMs,onProgress:t.onProgress,resumeFrom:t.resumeFrom,startCopyFromURLOptions:t});return await n.poll(),n}async abortCopyFromURL(e,t={}){const{span:n,updatedOptions:r}=na("BlobClient-abortCopyFromURL",t);try{return await this.blobContext.abortCopyFromURL(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions},ra(r)))}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async syncCopyFromURL(e,t={}){var n,r,o;const{span:s,updatedOptions:i}=na("BlobClient-syncCopyFromURL",t);t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{};try{return await this.blobContext.copyFromURL(e,Object.assign({abortSignal:t.abortSignal,metadata:t.metadata,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince},sourceContentMD5:t.sourceContentMD5,copySourceAuthorization:Us(t.sourceAuthorization),blobTagsString:ks(t.tags),immutabilityPolicyExpiry:null===(r=t.immutabilityPolicy)||void 0===r?void 0:r.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold},ra(i)))}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}async setAccessTier(e,t={}){var n;const{span:r,updatedOptions:o}=na("BlobClient-setAccessTier",t);try{return await this.blobContext.setTier(no(e),Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),rehydratePriority:t.rehydratePriority},ra(o)))}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async downloadToBuffer(e,t,n,r={}){let o,s=0,i=0,a=r;e instanceof qa?(o=e,s=t||0,i="number"===typeof n?n:0):(s="number"===typeof e?e:0,i="number"===typeof t?t:0,a=n||{});const{span:c,updatedOptions:l}=na("BlobClient-downloadToBuffer",a);try{if(a.blockSize||(a.blockSize=0),a.blockSize<0)throw new RangeError("blockSize option must be >= 0");if(0===a.blockSize&&(a.blockSize=Kr),s<0)throw new RangeError("offset option must be >= 0");if(i&&i<=0)throw new RangeError("count option must be greater than 0");if(a.conditions||(a.conditions={}),!i){const e=await this.getProperties(Object.assign(Object.assign({},a),{tracingOptions:Object.assign(Object.assign({},a.tracingOptions),ra(l))}));if(i=e.contentLength-s,i<0)throw new RangeError(`offset ${s} shouldn't be larger than blob size ${e.contentLength}`)}if(!o)try{o=qa.alloc(i)}catch(p){throw new Error(`Unable to allocate the buffer of size: ${i}(in bytes). Please try passing your own buffer to the "downloadToBuffer" method or try using other methods like "download" or "downloadToFile".\t ${p.message}`)}if(o.length<i)throw new RangeError(`The buffer's size should be equal to or larger than the request count of bytes: ${i}`);let e=0;const t=new ea(a.concurrency);for(let n=s;n<s+i;n+=a.blockSize)t.addOperation((async()=>{let t=s+i;n+a.blockSize<t&&(t=n+a.blockSize);(await this.download(n,t-n,{abortSignal:a.abortSignal,conditions:a.conditions,maxRetryRequests:a.maxRetryRequestsPerBlock,customerProvidedKey:a.customerProvidedKey,tracingOptions:Object.assign(Object.assign({},a.tracingOptions),ra(l))})).readableStreamBody;await void 0,e+=t-n,a.onProgress&&a.onProgress({loadedBytes:e})}));return await t.do(),o}catch(d){throw c.setStatus({code:ke.ERROR,message:d.message}),d}finally{c.end()}}async downloadToFile(e,t=0,n,r={}){const{span:o,updatedOptions:s}=na("BlobClient-downloadToFile",r);try{const e=await this.download(t,n,Object.assign(Object.assign({},r),{tracingOptions:Object.assign(Object.assign({},r.tracingOptions),ra(s))}));return e.readableStreamBody&&await void e.readableStreamBody,e.blobDownloadStream=void 0,e}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}getBlobAndContainerNamesFromUrl(){let e,t;try{const n=f.parse(this.url);if("blob"===n.getHost().split(".")[1]){const r=n.getPath().match("/([^/]*)(/(.*))?");e=r[1],t=r[3]}else if(Ls(n)){const r=n.getPath().match("/([^/]*)/([^/]*)(/(.*))?");e=r[2],t=r[4]}else{const r=n.getPath().match("/([^/]*)(/(.*))?");e=r[1],t=r[3]}if(e=decodeURIComponent(e),t=decodeURIComponent(t),t=t.replace(/\\/g,"/"),!e)throw new Error("Provided containerName is invalid.");return{blobName:t,containerName:e}}catch(n){throw new Error("Unable to extract blobName and containerName with provided information.")}}async startCopyFromURL(e,t={}){var n,r,o;const{span:s,updatedOptions:i}=na("BlobClient-startCopyFromURL",t);t.conditions=t.conditions||{},t.sourceConditions=t.sourceConditions||{};try{return await this.blobContext.startCopyFromURL(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:t.sourceConditions.ifMatch,sourceIfModifiedSince:t.sourceConditions.ifModifiedSince,sourceIfNoneMatch:t.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:t.sourceConditions.ifUnmodifiedSince,sourceIfTags:t.sourceConditions.tagConditions},immutabilityPolicyExpiry:null===(r=t.immutabilityPolicy)||void 0===r?void 0:r.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold,rehydratePriority:t.rehydratePriority,tier:no(t.tier),blobTagsString:ks(t.tags),sealBlob:t.sealBlob},ra(i)))}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}generateSasUrl(e){return new Promise((t=>{if(!(this.credential instanceof _e))throw new RangeError("Can only generate the SAS when the client is initialized with a shared key credential");const n=pa(Object.assign({containerName:this._containerName,blobName:this._name,snapshotTime:this._snapshot,versionId:this._versionId},e),this.credential).toString();t(function(e,t){const n=f.parse(e);let r=n.getQuery();return r?r+="&"+t:r=t,n.setQuery(r),n.toString()}(this.url,n))}))}async deleteImmutabilityPolicy(e){const{span:t,updatedOptions:n}=na("BlobClient-deleteImmutabilityPolicy",e);try{return await this.blobContext.deleteImmutabilityPolicy(Object.assign({abortSignal:null===e||void 0===e?void 0:e.abortSignal},ra(n)))}catch(r){throw t.setStatus({code:ke.ERROR,message:r.message}),r}finally{t.end()}}async setImmutabilityPolicy(e,t){const{span:n,updatedOptions:r}=na("BlobClient-setImmutabilityPolicy",t);try{return await this.blobContext.setImmutabilityPolicy(Object.assign({abortSignal:null===t||void 0===t?void 0:t.abortSignal,immutabilityPolicyExpiry:e.expiriesOn,immutabilityPolicyMode:e.policyMode,modifiedAccessConditions:null===t||void 0===t?void 0:t.modifiedAccessCondition},ra(r)))}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async setLegalHold(e,t){const{span:n,updatedOptions:r}=na("BlobClient-setLegalHold",t);try{return await this.blobContext.setLegalHold(e,Object.assign({abortSignal:null===t||void 0===t?void 0:t.abortSignal},ra(r)))}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}}class La extends Ba{constructor(e,t,n,r){let o,s;if(r=r||{},ii(t))s=e,o=t;else if(c&&t instanceof _e||t instanceof je.O||u(t))s=e,o=ci(t,r=n);else if(t||"string"===typeof t){if(!t||"string"!==typeof t||!n||"string"!==typeof n)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const i=t,a=n,l=Ns(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new _e(l.accountName,l.accountKey);s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a)),r.proxyOptions=void l.proxyUri,o=ci(e,r)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a))+"?"+l.accountSas,o=ci(new je.O,r)}}}else s=e,o=ci(new je.O,r);super(s,o),this.appendBlobContext=new hr(this.storageClientContext)}withSnapshot(e){return new La(Ts(this.url,Xr.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}async create(e={}){var t,n,r;const{span:o,updatedOptions:s}=na("AppendBlobClient-create",e);e.conditions=e.conditions||{};try{return ro(e.customerProvidedKey,this.isHttps),await this.appendBlobContext.create(0,Object.assign({abortSignal:e.abortSignal,blobHttpHeaders:e.blobHTTPHeaders,leaseAccessConditions:e.conditions,metadata:e.metadata,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions}),cpkInfo:e.customerProvidedKey,encryptionScope:e.encryptionScope,immutabilityPolicyExpiry:null===(n=e.immutabilityPolicy)||void 0===n?void 0:n.expiriesOn,immutabilityPolicyMode:null===(r=e.immutabilityPolicy)||void 0===r?void 0:r.policyMode,legalHold:e.legalHold,blobTagsString:ks(e.tags)},ra(s)))}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async createIfNotExists(e={}){var t,n;const{span:r,updatedOptions:o}=na("AppendBlobClient-createIfNotExists",e),s={ifNoneMatch:"*"};try{const e=await this.create(Object.assign(Object.assign({},o),{conditions:s}));return Object.assign(Object.assign({succeeded:!0},e),{_response:e._response})}catch(i){if("BlobAlreadyExists"===(null===(t=i.details)||void 0===t?void 0:t.errorCode))return r.setStatus({code:ke.ERROR,message:"Expected exception when creating a blob only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(n=i.response)||void 0===n?void 0:n.parsedHeaders),{_response:i.response});throw r.setStatus({code:ke.ERROR,message:i.message}),i}finally{r.end()}}async seal(e={}){var t;const{span:n,updatedOptions:r}=na("AppendBlobClient-seal",e);e.conditions=e.conditions||{};try{return await this.appendBlobContext.seal(Object.assign({abortSignal:e.abortSignal,appendPositionAccessConditions:e.conditions,leaseAccessConditions:e.conditions,modifiedAccessConditions:Object.assign(Object.assign({},e.conditions),{ifTags:null===(t=e.conditions)||void 0===t?void 0:t.tagConditions})},ra(r)))}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async appendBlock(e,t,n={}){var r;const{span:o,updatedOptions:s}=na("AppendBlobClient-appendBlock",n);n.conditions=n.conditions||{};try{return ro(n.customerProvidedKey,this.isHttps),await this.appendBlobContext.appendBlock(t,e,Object.assign({abortSignal:n.abortSignal,appendPositionAccessConditions:n.conditions,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(r=n.conditions)||void 0===r?void 0:r.tagConditions}),requestOptions:{onUploadProgress:n.onProgress},transactionalContentMD5:n.transactionalContentMD5,transactionalContentCrc64:n.transactionalContentCrc64,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},ra(s)))}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async appendBlockFromURL(e,t,n,r={}){var o;const{span:s,updatedOptions:i}=na("AppendBlobClient-appendBlockFromURL",r);r.conditions=r.conditions||{},r.sourceConditions=r.sourceConditions||{};try{return ro(r.customerProvidedKey,this.isHttps),await this.appendBlobContext.appendBlockFromUrl(e,0,Object.assign({abortSignal:r.abortSignal,sourceRange:fi({offset:t,count:n}),sourceContentMD5:r.sourceContentMD5,sourceContentCrc64:r.sourceContentCrc64,leaseAccessConditions:r.conditions,appendPositionAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(o=r.conditions)||void 0===o?void 0:o.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:r.sourceConditions.ifMatch,sourceIfModifiedSince:r.sourceConditions.ifModifiedSince,sourceIfNoneMatch:r.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:r.sourceConditions.ifUnmodifiedSince},copySourceAuthorization:Us(r.sourceAuthorization),cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope},ra(i)))}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}}class ka extends Ba{constructor(e,t,n,r){let o,s;if(r=r||{},ii(t))s=e,o=t;else if(c&&t instanceof _e||t instanceof je.O||u(t))s=e,o=ci(t,r=n);else if(t||"string"===typeof t){if(!t||"string"!==typeof t||!n||"string"!==typeof n)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const i=t,a=n,l=Ns(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new _e(l.accountName,l.accountKey);s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a)),r.proxyOptions=void l.proxyUri,o=ci(e,r)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a))+"?"+l.accountSas,o=ci(new je.O,r)}}}else s=e,o=ci(new je.O,r);super(s,o),this.blockBlobContext=new Pr(this.storageClientContext),this._blobContext=new Dn(this.storageClientContext)}withSnapshot(e){return new ka(Ts(this.url,Xr.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}async query(e,t={}){var n;ro(t.customerProvidedKey,this.isHttps);const{span:r,updatedOptions:o}=na("BlockBlobClient-query",t);try{if(!c)throw new Error("This operation currently is only supported in Node.js.");const s=await this._blobContext.query(Object.assign({abortSignal:t.abortSignal,queryRequest:{queryType:"SQL",expression:e,inputSerialization:_s(t.inputTextConfiguration),outputSerialization:_s(t.outputTextConfiguration)},leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions})},ra(o)));return new ze(s,{abortSignal:t.abortSignal,onProgress:t.onProgress,onError:t.onError})}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async upload(e,t,n={}){var r,o,s;n.conditions=n.conditions||{};const{span:i,updatedOptions:a}=na("BlockBlobClient-upload",n);try{return ro(n.customerProvidedKey,this.isHttps),await this.blockBlobContext.upload(t,e,Object.assign({abortSignal:n.abortSignal,blobHttpHeaders:n.blobHTTPHeaders,leaseAccessConditions:n.conditions,metadata:n.metadata,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(r=n.conditions)||void 0===r?void 0:r.tagConditions}),requestOptions:{onUploadProgress:n.onProgress},cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope,immutabilityPolicyExpiry:null===(o=n.immutabilityPolicy)||void 0===o?void 0:o.expiriesOn,immutabilityPolicyMode:null===(s=n.immutabilityPolicy)||void 0===s?void 0:s.policyMode,legalHold:n.legalHold,tier:no(n.tier),blobTagsString:ks(n.tags)},ra(a)))}catch(c){throw i.setStatus({code:ke.ERROR,message:c.message}),c}finally{i.end()}}async syncUploadFromURL(e,t={}){var n,r,o,s,i;t.conditions=t.conditions||{};const{span:a,updatedOptions:c}=na("BlockBlobClient-syncUploadFromURL",t);try{return ro(t.customerProvidedKey,this.isHttps),await this.blockBlobContext.putBlobFromUrl(0,e,Object.assign(Object.assign(Object.assign({},t),{blobHttpHeaders:t.blobHTTPHeaders,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:t.conditions.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:null===(n=t.sourceConditions)||void 0===n?void 0:n.ifMatch,sourceIfModifiedSince:null===(r=t.sourceConditions)||void 0===r?void 0:r.ifModifiedSince,sourceIfNoneMatch:null===(o=t.sourceConditions)||void 0===o?void 0:o.ifNoneMatch,sourceIfUnmodifiedSince:null===(s=t.sourceConditions)||void 0===s?void 0:s.ifUnmodifiedSince,sourceIfTags:null===(i=t.sourceConditions)||void 0===i?void 0:i.tagConditions},cpkInfo:t.customerProvidedKey,copySourceAuthorization:Us(t.sourceAuthorization),tier:no(t.tier),blobTagsString:ks(t.tags)}),ra(c)))}catch(l){throw a.setStatus({code:ke.ERROR,message:l.message}),l}finally{a.end()}}async stageBlock(e,t,n,r={}){const{span:o,updatedOptions:s}=na("BlockBlobClient-stageBlock",r);try{return ro(r.customerProvidedKey,this.isHttps),await this.blockBlobContext.stageBlock(e,n,t,Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,requestOptions:{onUploadProgress:r.onProgress},transactionalContentMD5:r.transactionalContentMD5,transactionalContentCrc64:r.transactionalContentCrc64,cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope},ra(s)))}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async stageBlockFromURL(e,t,n=0,r,o={}){const{span:s,updatedOptions:i}=na("BlockBlobClient-stageBlockFromURL",o);try{return ro(o.customerProvidedKey,this.isHttps),await this.blockBlobContext.stageBlockFromURL(e,0,t,Object.assign({abortSignal:o.abortSignal,leaseAccessConditions:o.conditions,sourceContentMD5:o.sourceContentMD5,sourceContentCrc64:o.sourceContentCrc64,sourceRange:0!==n||r?fi({offset:n,count:r}):void 0,cpkInfo:o.customerProvidedKey,encryptionScope:o.encryptionScope,copySourceAuthorization:Us(o.sourceAuthorization)},ra(i)))}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}async commitBlockList(e,t={}){var n,r,o;t.conditions=t.conditions||{};const{span:s,updatedOptions:i}=na("BlockBlobClient-commitBlockList",t);try{return ro(t.customerProvidedKey,this.isHttps),await this.blockBlobContext.commitBlockList({latest:e},Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:t.blobHTTPHeaders,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,immutabilityPolicyExpiry:null===(r=t.immutabilityPolicy)||void 0===r?void 0:r.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold,tier:no(t.tier),blobTagsString:ks(t.tags)},ra(i)))}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}async getBlockList(e,t={}){var n;const{span:r,updatedOptions:o}=na("BlockBlobClient-getBlockList",t);try{const s=await this.blockBlobContext.getBlockList(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions})},ra(o)));return s.committedBlocks||(s.committedBlocks=[]),s.uncommittedBlocks||(s.uncommittedBlocks=[]),s}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async uploadData(e,t={}){const{span:n,updatedOptions:r}=na("BlockBlobClient-uploadData",t);try{if(c){let t;return e instanceof qa?t=e:e instanceof ArrayBuffer?t=qa.from(e):(e=e,t=qa.from(e.buffer,e.byteOffset,e.byteLength)),this.uploadSeekableInternal(((e,n)=>t.slice(e,e+n)),t.byteLength,r)}{const t=new Blob([e]);return this.uploadSeekableInternal(((e,n)=>t.slice(e,e+n)),t.size,r)}}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async uploadBrowserData(e,t={}){const{span:n,updatedOptions:r}=na("BlockBlobClient-uploadBrowserData",t);try{const t=new Blob([e]);return await this.uploadSeekableInternal(((e,n)=>t.slice(e,e+n)),t.size,r)}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async uploadSeekableInternal(e,t,n={}){if(n.blockSize||(n.blockSize=0),n.blockSize<0||n.blockSize>Fr)throw new RangeError("blockSize option must be >= 0 and <= 4194304000");if(0===n.maxSingleShotSize||n.maxSingleShotSize||(n.maxSingleShotSize=$r),n.maxSingleShotSize<0||n.maxSingleShotSize>$r)throw new RangeError("maxSingleShotSize option must be >= 0 and <= 268435456");if(0===n.blockSize){if(t>2097152e8)throw new RangeError(`${t} is too larger to upload to a block blob.`);t>n.maxSingleShotSize&&(n.blockSize=Math.ceil(t/Vr),n.blockSize<Kr&&(n.blockSize=Kr))}n.blobHTTPHeaders||(n.blobHTTPHeaders={}),n.conditions||(n.conditions={});const{span:r,updatedOptions:o}=na("BlockBlobClient-uploadSeekableInternal",n);try{if(t<=n.maxSingleShotSize)return await this.upload(e(0,t),t,o);const s=Math.floor((t-1)/n.blockSize)+1;if(s>Vr)throw new RangeError("The buffer's size is too big or the BlockSize is too small;the number of blocks must be <= 50000");const i=[],a=l();let c=0;const p=new ea(n.concurrency);for(let r=0;r<s;r++)p.addOperation((async()=>{const l=qs(a,r),p=n.blockSize*r,d=(r===s-1?t:p+n.blockSize)-p;i.push(l),await this.stageBlock(l,e(p,d),d,{abortSignal:n.abortSignal,conditions:n.conditions,encryptionScope:n.encryptionScope,tracingOptions:o.tracingOptions}),c+=d,n.onProgress&&n.onProgress({loadedBytes:c})}));return await p.do(),this.commitBlockList(i,o)}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async uploadFile(e,t={}){const{span:n,updatedOptions:r}=na("BlockBlobClient-uploadFile",t);try{const e=(await void 0).size;return await this.uploadSeekableInternal(((e,t)=>()=>{}),e,Object.assign(Object.assign({},t),{tracingOptions:Object.assign(Object.assign({},t.tracingOptions),ra(r))}))}catch(o){throw n.setStatus({code:ke.ERROR,message:o.message}),o}finally{n.end()}}async uploadStream(e,t=8388608,n=5,r={}){r.blobHTTPHeaders||(r.blobHTTPHeaders={}),r.conditions||(r.conditions={});const{span:o,updatedOptions:s}=na("BlockBlobClient-uploadStream",r);try{let i=0;const a=l();let c=0;const p=[],d=new ta(e,t,n,(async(e,t)=>{const n=qs(a,i);p.push(n),i++,await this.stageBlock(n,e,t,{conditions:r.conditions,encryptionScope:r.encryptionScope,tracingOptions:s.tracingOptions}),c+=t,r.onProgress&&r.onProgress({loadedBytes:c})}),Math.ceil(n/4*3));return await d.do(),await this.commitBlockList(p,Object.assign(Object.assign({},r),{tracingOptions:Object.assign(Object.assign({},r.tracingOptions),ra(s))}))}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}}class za extends Ba{constructor(e,t,n,r){let o,s;if(r=r||{},ii(t))s=e,o=t;else if(c&&t instanceof _e||t instanceof je.O||u(t))s=e,o=ci(t,r=n);else if(t||"string"===typeof t){if(!t||"string"!==typeof t||!n||"string"!==typeof n)throw new Error("Expecting non-empty strings for containerName and blobName parameters");{const i=t,a=n,l=Ns(e);if("AccountConnString"===l.kind){if(!c)throw new Error("Account connection string is only supported in Node.js environment");{const e=new _e(l.accountName,l.accountKey);s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a)),r.proxyOptions=void l.proxyUri,o=ci(e,r)}}else{if("SASConnString"!==l.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");s=Ms(Ms(l.url,encodeURIComponent(i)),encodeURIComponent(a))+"?"+l.accountSas,o=ci(new je.O,r)}}}else s=e,o=ci(new je.O,r);super(s,o),this.pageBlobContext=new Tr(this.storageClientContext)}withSnapshot(e){return new za(Ts(this.url,Xr.SNAPSHOT,0===e.length?void 0:e),this.pipeline)}async create(e,t={}){var n,r,o;t.conditions=t.conditions||{};const{span:s,updatedOptions:i}=na("PageBlobClient-create",t);try{return ro(t.customerProvidedKey,this.isHttps),await this.pageBlobContext.create(0,e,Object.assign({abortSignal:t.abortSignal,blobHttpHeaders:t.blobHTTPHeaders,blobSequenceNumber:t.blobSequenceNumber,leaseAccessConditions:t.conditions,metadata:t.metadata,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),cpkInfo:t.customerProvidedKey,encryptionScope:t.encryptionScope,immutabilityPolicyExpiry:null===(r=t.immutabilityPolicy)||void 0===r?void 0:r.expiriesOn,immutabilityPolicyMode:null===(o=t.immutabilityPolicy)||void 0===o?void 0:o.policyMode,legalHold:t.legalHold,tier:no(t.tier),blobTagsString:ks(t.tags)},ra(i)))}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}async createIfNotExists(e,t={}){var n,r;const{span:o,updatedOptions:s}=na("PageBlobClient-createIfNotExists",t);try{const n={ifNoneMatch:"*"},r=await this.create(e,Object.assign(Object.assign({},t),{conditions:n,tracingOptions:s.tracingOptions}));return Object.assign(Object.assign({succeeded:!0},r),{_response:r._response})}catch(i){if("BlobAlreadyExists"===(null===(n=i.details)||void 0===n?void 0:n.errorCode))return o.setStatus({code:ke.ERROR,message:"Expected exception when creating a blob only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(r=i.response)||void 0===r?void 0:r.parsedHeaders),{_response:i.response});throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async uploadPages(e,t,n,r={}){var o;r.conditions=r.conditions||{};const{span:s,updatedOptions:i}=na("PageBlobClient-uploadPages",r);try{return ro(r.customerProvidedKey,this.isHttps),await this.pageBlobContext.uploadPages(n,e,Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(o=r.conditions)||void 0===o?void 0:o.tagConditions}),requestOptions:{onUploadProgress:r.onProgress},range:fi({offset:t,count:n}),sequenceNumberAccessConditions:r.conditions,transactionalContentMD5:r.transactionalContentMD5,transactionalContentCrc64:r.transactionalContentCrc64,cpkInfo:r.customerProvidedKey,encryptionScope:r.encryptionScope},ra(i)))}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}async uploadPagesFromURL(e,t,n,r,o={}){var s;o.conditions=o.conditions||{},o.sourceConditions=o.sourceConditions||{};const{span:i,updatedOptions:a}=na("PageBlobClient-uploadPagesFromURL",o);try{return ro(o.customerProvidedKey,this.isHttps),await this.pageBlobContext.uploadPagesFromURL(e,fi({offset:t,count:r}),0,fi({offset:n,count:r}),Object.assign({abortSignal:o.abortSignal,sourceContentMD5:o.sourceContentMD5,sourceContentCrc64:o.sourceContentCrc64,leaseAccessConditions:o.conditions,sequenceNumberAccessConditions:o.conditions,modifiedAccessConditions:Object.assign(Object.assign({},o.conditions),{ifTags:null===(s=o.conditions)||void 0===s?void 0:s.tagConditions}),sourceModifiedAccessConditions:{sourceIfMatch:o.sourceConditions.ifMatch,sourceIfModifiedSince:o.sourceConditions.ifModifiedSince,sourceIfNoneMatch:o.sourceConditions.ifNoneMatch,sourceIfUnmodifiedSince:o.sourceConditions.ifUnmodifiedSince},cpkInfo:o.customerProvidedKey,encryptionScope:o.encryptionScope,copySourceAuthorization:Us(o.sourceAuthorization)},ra(a)))}catch(c){throw i.setStatus({code:ke.ERROR,message:c.message}),c}finally{i.end()}}async clearPages(e=0,t,n={}){var r;n.conditions=n.conditions||{};const{span:o,updatedOptions:s}=na("PageBlobClient-clearPages",n);try{return await this.pageBlobContext.clearPages(0,Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(r=n.conditions)||void 0===r?void 0:r.tagConditions}),range:fi({offset:e,count:t}),sequenceNumberAccessConditions:n.conditions,cpkInfo:n.customerProvidedKey,encryptionScope:n.encryptionScope},ra(s)))}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async getPageRanges(e=0,t,n={}){var r;n.conditions=n.conditions||{};const{span:o,updatedOptions:s}=na("PageBlobClient-getPageRanges",n);try{return await this.pageBlobContext.getPageRanges(Object.assign({abortSignal:n.abortSignal,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(r=n.conditions)||void 0===r?void 0:r.tagConditions}),range:fi({offset:e,count:t})},ra(s))).then(oo)}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async getPageRangesDiff(e,t,n,r={}){var o;r.conditions=r.conditions||{};const{span:s,updatedOptions:i}=na("PageBlobClient-getPageRangesDiff",r);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(o=r.conditions)||void 0===o?void 0:o.tagConditions}),prevsnapshot:n,range:fi({offset:e,count:t})},ra(i))).then(oo)}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}async getPageRangesDiffForManagedDisks(e,t,n,r={}){var o;r.conditions=r.conditions||{};const{span:s,updatedOptions:i}=na("PageBlobClient-GetPageRangesDiffForManagedDisks",r);try{return await this.pageBlobContext.getPageRangesDiff(Object.assign({abortSignal:r.abortSignal,leaseAccessConditions:r.conditions,modifiedAccessConditions:Object.assign(Object.assign({},r.conditions),{ifTags:null===(o=r.conditions)||void 0===o?void 0:o.tagConditions}),prevSnapshotUrl:n,range:fi({offset:e,count:t})},ra(i))).then(oo)}catch(a){throw s.setStatus({code:ke.ERROR,message:a.message}),a}finally{s.end()}}async resize(e,t={}){var n;t.conditions=t.conditions||{};const{span:r,updatedOptions:o}=na("PageBlobClient-resize",t);try{return await this.pageBlobContext.resize(e,Object.assign({abortSignal:t.abortSignal,leaseAccessConditions:t.conditions,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions}),encryptionScope:t.encryptionScope},ra(o)))}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}async updateSequenceNumber(e,t,n={}){var r;n.conditions=n.conditions||{};const{span:o,updatedOptions:s}=na("PageBlobClient-updateSequenceNumber",n);try{return await this.pageBlobContext.updateSequenceNumber(e,Object.assign({abortSignal:n.abortSignal,blobSequenceNumber:t,leaseAccessConditions:n.conditions,modifiedAccessConditions:Object.assign(Object.assign({},n.conditions),{ifTags:null===(r=n.conditions)||void 0===r?void 0:r.tagConditions})},ra(s)))}catch(i){throw o.setStatus({code:ke.ERROR,message:i.message}),i}finally{o.end()}}async startCopyIncremental(e,t={}){var n;const{span:r,updatedOptions:o}=na("PageBlobClient-startCopyIncremental",t);try{return await this.pageBlobContext.copyIncremental(e,Object.assign({abortSignal:t.abortSignal,modifiedAccessConditions:Object.assign(Object.assign({},t.conditions),{ifTags:null===(n=t.conditions)||void 0===n?void 0:n.tagConditions})},ra(o)))}catch(s){throw r.setStatus({code:ke.ERROR,message:s.message}),s}finally{r.end()}}}},5607:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(99100);class o extends r.U{sendRequest(e){return this._nextPolicy.sendRequest(this.signRequest(e))}signRequest(e){return e}}class s extends o{constructor(e,t){super(e,t)}}class i extends class{create(e,t){throw new Error("Method should be implemented in children classes.")}}{create(e,t){return new s(e,t)}}},17187:function(e){"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,s),r(n)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&g(e,"error",t,n)}(e,o,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var i=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,s,i,l;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),i=s[t]),void 0===i)i=s[t]=n,++e._eventsCount;else if("function"===typeof i?i=s[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=c(e))>0&&i.length>o&&!i.warned){i.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=i.length,l=p,console&&console.warn&&console.warn(l)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=p.bind(r);return o.listener=n,r.wrapFn=o,o}function u(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"===typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(s){r.once&&e.removeEventListener(t,o),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,s=this._events;if(void 0!==s)o=o&&void 0===s.error;else if(!o)return!1;if(o){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var c=s[e];if(void 0===c)return!1;if("function"===typeof c)r(c,this,t);else{var l=c.length,p=h(c,l);for(n=0;n<l;++n)r(p[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,s,i;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){i=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(o=s[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return u(this,e,!0)},s.prototype.rawListeners=function(e){return u(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},37481:function(e,t,n){"use strict";n.d(t,{NG:function(){return g}});var r=n(67294),o=n(39325),s=n(14028),i=n.n(s),a=n(94184),c=n.n(a),l=n(58820),p=n(92685),d=n(99432),u=(n(73074),n(67685)),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},g=function(e){var t=e.content,n=e.category,o=e.type,s=void 0===o?"temporary":o,a=e.link,l=e.hasCloseButton,p=e.onClose,g=e.className,f=h(e,["content","category","type","link","hasCloseButton","onClose","className"]),y=d.n[n];return r.createElement("div",m({className:c()("iui-toast iui-"+n,g)},f),r.createElement("div",{className:"iui-status-area"},r.createElement(y,{className:"iui-icon"})),r.createElement("div",{className:"iui-message"},t),a&&r.createElement("a",{className:"iui-anchor",onClick:a.onClick},a.title),("persisting"===s||l)&&r.createElement(u.h,{size:"small",styleType:"borderless",onClick:p,"aria-label":"Close"},r.createElement(i(),null)))};t.ZP=function(e){var t=e.content,n=e.category,s=e.type,i=void 0===s?"temporary":s,a=e.isVisible,c=e.link,d=e.duration,u=void 0===d?7e3:d,h=e.hasCloseButton,f=e.onRemove,y=e.animateOutTo,b=e.placementPosition,v=void 0===b?"top":b;(0,l.F)();var S=r.useRef(0),P=r.useState(a),x=P[0],C=P[1],O=r.useState(0),w=O[0],R=O[1],E=r.useRef(null),N=r.useState(0),M=N[0],T=N[1];r.useEffect((function(){return"temporary"===i&&I(u),function(){q()}}),[u,i]),r.useEffect((function(){C(a)}),[a]),r.useEffect((function(){a||y||T(-w)}),[a,y,T,w]);var A=function(){q(),T(-w),C(!1)},I=function(e){var t=(0,p.Jj)();t&&(S.current=t.setTimeout((function(){A()}),e))},q=function(){var e;null===(e=(0,p.Jj)())||void 0===e||e.clearTimeout(S.current)};return r.createElement(o.ZP,{timeout:{enter:240,exit:y?400:120},in:x,appear:!0,unmountOnExit:!0,onEnter:function(e){e.style.transform="translateY(15%)",e.style.transitionTimingFunction="ease"},onEntered:function(e){e.style.transform="translateY(0)"},onExiting:function(e){var t=function(e){var t=0,n=0;if(y&&e){var r=e.getBoundingClientRect(),o=r.x,s=r.y,i=y.getBoundingClientRect();t=i.x-o,n=i.y-s}return{translateX:t,translateY:n}}(e),n=t.translateX,r=t.translateY;e.style.transform=y?"scale(0.9) translate("+n+"px,"+r+"px)":"scale(0.9)",e.style.opacity="0",e.style.transitionDuration=y?"400ms":"120ms",e.style.transitionTimingFunction="cubic-bezier(0.4, 0, 1, 1)"},onExited:f},r.createElement("div",{ref:E,className:"iui-toast-all",style:m({height:w},"top"===v?{marginBottom:M}:{marginTop:M})},r.createElement("div",{ref:function(e){if(e){var t=e.getBoundingClientRect().height;R(t)}}},r.createElement(g,{category:n,content:t,link:c,type:i,hasCloseButton:h,onClose:A}))))}},45274:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(67294),o=n(73935),s=n(92685),i=(n(73074),n(94184)),a=n.n(i),c=n(37481),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=function(e){var t=e.toasts,n=e.placement,o=void 0===n?"top":n,s=o.startsWith("top")?"top":"bottom";return r.createElement("span",{className:a()("iui-toast-wrapper","iui-placement-"+o)},t.map((function(e){return r.createElement(c.ZP,l({key:e.id,placementPosition:s},e))})))},d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},m=new(function(){function e(){this.toasts=[],this.lastId=0,this.settings={order:"descending",placement:"top"}}return e.prototype.setSettings=function(e){var t,n,r;null!==(t=e.placement)&&void 0!==t||(e.placement=this.settings.placement),null!==(n=e.order)&&void 0!==n||(e.order=(null===(r=e.placement)||void 0===r?void 0:r.startsWith("bottom"))?"ascending":"descending"),this.settings=e},e.prototype.positive=function(e,t){return this.createToast(e,"positive",t)},e.prototype.informational=function(e,t){return this.createToast(e,"informational",t)},e.prototype.negative=function(e,t){return this.createToast(e,"negative",t)},e.prototype.warning=function(e,t){return this.createToast(e,"warning",t)},e.prototype.createToast=function(e,t,n){var r=this;++this.lastId;var o=this.lastId;return this.toasts=u(u(u([],"ascending"===this.settings.order?this.toasts:[],!0),[d(d({},n),{content:e,category:t,onRemove:function(){var e;r.removeToast(o),null===(e=null===n||void 0===n?void 0:n.onRemove)||void 0===e||e.call(n)},id:o,isVisible:!0})],!1),"descending"===this.settings.order?this.toasts:[],!0),this.updateView(),{close:function(){return r.closeToast(o)}}},e.prototype.removeToast=function(e){this.toasts=this.toasts.filter((function(t){return t.id!==e})),this.updateView()},e.prototype.updateView=function(){var e=(0,s.ZO)("iui-toasts-container");e&&o.render(r.createElement(p,{toasts:this.toasts,placement:this.settings.placement}),e)},e.prototype.closeToast=function(e){this.toasts=this.toasts.map((function(t){return d(d({},t),{isVisible:t.id!==e})})),this.updateView()},e.prototype.closeAll=function(){this.toasts=this.toasts.map((function(e){return d(d({},e),{isVisible:!1})})),this.updateView()},e}())},73074:function(){}}]);