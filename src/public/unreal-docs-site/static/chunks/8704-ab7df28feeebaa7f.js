(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8704],{35986:function(e,t,n){"use strict";n.d(t,{Jt:function(){return b},Pu:function(){return s},ZP:function(){return w}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Adding Attachments and Comments to Your Issue",tile:{name:"Adding Attachments and Comments to Your Issue",description:"Use the Issues REST API to add documents, images, and comments to an issue.",thumbnail:null,href:"/tutorials/adding-attachments-and-comments-to-your-issue/",durationInMinutes:15,relatedApiIds:["issues"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("ActionLinkButton"),h=p("CodeBlock"),k=p("Alert"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T={metadata:s};function w(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Attachments and comments provide a great way for your team to discuss and collaborate on solving an issue. Attachments let you provide files with more details about an issue, and comments let multiple people ask questions and talk about an issue without overwriting each others\u2019 changes."),(0,r.kt)("p",null,"In this tutorial, you will learn how to use the Issues REST API to add comments to an already-existing issue and view all of the issue\u2019s comments. You will also use the API to attach a file to the issue and then download it."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"You will need to create an issue in your project so that you can add comments and attachments to it. Please complete the tutorial ",(0,r.kt)("a",{parentName:"p",href:"../creating-your-first-issue/"},"Creating Your First Issue")," if you haven\u2019t already."),(0,r.kt)("p",null,"Once you have created an issue, note its ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property. You will need to use that anytime you see ",(0,r.kt)("strong",{parentName:"p"},"<","your-issue-id",">")," in this tutorial.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-comments"},"1. Comments"),(0,r.kt)("p",null,"Comments are simple text posts that are associated with a single issue. Many different users in your project can comment on an issue, and anyone who can view the issue will be able to see who said what and when. They\u2019re a useful tool for asking questions or providing clarification.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/add-comment-to-issue/",target:"_blank",title:"Try the Add Comment to Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Method, sample URL, and headers"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues/<your-issue-id>/comments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body"),(0,r.kt)(h,{language:"json",code:'{\n  "text": "This has been noted and will be fixed in version 1.3."\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:"HTTP/1.1 201 Created",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-creating-a-comment"},"1.1. Creating a Comment"),(0,r.kt)("p",null,"Creating a comment is simple! Make a POST request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/add-comment-to-issue/"},"Add Comment to Issue")," endpoint. The body is a JSON object containing just one property\u2014",(0,r.kt)("inlineCode",{parentName:"p"},"text"),"\u2014whose string value is the contents of the message you want to send. The server will automatically generate and save metadata, including when the comment was posted and who made the request."),(0,r.kt)("h4",{id:"url"},"URL"),(0,r.kt)("p",null,"The path includes your issue ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," followed by ",(0,r.kt)("inlineCode",{parentName:"p"},"/comments"),", i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<your-issue-id>/comments")),(0,r.kt)("h4",{id:"body"},"Body"),(0,r.kt)("p",null,"Provide a JSON object with a ",(0,r.kt)("inlineCode",{parentName:"p"},"text")," property containing your message, and no other properties."),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"If the request succeeds, the response will just consist of the ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code (and some headers) without a body.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-issue-comments/",target:"_blank",title:"Try the Get Issue Comments endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/comments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "comments":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeO7IKKXOvh1Nkl344vJ_s_E",\n      "text":"This has been noted and will be fixed in version 1.3.",\n      "authorDisplayName":"Andrew Menzies",\n      "_links":{\n        "author":{\n          "href":"https://api.bentley.com/projects/16ab8bc6-c7de-4fdb-bdb9-248b3b07c178/members/9e543213-2457-466d-9de3-8d8a186b4189"\n        }\n      },\n      "createdDateTime":"2021-06-14T20:34:33.9220455Z"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-viewing-an-issues-comments"},"1.2. Viewing an Issue\u2019s Comments"),(0,r.kt)("p",null,"You can read the comment you added by making a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-comments/"},"Get Issue Comments")," endpoint."),(0,r.kt)("h4",{id:"url-1"},"URL"),(0,r.kt)("p",null,"The URL for this request is exactly the same as it is for creating a comment: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<your-issue-id>/comments")),(0,r.kt)("h4",{id:"response-1"},"Response"),(0,r.kt)("p",null,"The response consists of an array of comments. For each comment, the author\u2019s display name and the comment\u2019s creation time are provided, even though you didn\u2019t manually set them in your request."),(0,r.kt)("p",null,"Each comment in the response also includes a link that can be followed to request additional information about the comment\u2019s author from the ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project-team-member-details/"},"Get Project Team Member Details")," endpoint of the ",(0,r.kt)("strong",{parentName:"p"},"Projects")," API, assuming you have access to it.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-attachments"},"2. Attachments"),(0,r.kt)("p",null,"The Issues API supports attaching files of many different types to issues\u2014nearly any non-executable file type is supported. These can include documents, images (like a problem at the project\u2019s physical site or a screenshot of an iModel), and even short videos (up to 30MB). Adding an attachment to an issue right after you create it can be an excellent way of providing more context than words alone.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/add-attachment-to-issue/",target:"_blank",title:"Try the Add Attachment to Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Method, sample URL, and header"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues/<your-issue-id>/attachments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body"),(0,r.kt)(h,{language:"json",code:'{\n  "fileName":"ExampleDoc.txt",\n  "caption":"Document related to the issue"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:"HTTP/1.1 201 Created\nLocation: https://api.bentley.com/issues/xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw/attachments/xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/upload-attachment-file/",target:"_blank",title:"Try the Upload Attachment File endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request (you will also need to include the file's bytes)"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/issues/xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw/attachments/xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-adding-an-attachment"},"2.1. Adding an Attachment"),(0,r.kt)("p",null,"Adding an attachment is a two-step process. First, make a POST request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/add-attachment-to-issue/"},"Add Attachment to Issue")," endpoint to create metadata for the file you\u2019re about to upload."),(0,r.kt)("h4",{id:"url-2"},"URL"),(0,r.kt)("p",null,"The URL path includes the issue\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property followed by ",(0,r.kt)("inlineCode",{parentName:"p"},"/attachments"),", i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<id>/attachments"),"."),(0,r.kt)("h4",{id:"body-1"},"Body"),(0,r.kt)("p",null,"The request body is a JSON object. It must contain a ",(0,r.kt)("strong",{parentName:"p"},"fileName")," property which can be any valid filename (without a directory path). The file extension should be accurate for the type of file you are about to upload to ensure that users who download the file will be able to open it."),(0,r.kt)("p",null,"You may also add a ",(0,r.kt)("strong",{parentName:"p"},"caption")," property. It just contains simple text that can provide additional context to users who look up the issue\u2019s attachments."),(0,r.kt)("h4",{id:"response-2"},"Response"),(0,r.kt)("p",null,"If successful, the response will include a ",(0,r.kt)("strong",{parentName:"p"},"Location")," header with a URL. Now, for the second step: Upload your raw file (plus the Authorization header, as usual) via PUT request to that URL to complete the process."),(0,r.kt)("p",null,"You can upload the file using the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/upload-attachment-file/"},"Upload Attachment File")," endpoint. The ",(0,r.kt)("inlineCode",{parentName:"p"},"attachmentId")," URL parameter is equal to the final segment of the URL that was returned in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Location")," header. (That is, the segment after ",(0,r.kt)("inlineCode",{parentName:"p"},"/attachments/"),". For example, in the response shown under ",(0,r.kt)("strong",{parentName:"p"},"Sample response"),", the attachment id would be ",(0,r.kt)("inlineCode",{parentName:"p"},"xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI"),", but it\u2019ll be different for your attachment.)"),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Note: To upload a file using the Try It feature of our documentation site, choose the ",(0,r.kt)("strong",null,"Binary")," radio button under ",(0,r.kt)("strong",null,"Body"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-issue-attachments/",target:"_blank",title:"Try the Get Issue Attachments endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request to get attachment list"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/attachments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample attachment list response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "attachments":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI",\n      "fileName":"ExampleDoc.txt",\n      "createdDateTime":"2021-06-16T19:11:21.2722577Z",\n      "size":405,\n      "caption":"Document related to the issue",\n      "binding":null,\n      "type":"txt"\n    }\n  ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-attachment-by-id/",target:"_blank",title:"Try the Get Attachment File endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request to get file"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/attachments/<your-attachment-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"22-getting-the-issues-attachments"},"2.2. Getting the Issue\u2019s Attachments"),(0,r.kt)("p",null,"Make a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-attachments/"},"Get Issue Attachments")," endpoint, passing your issue\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,r.kt)("strong",{parentName:"p"},"id")," parameter, to get a list of all files attached to the issue."),(0,r.kt)("p",null,"This will return a JSON array of attachment metadata, including ",(0,r.kt)("strong",{parentName:"p"},"fileName"),", ",(0,r.kt)("strong",{parentName:"p"},"id"),", and the auto-populated ",(0,r.kt)("strong",{parentName:"p"},"size")," (in bytes) and ",(0,r.kt)("strong",{parentName:"p"},"createdDateTime"),". Find your attachment and take note of its ",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"."),(0,r.kt)("p",null,"Make a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-attachment-by-id/"},"Get Attachment File by ID")," endpoint, passing the same issue ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,r.kt)("strong",{parentName:"p"},"id")," parameter and passing the attachment ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,r.kt)("strong",{parentName:"p"},"attachmentId")," parameter. This will return the file you uploaded earlier. (If using the Try It feature, our developer site will attempt to display the file\u2019s bytes as text, so it may not work well for images. It might be better to try attaching a plain .txt file for purposes of this tutorial.)")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Adding Attachments and Comments to Your Issue",description:"Upload images and documents, and post comments, to make your issue more detailed.",href:"/tutorials/adding-attachments-and-comments-to-your-issue",mdxType:"Tile"}),(0,r.kt)(f,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",isExternal:!0,mdxType:"Tile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-comments",level:2,title:"1. Comments",children:[{id:"11-creating-a-comment",level:3,title:"1.1. Creating a Comment",children:[]},{id:"12-viewing-an-issues-comments",level:3,title:"1.2. Viewing an Issue\u2019s Comments",children:[]}]},{id:"2-attachments",level:2,title:"2. Attachments",children:[{id:"21-adding-an-attachment",level:3,title:"2.1. Adding an Attachment",children:[]},{id:"22-getting-the-issues-attachments",level:3,title:"2.2. Getting the Issue\u2019s Attachments",children:[]}]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},22544:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Adding showcase widgets to your iTwin Viewer",tile:{name:"Adding showcase widgets to your iTwin Viewer",description:"This tutorial takes widgets from the sample showcase and adds them into your iTwin Viewer using the `uiProviders` prop.",thumbnail:"/unreal-docs-site/static/images/view_attributes_ported_results.png",href:"/tutorials/adding-showcase-widgets-to-your-itwin-viewer/",durationInMinutes:30,relatedApiIds:["visualization"],showInFirstSteps:!0,firstStepsSequenceNumber:3}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"/unreal-docs-site/static/images/adding-showcase-widgets-to-your-itwin-viewer-sample.gif",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial takes widgets from the sample showcase and adds them to your iTwin Viewer using the ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Explored the ",(0,r.kt)("a",{parentName:"li",href:"https://www.itwinjs.org/sample-showcase"},"Sample Showcase"),"."),(0,r.kt)("li",{parentName:"ul"},"Created your own iTwin Web Viewer based on the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start"},"Web Application Quick Start"),"."),(0,r.kt)("li",{parentName:"ul"},"Configured your iTwin Viewer with the House Model sample iModel.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to use this sample iModel can be found at the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-test-imodel-sample"},"create iModel sample tutorial"),"."))),(0,r.kt)("li",{parentName:"ul"},"Understand the concept of a ",(0,r.kt)("a",{parentName:"li",href:"https://www.itwinjs.org/reference/appui-react/uiprovider/uiitemsprovider/"},"UiItemsProvider")," and how to add widgets on a ",(0,r.kt)("a",{parentName:"li",href:"https://www.itwinjs.org/reference/appui-react/uiprovider/uiitemsprovider/"},"UiItemsProvider")," to an iTwin Viewer."),(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-viewer-hello-world"},"\u201cCustomizing the iTwin Viewer\u201d")," tutorial."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-understanding-the-sample-showcase"},"1. Understanding the Sample Showcase"),(0,r.kt)("p",null,"We hope you have given the ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/sample-showcase"},"Sample Showcase")," a tour and enjoyed the many samples provided. You may want to use some of these samples in your own iTwin Viewer. To do so you first need to understand how the showcase works."),(0,r.kt)("p",null,"If we take a closer look at the files involved in each sample, notice they all follow the same pattern containing a few important files:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName]App.tsx")," - Corresponds to ",(0,r.kt)("inlineCode",{parentName:"li"},"App.tsx")," in the iTwin Viewer template and provides the main ",(0,r.kt)("inlineCode",{parentName:"li"},"Viewer")," component."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName]Widget.tsx")," - Defines the ",(0,r.kt)("inlineCode",{parentName:"li"},"UiItemsProvider")," that will be passed into prop ",(0,r.kt)("inlineCode",{parentName:"li"},"uiProviders")," for our sample widget component. This widget is the controller for our samples."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName]Api.ts")," - Defines widget functionality that uses the iTwin.js API being showcased."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"[SampleName].scss")," - Defines the styles in our css classes used inside the widget.")),(0,r.kt)("p",null,"Given this pattern, it\u2019s simple to identify the parts required to bring our sample showcase to your iTwin Viewer. The component revolves around the ",(0,r.kt)("inlineCode",{parentName:"p"},"[SampleName]Widget.tsx")," file so we need to copy all the files associated with our custom widgets ",(0,r.kt)("inlineCode",{parentName:"p"},"UiItemsProvider")," and pass it in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-example-using-a-sample"},"2. Example using a sample"),(0,r.kt)("p",null,"For this tutorial, we will be taking the widget from sample ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/sample-showcase/?group=Viewer&sample=view-attributes-sample&imodel=House+Sample"},"View Attributes")," and adding it into our iTwin Viewer.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Lines you need to add in your iTwin Viewer in `App.tsx`"),(0,r.kt)(m,{language:"typescript",code:'... // Import the widget provider\nimport { ViewAttributesWidgetProvider } from "./ViewAttributesWidget";\n\n... // Pass the imported UiProvider into the uiProvider prop in the <Viewer /> component\n<Viewer\n  ...\n  uiProviders={[new ViewAttributesWidgetProvider()]}\n/>',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"The two lines shown in the code snippet are the only lines you will need to add in your iTwin Viewer in ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx"),".")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"ViewAttributes.scss"),(0,r.kt)(m,{language:"scss",code:".sample-options {\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    padding: 8px;\n    display: grid;\n    row-gap: 16px;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr min-content;\n    max-width: 1200px;\n    margin: auto;\n  \n    .sample-grid {\n      display: grid;\n      gap: 16px;\n      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n      grid-auto-rows: min-content;\n      align-content: start;\n    }\n  \n    .sample-control {\n      display: grid;\n      column-gap: 8px;\n      grid-template-columns: 30px 130px auto;\n      align-items: center;\n    }\n  \n    .instructions {\n      align-self: end;\n      justify-self: start;\n    }\n  }",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"  We need to copy these three files to bring our widget over."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ViewAttributesApi.ts")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ViewAttributesWidget.tsx")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ViewAttributes.scss")))),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"ViewAttributesApi.ts"),(0,r.kt)(m,{language:"typescript",code:'import { RenderMode, ViewFlagsProperties } from "@itwin/core-common";\nimport { Viewport, ViewState3d } from "@itwin/core-frontend";\n\nexport type ViewFlag = keyof Pick<ViewFlagsProperties, "acsTriad" | "backgroundMap" | "grid" | "hiddenEdges" | "monochrome" | "visibleEdges" | "shadows">;\n\nexport interface AttrValues {\n  renderMode: RenderMode;\n  backgroundTransparency: number;\n  cameraOn: boolean;\n  skybox: boolean;\n  viewFlags: Record<ViewFlag, boolean>;\n}\n\n/** This class implements the interaction between the sample and the iTwin.js API.  No user interface. */\nexport class ViewAttributesApi {\n\n  public static settings: AttrValues = {\n    renderMode: RenderMode.SmoothShade,\n    backgroundTransparency: 0,\n    cameraOn: true,\n    skybox: true,\n    viewFlags: {\n      acsTriad: false,\n      backgroundMap: true,\n      grid: false,\n      hiddenEdges: false,\n      monochrome: false,\n      visibleEdges: false,\n      shadows: false,\n    },\n  };\n\n  public static getAttrValues(vp: Viewport): AttrValues {\n    return {\n      renderMode: vp.viewFlags.renderMode,\n      backgroundTransparency: ViewAttributesApi.getBackgroundTransparency(vp),\n      cameraOn: vp.isCameraOn,\n      skybox: ViewAttributesApi.isSkyboxOn(vp),\n      viewFlags: {\n        acsTriad: vp.viewFlags.acsTriad,\n        backgroundMap: vp.viewFlags.backgroundMap,\n        grid: vp.viewFlags.grid,\n        hiddenEdges: vp.viewFlags.hiddenEdges,\n        monochrome: vp.viewFlags.monochrome,\n        visibleEdges: vp.viewFlags.visibleEdges,\n        shadows: vp.viewFlags.shadows,\n      },\n    };\n  }\n\n  // Modify flag values using the Viewport API.\n  public static setViewFlag(vp: Viewport, flag: ViewFlag, on: boolean) {\n    vp.viewFlags = vp.viewFlags.with(flag, on);\n    vp.synchWithView();\n  }\n\n  // Query map background transparency using the Viewport API\n  public static getBackgroundTransparency(vp: Viewport) {\n    return vp.backgroundMapSettings.transparency === false ? 1 : vp.backgroundMapSettings.transparency;\n  }\n\n  // Modify map background transparency using the Viewport API\n  public static setBackgroundTransparency(vp: Viewport, transparency: number) {\n    const style = vp.backgroundMapSettings.clone({ transparency });\n    vp.displayStyle.backgroundMapSettings = style;\n    vp.synchWithView();\n  }\n\n  // Modify camera setting using the Viewport API.\n  public static setCameraOnOff(vp: Viewport, on: boolean) {\n    if (on)\n      vp.turnCameraOn();\n    else\n      (vp.view as ViewState3d).turnCameraOff();\n\n    vp.synchWithView();\n  }\n\n  // Query skybox setting using the Viewport API.\n  public static isSkyboxOn(vp: Viewport) {\n    if (vp.view.is3d()) {\n      const displayStyle = vp.view.getDisplayStyle3d();\n      return displayStyle.environment.displaySky;\n    }\n\n    return false;\n  }\n\n  // Modify skybox setting using the Viewport API.\n  public static setSkyboxOnOff(vp: Viewport, on: boolean) {\n    if (vp.view.is3d()) {\n      const style = vp.view.getDisplayStyle3d();\n      style.environment = style.environment.withDisplay({ sky: on });\n    }\n  }\n\n  // Query render model setting using the Viewport API.\n  public static getRenderModel(vp: Viewport): RenderMode {\n    return vp.viewFlags.renderMode;\n  }\n\n  // Modify render mode setting using the Viewport API.\n  public static setRenderMode(vp: Viewport, mode: RenderMode) {\n    const viewFlags = vp.viewFlags.override({ renderMode: mode });\n    vp.viewFlags = viewFlags;\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"}),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"ViewAttributesWidget.tsx"),(0,r.kt)(m,{language:"jsx",code:'import React from "react";\nimport { StagePanelLocation, StagePanelSection, UiItemsProvider, Widget, WidgetState  } from "@itwin/appui-react";\nimport { RenderMode } from "@itwin/core-common";\nimport { IModelApp } from "@itwin/core-frontend";\nimport { SvgHelpCircularHollow } from "@itwin/itwinui-icons-react";\nimport { Alert, IconButton, Select, Slider, Text, ToggleSwitch, Tooltip } from "@itwin/itwinui-react";\nimport { AttrValues, ViewAttributesApi, ViewFlag } from "./ViewAttributesApi";\nimport "./ViewAttributes.scss";\n\nexport const ViewAttributesWidget = () => {\n  const [attrValuesState, setAttrValuesState] = React.useState<AttrValues>(() => ViewAttributesApi.settings);\n\n  const onChangeRenderMode = (renderMode: RenderMode) => {\n    const vp = IModelApp.viewManager.selectedView;\n    if (vp) {\n      ViewAttributesApi.setRenderMode(vp, renderMode);\n      setAttrValuesState({ ...attrValuesState, renderMode });\n    }\n  };\n\n  // Handle changes to the skybox toggle.\n  const onChangeSkyboxToggle = (checked: boolean) => {\n    const vp = IModelApp.viewManager.selectedView;\n    if (vp) {\n      ViewAttributesApi.setSkyboxOnOff(vp, checked);\n    }\n  };\n\n  // Handle changes to the camera toggle.\n  const onChangeCameraToggle = (checked: boolean) => {\n    const vp = IModelApp.viewManager.selectedView;\n    if (vp) {\n      ViewAttributesApi.setCameraOnOff(vp, checked);\n    }\n  };\n\n  // Handle changes to a view flag toggle.\n  const onChangeViewFlagToggle = (flag: ViewFlag, checked: boolean) => {\n    const vp = IModelApp.viewManager.selectedView;\n    if (vp) {\n      ViewAttributesApi.setViewFlag(vp, flag, checked);\n      attrValuesState.viewFlags = { ...attrValuesState.viewFlags, [flag]: checked };\n      setAttrValuesState({ ...attrValuesState });\n    }\n  };\n\n  // Handle changes to a view flag toggle.\n  const onMapTransparencyChange = (num: number) => {\n    const vp = IModelApp.viewManager.selectedView;\n    if (vp) {\n      ViewAttributesApi.setBackgroundTransparency(vp, num);\n      setAttrValuesState({ ...attrValuesState, backgroundTransparency: num });\n    }\n  };\n\n  const Help = ({ text }: { text: string }) => (\n    <Tooltip content={text}>\n      <IconButton styleType="borderless" size="small"><SvgHelpCircularHollow /></IconButton>\n    </Tooltip>\n  );\n\n  return (\n    <div className="sample-options">\n      <div className="sample-grid">\n        <div className="sample-control">\n          <Help text="Controls the render mode."></Help>\n          <Text>Render Mode</Text>\n          <Select\n            size="small"\n            value={attrValuesState.renderMode}\n            options={renderModelOptions}\n            onChange={onChangeRenderMode} />\n        </div>\n        <div className="sample-control">\n          <Help text="Click to see the iModel on a map. Click again to disable map. Does not apply if the selected iModel is not geolocated."></Help>\n          <Text>Background Map</Text>\n          <ToggleSwitch checked={attrValuesState.viewFlags.backgroundMap} onChange={() => onChangeViewFlagToggle("backgroundMap", !attrValuesState.viewFlags.backgroundMap)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Adjusting the slider changes the transparency of the background map. Does not apply if map is not currently being displayed."></Help>\n          <Text>Map Transparency</Text>\n          <Slider min={0} max={1} step={0.01} values={[attrValuesState.backgroundTransparency]} onChange={(values) => onMapTransparencyChange(values[0])} disabled={!attrValuesState.viewFlags.backgroundMap}></Slider>\n        </div>\n        <div className="sample-control">\n          <Help text="Click to see a visualization of the active coordinate system."></Help>\n          <Text>ACS</Text>\n          <ToggleSwitch checked={attrValuesState.viewFlags.acsTriad} onChange={() => onChangeViewFlagToggle("acsTriad", !attrValuesState.viewFlags.acsTriad)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Click for perspective view. Click again for orthographic view."></Help>\n          <Text>Camera</Text>\n          <ToggleSwitch checked={attrValuesState.cameraOn} onChange={() => onChangeCameraToggle(!attrValuesState.cameraOn)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Toggle grid view."></Help>\n          <Text>Grid</Text>\n          <ToggleSwitch checked={attrValuesState.viewFlags.grid} onChange={() => onChangeViewFlagToggle("grid", !attrValuesState.viewFlags.grid)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Click to disable colors."></Help>\n          <Text>Monochrome</Text>\n          <ToggleSwitch checked={attrValuesState.viewFlags.monochrome} onChange={() => onChangeViewFlagToggle("monochrome", !attrValuesState.viewFlags.monochrome)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Click to see shadows."></Help>\n          <Text>Shadows</Text>\n          <ToggleSwitch checked={attrValuesState.viewFlags.shadows} onChange={() => onChangeViewFlagToggle("shadows", !attrValuesState.viewFlags.shadows)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Click to see the sky box."></Help>\n          <Text>Sky box</Text>\n          <ToggleSwitch checked={attrValuesState.skybox} onChange={() => onChangeSkyboxToggle(!attrValuesState.skybox)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Click to disable visible edges. Only applies to smooth shade render mode."></Help>\n          <Text>Visible Edges</Text>\n          <ToggleSwitch checked={attrValuesState.viewFlags.visibleEdges} onChange={() => onChangeViewFlagToggle("visibleEdges", !attrValuesState.viewFlags.visibleEdges)} />\n        </div>\n        <div className="sample-control">\n          <Help text="Click to see hidden edges.  Does not apply to wireframe. For smooth shade render mode, does not apply when visible edges are off."></Help>\n          <Text>Hidden Edges</Text>\n          <ToggleSwitch\n            checked={attrValuesState.viewFlags.hiddenEdges}\n            onChange={() => onChangeViewFlagToggle("hiddenEdges", !attrValuesState.viewFlags.hiddenEdges)}\n            disabled={attrValuesState.renderMode === RenderMode.Wireframe || (attrValuesState.renderMode === RenderMode.SmoothShade && !attrValuesState.viewFlags.visibleEdges)} />\n        </div>\n      </div>\n      <Alert type="informational" className="instructions">\n        Use the controls to change the view attributes.\n      </Alert>\n    </div>\n  );\n};\n\nconst renderModelOptions = [\n  { value: RenderMode.HiddenLine, label: "Hidden Line" },\n  { value: RenderMode.SmoothShade, label: "Smooth Shade" },\n  { value: RenderMode.SolidFill, label: "Solid Fill" },\n  { value: RenderMode.Wireframe, label: "Wireframe" },\n];\n\nexport class ViewAttributesWidgetProvider implements UiItemsProvider {\n  public readonly id: string = "ViewAttributesWidgetProvider";\n\n  public provideWidgets(_stageId: string, _stageUsage: string, location: StagePanelLocation, _section?: StagePanelSection): ReadonlyArray<Widget> {\n    const widgets: Widget[] = [];\n    if (location === StagePanelLocation.Right) {\n      widgets.push(\n        {\n          id: "ViewAttributesWidget",\n          label: "View Attributes Controls",\n          defaultState: WidgetState.Open,\n          content: <ViewAttributesWidget />,\n        }\n      );\n    }\n    return widgets;\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"}),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"For this tutorial, these files will be placed directly in our src directory so your file structure should look similar to this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/sample_viewer_port_to_itwin_viewer.png",alt:"ViewAttributesStructure"})),(0,r.kt)("p",null,"Running our iTwin Viewer, notice the same fully functional widget from the sample showcase in your iTwin Viewer."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/view_attributes_ported_results.png",alt:"ViewAttributesResults"})),(0,r.kt)("p",null,"Feel free to customize these widgets to your liking.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-multiple-ways-to-extend-uiproviders"},"3. Multiple ways to extend uiProviders"),(0,r.kt)("p",null,"If you already have a ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop passed in or would like to add more widgets from the sample showcase, the ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop takes in an array of providers. Extending the widget is as simple as appending to your array.")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"You can add to the uiProviders const variable, i.e.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">const</span> uiProviders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ViewAttributesWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HyerModelingWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span>\n'}})),(0,r.kt)("p",null,"or ignore the variable completely and pass the array in directly:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Viewer</span></span>\n  <span class="token attr-name">iTwinId</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>iTwinId<span class="token punctuation">}</span></span>\n  <span class="token attr-name">iModelId</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>iModelId<span class="token punctuation">}</span></span>\n  <span class="token attr-name">authClient</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>authClient<span class="token punctuation">}</span></span>\n  <span class="token attr-name">viewCreatorOptions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>viewCreatorOptions<span class="token punctuation">}</span></span>\n  <span class="token attr-name">enablePerformanceMonitors</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span> <span class="token comment">// see description in the README (https://www.npmjs.com/package/@itwin/web-viewer-react)</span>\n  <span class="token attr-name">onIModelAppInit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onIModelAppInit<span class="token punctuation">}</span></span>\n  <span class="token attr-name">uiProviders</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ViewAttributesWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HyperModelingWidgetProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>\n<span class="token punctuation">/></span></span>\n'}}))),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Just remember to copy corresponding files to your source.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Using an existing UiItemsProvider instead of passing in multiple new ones"),(0,r.kt)(m,{language:"jsx",code:"export class MyCustomUiProvider extends UiItemsProvider {\n  ... // Your custom code\n  public provideWidgets(\n    _stageId: string,\n    _stageUsage: string,\n    location: StagePanelLocation,\n    _section?: StagePanelSection\n    ): ReadonlyArray<Widget> {\n      const widgets: Widget[] = [];\n\n      if (location === StagePanelLocation.Right) {\n        widgets.push({\n          id: 'ViewAttributesWidget',\n          label: 'View Attributes Controls',\n          defaultState: WidgetState.Floating,\n          content: <ViewAttributesWidget />, // Don't forget to copy code for the ViewAttributesWidget\n        });\n      }\n  }\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"If you would like to use an existing UiItemsProvider instead of passing in multiple new ones, just add the widget in your ",(0,r.kt)("inlineCode",{parentName:"p"},"provideWigets()")," function along with copying and pasting the react component to your desired location.")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"As you can see, extending your iTwin Viewer with multiple widgets is simple.\nIt\u2019s completely up to you on how you want to structure your directories and components. Feel free to extend as many widgets as you like.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Start building a Viewer App",thumbnail:"/unreal-docs-site/static/images/retail-tutorial-sample-small.png",description:"This quick start is intended to help you get started with using iTwin Platform visualization components. By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).",href:"/tutorials/web-application-quick-start/",mdxType:"Tile"}),(0,r.kt)(g,{name:'Customizing the iTwin Viewer - "The Basics"',thumbnail:"/unreal-docs-site/static/images/itwin-viewer-hello-world-sample-small.png",description:"This tutorial will take you through the first steps of customizing your iTwin Web Viewer. First you will learn how to add a new user interface component. Later you will customize that component to change the background color of your viewer.",href:"/tutorials/itwin-viewer-hello-world",mdxType:"Tile"}),(0,r.kt)(g,{name:"Adding view decorations to your iTwin Viewer",thumbnail:"/unreal-docs-site/static/images/adding-decorators-and-markers.png",description:"This tutorial guides you through customizing your iTwin Viewer application by displaying application-specific graphics, called View Decorations.",href:"/tutorials/adding-decorators-and-markers/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Create a test iModel from a Bentley provided sample",href:"/tutorials/create-test-imodel-sample",description:"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Sample House Model",href:"/tutorials/create-test-imodel-sample/#house-sample",description:"Bentley provided sample of a House for test iModel creation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"UI Provider",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/",description:"Describes interface of objects that want to provide UI component to the running IModelApp.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"View Attributes Sample",href:"https://www.itwinjs.org/sample-showcase/?group=Viewer&sample=view-attributes-sample&imodel=House+Sample",description:"This sample demonstrates the API used to control view attributes.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Visit the iTwin Sample Showcase",href:"https://www.itwinjs.org/sample-showcase/",description:"The iTwin Sample Showcase provides many samples demonstrating options for customizing the iTwin viewer.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-understanding-the-sample-showcase",level:2,title:"1. Understanding the Sample Showcase",children:[]},{id:"2-example-using-a-sample",level:2,title:"2. Example using a sample",children:[]},{id:"3-multiple-ways-to-extend-uiproviders",level:2,title:"3. Multiple ways to extend uiProviders",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},94922:function(e,t,n){"use strict";n.d(t,{Jt:function(){return N},Pu:function(){return s},ZP:function(){return v}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Authorize Native Application",tile:{name:"Authorize Native Application",description:"This tutorial will show you how to register a Native Application, get an access token with it, and use it.",href:"/tutorials/authorize-native/",durationInMinutes:10,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("SignInButton"),m=p("CreateNativeAppButton"),h=p("CodeBlock"),k=p("Title"),g=p("GeneratePkceButton"),y=p("LinkWithUrl"),f=p("HttpSample"),T=p("Alert"),w=p("ContinueLearningSection"),b={metadata:s};function v(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial you will create a ",(0,r.kt)("strong",{parentName:"p"},"Native Application"),", learn how ",(0,r.kt)("strong",{parentName:"p"},"authorization code flow")," works with\n",(0,r.kt)("a",{parentName:"p",href:"https://auth0.com/docs/authorization/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce"},(0,r.kt)("strong",{parentName:"a"},"Proof Key for Code Exchange (PKCE)")),",\nand how to get an ",(0,r.kt)("strong",{parentName:"p"},"access token")," with it. In the end we will double check if the token is truly valid by making a request to one of the ",(0,r.kt)("strong",{parentName:"p"},"iTwin Platform API endpoints"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-a-native-application"},"1. Register a Native Application"),(0,r.kt)("h4",{id:"what-is-a-native-application"},"What is a Native Application?"),(0,r.kt)("p",null,"A ",(0,r.kt)("strong",{parentName:"p"},"Native Application")," is an application which runs on a native operating system such as Android, Windows, or iOS.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"SignInButton"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"sign-in"},"Sign in"),(0,r.kt)("p",null,"To be able to register an application you need to be signed in.\nIf you are not already you can do that by clicking the ",(0,r.kt)("strong",{parentName:"p"},"Sign In")," button in the action pane or in the top right corner of the page.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(m,{tooltip:"Register a basic Native Application for this tutorial",allowedScopes:["users:read"],clientName:"Authorize Native",mdxType:"CreateNativeAppButton"},"Register Application"),(0,r.kt)(h,{language:"json",code:e.clientId&&e.redirectUris&&e.scope?JSON.stringify({client_id:e.clientId,redirect_uri:e.redirectUris&&e.redirectUris[0],scope:e.scope},void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"register-a-native-application"},"Register a Native Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs.\nYou can use the ",(0,r.kt)("strong",{parentName:"p"},"Register Application")," button to automatically create your first Native Application.\nThis will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your Native Application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," - This is the unique identifier for your application. It is displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirectUris")," - Specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on the application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," - List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"For future use:")," Register and configure your application manually following the instructions in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-an-access-token"},"2. Get an Access Token"),(0,r.kt)("h4",{id:"what-is-an-access-token"},"What is an access token?"),(0,r.kt)("p",null,"An ",(0,r.kt)("strong",{parentName:"p"},"Access Token")," is a token which contains a string that can be used to make authenticated requests to an API to access protected resources (in this case iTwin Platform APIs).The string has no meaning to the application using it, but represents that the user has authorized the application to access their account.\nThe token is bounded by an appropriate lifetime, scopes, and other information that the server may require."),(0,r.kt)("h4",{id:"21-authorization-code-flow-with-proof-key-for-code-exchange-pkce"},"2.1. Authorization Code Flow with Proof Key for Code Exchange (PKCE)"),(0,r.kt)("p",null,"This flow provides a way to authorize with an Authorization Server by redirecting to the authorization server,\ngetting a ",(0,r.kt)("strong",{parentName:"p"},"code")," back, and exchanging it for an ",(0,r.kt)("strong",{parentName:"p"},"access token")," in a subsequent call."),(0,r.kt)("p",null,"You can find more information ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorization-code-flow-with-proof-key-for-code-exchange-pkce"},"here"),", but it is more technical."),(0,r.kt)("p",null,"Steps to get an access token using this flow:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Generate ",(0,r.kt)("strong",{parentName:"li"},"code_verifier")," and ",(0,r.kt)("strong",{parentName:"li"},"code_challenge"),","),(0,r.kt)("li",{parentName:"ol"},"Navigate to the authorization server,"),(0,r.kt)("li",{parentName:"ol"},"The authorization server will redirect back to your application (one of the redirect URIs) with ",(0,r.kt)("strong",{parentName:"li"},"code")," query parameter,"),(0,r.kt)("li",{parentName:"ol"},"The application exchanges ",(0,r.kt)("strong",{parentName:"li"},"code")," for an ",(0,r.kt)("strong",{parentName:"li"},"access_token")," via the Token endpoint."))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Generate Code Verifier and Code Challenge"),(0,r.kt)(g,{mdxType:"GeneratePkceButton"}),(0,r.kt)(h,{language:"json",code:e.pkce?JSON.stringify(e.pkce,void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"211-code-verifier-and-code-challenge"},"2.1.1. Code Verifier and Code Challenge"),(0,r.kt)("p",null,"PKCE (",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7636#section-4.1"},"RFC 7636"),") is an extension to the Authorization Code flow to prevent CSRF and authorization code injection attacks."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"code_verifier")," is a random string between 43 and 128 characters. It provides proof that you initiated the redirect to the authorization endpoint."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"code_challenge")," is a string that is generated from ",(0,r.kt)("strong",{parentName:"p"},"code_verifier")," and it is passed to the authorization endpoint as a query parameter.\nPseudo code to generate code challenge:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token function">base64urlEncode</span><span class="token punctuation">(</span><span class="token constant">SHA256</span><span class="token punctuation">(</span><span class="token constant">ASCII</span><span class="token punctuation">(</span>code_verifier<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n'}})),(0,r.kt)("p",null,"Read more about: ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ASCII"},"ASCII"),", ",(0,r.kt)("a",{parentName:"p",href:"https://en.bitcoinwiki.org/wiki/SHA-256"},"SHA256"),", ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.tcl-lang.org/page/base64url"},"base64urlEncode")),(0,r.kt)("p",null,"You can generate them by clicking ",(0,r.kt)("strong",{parentName:"p"},"Generate Code Verifier and Code Challenge"),". This is required for the following steps.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i;return[(0,r.kt)(k,{mdxType:"Title"},"Navigate to the Authorization Server"),(0,r.kt)(y,{url:e.authority+"/connect/authorize?"+new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000",scope:e.scopes?e.scopes+" offline_access":"users:read offline_access",response_type:"code",code_challenge:null!==(n=null===(i=e.pkce)||void 0===i?void 0:i.code_challenge)&&void 0!==n?n:"CODE_CHALLENGE",code_challenge_method:"S256"}).toString(),disabled:!e.clientId&&!e.pkce,mdxType:"LinkWithUrl"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"212-navigate-to-the-authorization-server"},"2.1.2. Navigate to the Authorization Server"),(0,r.kt)("p",null,"The application should open a browser to allow the user to interact with the authorization server.\nThis allows the user to authorize agents authorization server and give consent to allow access to part of his data through your application.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Navigate")," button and it will open a popup window that will hit the authorization endpoint with the required query parameters."),(0,r.kt)("p",null,"The URL will be built in this way:"),(0,r.kt)("p",null,"Authorization endpoint: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Native applications")," can ask for ",(0,r.kt)("strong",{parentName:"p"},"offline_access")," scope. This will indicate that you want to receive a ",(0,r.kt)("strong",{parentName:"p"},"refresh_token")," which can be used to generate new ",(0,r.kt)("strong",{parentName:"p"},"access tokens")," ",(0,r.kt)("strong",{parentName:"p"},"without")," user interaction."),(0,r.kt)("p",null,"With query parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," - This is the unique identifier for your application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"native-example"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri")," - Specifies where you want to go back after successful authorization (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3000/redirect"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," - List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"users:read"),")."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"response_type")," - For this flow ",(0,r.kt)("strong",{parentName:"li"},"code")," is the only option and it indicates that you will get code as a query parameter when the user will come back from the authorization server."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_challenge")," - Code challenge that was generated from code ",(0,r.kt)("strong",{parentName:"li"},"code_verifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_challenge_method")," - Code challenge method type which should be ",(0,r.kt)("strong",{parentName:"li"},"S256"))),(0,r.kt)("p",null,"So in the end it should look something like this: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize?client_id=CLIENT_ID&redirect_uri=http%3A%2F%2Flocalhost%3A3000&scope=users%3Aread+offline_access&response_type=code&code_challenge=CODE_CHALLENGE&code_challenge_method=S256"))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},e.code?"Code query parameter value":""),(0,r.kt)(h,{language:"text",code:"string"===typeof e.code?e.code:JSON.stringify(e.code,void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"213-receive-the-code"},"2.1.3. Receive the code"),(0,r.kt)("p",null,"The code will be placed inside the redirect URL query parameter (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/redirect"),(0,r.kt)("strong",{parentName:"p"},"?code=random-string"),").\nThe application should take care of ",(0,r.kt)("strong",{parentName:"p"},"code")," query parameter extraction. If you follow the interactive steps the code should appear in the action pane.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i,a;return[(0,r.kt)(k,{mdxType:"Title"},"Request to Token endpoint"),(0,r.kt)(f,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",code_verifier:null!==(n=null===(i=e.pkce)||void 0===i?void 0:i.code_verifier)&&void 0!==n?n:"CODE_VERIFIER",grant_type:"authorization_code",code:null!==(a=e.code)&&void 0!==a?a:"CODE",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000"}).toString(),saveResponseTo:"tokenResponse",canSendRequest:e.code&&!e.tokenResponse,disabledTooltip:e.tokenResponse?"The code can be used only once. Navigate to the authorization server one more time.":void 0,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"214-receive-an-access-token"},"2.1.4. Receive an access token"),(0,r.kt)("p",null,"You need to call the token endpoint with the ",(0,r.kt)("strong",{parentName:"p"},"Content-Type")," header equal to ",(0,r.kt)("strong",{parentName:"p"},"application/x-www-form-urlencoded"),"."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"URL encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": Identification that is generated when the application is created. You can find it in the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. If you generated it during this tutorial you can find it in the first step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"authorization_code")," indicates that the application will use a ",(0,r.kt)("strong",{parentName:"li"},"code")," to get an ",(0,r.kt)("strong",{parentName:"li"},"access_token"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_verifier"),": It is for verification purposes that the same application that redirected to the authorization server is calling this endpoint."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code"),": Code that the application got after the redirect from the authorization server back to the application itself."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri"),": redirect URI there was code send.")),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},(0,r.kt)("b",null,"Code is short lived"),": If your code has expired please Navigate to the authorization server one more time.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from the Token endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.tokenResponse||{access_token:"JWT_TOKEN",refresh_token:"REFRESH_TOKEN",token_type:"Bearer",expires_in:3599},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-from-the-token-endpoint"},"Response from the Token endpoint"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer"),". This is part of the Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token"),". You can read more ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": Access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed in the ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for API calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"refresh_token"),": Token that allows getting a new ",(0,r.kt)("strong",{parentName:"li"},"access token")," without user interaction."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": Lifespan of the access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-an-access-token-using-a-refresh-token"},"3. Get an Access Token using a Refresh Token")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i;return[(0,r.kt)(k,{mdxType:"Title"},"Refresh Token"),(0,r.kt)(f,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",grant_type:"refresh_token",refresh_token:null!==(n=null===(i=e.tokenResponse)||void 0===i?void 0:i.refresh_token)&&void 0!==n?n:"REFRESH_TOKEN"}).toString(),saveResponseTo:"refreshedAccessToken",canSendRequest:e.tokenResponse&&!e.refreshedAccessToken,disabledTooltip:e.refreshedAccessToken?"The refresh_token from previous step can be used only once.":void 0,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"31-request-to-the-token-endpoint-with-a-refresh-token"},"3.1. Request to the Token endpoint with a Refresh token"),(0,r.kt)("p",null,"You need to call the token endpoint with ",(0,r.kt)("strong",{parentName:"p"},"Content-Type")," header equal to ",(0,r.kt)("strong",{parentName:"p"},"application/x-www-form-urlencoded"),"."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"URL encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": Identification that is generated when the application is created. You can find it in the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. If you generated it during this tutorial you can find it in the first step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"refresh_token")," indicates that the application will use ",(0,r.kt)("strong",{parentName:"li"},"refresh_token")," to get ",(0,r.kt)("strong",{parentName:"li"},"access_token"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"refresh_token"),": refresh_token token itself that you got from the last request to the Token endpoint."))),(0,r.kt)(c,{subSection:!0,actions:function(e){var t;return[(0,r.kt)(k,{mdxType:"Title"},"Response from the Token endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(null!==(t=e.refreshedAccessToken)&&void 0!==t?t:{access_token:"JWT_TOKEN",refresh_token:"REFRESH_TOKEN",token_type:"Bearer",expires_in:3599},void 0,4),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"32-response-from-the-token-endpoint"},"3.2. Response from the Token endpoint"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer"),". This is part of the Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token"),". You can read more ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": Access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed in the ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for API calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"refresh_token"),": Token that allows you to get a new ",(0,r.kt)("strong",{parentName:"li"},"access token")," without user interaction."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": Lifespan of the access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-make-the-request"},"4. Make the request")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n;return[(0,r.kt)(k,{mdxType:"Title"},"Request to /users/me endpoint"),(0,r.kt)(f,{method:"GET",url:"".concat(e.baseUrl,"/users/me"),headers:{Authorization:"Bearer "+(null!==(t=null===(n=e.tokenResponse)||void 0===n?void 0:n.access_token)&&void 0!==t?t:"JWT_TOKEN"),Accept:"application/vnd.bentley.itwin-platform.v1+json"},body:void 0,saveResponseTo:"me",canSendRequest:e.tokenResponse,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"41-make-the-request-to-the-usersme-endpoint"},"4.1. Make the request to the /users/me endpoint"),(0,r.kt)("p",null,"This request will show that the newly created ",(0,r.kt)("strong",{parentName:"p"},"access token")," is valid and how to use it.\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"/users/me")," endpoint will retrieve the logged in user\u2019s profile information.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Send request")," button.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from /users/me endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.me||{user:{displayName:"FirstName LastName",givenName:"FirstName",surname:"LastName",email:"FirstName.LastName@domain.com",alternateEmail:"FirstName.LastName@alternative.com",city:"CityName",country:"US",language:"EN",createdDateTime:"2021-08-27T10:19:07.2510000Z"}},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"42-response"},"4.2. Response"),(0,r.kt)("p",null,"This request will return user information (name, email, country and etc.).")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"}))}v.isMDXComponent=!0;var N=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-a-native-application",level:2,title:"1. Register a Native Application",children:[]},{id:"2-get-an-access-token",level:2,title:"2. Get an Access Token",children:[]},{id:"3-get-an-access-token-using-a-refresh-token",level:2,title:"3. Get an Access Token using a Refresh Token",children:[]},{id:"4-make-the-request",level:2,title:"4. Make the request",children:[]}]}},91272:function(e,t,n){"use strict";n.d(t,{Jt:function(){return f},Pu:function(){return s},ZP:function(){return y}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Authorize a Service Application",tile:{name:"Authorize a Service Application",description:"This tutorial will provide you information how to authorize your Service application.",href:"/tutorials/authorize-service/",relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Alert"),c=p("Mermaid"),u=p("RequestLine"),m=p("ExecutableCodeBlock"),h=p("TileList"),k=p("ResourceTile"),g={metadata:s};function y(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"When building a server-side app that securely stores secrets, use the following procedures to set up your authorization."),(0,r.kt)(d,{type:"warning",mdxType:"Alert"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"IMPORTANT")),(0,r.kt)("p",null,"Keep your client credentials, i.e., ",(0,r.kt)("strong",{parentName:"p"},"client ID"),", ",(0,r.kt)("strong",{parentName:"p"},"client secret"),", and ",(0,r.kt)("strong",{parentName:"p"},"access tokens"),", secure. Do not include them in publicly accessible code where they could be discovered. Instead, store them safely on a backend server.")),(0,r.kt)(d,{mdxType:"Alert"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note")),(0,r.kt)("p",null,"Service apps need permission to access the your iTwin\u2019s or iTwin-related data. iTwin roles and permissions are set up using the ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/"},"Access Control API")," and the generated email on the ",(0,r.kt)("em",{parentName:"p"},"App Details")," page in ",(0,r.kt)("strong",{parentName:"p"},"My Apps > App Name"),". Setting up access control is not necessary for this tutorial; however, it must be set up before making requests to the APIs.")),(0,r.kt)("h2",{id:"before-you-begin"},"Before you begin"),(0,r.kt)("p",null,"This guide assumes you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Registered a service application with the necessary scopes for your use case. If you have not created an application, open the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page under your ",(0,r.kt)("strong",{parentName:"li"},"Profile")," menu to create one. For this guide, the application type is ",(0,r.kt)("strong",{parentName:"li"},"Service"),"."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"client_id")," and the ",(0,r.kt)("inlineCode",{parentName:"li"},"client_secret")," supplied when you created your application.")),(0,r.kt)(d,{mdxType:"Alert"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note")),(0,r.kt)("p",null,"There is an optional step at the end of the tutorial that enables you to validate the token you received beyond the successful HTTP response. If you would like to perform this step, your app must have the ",(0,r.kt)("inlineCode",{parentName:"p"},"users:read")," scope assigned.")),(0,r.kt)("h2",{id:"client-credential-flow"},"Client Credential Flow"),(0,r.kt)("p",null,"The Client Credential Flow allows your backend process or service, i.e., a confidential client, to authenticate using its own credentials rather than impersonating a user."),(0,r.kt)("p",null,"An administrator grants permissions directly to the application. Since no user is involved in the authentication, the resource enforces that the application is authorized to perform an action when it presents a token to a resource."),(0,r.kt)("p",null,"The following steps provide an overview of the process."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The application makes a request to the authorization server token endpoint with the required parameters."),(0,r.kt)("li",{parentName:"ol"},"The authorization server confirms the information supplied and returns an access token."),(0,r.kt)("li",{parentName:"ol"},"The application uses the access token to call a given API."),(0,r.kt)("li",{parentName:"ol"},"The API responds to the request with the requested data when the necessary scopes are included in the token, and the service identity has the proper permissions for that API.")),(0,r.kt)(c,{chart:"\n  sequenceDiagram\n      participant app as Application\n      participant as as Authorization Server\n      participant api as iTwin API\n  \n      app->>+as: Authenticate using client_id and client_secret\n      as->>as: Validate client_id, client_secret and scopes\n      as->>-app: Granted access token\n  \n      app->>+api: API request with the access token\n      api->>-app: API response\n",mdxType:"Mermaid"}),(0,r.kt)("h2",{id:"set-up-authorization-for-your-app"},"Set up Authorization for your App"),(0,r.kt)("p",null,"The following steps guide you through setting up your application and retrieving an access token with the needed permissions for your service application and identity."),(0,r.kt)("h3",{id:"register-a-service-application"},"Register a service application"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Click your profile button in the upper-right corner of the page. You must be logged in to the Developer Portal."),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"My Apps")," from the drop-down."),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Register New")," button."),(0,r.kt)("li",{parentName:"ol"},"Enter the name of your application. Service apps have a maximum of 60 characters, the following characters are not allowed: ,;[]=\\<",">",'?"{}',"|","+!@","#","\\$%\\^","*","`","~"),(0,r.kt)("li",{parentName:"ol"},"Select the appropriate scopes for your application in ",(0,r.kt)("em",{parentName:"li"},"API associations"),".",(0,r.kt)("br",{parentName:"li"}),"Selected scopes are listed in the ",(0,r.kt)("strong",{parentName:"li"},"Allowed scope")," list box."),(0,r.kt)("li",{parentName:"ol"},"In ",(0,r.kt)("em",{parentName:"li"},"Application Type"),", click ",(0,r.kt)("strong",{parentName:"li"},"Service")," to indicate you are creating a Service app."),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Save"),"."),(0,r.kt)("li",{parentName:"ol"},"On the ",(0,r.kt)("em",{parentName:"li"},"Success")," dialog, click ",(0,r.kt)("strong",{parentName:"li"},"Copy")," to copy the ",(0,r.kt)("inlineCode",{parentName:"li"},"client_id")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"client_secret")," created for your app. Make sure you save this data in a secure location. It is required to obtain a token.",(0,r.kt)("br",{parentName:"li"}),"Close the dialog by clicking the ",(0,r.kt)("strong",{parentName:"li"},"X")," in the upper-right corner or clicking outside the box.")),(0,r.kt)("h2",{id:"obtain-an-access-token"},"Obtain an access token"),(0,r.kt)("p",null,"To obtain an access token for your app, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Send a request to the authorization server endpoint."),(0,r.kt)(u,{method:"POST",baseUrl:function(e){return e.authority},path:"/connect/token",mdxType:"RequestLine"}),(0,r.kt)("p",{parentName:"li"},"The authorization request requires the following parameters:"),(0,r.kt)("table",{parentName:"li"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Parameter")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"grant_type"),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},"client_credentials")," for service-based applications.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"client_id"),(0,r.kt)("td",{parentName:"tr",align:null},"The ID of the app you created. If you forgot the ID, find it on the ",(0,r.kt)("a",{parentName:"td",href:"/my-apps/"},"My Apps")," page. Locate your app in the list. The Client ID is in the same-named column.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"client_secret"),(0,r.kt)("td",{parentName:"tr",align:null},"The secret given when you registered the app. If you did not save the client secret, generate a new one. To do so, open the ",(0,r.kt)("a",{parentName:"td",href:"/my-apps/"},"My Apps")," page and find your app in the list, click the link to open the ",(0,r.kt)("em",{parentName:"td"},"Details")," page, and then click ",(0,r.kt)("strong",{parentName:"td"},"Re-generate")," in the ",(0,r.kt)("em",{parentName:"td"},"Client Secret")," field.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"scope"),(0,r.kt)("td",{parentName:"tr",align:null},"Add the scopes assigned to your app during registration. Scopes enable the application to access requested resources. Separate multiple scopes with a space. ",(0,r.kt)("strong",{parentName:"td"},"Note:")," Needed scopes for each API are in their respective reference documentation pages."))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The authorization server confirms the ",(0,r.kt)("inlineCode",{parentName:"p"},"client_id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"client_secret")," and returns an access token. Bentley\u2019s authorization server completes this step. There is no implementation needed in your application. A successful response includes the access token.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Use the access token to call the API.\nRemember to call iTwin platform APIs, you must set up your iTwin roles and permissions. For more information, see the ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/"},"Access Control API")," documentation."))),(0,r.kt)("h3",{id:"token-request-example"},"Token request example"),(0,r.kt)(m,{method:"POST",baseUrl:function(e){return e.authority},path:"/connect/token",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams("client_id=<client_id>&client_secret=<client_secret>&scope=users:read&grant_type=client_credentials").toString(),dataToSave:[{variableName:"accessToken",jsonQuery:"access_token"}],mdxType:"ExecutableCodeBlock"}),(0,r.kt)("h3",{id:"validate-your-token"},"Validate your token"),(0,r.kt)("p",null,"If you received a ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")," response to your request for a token, it is not necessary to validate it. However, the ",(0,r.kt)("inlineCode",{parentName:"p"},"users/me")," endpoint is provided if you would like to do so. This returns the profile information for the user account assigned to the service when you created your service application."),(0,r.kt)("p",null,"Remember, the iTwin Platform Base URI is ",(0,r.kt)("inlineCode",{parentName:"p"},"api.bentley.com"),"."),(0,r.kt)(m,{method:"GET",path:"/users/me",headers:function(e){var t;return{Accept:"application/vnd.bentley.itwin-platform.v1+json",Authorization:"Bearer ".concat(null!==(t=e.accessToken)&&void 0!==t?t:"<returned token from the previous request>")}},mdxType:"ExecutableCodeBlock"}),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(h,{mdxType:"TileList"},(0,r.kt)(k,{title:"Access Control",href:"/apis/access-control/",description:"Manage Access Controls for your iTwin member using iTwin roles and permissions.",mdxType:"ResourceTile"})))}y.isMDXComponent=!0;var f=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"before-you-begin",level:2,title:"Before you begin",children:[]},{id:"client-credential-flow",level:2,title:"Client Credential Flow",children:[]},{id:"set-up-authorization-for-your-app",level:2,title:"Set up Authorization for your App",children:[{id:"register-a-service-application",level:3,title:"Register a service application",children:[]}]},{id:"obtain-an-access-token",level:2,title:"Obtain an access token",children:[{id:"token-request-example",level:3,title:"Token request example",children:[]},{id:"validate-your-token",level:3,title:"Validate your token",children:[]}]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},76737:function(e,t,n){"use strict";n.d(t,{Jt:function(){return N},Pu:function(){return s},ZP:function(){return v}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Authorize Single-Page Application (SPA)",tile:{name:"Authorize Single-Page Application (SPA)",description:"This tutorial will show you how to register a Single-Page Application (SPA), get an access token with it, and use it.",href:"/tutorials/authorize-spa/",durationInMinutes:10,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("SignInButton"),m=p("CreateSpaAppButton"),h=p("CodeBlock"),k=p("Title"),g=p("GeneratePkceButton"),y=p("LinkWithUrl"),f=p("HttpSample"),T=p("Alert"),w=p("ContinueLearningSection"),b={metadata:s};function v(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial you will create a ",(0,r.kt)("strong",{parentName:"p"},"Single-Page Application (SPA)"),", learn how ",(0,r.kt)("strong",{parentName:"p"},"authorization code flow")," works with\n",(0,r.kt)("a",{parentName:"p",href:"https://auth0.com/docs/authorization/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce"},(0,r.kt)("strong",{parentName:"a"},"Proof Key for Code Exchange (PKCE)")),",\nand how to get an ",(0,r.kt)("strong",{parentName:"p"},"access token")," with it. In the end we will double check if the token is truly valid by making a request to one of the ",(0,r.kt)("strong",{parentName:"p"},"iTwin Platform API endpoints"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-a-single-page-application-spa"},"1. Register a Single-Page Application (SPA)"),(0,r.kt)("h4",{id:"what-is-a-single-page-application-spa"},"What is a Single-Page Application (SPA)?"),(0,r.kt)("p",null,"A ",(0,r.kt)("strong",{parentName:"p"},"Single-Page Application (SPA)")," is a web application or website that interacts with the user by dynamically rewriting the current web page with new data from the web server,\ninstead of the default method of a web browser loading entire new pages.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"SignInButton"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"sign-in"},"Sign in"),(0,r.kt)("p",null,"To be able to register an application you need to be signed in.\nIf you are not already you can do that by clicking the ",(0,r.kt)("strong",{parentName:"p"},"Sign In")," button in the action pane or in the top right corner of the page.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(m,{tooltip:"Register a basic Single-Page Application (SPA) for this tutorial",allowedScopes:["users:read"],clientName:"Authorize SPA",mdxType:"CreateSpaAppButton"},"Register Application"),(0,r.kt)(h,{language:"json",code:e.clientId&&e.redirectUris&&e.scope?JSON.stringify({client_id:e.clientId,redirect_uri:e.redirectUris&&e.redirectUris[0],scope:e.scope},void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"register-a-single-page-application-spa"},"Register a Single-Page Application (SPA)"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs.\nYou can use the ",(0,r.kt)("strong",{parentName:"p"},"Register Application")," button to automatically create your first Single-Page Application (SPA).\nThis will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your Single-Page Application (SPA)")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," - This is the unique identifier for your application. It is displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirectUris")," - Specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on the application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," - List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"For future use:")," Register and configure your application manually following the instructions in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-an-access-token"},"2. Get an Access Token"),(0,r.kt)("h4",{id:"what-is-an-access-token"},"What is an access token?"),(0,r.kt)("p",null,"An ",(0,r.kt)("strong",{parentName:"p"},"Access Token")," is token which contains a string that can be used to make authenticated requests to an API to access protect resources (in this case iTwin Platform APIs).The string has no meaning to the application using it, but represents that the user has authorized the application to access their account.\nThe token is bounded by an appropriate lifetime, scopes, and other information that the server may require."),(0,r.kt)("h4",{id:"21-authorization-code-flow-with-proof-key-for-code-exchange-pkce"},"2.1. Authorization Code Flow with Proof Key for Code Exchange (PKCE)"),(0,r.kt)("p",null,"This flow provides a way to authorize with an Authorization Server by redirecting to the authorization server,\ngetting a ",(0,r.kt)("strong",{parentName:"p"},"code")," back, and exchanging it for an ",(0,r.kt)("strong",{parentName:"p"},"access token")," in a subsequent call."),(0,r.kt)("p",null,"You can find more information ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorization-code-flow-with-proof-key-for-code-exchange-pkce"},"here"),", but it is more technical."),(0,r.kt)("p",null,"Steps to get an access token using this flow:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Generate ",(0,r.kt)("strong",{parentName:"li"},"code_verifier")," and ",(0,r.kt)("strong",{parentName:"li"},"code_challenge"),","),(0,r.kt)("li",{parentName:"ol"},"Navigate to the authorization server,"),(0,r.kt)("li",{parentName:"ol"},"The authorization server will redirect back to your application (one of redirect URIs) with ",(0,r.kt)("strong",{parentName:"li"},"code")," query parameter,"),(0,r.kt)("li",{parentName:"ol"},"The application exchange ",(0,r.kt)("strong",{parentName:"li"},"code")," for an ",(0,r.kt)("strong",{parentName:"li"},"access_token")," via the Token endpoint."))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Generate Code Verifier and Code Challenge"),(0,r.kt)(g,{mdxType:"GeneratePkceButton"}),(0,r.kt)(h,{language:"json",code:e.pkce?JSON.stringify(e.pkce,void 0,2):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"211-code-verifier-and-code-challenge"},"2.1.1. Code Verifier and Code Challenge"),(0,r.kt)("p",null,"PKCE (",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7636#section-4.1"},"RFC 7636"),") is an extension to the Authorization Code flow to prevent CSRF and authorization code injection attacks."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"code_verifier")," is a random string between 43 and 128 characters. It provides proof that you initiated the redirect to the authorization endpoint."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"code_challenge"),": is a string that is generated from ",(0,r.kt)("strong",{parentName:"p"},"code_verifier")," and it is passed to the authorization endpoint as a query parameter.\nPseudo code to generate code challenge:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token function">base64urlEncode</span><span class="token punctuation">(</span><span class="token constant">SHA256</span><span class="token punctuation">(</span><span class="token constant">ASCII</span><span class="token punctuation">(</span>code_verifier<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n'}})),(0,r.kt)("p",null,"Read more about: ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ASCII"},"ASCII"),", ",(0,r.kt)("a",{parentName:"p",href:"https://en.bitcoinwiki.org/wiki/SHA-256"},"SHA256"),", ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.tcl-lang.org/page/base64url"},"base64urlEncode")),(0,r.kt)("p",null,"You can generate them by clicking ",(0,r.kt)("strong",{parentName:"p"},"Generate Code Verifier and Code Challenge"),". This is required for the following steps.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i,a;return[(0,r.kt)(k,{mdxType:"Title"},"Navigate to the Authorization Server"),(0,r.kt)(y,{url:e.authority+"/connect/authorize?"+new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000",scope:null!==(n=e.scope)&&void 0!==n?n:"users:read",response_type:"code",code_challenge:null!==(i=null===(a=e.pkce)||void 0===a?void 0:a.code_challenge)&&void 0!==i?i:"CODE_CHALLENGE",code_challenge_method:"S256"}).toString(),disabled:!e.clientId&&!e.pkce,mdxType:"LinkWithUrl"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"212-navigate-to-the-authorization-server"},"2.1.2. Navigate To the Authorization Server"),(0,r.kt)("p",null,"Application should make interactive redirect/navigate to authorization server.\nThis allow user to authorize agents authorization server and give consent to allow access part of his data through your application.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Navigate")," button and it will open popup window that will hit authorization endpoint with required query parameters."),(0,r.kt)("p",null,"The URL will be built in this way:"),(0,r.kt)("p",null,"Authorization endpoint: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize")),(0,r.kt)("p",null,"With query parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id")," this is the unique identifier for your application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"spa-example"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri")," Specify there you want go back after successful authorization (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3000/redirect"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," list of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),". (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"users:read"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"response_type")," For this flow ",(0,r.kt)("strong",{parentName:"li"},"code")," it is only option and that indicates, that you will get code as query parameter then user will come back from authorization server."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_challenge")," Code challenge that was generated from code ",(0,r.kt)("strong",{parentName:"li"},"code_verifier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_challenge_method")," Code challenge method type it should be ",(0,r.kt)("strong",{parentName:"li"},"S256"))),(0,r.kt)("p",null,"So in the end it should look something like this: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://ims.bentley.com/connect/authorize?client_id=CLIENT_ID&redirect_uri=http%3A%2F%2Flocalhost%3A3000&scope=users%3Aread&response_type=code&code_challenge=CODE_CHALLENGE&code_challenge_method=S256"))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},e.code?"Code query parameter value":""),(0,r.kt)(h,{language:"text",code:"string"===typeof e.code?e.code:JSON.stringify(e.code,void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"213-receive-the-code"},"2.1.3. Receive the code"),(0,r.kt)("p",null,"The code will be placed inside the redirect URL query parameter (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/redirect"),(0,r.kt)("strong",{parentName:"p"},"?code=random-string"),").\nThe application should take care of ",(0,r.kt)("strong",{parentName:"p"},"code")," query parameter extraction. If you follow the interactive steps the code should appear in the action pane.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i,a;return[(0,r.kt)(k,{mdxType:"Title"},"Request to Token endpoint"),(0,r.kt)(f,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",code_verifier:null!==(n=null===(i=e.pkce)||void 0===i?void 0:i.code_verifier)&&void 0!==n?n:"CODE_VERIFIER",grant_type:"authorization_code",code:null!==(a=e.code)&&void 0!==a?a:"CODE",redirect_uri:e.redirectUris&&e.redirectUris[0]||"http://localhost:3000"}).toString(),saveResponseTo:"tokenResponse",canSendRequest:e.code&&!e.tokenResponse,disabledTooltip:e.tokenResponse?"The code can be used only once. Navigate to the authorization server one more time.":void 0,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"214-receive-an-access-token"},"2.1.4. Receive an access token"),(0,r.kt)("p",null,"You need to call the token endpoint with the ",(0,r.kt)("strong",{parentName:"p"},"Content-Type")," header equal to ",(0,r.kt)("strong",{parentName:"p"},"application/x-www-form-urlencoded"),"."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"URL encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": Identification that is generated when the application is created. You can find it in the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. If you generated it during this tutorial you can find it in the first step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"authorization_code")," indicates that the application will use a ",(0,r.kt)("strong",{parentName:"li"},"code")," to get an ",(0,r.kt)("strong",{parentName:"li"},"access_token"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code_verifier"),": It is for verification purposes that the same application that redirected to the authorization server is calling this endpoint."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"code"),": Code that the application got after the redirect from the authorization server back to the application itself."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"redirect_uri"),": redirect URI there was code send.")),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},(0,r.kt)("b",null,"Code is short lived"),": If your code has expired please Navigate to the authorization server one more time.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from the Token endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.tokenResponse||{access_token:"JWT_TOKEN",token_type:"Bearer",expires_in:3599},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-from-the-token-endpoint"},"Response from the Token endpoint"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer"),". This is part of the Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token"),". You can read more ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": Access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed in the ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for API calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": Lifespan of the access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-make-the-request"},"3. Make the request")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n;return[(0,r.kt)(k,{mdxType:"Title"},"Request to /users/me endpoint"),(0,r.kt)(f,{method:"GET",url:"".concat(e.baseUrl,"/users/me"),headers:{Authorization:"Bearer "+(null!==(t=null===(n=e.tokenResponse)||void 0===n?void 0:n.access_token)&&void 0!==t?t:"JWT_TOKEN"),Accept:"application/vnd.bentley.itwin-platform.v1+json"},body:void 0,saveResponseTo:"me",canSendRequest:e.tokenResponse,mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"31-make-the-request-to-the-usersme-endpoint"},"3.1. Make the request to the /users/me endpoint"),(0,r.kt)("p",null,"This request will show that the newly created ",(0,r.kt)("strong",{parentName:"p"},"access token")," is valid and how to use it.\nThe ",(0,r.kt)("inlineCode",{parentName:"p"},"/users/me")," endpoint will retrieve the logged in user\u2019s profile information.\nIf you follow the interactive part you can click the ",(0,r.kt)("strong",{parentName:"p"},"Send request")," button.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(k,{mdxType:"Title"},"Response from /users/me endpoint"),(0,r.kt)(h,{language:"json",code:JSON.stringify(e.me||{user:{displayName:"FirstName LastName",givenName:"FirstName",surname:"LastName",email:"FirstName.LastName@domain.com",alternateEmail:"FirstName.LastName@alternative.com",city:"CityName",country:"US",language:"EN",createdDateTime:"2021-08-27T10:19:07.2510000Z"}},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"32-response"},"3.2. Response"),(0,r.kt)("p",null,"This request will return user information (name, email, country and etc.).")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"}))}v.isMDXComponent=!0;var N=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-a-single-page-application-spa",level:2,title:"1. Register a Single-Page Application (SPA)",children:[]},{id:"2-get-an-access-token",level:2,title:"2. Get an Access Token",children:[]},{id:"3-make-the-request",level:2,title:"3. Make the request",children:[]}]}},20398:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Authorize a Web Application",tile:{name:"Authorize a Web Application",description:"This tutorial will provide you information how to authorize your web application.",href:"/tutorials/authorize-webapp/",relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Alert"),c=p("Mermaid"),u=p("RequestLine"),m=p("NavigateToAuthorizationServer"),h=p("ExecutableCodeBlock"),k=p("TileList"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"When developing web applications using a server-side framework, use the following procedures to set up your authorization."),(0,r.kt)(d,{type:"warning",mdxType:"Alert"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"IMPORTANT")),(0,r.kt)("p",null,"Keep your client credentials, i.e., ",(0,r.kt)("strong",{parentName:"p"},"client ID"),", ",(0,r.kt)("strong",{parentName:"p"},"client secret"),", and ",(0,r.kt)("strong",{parentName:"p"},"access tokens"),", secure. Do not include them in publicly accessible code where they could be discovered. Instead, store them safely on a backend server.")),(0,r.kt)("h2",{id:"before-you-begin"},"Before you begin"),(0,r.kt)("p",null,"This guide assumes you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Registered a web app with the necessary scopes for your use case. If you have not created an application, open the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page under your ",(0,r.kt)("strong",{parentName:"li"},"Profile")," menu to create one. For this guide, the application type is ",(0,r.kt)("strong",{parentName:"li"},"Web App"),"."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"client_id")," and the ",(0,r.kt)("inlineCode",{parentName:"li"},"client_secret")," supplied when you created your application."),(0,r.kt)("li",{parentName:"ul"},"This tutorial requires a redirect URI of ",(0,r.kt)("inlineCode",{parentName:"li"},"https://developer.bentley.com/redirect-tutorial"),". Please add this redirect URI to the ",(0,r.kt)("em",{parentName:"li"},"App Details")," for your application. The ",(0,r.kt)("em",{parentName:"li"},"App Details")," page can be accessed through the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page.")),(0,r.kt)(d,{mdxType:"Alert"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note")),(0,r.kt)("p",null,"There is an optional step at the end of the tutorial that enables you to validate the token you received beyond the successful HTTP response. If you would like to perform this step, your app must have the ",(0,r.kt)("inlineCode",{parentName:"p"},"users:read")," scope assigned.")),(0,r.kt)("h2",{id:"user-authorization-code-flow"},"User Authorization Code Flow"),(0,r.kt)("p",null,"Web applications can use the OAuth 2.0 Authorization Code Flow to enable data owners to authorize third-party apps to access user data. This flow includes features like customer login and consent handling to obtain authorization from the resource owner."),(0,r.kt)("p",null,"The following steps provide an overview of the process."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The application makes a request to the authorization server endpoint."),(0,r.kt)("li",{parentName:"ol"},"The end-user provides their authentication information and consents for the application to access resources on their behalf."),(0,r.kt)("li",{parentName:"ol"},"The authorization server returns an authorization code to the Redirect URI specified when creating the application."),(0,r.kt)("li",{parentName:"ol"},"Exchange the authorization code for an access token."),(0,r.kt)("li",{parentName:"ol"},"Use the access token to call the API on behalf of the user.")),(0,r.kt)(c,{chart:"\n  sequenceDiagram\n      participant ro as Resource Owner\n      participant app as Application\n      participant as as Authorization Server\n      participant api as iTwin API\n  \n      ro->>+app: Connect to application\n      app->>+as: Request authorization code\n      as->>ro: Redirect to login and consent\n      ro->>as: Sign in and consent\n      as->>-app: Authorization code\n      app->>+as: Exchange authorization code for an access_token\n      as->>as: Validate client_id, client_secret, scope and redirect_uri\n      as->>-app: Granted access token\n      app->>-ro: Signed in\n  \n      ro->>+app: Perform action\n      app->>+api: API request with the access token\n      api->>-app: API response\n      app->>-ro: Render content\n",mdxType:"Mermaid"}),(0,r.kt)("h2",{id:"set-up-authorization-for-your-app"},"Set up Authorization for your App"),(0,r.kt)("p",null,"The following steps guide you through setting up your application and retrieving an access token with the needed permissions for your web application."),(0,r.kt)("h3",{id:"register-a-web-application"},"Register a web application"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Click your profile button in the upper-right corner of the page. You must be logged in to the Developer Portal."),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"My Apps")," from the drop-down."),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Register New")," button."),(0,r.kt)("li",{parentName:"ol"},"Enter the name of your application. Web apps have a maximum of 128 characters, the following characters are not allowed: ,;[]=\\<",">",'?"{}',"|","+!@","#","\\$%\\^","*","`","~"),(0,r.kt)("li",{parentName:"ol"},"Select the appropriate scopes for your application in ",(0,r.kt)("em",{parentName:"li"},"API associations"),".",(0,r.kt)("br",{parentName:"li"}),"Selected scopes are listed in the ",(0,r.kt)("strong",{parentName:"li"},"Allowed scope")," list box."),(0,r.kt)("li",{parentName:"ol"},"In ",(0,r.kt)("em",{parentName:"li"},"Application Type"),", click ",(0,r.kt)("strong",{parentName:"li"},"Web App")," to indicate you are creating a web application."),(0,r.kt)("li",{parentName:"ol"},"In ",(0,r.kt)("em",{parentName:"li"},"Redirect URIs"),", enter the callback URL to use during the authorization process. This is the URL to which the authorization code is sent.",(0,r.kt)("br",{parentName:"li"}),"Optionally, you can set a ",(0,r.kt)("em",{parentName:"li"},"Post logout URI")," to which the user will be redirected when logging out of the app."),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Save"),"."),(0,r.kt)("li",{parentName:"ol"},"On the ",(0,r.kt)("em",{parentName:"li"},"Success")," dialog, click ",(0,r.kt)("strong",{parentName:"li"},"Copy")," to copy the ",(0,r.kt)("inlineCode",{parentName:"li"},"client_id")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"client_secret")," created for your app. Make sure you save this data in a secure location. It is required to obtain a token.",(0,r.kt)("br",{parentName:"li"}),"Close the dialog by clicking the ",(0,r.kt)("strong",{parentName:"li"},"X")," in the upper-right corner or clicking outside the box.")),(0,r.kt)("h2",{id:"obtain-an-access-token"},"Obtain an Access Token"),(0,r.kt)("p",null,"To obtain an access token for your app, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"When the user opens the Web app, redirect them to the authorization server endpoint."),(0,r.kt)(u,{baseUrl:function(e){return e.authority},path:"/connect/authorize?client_id=<client_id>&redirect_uri=<redirect_uri>&scope=<scopes>+offline_access&response_type=code",mdxType:"RequestLine"}),(0,r.kt)("p",{parentName:"li"},"The request for an authorization code requires the following parameters:"),(0,r.kt)("table",{parentName:"li"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"response_type"),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},"code")," to indicate that an authorization code is needed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"client_id"),(0,r.kt)("td",{parentName:"tr",align:null},"The ID of the app you created. If you forgot the ID, find it on the ",(0,r.kt)("a",{parentName:"td",href:"/my-apps"},"My Apps")," page. Locate your app in the list, and the Client ID is in the same-named column.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"redirect_uri"),(0,r.kt)("td",{parentName:"tr",align:null},"The callback URL you entered when registering your application. The returned authorization code is sent to this URL.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"scope"),(0,r.kt)("td",{parentName:"tr",align:null},"Add the scopes assigned to your app during registration. Separate multiple scopes with a space. Your end user will consent to the app accessing this information on their behalf during the login process. When requesting a refresh token, include the scope ",(0,r.kt)("inlineCode",{parentName:"td"},"offline_access"),". For all other scopes, check the reference documentation for each respective API.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"state"),(0,r.kt)("td",{parentName:"tr",align:null},"(Optional) Used by the client to maintain state between a request and a callback. Recommended to prevent cross-site request forgery. The authorization server includes this value when redirecting the user-agent to the client.")))),(0,r.kt)(m,{query:new URLSearchParams("client_id=<client_id>&redirect_uri=<redirect_uri>&scope=users:read+offline_access&response_type=code").toString(),mdxType:"NavigateToAuthorizationServer"})),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The user signs in to authenticate and consents for the application to access resources on their behalf. This page is managed by the Bentley authorization server and does not require any implementation in your application."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/authorize-webapp/user-signin-consent.png",alt:"User interface for facing Bentley authorization server"})),(0,r.kt)("p",{parentName:"li"},"Once authenticated, the Bentley authorization server returns an authorization code to the Redirect URI registered with your application. Extract the ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," in the response from the ",(0,r.kt)("inlineCode",{parentName:"p"},"redirect_uri")," field."),(0,r.kt)(d,{mdxType:"Alert"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Note")),(0,r.kt)("p",{parentName:"li"},"Authorization codes are time-sensitive. If your code expires, send a new request to the authorization server for a new code."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Send a request to the token endpoint to exchange the authorization code for an access token."),(0,r.kt)(u,{method:"POST",baseUrl:function(e){return e.authority},path:"/connect/token",mdxType:"RequestLine"}),(0,r.kt)("p",{parentName:"li"},"The authorization request requires the following parameters:"),(0,r.kt)("table",{parentName:"li"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"client_id"),(0,r.kt)("td",{parentName:"tr",align:null},"Identification generated during application creation. Found in the ",(0,r.kt)("a",{parentName:"td",href:"/my-apps"},"My Apps")," page or in the first step if generated during the tutorial.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"client_secret"),(0,r.kt)("td",{parentName:"tr",align:null},"Secret created during application creation.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"grant_type"),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},"authorization_code")," Indicates the type of grant being used. This tells the service you are exchanging the code for a token.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"code"),(0,r.kt)("td",{parentName:"tr",align:null},"This is the authorization code returned in the previous request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"redirect_uri"),(0,r.kt)("td",{parentName:"tr",align:null},"The callback URL you entered when registering your application. This URL must match the URL provided in the initial request.")))),(0,r.kt)(h,{method:"POST",baseUrl:function(e){return e.authority},path:"/connect/token",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:function(e){var t,n,i;return new URLSearchParams("client_id=".concat(null!==(t=e.clientId)&&void 0!==t?t:"<client_id>","&client_secret=<client_secret>&grant_type=authorization_code&code=").concat(null!==(n=e.code)&&void 0!==n?n:"<code>","&redirect_uri=").concat(null!==(i=e.redirectURI)&&void 0!==i?i:"<redirect_uri>")).toString()},dataToSave:[{variableName:"accessToken",jsonQuery:"access_token"},{variableName:"refreshToken",jsonQuery:"refresh_token"}],mdxType:"ExecutableCodeBlock"})),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The authorization server confirms the information sent in the request and returns an access token. Bentley\u2019s authorization server completes this step. There is no implementation needed in your application.\nA successful response includes the ",(0,r.kt)("inlineCode",{parentName:"p"},"access_token"),", an expiry of 3600 seconds, and a ",(0,r.kt)("inlineCode",{parentName:"p"},"refresh_token"),". Tokens are ",(0,r.kt)("em",{parentName:"p"},"Bearer")," type, which must be specified in your API calls.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Use the access token to call the API. Tokens are added to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with ",(0,r.kt)("inlineCode",{parentName:"p"},"Bearer")," type in subsequent requests.",(0,r.kt)("br",{parentName:"p"}),"\n","Successfully sending a request to an API requires the end user to have the correct account permissions. Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/"},"Access Control API")," to ensure your user can access the required resources."))),(0,r.kt)("h2",{id:"request-a-new-access-token-with-a-refresh-token"},"Request a new access token with a refresh token"),(0,r.kt)("p",null,"When your access token is close to the expiry time, you must request a new one using the refresh token provided in the original request. The response contains a new token and a new refresh token. Tokens are ",(0,r.kt)("em",{parentName:"p"},"Bearer")," type, which must be specified in your API calls."),(0,r.kt)(u,{method:"POST",baseUrl:function(e){return e.authority},path:"/connect/token",mdxType:"RequestLine"}),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"client_id"),(0,r.kt)("td",{parentName:"tr",align:null},"Identification generated during application creation. Found in the ",(0,r.kt)("a",{parentName:"td",href:"/my-apps"},"My Apps")," page or in the first step if generated during the tutorial.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"client_secret"),(0,r.kt)("td",{parentName:"tr",align:null},"Secret created during application creation.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"grant_type"),(0,r.kt)("td",{parentName:"tr",align:null},"Set to ",(0,r.kt)("inlineCode",{parentName:"td"},"refresh_token")," Indicates the type of grant being used. This tells the service you are requesting a new ",(0,r.kt)("inlineCode",{parentName:"td"},"access_token")," with a ",(0,r.kt)("inlineCode",{parentName:"td"},"refresh_token"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"refresh_token"),(0,r.kt)("td",{parentName:"tr",align:null},"The refresh token. Ensure the ",(0,r.kt)("inlineCode",{parentName:"td"},"refresh_token")," you include is the same one received from the previous request.")))),(0,r.kt)(h,{method:"POST",baseUrl:function(e){return e.authority},path:"/connect/token",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:function(e){var t,n,i;return new URLSearchParams("client_id=".concat(null!==(t=e.clientId)&&void 0!==t?t:"<client_id>","&client_secret=<client_secret>&grant_type=refresh_token&refresh_token=").concat(null!==(n=e.refreshToken)&&void 0!==n?n:"<refresh_token>","&redirect_uri=").concat(null!==(i=e.redirectURI)&&void 0!==i?i:"<redirect_uri>")).toString()},dataToSave:[{variableName:"accessToken",jsonQuery:"access_token"}],mdxType:"ExecutableCodeBlock"}),(0,r.kt)("h2",{id:"validate-your-token"},"Validate your token"),(0,r.kt)("p",null,"If you received a ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")," response to your request for a token, it is not necessary to validate it. However, the ",(0,r.kt)("inlineCode",{parentName:"p"},"users/me")," endpoint is provided if you would like to do so. This request returns the profile information for the user account associated with the token received."),(0,r.kt)("p",null,"Remember, the iTwin Platform Base URI is ",(0,r.kt)("inlineCode",{parentName:"p"},"api.bentley.com"),"."),(0,r.kt)(h,{method:"GET",path:"/users/me",headers:function(e){var t;return{Accept:"application/vnd.bentley.itwin-platform.v1+json",Authorization:"Bearer ".concat(null!==(t=e.accessToken)&&void 0!==t?t:"<returned token from the previous request>")}},mdxType:"ExecutableCodeBlock"}),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"Access Control",href:"/apis/access-control/",description:"Manage Access Controls for your iTwin member using iTwin roles and permissions.",mdxType:"ResourceTile"})))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"before-you-begin",level:2,title:"Before you begin",children:[]},{id:"user-authorization-code-flow",level:2,title:"User Authorization Code Flow",children:[]},{id:"set-up-authorization-for-your-app",level:2,title:"Set up Authorization for your App",children:[{id:"register-a-web-application",level:3,title:"Register a web application",children:[]}]},{id:"obtain-an-access-token",level:2,title:"Obtain an Access Token",children:[]},{id:"request-a-new-access-token-with-a-refresh-token",level:2,title:"Request a new access token with a refresh token",children:[]},{id:"validate-your-token",level:2,title:"Validate your token",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},54625:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Clash Suppression Rules Basics",tile:{name:"Clash Suppression Rules Basics",description:"Walk-through of the creation and usage of suppression rules for clash detection tests.",href:"/tutorials/clash-suppression-rules-basics/",thumbnail:"/unreal-docs-site/static/images/ClashDetectionSample.png",durationInMinutes:20,relatedApiIds:["clashdetection"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Suppression rules are rules for clash detection tests that will allow you to filter out potentially unwanted results based on properties of either or both of the clashing elements. In this tutorial, you will learn how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a suppression rule"),(0,r.kt)("li",{parentName:"ul"},"Associate a suppression rule with a test"),(0,r.kt)("li",{parentName:"ul"},"Interpret the results of a test using suppression rules"),(0,r.kt)("li",{parentName:"ul"},"Update your suppression rule"),(0,r.kt)("li",{parentName:"ul"},"Delete your suppression rule"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Access to an iModel and the associated projectId and imodelId for that iModel, along with the named version ID for the version you want to run the test against\n-If you do not have a model, instructions on creating one and retrieving the associated model data can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data"},"here")),(0,r.kt)("li",{parentName:"ul"},"Access to an iModel and the associated projectId and imodelId for that iModel, along with the named version ID for the version you want to run the test against"),(0,r.kt)("li",{parentName:"ul"},"Knowledge of how to run a clash detection test",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions on clash test basics, including creation and running are located ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/clash-test-basics"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Property and schema information for the rules you want to implement",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions on retrieving schema information for a specific model can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data"},"here")))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-get-a-token"},"1. Get a token"),(0,r.kt)("p",null,"To make request to the API a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application. You will need to include the scopes clashdetection:read and clashdetection:modify."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/clash-detection/operations/create-clashdetection-tests/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/suppressionRuleTemplates?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "suppressionRuleTemplates":[\n    {\n      "id":"0000000000000000000000000000000000000000000",\n      "displayName":"Suppression/Definition/Generic/AnyProperty",\n      "description":"Suppress clashes based on properties of any one of the clashing elements",\n      "prompt":"Suppress clashes if any one of the clashing elements has a property that satisfies the expression: -Expression-. Note: Use wild card "_" to match any single character, and "%" to match multiple characters",\n      "templateExpression":{\n        "propertyExpression":{\n          "relationshipPath":"ArchitecturalPhysical:Door",\n          "propertyName":"Origin",\n          "operator":"IS NOT NULL",\n          "propertyValue":""\n        }\n      }\n    }\n  ],\n  "_links":{\n    "next":{\n      "href":"https://api.bentley.com/clashdetection/suppressionRuleTemplates?projectId=00000000-0000-0000-0000-000000000000&continuationToken=00000000000000000000000000000000000000"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-suppression-rules-templates"},"2. Get Suppression Rules Templates"),(0,r.kt)("p",null,"Suppression rules work by checking elements in a valid clash against specific criteria. A rule can suppress a clash based on matching query criteria on a single element in a clash, matching criteria on both elements in a clash, or even matching criteria based on the relationship between two elements in a clash."),(0,r.kt)("p",null,"To make it simpler, we\u2019ve provided a variety of suppression rule templates. A HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/suppressionRuleTemplates?projectId[&continuationToken][&$top]")," request will return all of the valid suppression rule templates for the given project id. You simply choose the template that sounds best suited for your goals based on the prompt description.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/suppressionRules HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Suppress Long Pipes",\n  "reason":"Sample Demo",\n  "templateId":"0000000000000000000000000000000000000000000",\n  "parameters":{\n    "propertyExpression":{\n      "relationshipPath":"ProcessPhysical:IsmCurveMember",\n      "propertyName":"AutoLength",\n      "operator":">",\n      "propertyValue":"24"\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "suppressionRule":{\n    "id":"0000000000000000000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-creating-a-suppression-rule"},"3. Creating a Suppression Rule"),(0,r.kt)("p",null,"To create a suppression rule, you need to include the template id of your chosen template, a name for the rule, a reason that describes why the rule exists and what it covers, and the test parameters and send an HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/suppressionRules")),(0,r.kt)("p",null,"The parameters will vary based on your chosen template. Some templates, like 'suppress clashes if clashing elements are in the same category\u2019, don\u2019t require any parameters- we don\u2019t need any more information from you, we can just check the element categories against each other. For templates that do require parameters, you should follow the guidelines set forth by the template expression."),(0,r.kt)("p",null,"For more advanced users, or those who wish to do something a little more complicated that isn\u2019t covered by the standard templates, there are UnaryECSql and BinaryECSql templates that are essentially freeform and allow you to write the desired query criteria yourself in an ECSql expression."),(0,r.kt)("p",null,"If your rule creation is successful, it will return the rule metadata and a rule id. This will be used in the following steps to associate the rule with a test.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Sample Test",\n  "description":"Categories: Tag v Structure",\n  "setA":{\n    "modelIds":[],\n    "categoryIds":["0x4000000000d"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "setB":{\n    "modelIds":[],\n    "categoryIds":["0x40000000e71"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "suppressTouching":true,\n  "touchingTolerance":0.001,\n  "includeSubModels":false,\n  "suppressionRules":["0000000000000000000000000000000000000000000"]\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-adding-a-suppression-rule-to-a-clash-test"},"4. Adding a Suppression Rule to a Clash Test"),(0,r.kt)("p",null,"You can either use your suppression rule when creating a fresh clash test or when updating a previously created test. If you need a refresher, full instructions and parameter explanations for either option are located ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/clash-test-basics"},"here")),(0,r.kt)("p",null,"The only new step for either option is including a suppression rules array in the request block properties. This will be an array of IDs including the testId returned in the previous creation step, along with any other rules you would want to associate with the test."),(0,r.kt)("p",null,"Note that when updating a test, this is a replacement update, so if there were previously any rules associated with a test, you will need to include them in the array if you want them to continue to be associated with the test. This also means to disassociate a suppression rule with a clash test, all you would have to do is send an update request ",(0,r.kt)("em",{parentName:"p"},"without")," the specified ID in the suppressionRules array.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/results/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "result":[\n    {\n      "clashType":"Collision",\n      "clearance":-1,\n      "elementAId":"0x400000000c4",\n      "elementALabel":"1-SWS-0104-EX-OPM [4-5G]",\n      "elementACategoryIndex":0,\n      "elementAModelIndex":0,\n      "elementBId":"0x4000000003e",\n      "elementBLabel":"IsmCurveMember [4-1Q]",\n      "elementBCategoryIndex":1,\n      "elementBModelIndex":0,\n      "center":{\n        "x":12.192031860351562,\n        "y":407.69541931152344,\n        "z":122.92329406738281\n      },\n      "suppressingRuleIndexArray":[0]\n    }\n  ],\n  "categoryList":[\n    {\n      "id":"0x4000000000d",\n      "displayName":"Tag-Category"\n    },\n    {\n      "id":"0x40000000e71",\n      "displayName":"Structure"\n    }\n  ],\n  "modelList":[\n    {\n      "id":"0x20000000002",\n      "displayName":"Sample"\n    }\n  ],\n  "suppressingRuleList":[\n    {\n      "id":"0000000000000000000000000000000000000000000",\n      "displayName":"Sample Suppression Rule"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-interpreting-clash-results-with-suppression-rules"},"5. Interpreting Clash Results with Suppression Rules"),(0,r.kt)("p",null,"At this point, you should already understand the basics of how clash tests work and how to run them, so go ahead and run your updated test now, or if you need to, go ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/clash-test-basics"},"here")," to review the process."),(0,r.kt)("p",null,"While the process of running a test hasn\u2019t changed, the results themselves will if there were clashes affected by your new suppression rule. Clashes that fit the suppression rule criteria are not removed from results directly; rather, they have an array property (suppressingRuleIndexArray) that includes the zero-based index of any suppression rule. You can then use this array index to look up the relevant suppressing rule in the suppressingRuleList array, which includes the id and name. This will allow you to see the effect of multiple suppression rules, and which clashes they impact, without having to rerun the test multiple times.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "displayName":"Long Pipes Suppression Rule",\n  "reason":"Suppress long pipes over 24 meters."\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "suppressionRule":{\n    "id":"0000000000000000000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-updating-a-suppression-rule"},"6. Updating a Suppression Rule"),(0,r.kt)("p",null,"To update a suppression rule is relatively simple, all you need to do is send a HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT https://api.bentley.com/clashdetection/suppressionRules/{id}")," request. However, you can only update the name and reason- you will not be able to change the rule parameters and would have to create a new rule instead. Both parameters are optional, so if you only want to update one or the other, you can only send that property during the update. You will not need to update any of the associated tests- next time you run them, they will returns responses based on the updated rule.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"DELETE https://api.bentley.com/clashdetection/suppressionRules/0000000000000000000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-deleting-a-suppression-rule"},"7. Deleting a Suppression Rule"),(0,r.kt)("p",null,"Deleting a suppression rule is also easy, just send a HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE https://api.bentley.com/clashdetection/suppressionRules/{id}")," Upon a successful deletion, the response body will be empty; it will only include additional information if the deletion failed."),(0,r.kt)("p",null,"At this time, deleting a suppression rule does not automatically delete them from associated tests, so please make an effort to update the tests in conjunction with the rule deletion to keep things consistent.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"8-conclusion"},"8. Conclusion"),(0,r.kt)("p",null,"You should now be able to successfully create and update suppression rules. This will allow you to filter the number of clashes based on your specified criteria so you only have to spend time investigating the issues you think might need attention.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-get-a-token",level:2,title:"1. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"2-get-suppression-rules-templates",level:2,title:"2. Get Suppression Rules Templates",children:[]},{id:"3-creating-a-suppression-rule",level:2,title:"3. Creating a Suppression Rule",children:[]},{id:"4-adding-a-suppression-rule-to-a-clash-test",level:2,title:"4. Adding a Suppression Rule to a Clash Test",children:[]},{id:"5-interpreting-clash-results-with-suppression-rules",level:2,title:"5. Interpreting Clash Results with Suppression Rules",children:[]},{id:"6-updating-a-suppression-rule",level:2,title:"6. Updating a Suppression Rule",children:[]},{id:"7-deleting-a-suppression-rule",level:2,title:"7. Deleting a Suppression Rule",children:[]},{id:"8-conclusion",level:2,title:"8. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},90304:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Clash Test Basics",tile:{name:"Clash Test Basics",description:"Walk-through of the clash detection lifecycle-creating, running and retrieving the results.",href:"/tutorials/clash-test-basics/",thumbnail:"/unreal-docs-site/static/images/ClashDetectionSample.png",durationInMinutes:20,relatedApiIds:["clashdetection"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Clash detection is used to analyze the potential conflicts between multiple elements in an iModel. Based on criteria you set, it detects geometrical clashes between object element sets and returns information about each of these clashes so you can follow up and determine which might lead to potential problems. In this tutorial, you will learn how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a clash test"),(0,r.kt)("li",{parentName:"ul"},"Run the clash test against a specific iModel version"),(0,r.kt)("li",{parentName:"ul"},"Monitor the Clash Test run process"),(0,r.kt)("li",{parentName:"ul"},"Retrieve and interpret the resulting clashes"),(0,r.kt)("li",{parentName:"ul"},"Update your clash test"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Access to an iModel and the associated projectId and imodelId for that iModel, along with the named version ID for the version you want to run the test against",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you do not have a model, instructions on creating one and retrieving the associated model data can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data/#1-optional-create-a-sample-imodel-for-testing"},"here")))),(0,r.kt)("li",{parentName:"ul"},"A list of model and category IDs you wish to check for clashes",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions on retrieving lists of models and categories for a specific model can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data/#2-retrieving-models-and-categories"},"here")))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-get-a-token"},"1. Get a token"),(0,r.kt)("p",null,"To make request to the API a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application. You will need to include the scopes clashdetection:read and clashdetection:modify."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/clash-detection/operations/create-clashdetection-tests/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/tests HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Sample Test",\n  "description":"Categories: Tag v Structure",\n  "setA":{\n    "modelIds":[],\n    "categoryIds":["0x4000000000d"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "setB":{\n    "modelIds":[],\n    "categoryIds":["0x40000000e71"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "suppressTouching":true,\n  "touchingTolerance":0.001,\n  "includeSubModels":false\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-a-clash-test"},"2. Create a Clash Test"),(0,r.kt)("p",null,"Now that we have an authorization token, along with the prerequisites we should have everything we need to run our first clash test."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: Many people's first inclination when experimenting with clash tests is to run every model or category against every other model or category. While this does usually guarantee you will see clashes, it also usually guarantees a long wait time while the engine processes the sets. Consider selecting a smaller subset if you're just starting out. You can always look in the iTwin Viewer and find two elements you know are clashing, and note the models/categories they belong to to use in your practice test."),(0,r.kt)("p",null,"Clash tests are saved and associated with a specific project; if you run a clash test and find issues that you plan to fix in your model, once you upload the new model version you can rerun the same test to ensure they\u2019ve been resolved."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: Even if iModels share category and model display names, the ids may differ. Please check before running a test against a different iModel than the one it was initially created for."),(0,r.kt)("p",null,"To create a clash test send an HTTP POST request to ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/tests/")),(0,r.kt)("p",null,"Clash detection tests are highly configurable. so let\u2019s quickly go over all of the different parameters you can set in the request body:\n",(0,r.kt)("strong",{parentName:"p"},"projectId")," - Id of the project this test will be associated with. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"displayName")," - Name of the clash test. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"description")," - Additional identifying information or descriptions of the clash. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"setA/setB")," - Object containing clash test information about a given set of elements. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"modelIds")," - Array of model IDs which contain elements to check for clashes. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"categoryIds")," - Array of category IDs which contain elements to check for clashes ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"selfCheck")," - Boolean value. When this is true, elements in this set will be checked for clashes against other elements in this set. When false, it will only check against elements in the opposing set. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clearance")," - When this is set above 0, any elements within this distance will be reported as a clash, even when not touching. A \u201cClearance\u201d value will be supplied in results, telling you the distance between the elements. This is in meters. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"suppressTouching")," - Boolean value. When this is true, the results will not include elements that are touching, or whose clash overlap falls within the touching tolerance limits specified below. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"touchingTolerance")," - Elements that are overlapping by less than this amount will be suppressed. This is in meters. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"includeSubModels")," - Boolean value. When this is true, any elements under any model that falls under the model hierarchy of the models you\u2019ve specified will be included. When false, this test will only include elements directly under the models you\u2019ve specified.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"The response from the server will include the id of the newly created test, as well as a link to the test."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: You will need this test ID later to run the test.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/runs/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "testId":"00000000-0000-0000-0000-000000000000",\n  "iModelId":"00000000-0000-0000-0000-000000000000",\n  "namedVersionId":"00000000-0000-0000-0000-000000000000"\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "run":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "run":{\n        "href":"https://api.bentley.com/clashdetection/runs/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-run-the-clash-detection-test"},"3. Run the Clash Detection Test"),(0,r.kt)("p",null,"Now that you have created a test, we\u2019re going to go ahead and run it. To run a Clash Detection test, you just need to send the HTTP POST request ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/runs/")," with a request body containing the testId from the previous step, the iModel id and Named Version Id you want to run against."),(0,r.kt)("p",null,"Clash detection tests are asynchronous, so instead of containing the results directly, the result body contains the runId as well as a link to the run. You will use this in the next step to retrieve the run status.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Retrieve Run Results Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/runs/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Run Results Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Run Results Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "run":{\n    "id":"000000000000000-000000000000000000000000000",\n    "displayName":"ClashDetectionTest1-12/1/2020 5:12:50 PM",\n    "executedDateTime":"12/1/2020 5:12:50 PM",\n    "count":"0",\n    "userName":"Your Name",\n    "status":"queued",\n    "_links":{\n      "result":{\n        "href":"https://api.bentley.com/clashdetection/results/000000000000000-000000000000000000000000000"\n      },\n      "test":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Clash Results Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/results/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Clash Results Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieve Clash Results Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "result":[\n    {\n      "clashType":"Collision",\n      "clearance":-1,\n      "elementAId":"0x400000000c4",\n      "elementALabel":"1-SWS-0104-EX-OPM [4-5G]",\n      "elementACategoryIndex":0,\n      "elementAModelIndex":0,\n      "elementBId":"0x4000000003e",\n      "elementBLabel":"IsmCurveMember [4-1Q]",\n      "elementBCategoryIndex":1,\n      "elementBModelIndex":0,\n      "center":{\n        "x":12.192031860351562,\n        "y":407.69541931152344,\n        "z":122.92329406738281\n      },\n      "suppressingRuleIndexArray":[]\n    }\n  ],\n  "categoryList":[\n    {\n      "id":"0x4000000000d",\n      "displayName":"Tag-Category"\n    },\n    {\n      "id":"0x40000000e71",\n      "displayName":"Structure"\n    }\n  ],\n  "modelList":[\n    {\n      "id":"0x20000000002",\n      "displayName":"Sample"\n    }\n  ],\n  "suppressingRuleList":[]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-retrieve-clash-detection-results"},"4. Retrieve Clash Detection Results"),(0,r.kt)("p",null,"Once you\u2019ve run a clash detection test, you\u2019ll need to wait for the engine to finish processing the test. This can take less than ten minutes or several hours depending on the queue time and number of elements and potential collision are in your element sets."),(0,r.kt)("p",null,"There are two parts to results retrieval, retrieving the information about the clash test run itself, and then the actual results:"),(0,r.kt)("h3",{id:"retrieve-run-results"},"Retrieve Run Results"),(0,r.kt)("p",null,"You can check on the status of your clash job via an HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/runs/{id}")," using the runId returned in the previous create step. It can take a while, so you might want to run this on a loop until you get the \u201cstatus: completed\u201d result."),(0,r.kt)("p",null,"In addition to the status, the results body will also include some metadata, and most importantly for us a results link we will use to retrieve the actual clash results."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Note: While the results link will always appear in the response body, you will not be able to actually retrieve the results until the status is shown as complete."),(0,r.kt)("h3",{id:"retrieve-clash-results"},"Retrieve Clash Results"),(0,r.kt)("p",null,"Using the results link from the previous step, we can now retrieve the actual clash results we\u2019ve been waiting for using a GET HTTP request ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/results/{id}"),". The clash results object contains a lot of information, so let\u2019s quickly go over them. There are four main array objects in the result body:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"categoryList")," - Category lookup table. Contains an array of category id and category display name pairs.",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"modelList")," - Model lookup table. Contains an array of model id and model display name pairs. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"suppressingRuleList")," - Suppression rule lookup table. Contains an array of suppression rule ids and suppression rule display name pairs. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clashDetectionResult")," - Array of all the clashes in this clash detection result. ",(0,r.kt)("br",null)),(0,r.kt)("p",null,"A single clash object in the clashDetectionResult array contains:",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clashType")," - The type of clash detected - possible values: Collision, Clearance, Touching, Not Initialized. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"clearance")," - When the clash type is Clearance, the value is returned in meters. Otherwise -1 is returned. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementAId")," - The unique id of element A. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementALabel")," - The display label of element A. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementACategoryIndex")," - The zero-based index used to lookup the element A category in the categoryList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementAModelIndex")," - The zero-based index used to lookup the element A model in the modelList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBId")," - The unique id of element B. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBLabel")," - The display label of element B. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBCategoryIndex")," - The zero-based index used to lookup the element B category in the categoryList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"elementBModelIndex")," - The zero-based index used to lookup the element B model in the modelList. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"center")," - The clash center point. This contains x, y, and z properties for the exact spatial position of the center point. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"suppressingRuleIndexArray")," - An array of the zero-based indexes used to lookup any suppression rules this clash would be suppressed by in the suppressingRuleList. ",(0,r.kt)("br",null))),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"}," Get Clash Test Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Get Clash Test Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Get Clash Test Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "displayName":"Sample Test",\n    "description":"Categories: Tag v Structure",\n    "setA":{\n      "modelIds":[],\n      "categoryIds":["0x4000000000d"],\n      "selfCheck":false,\n      "clearance":0\n    },\n    "setB":{\n      "modelIds":[],\n      "categoryIds":["0x40000000e71"],\n      "selfCheck":false,\n      "clearance":0\n    },\n    "suppressTouching":true,\n    "touchingTolerance":0.001,\n    "includeSubModels":false,\n    "_links":{\n      "createdBy":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000/members/00000000-0000-0000-0000-000000000000"\n      },\n      "lastModifiedBy":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000/members/00000000-0000-0000-0000-000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Syntax"),(0,r.kt)(h,{language:"http",code:"PUT https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"Sample Test",\n  "description":"Categories: Tag v Structure",\n  "setA":{\n    "modelIds":[],\n    "categoryIds":["0x4000000000d"],\n    "selfCheck":true,\n    "clearance":0\n  },\n  "setB":{\n    "modelIds":[],\n    "categoryIds":["0x40000000e71"],\n    "selfCheck":false,\n    "clearance":0\n  },\n  "suppressTouching":true,\n  "touchingTolerance":0.005,\n  "includeSubModels":true\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Update Clash Test Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "test":{\n    "id":"000000000000000-000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/clashdetection/tests/000000000000000-000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-update-a-clash-test"},"5. Update a Clash Test"),(0,r.kt)("p",null,"After running your test, you might realize you want to tweak your criteria slightly. Instead of making a new test, you can just update the one you just made previously. This is a replacement update, so you will still need the full test criteria you enetered previously. If you still have your test criteria handy, you can just copy it and update as necessary. If not, you can use a ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com/clashdetection/tests/{id}"),", with your test id to retrieve the test details and update from there."),(0,r.kt)("p",null,"Once you have your test criteria and have implemented any updates you want to make, you can use an HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT https://api.bentley.com/clashdetection/tests/{id}")," using the test id.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-conclusion"},"6. Conclusion"),(0,r.kt)("p",null,"You have now gone through the entire life cycle of a clash detection test: creating, running and retrieving the results. This will aid you in detecting any potential problems or clashes earlier in the modeling process while they are easier to fix. As you continue to practice and gain experience creating and running tests, you will be able to refine the criteria to be specific to your individual needs and issues.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Clash Review Sample Showcase",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Clash%20Review",description:"A sample showcase that demonstrates calling Clash Detection APIs to retrieve clash data and present it for review in a viewer app.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-get-a-token",level:2,title:"1. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"2-create-a-clash-test",level:2,title:"2. Create a Clash Test",children:[]},{id:"3-run-the-clash-detection-test",level:2,title:"3. Run the Clash Detection Test",children:[]},{id:"4-retrieve-clash-detection-results",level:2,title:"4. Retrieve Clash Detection Results",children:[{id:"retrieve-run-results",level:3,title:"Retrieve Run Results",children:[]},{id:"retrieve-clash-results",level:3,title:"Retrieve Clash Results",children:[]}]},{id:"5-update-a-clash-test",level:2,title:"5. Update a Clash Test",children:[]},{id:"6-conclusion",level:2,title:"6. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},58149:function(e,t,n){"use strict";n.d(t,{Jt:function(){return b},Pu:function(){return s},ZP:function(){return w}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Transforming an iModel - Combining physical models v2",tile:{name:"Transforming an iModel - Combining physical models",description:"This tutorial will demonstrate how to combine physical models in second version using iModel Transformations API.",thumbnail:"/unreal-docs-site/static/images/Metro_Station.png",href:"/tutorials/combine-physical-models-v2-transformation/",durationInMinutes:20,relatedApiIds:["transformations"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("VSCodeIcon"),h=p("PostmanIcon"),k=p("CreateSampleAppButton"),g=p("Alert"),y=p("Title"),f=p("CodeBlock"),T={metadata:s};function w(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"20",summaryImageSrc:"/unreal-docs-site/static/images/Metro_Station.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you create a ",(0,r.kt)("inlineCode",{parentName:"p"},"CombinePhysicalModelsV2")," transformation.\nIn this walk-through you will configure a transformation, run it, and wait for it to complete and then view the result.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(m,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(h,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation or any other http request tool."),(0,r.kt)("li",{parentName:"ul"},"A created and connected project. You can create a project by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"Create a new iTwin Project"),"."),(0,r.kt)("li",{parentName:"ul"},"A source iModel with some data for the transformation. You can create an iModel from Bentley Sample by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/"},"Create an iModel"),"."),(0,r.kt)("li",{parentName:"ul"},"An empty target iModel for the transformation. You can create an empty iModel by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/"},"Create an iModel"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(k,{scopes:["transformations:modify","transformations:read"],clientName:"Combine physical models v2",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Transformations API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"transformations:modify transformations:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make requests to the API, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-out-section"},"Grab a user token from Api reference \u201cTry it out\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/transformations/operations/combinephysicalmodelsv2/"},"Create Configuration")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it out\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-decide-which-models-in-source-imodel-to-transform"},"3. Decide which models in source iModel to transform."),(0,r.kt)("p",null,"Open a source iModel and pick models that you want to group. In order to group models, you will need to specify an ECSQL query."),(0,r.kt)("p",null,"Easiest way to query for iModel data is by using an iModel Console web application. Open your source iModel by replacing values in this link:\n",(0,r.kt)("a",{parentName:"p",href:"https://imodelconsole.bentley.com/?projectid=%7ByourSourceProjectId%7D&imodelid=%7ByourSourceIModelId%7D&changesetid=%7ByourChangeSetId%7D"},"https://imodelconsole.bentley.com/?projectid={yourSourceProjectId}&imodelid={yourSourceIModelId}&changesetid={yourChangeSetId}")),(0,r.kt)("h3",{id:"31-transform-parameters-peculiarities"},"3.1 Transform parameters peculiarities:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Each model group must have name and source query."),(0,r.kt)("li",{parentName:"ul"},"Source model queries must select ECInstanceId by using ",(0,r.kt)("inlineCode",{parentName:"li"},"*")," or explicitly selecting that column."),(0,r.kt)("li",{parentName:"ul"},"If you want to combine all models that were left unselected, you should set ",(0,r.kt)("strong",{parentName:"li"},"groupUnselectedModels")," parameter to true (it is set to false by default) and specify the name in ",(0,r.kt)("strong",{parentName:"li"},"unselectedModelsGroupName")," parameter.")),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Note: You should only select models that are sub-modeling PhysicalPartition ECClassID."),(0,r.kt)("h3",{id:"32-query-for-all-elements-that-sub-model-physical-partition"},"3.2 Query for all elements that sub-model Physical Partition"),(0,r.kt)("p",null,"Run ECSQL query:\n",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT ECInstanceId, CodeValue, UserLabel from bis.PhysicalPartition"),".\nTo learn more about ECSQL follow ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/learning/ecsql"},"this")," link."),(0,r.kt)("p",null,"This ECSQL query returns a list of all elements inside an iModel that can be used in transformation. To learn more about iModel internals, follow ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/bis/guide/data-organization/information-hierarchy/#example-information-hierarchy"},"this")," link.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/transformations/configurations/combinephysicalmodelsv2 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Body"),(0,r.kt)(f,{language:"json",code:'{\n  "transformName":"Combine physical models v2",\n  "sourceProjectId":"SourceProjectId",\n  "sourceIModelId":"SourceIModelId",\n  "targetProjectId":"TargetProjectId",\n  "targetIModelId":"TargetIModelId",\n  "comment":"Example comment",\n  "transformParameters":{\n    "modelGroups":[{\n        "targetModelName": "Your specified name for the first group",\n        "sourceModelQuery": "Your specified query (you can use example query that was shown in section 3.2)"\n    },{\n        "targetModelName": "Your specified name for second group",\n        "sourceModelQuery": "Your specified query (you can use example query that was shown in section 3.2)"\n    }],\n    "groupUnselectedModels": true,\n    "unselectedModelsGroupName": "Your specified name for ungrouped models"\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "configuration":{\n    "transformParameters": {\n      "modelGroups":[{\n        "targetModelName": "Your specified name for the first group",\n        "sourceModelQuery": "Your specified query (you can use example query that was shown in section 3.2)"\n      },{\n        "targetModelName": "Your specified name for second group",\n        "sourceModelQuery": "Your specified query (you can use example query that was shown in section 3.2)"\n      }],\n      "groupUnselectedModels": true,\n      "unselectedModelsGroupName": "Your specified name for ungrouped models"\n    },\n    "comment": "Example comment",\n    "createdDateTime": "0000-00-00T00:00:00.0000000Z",\n    "modifiedDateTime": "0000-00-00T00:00:00.0000000Z",\n    "_links": {\n      "sourceIModel": {\n        "href": "https://api.bentley.com/imodels/00000000-0000-0000-0000-000000000000"\n      },\n      "targetIModel": {\n        "href": "https://api.bentley.com/imodels/00000000-0000-0000-0000-000000000000"\n      },\n      "sourceProject": {\n        "href": "https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000"\n      },\n      "targetProject": {\n        "href": "https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000"\n      }\n    },\n    "id": "00000000-0000-0000-0000-000000000000",\n    "transformName": "Combine physical models v2"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-a-configuration"},"4. Create a configuration"),(0,r.kt)("p",null,"A transformation configuration is needed to create an association between source and target iModels with some additional metadata to successfully carry out the transformation.\nCreating a configuration does not start the transformation process itself."),(0,r.kt)("p",null,"A configuration is created by sending a request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations/configurations/combinephysicalmodelsv2"},"https://api.bentley.com/transformations/configurations/combinephysicalmodelsv2")," endpoint with the payload describing the source and target iModel association."),(0,r.kt)("p",null,"These are the required properties for the endpoint:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"transformName")," - free form text field so you could name your configuration. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"sourceProjectId")," - source projectId. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"sourceIModelId")," - iModelId of an iModal that is going to be used as a source of the transformation. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"targetProjectId")," - target projectId. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"targetIModelId")," - iModelId of an iModal that is going to be used as a target of the transformation. Initial transformation should always run on an empty target iModel. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"comment")," - a comment of the transformation. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"transformParameters")," - parameters that were mentioned in section 3."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/combinephysicalmodelsv2/"},"CombinePhysicalModelsV2")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"After executing the request, save returned Id from the response.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/transformations HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Body"),(0,r.kt)(f,{language:"json",code:'{\n  "configurationId":"Your saved configurationId from step number 3."\n}',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "transformation": {\n    "errorMessage": "",\n    "processedElementCount": 0,\n    "totalElementCount": 0,\n    "_links": {\n      "configuration": {\n        "href": "https://dev-api.bentley.com/transformations/configurations/00000000-0000-0000-0000-000000000000"\n      }\n    },\n    "id": "00000000-0000-0000-0000-000000000000",\n    "status": "Created"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-create-a-transformation"},"5. Create a transformation"),(0,r.kt)("p",null,"A transformation is created by sending a request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations"},"https://api.bentley.com/transformations")," endpoint with the payload indicating which configuration should be used.\nThe request is submitting a transformation job based on the configuration Id value that was provided."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/create-transformation/"},"Create transformation")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"Response indicates the current status of the transformation. After submitting a transformation the status is \u201cCreated\u201d which means that the transformation is enqueued and waiting to start.\nPossible status messages:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Created")," - transformation is created and waiting to be started. The transformation should start automatically, no additional actions are needed. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Started")," - transformation is started and waiting to finish. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Succeeded")," - transformation succeeded. You can open target iModel and inspect the results. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Failed")," - transformation failed. Check the errorMessage node for more information on what happened. ",(0,r.kt)("br",null)),(0,r.kt)("p",null,"After executing the request, save returned transformation Id from the response.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"GET https://api.bentley.com/transformations/{savedTransformationId} HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "transformation": {\n    "errorMessage": "",\n    "processedElementCount": 428,\n    "totalElementCount": 428,\n    "startedDateTime": "0000-00-00T00:00:00.0000000Z",\n    "finishedDateTime": "0000-00-00T00:00:00.0000000Z",\n    "sourceChangeSetId": "0",\n    "lastTargetChangesetPushed": "0",\n    "_links": {\n      "configuration": {\n        "href": "https://dev-api.bentley.com/transformations/configurations/00000000-0000-0000-0000-000000000000"\n      }\n    },\n    "id": "00000000-0000-0000-0000-000000000000",\n    "status": "Succeeded"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-waiting-for-transformation-to-finish"},"6. Waiting for transformation to finish"),(0,r.kt)("p",null,"Send a GET request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations/%7ByourTransformationId%7D"},"https://api.bentley.com/transformations/{yourTransformationId}")," endpoint to get an updated transformation status.\nYou can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/get-transformation/"},"Get transformation")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"Query for the transformation multiple times until the ",(0,r.kt)("strong",{parentName:"p"},"status")," changes from ",(0,r.kt)("strong",{parentName:"p"},"Created")," to ",(0,r.kt)("strong",{parentName:"p"},"Started")," and eventually to ",(0,r.kt)("strong",{parentName:"p"},"Succeeded"),"."),(0,r.kt)("p",null,"Go to ",(0,r.kt)("a",{parentName:"p",href:"/my-itwins/"},"My iTwins")," and view the target iModel."),(0,r.kt)("h2",{id:"7-conclusion"},"7. Conclusion"),(0,r.kt)("p",null,"We have successfully created a configuration, ran a transformation that combined models, waited for the transformation to be completed and inspected the results.")))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-out-section",level:3,title:"Grab a user token from Api reference \u201cTry it out\u201d Section",children:[]}]},{id:"3-decide-which-models-in-source-imodel-to-transform",level:2,title:"3. Decide which models in source iModel to transform.",children:[{id:"31-transform-parameters-peculiarities",level:3,title:"3.1 Transform parameters peculiarities:",children:[]},{id:"32-query-for-all-elements-that-sub-model-physical-partition",level:3,title:"3.2 Query for all elements that sub-model Physical Partition",children:[]}]},{id:"4-create-a-configuration",level:2,title:"4. Create a configuration",children:[]},{id:"5-create-a-transformation",level:2,title:"5. Create a transformation",children:[]},{id:"6-waiting-for-transformation-to-finish",level:2,title:"6. Waiting for transformation to finish",children:[]},{id:"7-conclusion",level:2,title:"7. Conclusion",children:[]}]}},41905:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Better calibration in Reality Modeling",tile:{name:"Better calibration in Reality Modeling",description:"Learn how to specify calibration settings in Reality Modeling, and download the result of a calibration",thumbnail:"/unreal-docs-site/static/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration/",durationInMinutes:10,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Expert",durationInMinutes:"10",summaryImageSrc:"/unreal-docs-site/static/images/cccs-calibration-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to specify calibration settings to ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling"),", so that you can obtain a better model."),(0,r.kt)("p",null,"In this tutorial, we will cover how to send calibration settings to ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling"),", and how to retrieve calibration reports from the service.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"Reality Modeling Quick Start tutorial"),"."),(0,r.kt)("li",{parentName:"ul"},"A basic understanding of the calibration/aerotriangulation concept in Reality Modeling. See ",(0,r.kt)("a",{parentName:"li",href:"https://docs.bentley.com/LiveContent/web/ContextCapture%20Help-v10/en/GUID-95336991-F284-4AD8-A33B-9AE341507D5C.html"},"Reality Modeling Master Help")," for a description of the calibration settings"))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"AT Settings exchange structure"),(0,r.kt)(m,{language:"json",code:'{\n  "ATSettingsExchange":{\n    "PhotogroupEstimationMode": "OnePass"-"MultiPass",\n    "ColorEqualizationMode": "EqualizeBlockwise"-"EqualizeNone",\n    "SplatsMode": "SplatsAtlas"-"SplatsNone",\n    "AdjustmentConstraints": "None"|"UserConstraints"|"ControlPoints"|"PositionMetadata"|"PointClouds"|"Automatic",\n    "RigidRegistration": "None"|"UserConstraints"|"ControlPoints"|"PositionMetadata"|"PointClouds"|"Automatic",\n    "EstimationGroups": "PerPhotogroup"-"PerPhoto",\n    "RotationPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "CenterPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "FocalPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "PrincipalPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "RadialPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "TangentialPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "TiePointsPolicy": "Compute"-"Keep",\n    "FisheyeFocalPolicy": "Compute"-"Keep"-"AdjustFisheyeFocalSymmetric"-"AdjustFisheyeFocalAsymmetric",\n    "FisheyeDistortionPolicy": "Compute"-"Keep"-"AdjustFisheyeDistortion_01xx0"-"AdjustFisheyeDistortion_x1xx0"-"AdjustFisheyeDistortion_x1xxx"-"AdjustWithinTolerance %.%",\n    "AspectRatioPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "SkewPolicy": "Compute"-"Keep"-"Adjust"-"AdjustWithinTolerance %.%",\n    "PairSelectionMode": "Default"-"Sequence"-"Loop"-"Exhaustive"-"Similar images only",\n    "PairSelectionMaxDistance": int,\n    "KeyPointsDensity": "Normal"-"High",\n    "ExtractQR": "QR Codes"|"April Tags"|"Chili Tags"|"Disabled",\n    "ComponentConstructionMode": "OnePass"-"MultiPass"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-specifying-calibration-settings"},"1. Specifying calibration settings"),(0,r.kt)("p",null,"If you want to apply specific settings for the calibration, you can add a file in the workspace reality data: the file ",(0,r.kt)("inlineCode",{parentName:"p"},"at_settings.json")," has to be uploaded to ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/data/"),".\nNote that no check on the uploaded file is performed until the job is actually submitted, and if the parameters are not fitted to the inputs, the job will failed."),(0,r.kt)("p",null,"Note that every properties in the following structure are optional.\nStrings separated by ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," mean only one option can be specified. Strings separated by ",(0,r.kt)("inlineCode",{parentName:"p"},"|")," can be combined using ",(0,r.kt)("inlineCode",{parentName:"p"},"|"),", eg: ",(0,r.kt)("inlineCode",{parentName:"p"},'"QR Codes|Chili Tags"'),". For parameter ",(0,r.kt)("inlineCode",{parentName:"p"},'"AdjustWithinTolerance %.%"'),", ",(0,r.kt)("inlineCode",{parentName:"p"},"%.%")," has to be replace by a double."),(0,r.kt)("p",null,"If you have a preset and you want to apply it, upload it as ",(0,r.kt)("inlineCode",{parentName:"p"},"at_preset.cfg")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/data/"),". No need to specify the name in the the ATSettings file.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-accessing-calibration-results"},"2. Accessing calibration results"),(0,r.kt)("p",null,"Once the step ",(0,r.kt)("em",{parentName:"p"},"AT_CloudExport")," is executed, you can access calibration results (including reports) through the workspace reality data."),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/outputs/calibration/")," you will find:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"acquisition_report"),", a folder containing an HTML page with CSS regarding the acquisition of your images"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"quality_report"),", a folder containing HTML pages regarding with quality of your calibration"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"block.xmlz")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"block - TiePoints.xmlz"),", the corresponding ",(0,r.kt)("em",{parentName:"li"},"CCOrientations")," of this calibration"))),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," calibration tutorial!\nYou should now be able to specify calibration settings and retrieve reports once a calibration is completed."),(0,r.kt)("p",null,"To go further and use ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Using cache in Reality Modeling",description:"This tutorial focuses on using cache for faster processing in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache",mdxType:"Tile"}),(0,r.kt)(g,{name:"Better production in Reality Modeling",description:"Learn how to specify production settings in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using Reality Modeling API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Management API",href:"/apis/reality-management/",description:"Reality Management API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-specifying-calibration-settings",level:2,title:"1. Specifying calibration settings",children:[]},{id:"2-accessing-calibration-results",level:2,title:"2. Accessing calibration results",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},115:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Better production in Reality Modeling",tile:{name:"Better production in Reality Modeling",description:"Learn how to specify production settings in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production/",durationInMinutes:10,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Expert",durationInMinutes:"10",summaryImageSrc:"/unreal-docs-site/static/images/cccs-production-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to specify production settings to ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling"),", so that your exports are closer to what you\u2019d like."),(0,r.kt)("p",null,"In this tutorial, we will cover how to send production settings to ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling"),", and go over the different settings and their usage.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"Reality Modeling Quick Start tutorial"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Example of a production settings file"),(0,r.kt)(m,{language:"json",code:'{\n  "ProductionSettingsExchange":[\n    {\n      "name":"OBJ",\n      "settings":{\n        "TexturedEnabled":false,\n        "DoublePrecision":true\n      }\n    },\n    {\n      "name":"FBX",\n      "settings":""\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-specifying-production-settings"},"1. Specifying production settings"),(0,r.kt)("p",null,"If you want to apply specific settings to the productions - that is outputs like ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", etc. - you can add a file in the workspace reality data: the file ",(0,r.kt)("inlineCode",{parentName:"p"},"prod_settings.json")," has to be uploaded to ",(0,r.kt)("inlineCode",{parentName:"p"},"/{jobId}/data/"),".\nNote that no check on the uploaded file is performed until the job is actually submitted, and if the parameters are not fitted to the inputs, the job will failed.\nAlso, if you provide this file, all the outputs should be present in the file.\nThat is, if you requested ",(0,r.kt)("em",{parentName:"p"},"OBJ")," and ",(0,r.kt)("em",{parentName:"p"},"FBX"),", both of these outputs should be present in the file, even if you only want to apply specific settings to the ",(0,r.kt)("em",{parentName:"p"},"OBJ")," format, see the example.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-list-of-existing-production-settings"},"2. List of existing production settings"),(0,r.kt)("p",null,"You will find here a complete list of the existing options for the existing ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," formats. Properties separated by a ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," mean you have to chose between one of the options.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "TexturedEnabled": true-false,\n  "TextureColorSource": "Visible"-"Thermal"-"Resolution",\n  "TextureColorSourceResRangeMin": double,\n  "TextureColorSourceResRangeMax": double,\n  "TextureColorSourceThermalUnit": "Absolute"-"Equalized"-"Celsius"-"Fahrenheit",\n  "TextureColorSourceThermalRangeMin": double,\n  "TextureColorSourceThermalRangeMax": double,\n  "TextureCompressionQuality": 50-75-90-100,\n  "MaximumTextureSize": int,\n  "TextureSharpening": 0-100\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"texture"},"Texture"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"POD"),", ",(0,r.kt)("em",{parentName:"p"},"LAS"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),"."),(0,r.kt)("p",null,"They are used to enabled the texturing of a model, select the color source, change the compression of the texture and so on.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "TileOverlap": double (in units or meters)\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"tile-overlap"},"Tile overlap"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),"."),(0,r.kt)("p",null,"They are used to determinate the overlap distance between two tiles, in order to avoid gaps.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "SRS": string,\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"spatial-reference-system"},"Spatial Reference System"),(0,r.kt)("p",null,"A spatial reference system describes the coordinates system of the produced output.\nWe expect a string Well Known Text definition (e.g. WGS84), \u201cEPSG: \u201d or a PROJ.4 definition."),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"LAS"),", ",(0,r.kt)("em",{parentName:"p"},"POD"),", ",(0,r.kt)("em",{parentName:"p"},"Orthophoto/DSM"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "SRSOrigin": "15.0;2.3;-25.3"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"srs-origin"},"SRS Origin"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),"."),(0,r.kt)("p",null,"They describe the origin of the Spatial Reference System.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "LODType": "type - see table",\n  "LODSize": 0.707106781186547-1-1.4142135623731-2\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"level-of-details"},"Level of details"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX"),", ",(0,r.kt)("em",{parentName:"p"},"3SM"),", ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", ",(0,r.kt)("em",{parentName:"p"},"ESRI i3s"),", ",(0,r.kt)("em",{parentName:"p"},"DGN"),", ",(0,r.kt)("em",{parentName:"p"},"FBX"),", ",(0,r.kt)("em",{parentName:"p"},"OBJ"),", ",(0,r.kt)("em",{parentName:"p"},"LODTreeExport"),"."),(0,r.kt)("p",null,"They describe the type of level of details to be used, and their size."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"Type Table"),(0,r.kt)("th",{parentName:"tr",align:"center"},"None"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Adaptive"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Octree"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Unary"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Quadtree"),(0,r.kt)("th",{parentName:"tr",align:"center"},"BingMaps"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3MX"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3SM"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"Cesium 3D Tiles"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"ESRI i3s"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"DGN"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"FBX"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"OBJ"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"LODTreeExport"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"))))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"3MX settings"),(0,r.kt)(m,{language:"json",code:'{\n  "GenerateWebGLApp": bool,\n  "IncludeProxy3DModel": bool\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Cesium settings"),(0,r.kt)(m,{language:"json",code:'{\n  "GenerateCesiumApp": bool\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"generate-webapp"},"Generate WebApp"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"3MX")," or ",(0,r.kt)("em",{parentName:"p"},"Cesium 3D Tiles"),", but they differ in the structure."),(0,r.kt)("p",null,"They are used to generate a web application that can be hosted on a server for displaying 3D models.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "DoublePrecision": bool\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"double-precision"},"Double precision"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"OBJ"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "PointSamplingUnit": "pixel"-"meter"-"unit",\n  "PointSamplingDistance": double\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"point-sampling"},"Point sampling"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"POD"),", ",(0,r.kt)("em",{parentName:"p"},"LAS"),"."),(0,r.kt)("p",null,"PointSamplingUnit is used to describe what unit you want to use for sampling.\nPixel means ",(0,r.kt)("em",{parentName:"p"},"One point every x pixels")," so that the sampling is relative to the resolution of your input.\nMeter or unit means ",(0,r.kt)("em",{parentName:"p"},"One point every x unit")," so that the sampling is uniform for the point cloud."),(0,r.kt)("p",null,"PointSamplingDistance specifies ",(0,r.kt)("em",{parentName:"p"},"x"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "CompressionMethod":"None"-"LAZ"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"las-compression"},"LAS Compression"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"LAS"),"."),(0,r.kt)("p",null,"Set it to ",(0,r.kt)("em",{parentName:"p"},"LAZ")," in order to compress the point cloud.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "SamplingDistance": double,\n  "ProjectionMode": "HighestPoint"-"LowestPoint",\n  "MaxImagePartDimension": int,\n  "Orthophoto":{\n    "Enabled": bool,\n    "Format": "GeoTIFF"-"JPEG"-"KML_SuperOverlay",\n    "NoDataValue": "255 255 255",\n    "ColorSource": "Reference3dModelVisible"-"OptimizedComputationVisible"-"Reference3dModelThermal"-"OptimizedComputationThermal",\n    "ImageSharpening": 0-100\n  },\n  "DSM":{\n    "Enabled": bool,\n    "Format": "GeoTIFF"-"XYZ"-"ASC",\n    "NoDataValue": double\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"orthophotodsm-settings"},"Orthophoto/DSM settings"),(0,r.kt)("p",null,"These settings can be used for ",(0,r.kt)("em",{parentName:"p"},"Orthophoto/DSM"),"."),(0,r.kt)("p",null,"Settings are split between Orthophoto and DSM. You can disable one or the other with the ",(0,r.kt)("em",{parentName:"p"},"Enabled")," property.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," production tutorial! You should now be able to specify production settings in order to export more precisely your formats."),(0,r.kt)("p",null,"To go further and use ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Using cache in Reality Modeling",description:"This tutorial focuses on using cache for faster processing in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache",mdxType:"Tile"}),(0,r.kt)(g,{name:"Better calibration in Reality Modeling",description:"Learn how to specify calibration settings in Reality Modeling, and download the result of a calibration",thumbnail:"/unreal-docs-site/static/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using Reality Modeling API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-specifying-production-settings",level:2,title:"1. Specifying production settings",children:[]},{id:"2-list-of-existing-production-settings",level:2,title:"2. List of existing production settings",children:[{id:"texture",level:3,title:"Texture",children:[]},{id:"tile-overlap",level:3,title:"Tile overlap",children:[]},{id:"spatial-reference-system",level:3,title:"Spatial Reference System",children:[]},{id:"srs-origin",level:3,title:"SRS Origin",children:[]},{id:"level-of-details",level:3,title:"Level of details",children:[]},{id:"generate-webapp",level:3,title:"Generate WebApp",children:[]},{id:"double-precision",level:3,title:"Double precision",children:[]},{id:"point-sampling",level:3,title:"Point sampling",children:[]},{id:"las-compression",level:3,title:"LAS Compression",children:[]},{id:"orthophotodsm-settings",level:3,title:"Orthophoto/DSM settings",children:[]}]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},68017:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Using cache in Reality Modeling API",tile:{name:"Using cache in Reality Modeling API",description:"This tutorial focuses on using cache for faster processing in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache/",durationInMinutes:15,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CodeBlock"),m=p("Alert"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Advanced",durationInMinutes:"15",summaryImageSrc:"/unreal-docs-site/static/images/cccs-cache-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to leverage the caching mechanism of ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling REST API")," in order to speed up your processing."),(0,r.kt)("p",null,"In this tutorial, we will create a job to be cached, then use this cache to export another format without reprocessing the complete data.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"Reality Modeling Quick Start tutorial"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start/#3-create-a-workspace"},"Created a workspace")),(0,r.kt)("li",{parentName:"ul"},"Uploaded input data (images and orientations)"))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-cache-re-usage-and-behavior"},"1. Cache re-usage and behavior"),(0,r.kt)("h3",{id:"cache-re-usage"},"Cache re-usage"),(0,r.kt)("p",null,"Before creating jobs, it is important to understand how caching works in ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling"),".\nWhen asked for, a cache will be created if the job is successful. If a job is failed or cancelled, no cache will be created."),(0,r.kt)("p",null,"A created cache can be used for later jobs in order to reuse it (new exports for example). This is the table of possible workflows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"}),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Calibration"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Reconstruction"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Full"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Calibration"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Reconstruction"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Full"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")))),(0,r.kt)("p",null,"A new calibration job based on a cached reconstruction will failed for example."),(0,r.kt)("h3",{id:"cache-behavior"},"Cache behavior"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," considers that cache is the truth, and will use it as much as possible.\nFor example, if you submit a full job with a ",(0,r.kt)("em",{parentName:"p"},"Draft")," mesh quality to produce a 3MX, then use it as cache for a full job with ",(0,r.kt)("em",{parentName:"p"},"Extra")," mesh quality to produce an OBJ, you will have a ",(0,r.kt)("em",{parentName:"p"},"Draft")," OBJ result."),(0,r.kt)("p",null,"Caches are standalone snapshot of a job. They don\u2019t depend on each other. Note that for large projects, cache can be very large:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Cache upload will then slow marginally your job"),(0,r.kt)("li",{parentName:"ul"},"Usage of Reality Data will increase")),(0,r.kt)("p",null,"Cache can be cleaned: they are uploaded in the ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Management")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-a-job-that-will-be-cache"},"2. Create a job that will be cache"),(0,r.kt)("p",null,"In order to tell ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," we want to create a cache of the job, we just need to specify a setting in the job creation payload.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"A new job with cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"json",code:'{\n  "type": "Full",\n  "name": "My Reality Modeling job to be cached",\n  "workspaceId": "WORKSPACE_ID",\n  "inputs": [\n    {\n      "id": "IMAGECOLLECTION_RD_ID",\n      "description": "Drone ImageCollection"\n    },\n    {\n      "id": "CCORIENTATIONS_RD_ID",\n      "description": "Drone CCOrientations"\n    }\n  ],\n  "settings": {\n    "quality": "Extra",\n    "processingEngines": 0,\n    "outputs": [\n      "OBJ"\n    ],\n    "cacheSettings":\n    {\n      "createCache": true\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a new section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"createCache")," set to ",(0,r.kt)("em",{parentName:"p"},"True"),"."),(0,r.kt)("p",null,"At the end of the job, if it is successful, the cache will be automatically uploaded to ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Management")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),"."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Note the JOB_ID created by this job. It will be useful later for using the cache.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-use-a-cached-job"},"3. Use a cached job"),(0,r.kt)("p",null,"If you want to export your data to another format - 3SM for example, we can use the cached job to speed up the processing time.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"A new job with using cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"json",code:'{\n  "type":"Full",\n  "name":"My Reality Modeling job using cache",\n  "workspaceId":"WORKSPACE_ID",\n  "inputs":[\n    {\n      "id":"IMAGECOLLECTION_RD_ID",\n      "description":"Drone ImageCollection"\n    },\n    {\n      "id":"CCORIENTATIONS_RD_ID",\n      "description":"Drone CCOrientations"\n    }\n  ],\n  "settings":{\n    "meshQuality":"Extra",\n    "processingEngines":0,\n    "outputs":[\n      "3SM"\n    ],\n    "cacheSettings":{\n      "useCache":"JOB_ID_OF_CACHED_JOB"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"useCache")," set to ",(0,r.kt)("em",{parentName:"p"},"JOB_ID_OF_CACHED_JOB"),".\nThis tells ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," to download and use the cached job.\nThat way, your job will be faster, since geometry was cached and only need to be converted to ",(0,r.kt)("em",{parentName:"p"},"3SM")," format."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"It is possible to combine both properties in ",(0,r.kt)("code",null,"cacheSettings"),". For example you may want to use the cache of a ",(0,r.kt)("i",null,"Calibration")," job for a"," ",(0,r.kt)("i",null,"Full")," job, and have the result of this job cached for future exports.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," cache tutorial! You should now be able to create and use cached job for faster processing.\nTo go further and use ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Better calibration in Reality Modeling",description:"Learn how to specify calibration settings in Reality Modeling, and download the result of a calibration",thumbnail:"/unreal-docs-site/static/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"}),(0,r.kt)(g,{name:"Better production in Reality Modeling",description:"Learn how to specify production settings in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using Reality Modeling API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Management API",href:"/apis/reality-management/",description:"Reality Management API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-cache-re-usage-and-behavior",level:2,title:"1. Cache re-usage and behavior",children:[{id:"cache-re-usage",level:3,title:"Cache re-usage",children:[]},{id:"cache-behavior",level:3,title:"Cache behavior",children:[]}]},{id:"2-create-a-job-that-will-be-cache",level:2,title:"2. Create a job that will be cache",children:[]},{id:"3-use-a-cached-job",level:2,title:"3. Use a cached job",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},33907:function(e,t,n){"use strict";n.d(t,{Jt:function(){return b},Pu:function(){return s},ZP:function(){return w}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Get started with Reality Modeling API",tile:{name:"Get started with Reality Modeling API",description:"This tutorial is an introduction to Reality Modeling API, explaining the basic workflows.",thumbnail:"/unreal-docs-site/static/images/cccs-quick-start-thumb.jpg",href:"/tutorials/contextcapture-api-quick-start/",durationInMinutes:30,relatedApiIds:["contextcapture"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("CodeBlock"),h=p("Alert"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("Tile"),f=p("ResourceTile"),T={metadata:s};function w(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"/unreal-docs-site/static/images/cccs-quick-start-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start tutorial is going to help you work with Reality Modeling, and also understand the basic objects of Reality Modeling: workspaces and jobs."),(0,r.kt)("p",null,"In this tutorial, we will create a new workspace, submit a simple job, track its progress and check its result.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project created. Try the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"create and query projects guide"),"."),(0,r.kt)("li",{parentName:"ul"},"Knowledge of the ",(0,r.kt)("em",{parentName:"li"},"Reality Management")," API. Try ",(0,r.kt)("a",{parentName:"li",href:"/apis/reality-management"},"Reality Management API"),"."),(0,r.kt)("li",{parentName:"ul"},"Knowledge of the ",(0,r.kt)("em",{parentName:"li"},"CCImageCollection")," and the ",(0,r.kt)("em",{parentName:"li"},"CCOrientations")," formats. Try ",(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ic/"},"CCImageCollection format")," or ",(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ori/"},"CCOrientations format")))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{clientName:"CC basic tutorial",scopes:["contextcapture:read","contextcapture:modify"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Reality Modeling API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"contextcapture:read contextcapture:modify")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make request to the API, a user token is needed. There are several ways to get it. Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-workspace"},"3. Create a workspace"),(0,r.kt)("p",null,"In order to process jobs, we first need to ",(0,r.kt)("a",{parentName:"p",href:"/apis/contextcapture/operations/workspaces-create/"},"create a workspace"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/contextcapture/workspaces HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"A new workspace is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/workspaces"},"https://api.bentley.com/contextcapture/workspaces")," endpoint with the payload describing the workspace.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "iTwinId":"ITWIN_ID",\n  "name":"My first Reality Modeling workspace"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"The request body handles two properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name")," - Workspace name (",(0,r.kt)("em",{parentName:"li"},"mandatory"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"iTwinId")," - Project associated with the workspace")),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note that unless you have an Enterprise admin role within your organization, you will need to provide a ",(0,r.kt)("code",null,"iTwinId"),". For easier project management, we highly recommend you always use an ",(0,r.kt)("code",null,"iTwinId"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "workspace":{\n    "id":"WORKSPACE_ID",\n    "creationDateTime":"2020-09-14T13:46:11Z",\n    "name":"My first Reality Modeling workspace",\n    "iTwinId":"ITWIN_ID"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code if the call is successful.\nNote that creating a workspace will also create a new reality data (accessible through the Reality Management API), with a similar id to ",(0,r.kt)("inlineCode",{parentName:"p"},"WORKSPACE_ID"),".\nThough it is not useful in our current tutorial, this reality data becomes necessary for advanced workflows.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-a-job"},"4. Create a job"),(0,r.kt)("p",null,"In order to ",(0,r.kt)("a",{parentName:"p",href:"/apis/contextcapture/operations/jobs-create/"},"create a job"),", we need inputs. Reality Modeling supports 3 types of Reality Data as inputs:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ic"},"CCImageCollection")),(0,r.kt)("li",{parentName:"ul"},"ScanCollection"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/apis/contextcapture/cc-ori"},"CCOrientations"))),(0,r.kt)("p",null,"Currently, the only way to create ScanCollection is through a ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," desktop application."),(0,r.kt)("p",null,"Reality data need to be stored in the same region as the project selected for the workspace, and must be accessible to the user for processing.\nWe highly recommend you use the same project for your inputs and for your workspace.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"A new job is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "type":"Full",\n  "name":"My first Reality Modeling job",\n  "workspaceId":"WORKSPACE_ID",\n  "costEstimationParameters":{\n    "gigaPixels":2.5,\n    "megaPoints":1.5,\n    "meshQuality":"Extra"\n  },\n  "inputs":[\n    {\n      "id":"IMAGECOLLECTION_RD_ID",\n      "description":"Drone ImageCollection"\n    },\n    {\n      "id":"CCORIENTATIONS_RD_ID",\n      "description":"Drone CCOrientations"\n    }\n  ],\n  "settings":{\n    "quality":"Extra",\n    "processingEngines":0,\n    "outputs":[\n      "OBJ"\n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"The request body handles multiple properties"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"type")," - Job type, can be ",(0,r.kt)("em",{parentName:"li"},"Full"),", ",(0,r.kt)("em",{parentName:"li"},"Reconstruction")," or ",(0,r.kt)("em",{parentName:"li"},"Calibration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name")," - Name of the job"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"workspaceId")," - Workspace linked to the job"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"costEstimationParameters")," - Parameters to be passed to estimate the cost of the job"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"inputs")," - List of inputs, consisting of the reality data ids and descriptions of the inputs"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"settings")," - High level processing settings")),(0,r.kt)("p",null,"There are three types of job:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Calibration"),(0,r.kt)("li",{parentName:"ul"},"Reconstruction"),(0,r.kt)("li",{parentName:"ul"},"Full")),(0,r.kt)("p",null,"A calibration job will take images and point clouds and calibrate them in 3D.\nA reconstruction job will start from calibrated images and/or point clouds and reconstruct them (that is, create a mesh or an orthophoto).\nA full job will do a calibration and reconstruction at once."),(0,r.kt)("p",null,"You need to specify one and only one ",(0,r.kt)("em",{parentName:"p"},"CCOrientations")," in your input list for the job to be valid.\nThe ",(0,r.kt)("em",{parentName:"p"},"CCImageCollection"),"s and ",(0,r.kt)("em",{parentName:"p"},"ScanCollection"),"s are the ones used in the ",(0,r.kt)("em",{parentName:"p"},"CCOrientations"),", though the service won\u2019t checked the correspondence right away."),(0,r.kt)("p",null,"Regarding settings:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Mesh quality can be ",(0,r.kt)("em",{parentName:"li"},"Draft"),", ",(0,r.kt)("em",{parentName:"li"},"Medium")," and ",(0,r.kt)("em",{parentName:"li"},"Extra")),(0,r.kt)("li",{parentName:"ul"},"Processing engines can not be higher than 20 in a normal case. Check the actual limit for your account with the limit endpoint. If set to 0, the service will use the limit of your account."),(0,r.kt)("li",{parentName:"ul"},"Outputs is a list of the format you want to produce",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"In case of calibration job, only ",(0,r.kt)("em",{parentName:"li"},"CCOrientations")," is an acceptable output"),(0,r.kt)("li",{parentName:"ul"},"In case of full/reconstruction job, at least one output must be specified for the job to be valid")))),(0,r.kt)("p",null,"Small note on outputs: most of the time, an output is generated during the reconstruction phase of the job.\nThe exception is the ",(0,r.kt)("em",{parentName:"p"},"CCOrientations")," format, that is produced during the calibration phase of the job.\nTherefore, ",(0,r.kt)("em",{parentName:"p"},"CCOrientations")," can be produced only with a ",(0,r.kt)("em",{parentName:"p"},"Full")," or ",(0,r.kt)("em",{parentName:"p"},"Calibration")," job, while other formats can be produced only with a ",(0,r.kt)("em",{parentName:"p"},"Full")," or ",(0,r.kt)("em",{parentName:"p"},"Reconstruction")," job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "job":{\n    "id":"JOB_ID",\n    "name":"My first Reality Modeling job",\n    "type":"Full",\n    "state":"unsubmitted",\n    "createdDateTime": "2020-09-14T14:29:55Z",\n    "lastModifiedDateTime":"2020-09-14T14:29:55Z",\n    "location":"EastUs",\n    "iTwinId": "ITWIN_ID",\n    "workspaceId":"WORKSPACE_ID",\n    "email":"john.doe@example.com",\n    "executionInformation":null,\n    "costEstimationParameters":{\n    "gigaPixels":2.5,\n    "megaPoints":1.5,\n    "meshQuality":"Extra"\n    },\n    "estimatedCost": 3.5,\n    "inputs":[\n      {\n        "id":"IMAGECOLLECTION_RD_ID",\n        "description":"Drone ImageCollection"\n      },\n      {\n        "id":"CCORIENTATIONS_RD_ID",\n        "description":"Drone CCOrientations"\n      }\n    ],\n    "jobSettings":{\n      "quality":"Extra",\n      "processingEngines":20,\n      "cacheSettings":null,\n      "outputs":[\n        {\n          "format":"OBJ",\n          "id":"OBJ_RD_ID"\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-1"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code if the call is successful."),(0,r.kt)("p",null,"You can see the job is in state ",(0,r.kt)("em",{parentName:"p"},"New"),", meaning that it has been created but not yet submitted.\nThis is the only state where you can still delete a job. Once a job is submitted, it cannot be deleted anymore."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"location")," indicates the region in which the job will be submitted. It is determined thanks to the project linked in your workspace."),(0,r.kt)("p",null,"Outputs now have two properties: the ",(0,r.kt)("inlineCode",{parentName:"p"},"format")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"realityDataId"),".\nCreating a job automatically creates output reality data for your formats.\nCreating a job calculates its estimated cost from the \u201ccostEstimationParameters\u201d provided.\nOnce the job is completed and successful, you will be able to download your output from ",(0,r.kt)("em",{parentName:"p"},"Reality Management API")," thanks to this id.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-submit-a-job"},"5. Submit a job"),(0,r.kt)("p",null,"Now that the job is created, we will ",(0,r.kt)("a",{parentName:"p",href:"/apis/contextcapture/operations/jobs-patch/"},"submit it for processing"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"PATCH https://api.bentley.com/contextcapture/jobs/JOB_ID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-2"},"Request"),(0,r.kt)("p",null,"Submit an existing job by sending a HTTP PATCH message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs/JOB_ID"},"https://api.bentley.com/contextcapture/jobs/JOB_ID")," endpoint with the payload describing to change to apply.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "state":"active"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-2"},"Request Body"),(0,r.kt)("p",null,"To submit a job, the request body should only contain one property"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"state")," - State of the job, should be ",(0,r.kt)("em",{parentName:"li"},"active")," in order to submit the job"))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "job":{\n    "id":"JOB_ID",\n    "name":"My first Reality Modeling job",\n    "type":"Full",\n    "state":"active",\n    "createdDateTime":"2020-09-14T14:29:55Z",\n    "lastModifiedDateTime":"2020-09-14T14:29:55Z",\n    "location":"EastUs",\n    "iTwinId": "ITWIN_ID",\n    "workspaceId":"WORKSPACE_ID",\n    "email":"john.doe@example.com",\n    "costEstimationParameters":{\n    "gigaPixels":2.5,\n    "megaPoints":1.5,\n    "meshQuality":"Extra"\n    },\n    "estimatedCost": 3.5,\n    "executionInformation":{\n      "submittedDateTime":"2020-09-14T14:34:20Z",\n      "startedDateTime":null,\n      "endedDateTime":null,\n      "outcome":null,\n      "estimatedUnits":null\n    },\n    "inputs":[\n      {\n        "id":"IMAGECOLLECTION_RD_ID",\n        "description":"Drone ImageCollection"\n      },\n      {\n        "id":"CCORIENTATIONS_RD_ID",\n        "description":"Drone CCOrientations"\n      }\n    ],\n    "jobSettings":{\n      "quality":"Extra",\n      "processingEngines":20,\n      "cacheSettings":null,\n      "outputs":[\n        {\n          "format":"OBJ",\n          "id":"OBJ_RD_ID"\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-2"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")," status code if the call is successful."),(0,r.kt)("p",null,"The job is now in state ",(0,r.kt)("em",{parentName:"p"},"active"),", meaning that it is awaiting to be processed or being processed.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-track-a-job-progress"},"6. Track a job progress"),(0,r.kt)("p",null,"In order to follow your ",(0,r.kt)("a",{parentName:"p",href:"/apis/contextcapture/operations/jobs-progress/"},"job progress"),", we have a specific endpoint you can call.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/contextcapture/jobs/JOB_ID/progress HTTP/1.\n\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-3"},"Request"),(0,r.kt)("p",null,"Job tracking is done by sending a HTTP GET message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs/JOB_ID/progress"},"https://api.bentley.com/contextcapture/jobs/JOB_ID/progress")," endpoint."),(0,r.kt)("p",null,"In order to reduce stress on the service, we ask you to query with backoff intervals of ","[15, 30, 60, 120]"," seconds.\nThe interval between the first and second query is 15 sec and then 30 sec\u2026 If the percentage changes the sequence is restarted.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "jobProgress":{\n    "percentage":98,\n    "state":"Active",\n    "step":"Reconstruction"\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{language:"json",code:'{\n  "jobProgress":{\n    "percentage":100,\n    "state":"Completed",\n    "step":""\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-3"},"Response body"),(0,r.kt)("p",null,"The response will give you progress percentage of the job, with its state and the current processing step."),(0,r.kt)("p",null,"Once the job is completed, you will see the state as ",(0,r.kt)("em",{parentName:"p"},"Completed"),". It doesn\u2019t mean the job is successful, it states the job cannot evolve anymore.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-retrieve-a-job-result"},"7. Retrieve a job result"),(0,r.kt)("p",null,"Once the job is completed, you can ask for the ",(0,r.kt)("a",{parentName:"p",href:"/apis/contextcapture/operations/jobs-get/"},"complete job result"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/contextcapture/jobs/JOB_ID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-4"},"Request"),(0,r.kt)("p",null,"Job information is retrieved by sending a HTTP GET message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs/JOB_ID"},"https://api.bentley.com/contextcapture/jobs/JOB_ID")," endpoint.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{language:"json",code:'{\n  "job":{\n    "id":"JOB_ID",\n    "name":"My first Reality Modeling job",\n    "type":"Full",\n    "state":"New",\n    "createdDateTime":"2020-09-14T14:29:55Z",\n    "lastModifiedDateTime":"2020-09-14T14:29:55Z",\n    "location":"EastUs",\n    "iTwinId": "ITWIN_ID",\n    "workspaceId":"WORKSPACE_ID",\n    "email":"john.doe@example.com",\n    "costEstimationParameters":{\n    "gigaPixels":2.5,\n    "megaPoints":1.5,\n    "meshQuality":"Extra"\n    },\n    "estimatedCost": 3.5,\n    "executionInformation":{\n      "submittedDateTime":"2020-09-14T14:34:20Z",\n      "startedDateTime":"2020-09-14T14:34:28Z",\n      "endedDateTime":"2020-09-14T14:41:49Z",\n      "outcome":"Success",\n      "estimatedUnits":0.05297\n    },\n    "inputs":[\n      {\n        "id":"IMAGECOLLECTION_RD_ID",\n        "description":"Drone ImageCollection"\n      },\n      {\n        "id":"CCORIENTATIONS_RD_ID",\n        "description":"Drone CCOrientations"\n      }\n    ],\n    "jobSettings":{\n      "quality":"Extra",\n      "processingEngines":20,\n      "cacheSettings":null,\n      "outputs":[\n        {\n          "format":"OBJ",\n          "id":"OBJ_RD_ID"\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-4"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")," status code if the call is successful."),(0,r.kt)("p",null,"You can see the job outcome in the ",(0,r.kt)("inlineCode",{parentName:"p"},"executionInformation")," section.\nIf it is ",(0,r.kt)("em",{parentName:"p"},"Success"),", you can retrieve the job outputs based on their reality data id.\nOutcome can also be ",(0,r.kt)("em",{parentName:"p"},"Failed")," or ",(0,r.kt)("em",{parentName:"p"},"Cancelled")),(0,r.kt)("p",null,"You have some more information about the execution, namely the start time (when your job was picked up by a worker) and the end time.\n",(0,r.kt)("inlineCode",{parentName:"p"},"estimatedUnits")," are an estimate of the units billed for this job. They hold no legal value compared to billing.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling REST API")," tutorial! You should now be able to create a workspace and a job, submit and track a job inside ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling"),".\nTo go further and use ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{name:"Using cache in Reality Modeling",description:"This tutorial focuses on using cache for faster processing in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache",mdxType:"Tile"}),(0,r.kt)(y,{name:"Better calibration in Reality Modeling",description:"Learn how to specify calibration settings in Reality Modeling, and download the result of a calibration",thumbnail:"/unreal-docs-site/static/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"}),(0,r.kt)(y,{name:"Better production in Reality Modeling",description:"Learn how to specify production settings in Reality Modeling",thumbnail:"/unreal-docs-site/static/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(f,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using Reality Modeling API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Reality Management API",href:"/apis/reality-management/",description:"Reality Management API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[]},{id:"3-create-a-workspace",level:2,title:"3. Create a workspace",children:[]},{id:"4-create-a-job",level:2,title:"4. Create a job",children:[]},{id:"5-submit-a-job",level:2,title:"5. Submit a job",children:[]},{id:"6-track-a-job-progress",level:2,title:"6. Track a job progress",children:[]},{id:"7-retrieve-a-job-result",level:2,title:"7. Retrieve a job result",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},61876:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Copy Project Team Members and Roles to another Project",tile:{name:"Copy Project Team Members and Roles to another Project",description:"This tutorial will demonstrate how to copy team members and roles from one Project to another.",href:"/tutorials/copy-project-team-members-and-roles-to-another-project/",durationInMinutes:10,relatedApiIds:["projects"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will demonstrate how to copy team members and roles from one Project to another. This tutorial is accompanied by a sample powershell script located ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Administration/Project-Copy-Users"},"here"),". Authorization is provided as a separate ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Authorization/New-OidcAuthCodePkceLogin.ps1"},"script"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.1"},"PowerShell")," (Recommended 7.0+ version) installed."),(0,r.kt)("li",{parentName:"ul"},"Access to, or create a new, two projects to use this sample.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Process of creating a new project is covered in ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"this tutorial")))),(0,r.kt)("li",{parentName:"ul"},"Your own ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," application/client registered on iTwin Platform.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,r.kt)("strong",{parentName:"li"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:read")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:modify")," scopes enabled."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-request-access-token-for-use-in-authorization-header"},"1. Request access token for use in Authorization header"),(0,r.kt)("p",null,"Authorization is required for all iTwin Platform API endpoints. See the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Authorization"},"Authorization README")," for more information.\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Administration/Project-Copy-Users/Copy-ProjectUsers.ps1"},"This tutorial powershell sample")," already includes code that obtains an authorization token."),(0,r.kt)(u,{mdxType:"Alert"},"These samples require an Authorization Code + PKCE client. Registration of a"," ",(0,r.kt)("strong",null,"Desktop/Mobile")," application/client will give you an Authorization Code + PKCE client.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/roles HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-project-roles-from-the-source-project"},"2. Get project roles from the source project"),(0,r.kt)("p",null,"Getting roles from the source project requires sending a GET request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/roles")," endpoint."),(0,r.kt)("h4",{id:"request-headers"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example response body"),(0,r.kt)(h,{language:"json",code:'{\n  "roles":[\n    {\n      "roleId":"752b5a3d-b9f2-4845-824a-99dd310b4898",\n      "displayName":"Project Reader",\n      "description":"Project Reader description"\n    },\n    {\n      "roleId":"ce5399cc-088c-4c48-9f7b-0bff2d72fc25",\n      "displayName":"Project Contributor",\n      "description":"Project Contributor description"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body"},"Response body"),(0,r.kt)("p",null,"On the successful response you will get returned the array of project roles from the source project.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/roles HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-add-each-role-to-the-destination-project"},"3. Add each role to the destination project"),(0,r.kt)("p",null,"Adding a role to a project requires sending a POST request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/roles")," endpoint."),(0,r.kt)("h4",{id:"request-headers-1"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example request body"),(0,r.kt)(h,{language:"json",code:'{\n  "displayName":"Sample role",\n  "description":"Sample role description"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request body"),(0,r.kt)("p",null,"The request body is specified as JSON and requires ",(0,r.kt)("em",{parentName:"p"},"displayName")," and ",(0,r.kt)("em",{parentName:"p"},"description")," as properties. The API works with one role at a time.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example response body"),(0,r.kt)(h,{language:"json",code:'{\n  "role":{\n    "roleId":"faa3dca1-a901-4659-9da1-d9f29ddcc288",\n    "displayName":"Project Role",\n    "description":"An example project role"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-1"},"Response body"),(0,r.kt)("p",null,"The response returns a JSON object that contains displayName, description and roleId properties. This response body could be used to set roleIds for the users we want to copy from the source project to the destination project.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-get-project-team-members-from-the-source-project"},"4. Get project team members from the source project"),(0,r.kt)("p",null,"Getting team members from the source projects requires sending a GET request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,r.kt)("h4",{id:"request-headers-2"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example response body"),(0,r.kt)(h,{language:"json",code:'{\n  "members":[\n    {\n      "userId":"99cf5e21-735c-4598-99eb-fe3940f96353",\n      "email":"John.Johnson@org.com",\n      "givenName":"John",\n      "surname":"Johnson",\n      "organization":"Organization Corp.",\n      "roles":[\n        "Read Access",\n        "Write Access"\n      ]\n    },\n    {\n      "userId":"25407933-cad2-41a2-acf4-5a074c83046b",\n      "email":"Maria.Miller@org.com",\n      "givenName":"Maria",\n      "surname":"Miller",\n      "organization":"Organization Corp.",\n      "roles":[\n        "Read Access"\n      ]\n    }\n  ],\n  "_links":{\n    "next":{\n      "href":"https://api.bentley.com/projects/806b19d5-c037-48a4-aa98-e297c81453f1/member?$skip=2&$top=2"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-body-2"},"Response body"),(0,r.kt)("p",null,"On the successful response you will get returned the array of project members from the source project.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-add-each-team-member-to-the-destination-project"},"5. Add each team member to the destination project"),(0,r.kt)("p",null,"Adding a member to a project requires sending a POST request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,r.kt)("h4",{id:"request-headers-3"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example request body"),(0,r.kt)(h,{language:"json",code:'{\n  "userId":"john.doe@my-org.com",\n  "roleIds":[\n    "722b866c-ef99-48e7-8d9b-d59953f2231c"\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request body"),(0,r.kt)("p",null,"The request body is specified as JSON and requires the userId and roleIds properties. The API works with one user at a time. Multiple roles may be assigned to the user via the roleIds array.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Administration API group",href:"/api-groups/administration/",description:"Manage the users, projects, and organizations that interact with your iTwin.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Projects API documentation",href:"/apis/projects/",description:"An overview and detailed Projects API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"iTwin Platform API samples",href:"https://github.com/iTwin/platform-api-samples",description:"PowerShell samples demonstrating API endpoints.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-access-token-for-use-in-authorization-header",level:2,title:"1. Request access token for use in Authorization header",children:[]},{id:"2-get-project-roles-from-the-source-project",level:2,title:"2. Get project roles from the source project",children:[]},{id:"3-add-each-role-to-the-destination-project",level:2,title:"3. Add each role to the destination project",children:[]},{id:"4-get-project-team-members-from-the-source-project",level:2,title:"4. Get project team members from the source project",children:[]},{id:"5-add-each-team-member-to-the-destination-project",level:2,title:"5. Add each team member to the destination project",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},23975:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create and Query iTwin Entities",tile:{name:"Create and Query iTwin Entities",description:"This tutorial will guide you through the process of creating and querying an entity for an iTwin",href:"/tutorials/create-and-query-itwin-entities",durationInMinutes:15,relatedApiIds:["itwin-entities"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("PostmanIcon"),h=p("CreateSampleAppButton"),k=p("Alert"),g=p("Title"),y=p("CodeBlock"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and querying an iTwin entity."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints to create or query entities.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(m,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"The user should be a member of the iTwin for which they want to create an entity. You would need to know the ",(0,r.kt)("inlineCode",{parentName:"li"},"iTwin id")," GUID for the iTwin. If you don\u2019t have an iTwin to work with, you can create one using the instructions ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-itwins-guide/"},"Create and Query an iTwin"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(h,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query Entities",scopes:["itwin-entities:read","itwin-entities:modify"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwin Entities API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"itwin-entities:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"itwin-entities:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwin-entities-documentation-page"},"Grab a user token from the iTwin Entities documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/itwin-entities/operations/create-entity/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(g,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(y,{language:"http",code:"POST https://api.bentley.com/itwin-entities/iTwins/{ITWIN_ID}/entities/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Request Headers"),(0,r.kt)(y,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Request Body"),(0,r.kt)(y,{language:"json",code:'{\n    "class": "CentrifugalPump",\n    "classification": "CentrifugalPump",\n    "bisClassPath": "bis:Element;bis:RoleElement;func:FunctionalElement;func:FunctionalComponentElement;pfunc:PLANT_BASE_OBJECT;pfunc:NAMED_ITEM;pfunc:DEVICE;pfunc:EQUIPMENT;pfunc:ROTATING_EQUIPMENT;pfunc:PUMP;pfunc:DYNAMIC_PUMP;pfunc:CENTRIFUGAL_PUMP",\n    "code": "CodeSpecId:CodeScopeId:P-101",\n    "name": "P-101",\n    "type": "GE CP T22a",\n    "geospatialLocation": {\n        "type": "Point",\n        "coordinates": [\n            12.1,\n            13.2\n        ]\n    },\n    "tags": [\n        "Pump"\n    ],\n    "federationId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"\n}',mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Headers"),(0,r.kt)(y,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 937\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 14:44:18 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 5262b13f-394e-49b8-95ea-a5361d2513a3\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Body"),(0,r.kt)(y,{language:"json",code:'{\n    "entity": {\n        "class": "CentrifugalPump",\n        "classification": "CentrifugalPump",\n        "bisClassPath": "bis:Element;bis:RoleElement;func:FunctionalElement;func:FunctionalComponentElement;pfunc:PLANT_BASE_OBJECT;pfunc:NAMED_ITEM;pfunc:DEVICE;pfunc:EQUIPMENT;pfunc:ROTATING_EQUIPMENT;pfunc:PUMP;pfunc:DYNAMIC_PUMP;pfunc:CENTRIFUGAL_PUMP",\n        "code": "CodeSpecId:CodeScopeId:P-101",\n        "name": "P-101",\n        "type": "GE CP T22a",\n        "geospatialLocation": {\n            "type": "Point",\n            "coordinates": [\n                12.1,\n                13.2\n            ]\n        },\n        "tags": [\n            "Pump"\n        ],\n        "federationId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n        "links": [],\n        "createdDateTime": "2023-01-18T21:03:00.3704659",\n        "createdByUser": "user@bentley.com",\n        "LastModifiedDateTime": "2023-01-18T21:03:00.3704659",\n        "LastModifiedByUser": "user@bentley.com"\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-new-entity"},"3. Create a new entity"),(0,r.kt)("p",null,"The iTwin Entities API is used to create and manage entities. A POST call to the entities endpoint will create a new entity for the iTwin specified by the ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwinId"),". You need to replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"ITWIN_ID")," with the your iTwinId in the request as mentioned in the ",(0,r.kt)("a",{parentName:"p",href:"#prerequisites"},"Prerequisites")," section."),(0,r.kt)("p",null,"At minimum, ",(0,r.kt)("inlineCode",{parentName:"p"},"class")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," are required for creating a new entity. The ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," property should be unique. If you already have a ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId")," for the entity also specify it. Otherwise, a new ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId")," would be auto-generated for the new entity. If you get a conflict error, then you must replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId")," with a unique value. See the ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwin-entities/operations/create-entity/"},"iTwin Entities API documentation")," for descriptions of the different properties, including default values."),(0,r.kt)("p",null,"The POST call will return a new entity instance. The ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId")," can be used to query for the entity. The ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId")," is also used by in many other iTwin-Entities APIs. You may want to save this ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId")," to use in other tutorials.")),(0,r.kt)(c,{actions:[(0,r.kt)(g,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(y,{language:"http",code:"GET https://api.bentley.com/itwins/{ITWIN_ID}/entities/3fa85f64-5717-4562-b3fc-2c963f66afa6 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Request Headers"),(0,r.kt)(y,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Headers"),(0,r.kt)(y,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 936\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:10:04 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: fed95960-ea7c-43b5-a9af-66ab5353d073\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Body"),(0,r.kt)(y,{language:"json",code:'{\n    "entity": {\n        "class": "CentrifugalPump",\n        "classification": "CentrifugalPump",\n        "bisClassPath": "bis:Element;bis:RoleElement;func:FunctionalElement;func:FunctionalComponentElement;pfunc:PLANT_BASE_OBJECT;pfunc:NAMED_ITEM;pfunc:DEVICE;pfunc:EQUIPMENT;pfunc:ROTATING_EQUIPMENT;pfunc:PUMP;pfunc:DYNAMIC_PUMP;pfunc:CENTRIFUGAL_PUMP",\n        "code": "CodeSpecId:CodeScopeId:P-101",\n        "name": "P-101",\n        "type": "GE CP T22a",\n        "geospatialLocation": {\n            "type": "Point",\n            "coordinates": [\n                12.1,\n                13.2\n            ]\n        },\n        "tags": [\n            "Pump"\n        ],\n        "federationId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n        "links": [],\n        "createdDateTime": "2023-01-18T21:03:00.3704659",\n        "createdByUser": "user@bentley.com",\n        "LastModifiedDateTime": "2023-01-18T21:03:00.3704659",\n        "LastModifiedByUser": "user@bentley.com"\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-an-entity-using-the-federationid"},"4. Query for an entity using the federationId"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId")," of an entity can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwin-entities/operations/get-entity/"},"query for a specific entity"),". In addition to the ",(0,r.kt)("inlineCode",{parentName:"p"},"federationId"),", you need to know the ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwinId")," for the iTwin to which the queried entity belongs.")),(0,r.kt)(c,{actions:[(0,r.kt)(g,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(y,{language:"http",code:"GET https://api.bentley.com/itwins/{ITWIN_ID}/entities?code=CodeSpecId:CodeScopeId:P-101 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Request Headers"),(0,r.kt)(y,{language:"http",code:"Prefer: return=representation\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Headers"),(0,r.kt)(y,{language:"http",code:"HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:20:43 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: dd4d68c9-614d-4d67-8e51-7147c18513f8\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Body"),(0,r.kt)(y,{language:"json",code:'{\n    "entities": [{\n        "class": "CentrifugalPump",\n        "classification": "CentrifugalPump",\n        "bisClassPath": "bis:Element;bis:RoleElement;func:FunctionalElement;func:FunctionalComponentElement;pfunc:PLANT_BASE_OBJECT;pfunc:NAMED_ITEM;pfunc:DEVICE;pfunc:EQUIPMENT;pfunc:ROTATING_EQUIPMENT;pfunc:PUMP;pfunc:DYNAMIC_PUMP;pfunc:CENTRIFUGAL_PUMP",\n        "code": "CodeSpecId:CodeScopeId:P-101",\n        "name": "P-101",\n        "type": "GE CP T22a",\n        "geospatialLocation": {\n            "type": "Point",\n            "coordinates": [\n                12.1,\n                13.2\n            ]\n        },\n        "tags": [\n            "Pump"\n        ],\n        "federationId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n        "links": [],\n        "createdDateTime": "2016-01-18T21:03:00.3704659",\n        "createdByUser": "user@bentley.com",\n        "LastModifiedDateTime": "2016-01-18T21:03:00.3704659",\n        "LastModifiedByUser": "user@bentley.com"\n    }]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-entities-using-code-or-name-class-etc"},"5. Query for entities using code (or name, class etc.)"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwin-entities/operations/get-entities/"},"find entities"),". Because this is a query, the response will be a list of entities that will usually contain only one element. The ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," value should ideally be unique within an iTwin, however, this is not strictly enforced and you can theoratically get multiple entities with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," value. Again, the ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwinId")," must to be specified in the request."),(0,r.kt)("p",null,"Similarly you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"class")," paramaters (or a combination of any of the rest of the query parameter listed for the ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwin-entities/operations/get-entities/"},"get entities API"),") to search for entities by these values.")),(0,r.kt)(c,{actions:[(0,r.kt)(g,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(y,{language:"http",code:"GET https://api.bentley.com/itwins/{ITWIN_ID}/entities?code=P-1&partialMatchFiltersList=code HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Request Headers"),(0,r.kt)(y,{language:"http",code:"Prefer: return=minimal\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Headers"),(0,r.kt)(y,{language:"http",code:"HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:40:47 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 86bc760f-d0c4-4292-b72d-97a078ce1c7a\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(g,{mdxType:"Title"},"Response Body"),(0,r.kt)(y,{language:"json",code:'{\n    "entities": [{\n        "class": "CentrifugalPump",\n        "classification": "CentrifugalPump",\n        "bisClassPath": "bis:Element;bis:RoleElement;func:FunctionalElement;func:FunctionalComponentElement;pfunc:PLANT_BASE_OBJECT;pfunc:NAMED_ITEM;pfunc:DEVICE;pfunc:EQUIPMENT;pfunc:ROTATING_EQUIPMENT;pfunc:PUMP;pfunc:DYNAMIC_PUMP;pfunc:CENTRIFUGAL_PUMP",\n        "code": "CodeSpecId:CodeScopeId:P-101",\n        "name": "P-101",\n        "type": "GE CP T22a",\n        "geospatialLocation": {\n            "type": "Point",\n            "coordinates": [\n                12.1,\n                13.2\n            ]\n        },\n        "tags": [\n            "Pump"\n        ],\n        "federationId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n        "links": [],\n        "createdDateTime": "2016-01-18T21:03:00.3704659",\n        "createdByUser": "user@bentley.com",\n        "LastModifiedDateTime": "2016-01-18T21:03:00.3704659",\n        "LastModifiedByUser": "user@bentley.com"\n    }]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-query-for-entities-using-partial-code"},"6. Query for entities using partial code"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"partialMatchFiltersList")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwin-entities/operations/get-entities/"},"find entities")," using a query string that will return entities for which the property values partially match the provided filter. For example, if we provide a ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," value of \u201cP-1\u201d in the query parameter and specify the value \u201ccode\u201d in the PartialMatchFiltersList query parameter, then we can search for all entities that have the property ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," with a value that contain the substring \u201cP-1\u201d. So, the entity that we created in the step 3 with code value \u201cCodeSpecId:CodeScopeId:P-101\u201d should be returned in this example. This example is the SQL equivalent of ",(0,r.kt)("inlineCode",{parentName:"p"},"code like '%P-1%'"),". The query is not case sensitive and you should not add wildcard characters to the query string."),(0,r.kt)("p",null,"Because this is a query, the response will be a list that could contain many entities."),(0,r.kt)("p",null,"Similary, the ",(0,r.kt)("inlineCode",{parentName:"p"},"partiamMatchFiltersList")," can be used for other properties of entities. See the ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwin-entities/operations/get-entities/"},"get entities API")," for details.")))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwin-entities-documentation-page",level:3,title:"Grab a user token from the iTwin Entities documentation page",children:[]}]},{id:"3-create-a-new-entity",level:2,title:"3. Create a new entity",children:[]},{id:"4-query-for-an-entity-using-the-federationid",level:2,title:"4. Query for an entity using the federationId",children:[]},{id:"5-query-for-entities-using-code-or-name-class-etc",level:2,title:"5. Query for entities using code (or name, class etc.)",children:[]},{id:"6-query-for-entities-using-partial-code",level:2,title:"6. Query for entities using partial code",children:[]}]}},41744:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create and Query iTwin Groups",tile:{name:"Create and Query iTwin Groups",description:"This tutorial will guide you through the process of creating and querying groups on an iTwin",href:"/tutorials/create-and-query-itwin-groups-guide",durationInMinutes:15,relatedApiIds:["accesscontrol"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("Alert"),u=p("TutorialSection"),m=p("LinkButton"),h=p("GoogleChromeIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("CreateSampleAppButton"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)(c,{mdxType:"Alert"},"This tutorial is for the"," ",(0,r.kt)("a",{href:"/apis/access-control-v2/overview/"},"Access Control API V2"),". To control the API version,"," ",(0,r.kt)("a",{href:"/apis/overview/lifecycle/#api-versions"},"see the API versions documentation")),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and retrieving groups for a given iTwin. iTwin groups provide the ability to manage groups of users at one time. You can create groups on the Account iTwin to manage access across iTwins or create a group for an individual iTwin. Groups created on an individual iTwin are available only on that iTwin. For more information for managing access using the Account iTwin, see ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/#managingaccessusingtheaccountitwin"},"Managing access using the Account iTwin")),(0,r.kt)("p",null,"Groups can contain individual users and can also reference Bentley Identity Management System (IMS) groups. By referencing an IMS group, you can manage groups of individuals in your Active Directory, while providing them access to iTwin Platform using role assignments. IMS groups are created and controlled on the team level, and can be accessed ",(0,r.kt)("a",{parentName:"p",href:"https://usermanagement.bentley.com/management/users"},"here")," through Bentley\u2019s User Management service. Only Accout Administrators, Co-Administrators, and Group Administrators will have access to the User Management Service. More information about creating and maintaining IMS groups can be found ",(0,r.kt)("a",{parentName:"p",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50713/managing-groups"},"here"),"."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to create and retrieve a list of iTwin groups.")),(0,r.kt)(u,{actions:[(0,r.kt)(m,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(h,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, the user must be an Organization Administrator to create an iTwin. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."),(0,r.kt)("li",{parentName:"ul"},"An IMS group. IMS (Identity Management System) groups are created and controlled on the team level, and can be accessed ",(0,r.kt)("a",{parentName:"li",href:"https://usermanagement.bentley.com/management/users"},"here")," through Bentley\u2019s User Management service. Only Accout Administrators, Co-Administrators, and Group Administrators will have access to the User Management Service. More information about creating and maintaining IMS groups can be found ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50713/managing-groups"},"here"),"."))),(0,r.kt)(u,{actions:[(0,r.kt)(y,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query iTwins tutorial",scopes:["itwins:modify","itwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:read")," scopes enabled."))),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/access-control/operations/get-iTwin-roles/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(u,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/accesscontrol/itwins/{id}/groups HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Body"),",",(0,r.kt)(T,{language:"json",code:'{\n        "name": "Engineers",\n        "description": "This is a group for engineers",\n      }',mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 203\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 17:26:10 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 74e263d7-ded7-45a5-8347-ca1f98ffab86\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(T,{language:"json",code:'{\n            "group": {\n                "id": "d0ec803b-de9a-41cd-9d97-c8edddd4cb0d",\n                "name": "Engineers",\n                "description": "This is a group for engineers",\n                "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n                "users": [],\n                "imsGroups": []\n            }\n        }',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-itwin-group"},"3. Create iTwin Group"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/create-iTwin-groups/"},"Create iTwin group")," endpoint is used to create iTwin groups. After a group is created, users and IMS groups can be added."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," from an existing iTwin (see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-and-query-itwins-guide/"},"create and query iTwins guide"),") is required to create a group. A ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"description")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will return a new group instance. The returned group ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," along with the iTwin ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," will be used to add users and IMS groups in the next step.")),(0,r.kt)(u,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(T,{language:"http",code:"PATCH https://api.bentley.com/accesscontrol/itwins/{id}/groups/{groupId} HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Body"),",",(0,r.kt)(T,{language:"json",code:'{\n        "name": "A new Group name",\n        "description": "A new Group description",\n        "imsGroups": [\n          "IMS Engineers"\n        ],\n        "users": [\n            "John.Doe@bentley.com"\n        ]\n  }',mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 324\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 18:17:39 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: f16d2765-4a9c-40a4-995e-bd7c6b8b8d4a\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(T,{language:"json",code:'{\n    "group":{\n      "id":"10a2d277-ea41-4e81-b309-f7a9aea09d51",\n      "name": "A new Group name",\n      "description": "A new Group description",\n      "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n      "imsGroups": [\n        "IMS Engineers"\n      ],\n      "users": [\n          "John.Doe@bentley.com"\n      ]\n    }\n  }',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-update-itwins-groups-using-the-itwin-id-and-group-id"},"4. Update iTwins Groups Using the iTwin Id and Group Id"),(0,r.kt)("p",null,"To assign ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"imsGroups"),", the group needs to be ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/update-iTwin-group/"},"updated"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"group id")," are required. The POST body should contain a list of ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"imsGroups"),"."),(0,r.kt)("p",null,"IMS groups are created and controlled on the team level, and can be accessed ",(0,r.kt)("a",{parentName:"p",href:"https://usermanagement.bentley.com/management/users"},"here")," through Bentley\u2019s User Management service. Only Accout Administrators, Co-Administrators, and Group Administrators will have access to the User Management Service. More information about creating and maintaining IMS groups can be found ",(0,r.kt)("a",{parentName:"p",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50713/managing-groups"},"here"),"."),(0,r.kt)("p",null,"The response will contain the group details along with the list of ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"imsGroups")," added.")),(0,r.kt)(u,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/accesscontrol/itwins/{id}/groups HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-type: application/json\ndate: Mon, 29 Aug 2022 19:24:14 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: 260678e5-0244-413d-bc60-f6dac19fd450\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US\nx-rate-limit-limit: 1s\nx-rate-limit-remaining: 49\nx-rate-limit-reset: 2022-08-29T19:24:15.3864257Z",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(T,{language:"json",code:'{\n        "groups": [\n            {\n                "id": "149d0860-39e9-4ae9-9b05-0b5dcedd2d4b",\n                "name": "Engineers",\n                "description": "This is a group of engineers",\n                "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n                "imsGroups": [\n                  "IMS Engineers"\n                ],\n                "users": [\n                    "John.Doe@bentley.com"\n                ]\n            },\n            {\n                "id": "d0ec803b-de9a-41cd-9d97-c8edddd4cb0d",\n                "name": "iTwin Administrators",\n                "description": "This is a group of administrators for the iTwin",\n                "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n                "users": [],\n                "imsGroups": ["IMS Admins"]\n            }\n        ]\n    }',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-groups-using-the-itwin-id"},"5. Query for Groups using the iTwin Id"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"iTwin Id")," can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/get-iTwin-groups/"},"retrieve a list of iTwin groups"),"."),(0,r.kt)("p",null,"The API will return a list of groups for a given iTwin.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Create and Query iTwins Guide",href:"/tutorials/create-and-query-itwins-guide/",description:"Tutorial for creating and querying iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Manage Group Members on iTwins Guide",href:"/tutorials/manage-group-members-on-itwins-guide",description:"Tutorial for managing group members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-create-itwin-group",level:2,title:"3. Create iTwin Group",children:[]},{id:"4-update-itwins-groups-using-the-itwin-id-and-group-id",level:2,title:"4. Update iTwins Groups Using the iTwin Id and Group Id",children:[]},{id:"5-query-for-groups-using-the-itwin-id",level:2,title:"5. Query for Groups using the iTwin Id",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},96315:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create and Query iTwin Roles",tile:{name:"Create and Query iTwin Roles",description:"This tutorial will guide you through the process of creating and querying roles on an iTwin",href:"/tutorials/create-and-query-itwin-roles-guide",durationInMinutes:15,relatedApiIds:["accesscontrol"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("Alert"),u=p("TutorialSection"),m=p("LinkButton"),h=p("GoogleChromeIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("CreateSampleAppButton"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)(c,{mdxType:"Alert"},"This tutorial is for the"," ",(0,r.kt)("a",{href:"/apis/access-control-v2/overview/"},"Access Control API V2"),". To control the API version,"," ",(0,r.kt)("a",{href:"/apis/overview/lifecycle/#api-versions"},"see the API versions documentation")),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and retrieving roles for a given iTwin. Roles enable you to organize permissions and are assigned to one or more members. While not required, roles usually reflect the functional job duties within an organization and may be determined by various factors such as tasks or business operations."),(0,r.kt)("p",null,"You can create roles on the Account iTwin to manage access across iTwins or create a roles for an individual iTwin. Roles created on an individual iTwin are available only on that iTwin. For more information for managing access using the Account iTwin, see ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/#managingaccessusingtheaccountitwin"},"Managing access using the Account iTwin")),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to create roles, add & assign permissions to the role, and retrieve the list of iTwin roles.")),(0,r.kt)(u,{actions:[(0,r.kt)(m,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(h,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, the user must be an Organization Administrator to create an iTwin. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."),(0,r.kt)("li",{parentName:"ul"},"Permissions to assign to a role. To see the list of available permissions, ",(0,r.kt)("a",{parentName:"li",href:"/apis/access-control/operations/get-all-permissions/"},"see get all permissions.")))),(0,r.kt)(u,{actions:[(0,r.kt)(y,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query iTwins tutorial",scopes:["itwins:modify","itwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:read")," scopes enabled."))),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/access-control/operations/get-iTwin-roles/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(u,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/accesscontrol/itwins/{id}/roles HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n    "displayName":"iTwin Administrator",\n    "description":"A description of iTwin Administrator"\n  }',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 203\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 17:26:10 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 74e263d7-ded7-45a5-8347-ca1f98ffab86\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "role":{\n      "id":"14b391cf-ce9e-43d3-8fee-c49e57c2680d",\n      "displayName":"iTwin Administrator",\n      "description":"A description of iTwin Administrator",\n      "permissions":[]\n    }\n  }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-itwin-role"},"3. Create iTwin Role"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/create-iTwin-role/"},"Create iTwin role")," endpoint is used to create iTwin roles. After a role is created, permissions can be assigned."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," from an existing iTwin (see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-and-query-itwins-guide/"},"create and query iTwins guide"),") is required to create a role. A ",(0,r.kt)("inlineCode",{parentName:"p"},"display name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"description")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will return a new role instance. The returned ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," along with the ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," will be used to add permissions in the next step.")),(0,r.kt)(u,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"PATCH https://api.bentley.com/accesscontrol/itwins/{id}/roles/{roleId} HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n        "displayName": "A new Role display name",\n        "description": "A new Role description",\n        "permissions":[\n          "administration_invite_member",\n          "administration_manage_roles",\n          "administration_remove_member"\n      ]\n  }',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 324\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 18:17:39 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: f16d2765-4a9c-40a4-995e-bd7c6b8b8d4a\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "role":{\n      "id":"10a2d277-ea41-4e81-b309-f7a9aea09d51",\n      "displayName":"iTwin Administrator",\n      "description":"A description of iTwin Administrator",\n      "permissions":[\n        "administration_invite_member",\n        "administration_manage_roles",\n        "administration_remove_member"\n      ]\n    }\n  }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-update-itwins-role-using-the-itwin-id-and-role-id"},"4. Update iTwins Role Using the iTwin Id and Role Id"),(0,r.kt)("p",null,"To assign ",(0,r.kt)("inlineCode",{parentName:"p"},"permissions"),", the Role needs to be ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/update-iTwin-role/"},"updated"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," are required. The POST body should contain ",(0,r.kt)("inlineCode",{parentName:"p"},"list of permissions"),"."),(0,r.kt)("p",null,"To see the list of available permissions, ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/get-all-permissions/"},"see get all permissions.")),(0,r.kt)("p",null,"The response will contain the role details along with the list of permissions assigned.")),(0,r.kt)(u,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/accesscontrol/itwins/{id}/roles HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-type: application/json\ndate: Mon, 29 Aug 2022 19:24:14 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: 260678e5-0244-413d-bc60-f6dac19fd450\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US\nx-rate-limit-limit: 1s\nx-rate-limit-remaining: 49\nx-rate-limit-reset: 2022-08-29T19:24:15.3864257Z",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n        "roles": [{\n            "id": "5ba9eab1-9597-4f20-b360-4d79b9af511d",\n            "displayName": "iTwin Administrator",\n            "description": "The iTwin Administration Role",\n            "permissions": [],\n            "assignedDateTime": "0001-01-01T00:00:00"\n        }, {\n            "id": "fe117fcd-7cf0-4f95-829f-b4cc065dc6ed",\n            "displayName": "iTwin Administrator 3",\n            "description": "The iTwin Administration Role 3",\n            "permissions": [],\n            "assignedDateTime": "0001-01-01T00:00:00"\n        }]\n    }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-roles-using-the-itwin-id"},"5. Query for Roles using the iTwin Id"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"iTwin Id")," can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/get-iTwin-roles/"},"retrieve a list of iTwin roles"),"."),(0,r.kt)("p",null,"The api will return a list of roles for a given iTwin.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Create and Query iTwins Guide",href:"/tutorials/create-and-query-itwins-guide/",description:"Tutorial for creating and querying iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Manage User Members on iTwins Guide",href:"/tutorials/manage-user-members-on-itwins-guide",description:"Tutorial for managing user members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Manage Group Members on iTwins Guide",href:"/tutorials/manage-group-members-on-itwins-guide",description:"Tutorial for managing group members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-create-itwin-role",level:2,title:"3. Create iTwin Role",children:[]},{id:"4-update-itwins-role-using-the-itwin-id-and-role-id",level:2,title:"4. Update iTwins Role Using the iTwin Id and Role Id",children:[]},{id:"5-query-for-roles-using-the-itwin-id",level:2,title:"5. Query for Roles using the iTwin Id",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},90230:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create & Query iTwins",tile:{name:"Create & Query iTwins",description:"This tutorial will guide you through the process of creating and querying iTwins",href:"/tutorials/create-and-query-itwins-guide",durationInMinutes:20,relatedApiIds:["itwins"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("GoogleChromeIcon"),h=p("VSCodeIcon"),k=p("PostmanIcon"),g=p("CreateSampleAppButton"),y=p("Alert"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and querying iTwins."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints to create or query iTwins.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(m,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(h,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(k,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, the user must be an Organization Administrator to create an iTwin. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."))),(0,r.kt)(c,{actions:[(0,r.kt)(g,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query iTwins tutorial",scopes:["iTwins:modify","iTwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/itwins/operations/get-my-itwins/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/itwins/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n    "class": "Endeavor",\n    "subClass": "Project",\n    "type": "Construction Project",\n    "number": "iTwin #",\n    "displayName": "my iTwin 2",\n    "dataCenterLocation": "East US",\n    "status": "Active"\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 937\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 14:44:18 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 5262b13f-394e-49b8-95ea-a5361d2513a3\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'\n    {\n      "iTwin": {\n          "id": "eb8ffd43-725c-4f9a-9cbd-3b38b4efe168",\n          "class": "Endeavor",\n          "subClass": "Project",\n          "type": "Construction Project",\n          "number": "ifdsafasdfa",\n          "displayName": "fasfdasdaf",\n          "dataCenterLocation": "East US",\n          "status": "Active",\n          "createdDateTime": "2022-06-09T17:26:11.13",\n          "createdBy": "56c58c0c-28a9-4cd2-b50b-102e33b657f2"\n      }\n    }\n    ',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-new-itwin"},"3. Create a new iTwin"),(0,r.kt)("p",null,"The iTwins API is used to create and manage iTwins. A POST call to the iTwins endpoint will create a new iTwin."),(0,r.kt)("p",null,"At minimum, ",(0,r.kt)("inlineCode",{parentName:"p"},"class"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"subClass"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," are required for creating a new iTwin. The ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName")," properties must be unique. If you get a Conflict error then you will need to replace them with unique values. See the ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/create-itwin/"},"iTwins API documentation")," for descriptions of the different properties, including default values."),(0,r.kt)("p",null,"The POST call will return a new iTwin instance. The ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," can be used to query for the iTwin. The iTwin Id is also used in many other iTwin APIs. You may want to save this Id to use in other tutorials.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/itwins/083004cb-9cc1-4d1b-bc2a-d6329288200e HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 936\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:10:04 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: fed95960-ea7c-43b5-a9af-66ab5353d073\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "iTwin": {\n        "id": "da5be678-7404-4885-a622-eebf0ab29390",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "Test35353535",\n        "displayName": "Test",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2015-11-05T19:10:42.9712696",\n        "createdBy": null\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-an-itwin-using-the-itwin-id"},"4. Query for an iTwin Using the iTwin Id"),(0,r.kt)("p",null,"The iTwin id can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/get-itwin/"},"query for a specific iTwin"),"."),(0,r.kt)("p",null,"The iTwin will only be returned if you are an Organization Administrator or if you have been added as a member of the iTwin with any role. Only a single iTwin will be returned.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/itwins/?number=PWCSDemoTest1 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Prefer: return=representation\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:20:43 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: dd4d68c9-614d-4d67-8e51-7147c18513f8\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "iTwins": [{\n        "id": "daf96c16-fb0a-4f94-90c5-667742cf35be",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "PWCSDemoTest1",\n        "displayName": "PWCSDemoTest1",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2016-01-27T11:44:06.2602325",\n        "createdBy": null\n    }],\n    "_links": {\n        "self": {\n            "href": " https://api.bentley.com/itwins/?$skip=0&$top=100&subClass=Project&number=PWCSDemoTest1"\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-itwins-using-number"},"5. Query for iTwins Using Number"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/my-itwins/"},"find an iTwin"),". Because this is a query, the response will be a list of iTwins that will usually contain one element. The number is unique for iTwins created in your organization. However, it is possible that you are a member of an iTwin in another organization that has the same number."),(0,r.kt)("p",null,"The api will only return iTwins that you are able to access. If you expect it to return a specific iTwin and it does not then you may not have access to that iTwin.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/itwins/?$search=Tutorial HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Prefer: return=minimal\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:40:47 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 86bc760f-d0c4-4292-b72d-97a078ce1c7a\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "iTwins": [{\n        "id": "083004cb-9cc1-4d1b-bc2a-d6329288200e",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "Tutorial Project 123",\n        "displayName": "Tutorial Sample Project",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2021-06-24T14:44:19.33",\n        "createdBy": "d27f4f7a-cf24-41fa-8044-c17eaaaccfb5"\n    }, {\n        "id": "0ed7a661-4b7f-44ce-b6c3-f0064bb14c70",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "Project A",\n        "displayName": "A Tutorial Project",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2021-06-24T18:48:34.127",\n        "createdBy": "d27f4f7a-cf24-41fa-8044-c17eaaaccfb5"\n    }, {\n        "id": "bc29f384-bd93-48c9-ae6c-08cb36b40fb0",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "tutorial A",\n        "displayName": "A Sample Project",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2021-06-24T18:49:50.287",\n        "createdBy": "d27f4f7a-cf24-41fa-8044-c17eaaaccfb5"\n    }],\n    "_links": {\n        "self": {\n            "href": " https://api.bentley.com/itwins/?$skip=0&$top=100&subClass=Project&$search=Tutorial"\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-query-for-itwin-using-the-number-or-name-wildcard"},"6. Query for iTwin Using the Number or Name (wildcard)"),(0,r.kt)("p",null,"The $search query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/my-itwins/"},"find an iTwin")," using a query string that will search using the ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName"),". This example will find all iTwins with \u201cTutorial\u201d in the number or displayName. The query is case sensitive and you should not add wildcard characters to the query string. This example is the SQL equivalent of number like \u201c%Tutorial%\u201d OR displayName like '%Tutorial%\u2019."),(0,r.kt)("p",null,"Because this is a query, the response will be a list that could contain many iTwins. Notice that this example is using the prefer header to indicate that only the minimal representation of the iTwins should be returned. This should be used whenever possible to improve performance and reduce the size of the response payload."),(0,r.kt)("p",null,"The api will only return iTwins that you are able to access. If you expect it to return a specific set of iTwins and it does not, you may not have access to those iTwins.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"iTwin Sample App",href:"https://github.com/itwin/itwin-api-sample-app",description:"Sample application that uses the iTwins API to create, update and query for iTwins.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Manage User Members on iTwins Guide",href:"/tutorials/manage-user-members-on-itwins-guide",description:"Tutorial for managing user members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Manage Group Members on iTwins Guide",href:"/tutorials/manage-group-members-on-itwins-guide",description:"Tutorial for managing group members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-create-a-new-itwin",level:2,title:"3. Create a new iTwin",children:[]},{id:"4-query-for-an-itwin-using-the-itwin-id",level:2,title:"4. Query for an iTwin Using the iTwin Id",children:[]},{id:"5-query-for-itwins-using-number",level:2,title:"5. Query for iTwins Using Number",children:[]},{id:"6-query-for-itwin-using-the-number-or-name-wildcard",level:2,title:"6. Query for iTwin Using the Number or Name (wildcard)",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},48530:function(e,t,n){"use strict";n.d(t,{Jt:function(){return I},Pu:function(){return s},ZP:function(){return x}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create & Query Projects",tile:{name:"Create & Query Projects",description:"This tutorial will guide you through the process of creating and querying projects",href:"/tutorials/create-and-query-projects-guide",durationInMinutes:20,relatedApiIds:["projects"],showInFirstSteps:!1,firstStepsSequenceNumber:3}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("GoogleChromeIcon"),h=p("VSCodeIcon"),k=p("PostmanIcon"),g=p("CreateSampleAppButton"),y=p("Alert"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("Tile"),N=p("ResourceTile"),C={metadata:s};function x(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and querying for an iTwin Project."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to create or query projects.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(m,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(h,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(k,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute http calls. These calls can also be made using the ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, then the user must be an Organization Administrator in order to create a project. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."))),(0,r.kt)(c,{actions:[(0,r.kt)(g,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query Projects tutorial",scopes:["projects:modify","projects:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"projects:modify projects:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/projects/operations/get-project-team-members/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/projects/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "displayName":"Tutorial Sample Project",\n  "projectNumber":"Tutorial Project 123",\n  "geographicLocation":"Exton, PA, USA",\n  "latitude":"40.032970",\n  "longitude":"-75.631538",\n  "timeZone":"Eastern Standard Time",\n  "billingCountry":"US",\n  "allowExternalTeamMembers":true\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 937\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 14:44:18 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 5262b13f-394e-49b8-95ea-a5361d2513a3\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Project":{\n    "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n    "displayName":"Tutorial Sample Project",\n    "projectNumber":"Tutorial Project 123",\n    "registrationDateTime":"2021-06-24T14:44:19.3300000",\n    "registeredBy":"d27f4f7a-cf24-41fa-8044-c17eaaaccfb5",\n    "geographicLocation":"Exton, PA, USA",\n    "latitude":"40.032970",\n    "longitude":"-75.631538",\n    "timeZone":"Eastern Standard Time",\n    "dataCenterLocation":"East US",\n    "billingCountry":"US",\n    "status":"active",\n    "allowExternalTeamMembers":true,\n    "_links":{\n      "storage":{\n        "href":"https://api.bentley.com/storage/folders/ywQwCMGcG028KtYykoggDssEMAjBnBtNvCrWMpKIIA4"\n      },\n      "forms":{\n        "href":"https://api.bentley.com/forms?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "issues":{\n        "href":"https://api.bentley.com/issues?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "imodels":{\n        "href":"https://api.bentley.com/imodels?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-new-itwin-project"},"3. Create a new iTwin Project"),(0,r.kt)("p",null,"The Projects API is used to create and manage projects. A POST call to the projects endpoint will create a new project."),(0,r.kt)("p",null,"Only ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"projectNumber")," are required for creating a new project. They must be unique so if you get a Conflict error then you will need to replace them with unique values. See the ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/create-project/"},"Projects API documentation")," for descriptions of the different properties, including default values. For this example, we will set allowExternalTeamMembers to true. This will allow us to add any user to the project, even users that are not part of our organization."),(0,r.kt)("p",null,"The POST call will return a new project instance. The ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," can be used to query for the project. The project Id is also used in many other iTwin APIs. You may want to save this Id to use in other tutorials.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/083004cb-9cc1-4d1b-bc2a-d6329288200e HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 936\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:10:04 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: fed95960-ea7c-43b5-a9af-66ab5353d073\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Project":{\n    "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n    "displayName":"Tutorial Sample Project",\n    "projectNumber":"Tutorial Project 123",\n    "registrationDateTime":"2021-06-24T14:44:19.3300000",\n    "registeredBy":"d27f4f7a-cf24-41fa-8044-c17eaaaccfb5",\n    "geographicLocation":"Exton, PA, USA",\n    "latitude":"40.032970",\n    "longitude":"-75.631538",\n    "timeZone":"Eastern Standard Time",\n    "dataCenterLocation":"East US",\n    "billingCountry":"US",\n    "status":"active",\n    "allowExternalTeamMembers":true,\n    "_links":{\n      "storage":{\n        "href":"https://api.bentley.com/storage/folders/ywQwCMGcG028KtYykoggDssEMAjBnBtNvCrWMpKIIA4"\n      },\n      "forms":{\n        "href":"https://api.bentley.com/forms?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "issues":{\n        "href":"https://api.bentley.com/issues?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      },\n      "imodels":{\n        "href":"https://api.bentley.com/imodels?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-an-itwin-project-using-the-project-id"},"4. Query for an iTwin Project Using the Project Id"),(0,r.kt)("p",null,"The project id can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project/"},"query for a specific project"),"."),(0,r.kt)("p",null,"The project will only be returned if you are an Organization Administrator or if you have been added as a member of the project with any role. Only a single project will be returned.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/?projectNumber=Tutorial%20Project%20123 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Prefer: return=representation\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:20:43 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: dd4d68c9-614d-4d67-8e51-7147c18513f8\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Projects":[\n    {\n      "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n      "displayName":"Tutorial Sample Project",\n      "projectNumber":"Tutorial Project 123",\n      "registrationDateTime":"2021-06-24T14:44:19.3300000",\n      "registeredBy":"d27f4f7a-cf24-41fa-8044-c17eaaaccfb5",\n      "geographicLocation":"Exton, PA, USA",\n      "latitude":"40.032970",\n      "longitude":"-75.631538",\n      "timeZone":"Eastern Standard Time",\n      "dataCenterLocation":"East US",\n      "billingCountry":"US",\n      "status":"active",\n      "allowExternalTeamMembers":true,\n      "_links":{\n        "storage":{\n          "href":"https://api.bentley.com/storage/folders/ywQwCMGcG028KtYykoggDssEMAjBnBtNvCrWMpKIIA4"\n        },\n        "forms":{\n          "href":"https://api.bentley.com/forms?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n        },\n        "issues":{\n          "href":"https://api.bentley.com/issues?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n        },\n        "imodels":{\n          "href":"https://api.bentley.com/imodels?projectId=083004cb-9cc1-4d1b-bc2a-d6329288200e"\n        }\n      }\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-an-itwin-projects-using-the-project-number"},"5. Query for an iTwin Projects Using the Project Number"),(0,r.kt)("p",null,"The projectNumber query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/my-projects/"},"find a project")," using the projectNumber. Because this is a query, the response will be a list of projects that will usually contain one element. The projectNumber is unique for projects created in your organization. However, it is possible that you are a member of a project in another organization that has the same projectNumber."),(0,r.kt)("p",null,"The api will only return projects that you are able to access. If you expect it to return a specific project and it does not then you may not have access to that project.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/?$search=Tutorial HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Prefer: return=minimal\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:40:47 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 86bc760f-d0c4-4292-b72d-97a078ce1c7a\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "Projects":[\n    {\n      "id":"083004cb-9cc1-4d1b-bc2a-d6329288200e",\n      "displayName":"Tutorial Sample Project",\n      "projectNumber":"Tutorial Project 123"\n    },\n    {\n      "id":"0ed7a661-4b7f-44ce-b6c3-f0064bb14c70",\n      "displayName":"A Tutorial Project",\n      "projectNumber":"Project A"\n    },\n    {\n      "id":"bc29f384-bd93-48c9-ae6c-08cb36b40fb0",\n      "displayName":"A Sample Project",\n      "projectNumber":"tutorial A"\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-query-for-an-itwin-projects-using-the-project-number-or-name-wildcard"},"6. Query for an iTwin Projects Using the Project Number or Name (wildcard)"),(0,r.kt)("p",null,"The $search query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/my-projects/"},"find a project")," using a query string that will search using the projectNumber or displayName. This example will find all projects with \u201cTutorial\u201d in the projectNumber or displayName. The query is case sensitive and you should not add wildcard characters to the query string. This example is the SQL equivalent of projectNumber like \u201c%Tutorial%\u201d OR displayName like '%Tutorial%\u2019."),(0,r.kt)("p",null,"Because this is a query, the response will be a list that could contain many projects. Notice that this example is using the prefer header to indicate that only the minimal representation of the projects should be returned. This should be used whenever possible to improve performance and reduce the size of the response payload."),(0,r.kt)("p",null,"The api will only return projects that you are able to access. If you expect it to return a specific project and it does not then you may not have access to that project.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{name:"Manage Project Team Members Guide",description:"Guide on Creating/retrieving team members as well as adding roles/permissions.",href:"/tutorials/manage-project-team-members-guide/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(N,{title:"iTwin Project Sample App",href:"https://github.com/iTwin/iTwin-project-sample-app",description:"Sample application that uses the Projects API to create, update and query for projects.",isExternal:!0,mdxType:"ResourceTile"}))))}x.isMDXComponent=!0;var I=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-create-a-new-itwin-project",level:2,title:"3. Create a new iTwin Project",children:[]},{id:"4-query-for-an-itwin-project-using-the-project-id",level:2,title:"4. Query for an iTwin Project Using the Project Id",children:[]},{id:"5-query-for-an-itwin-projects-using-the-project-number",level:2,title:"5. Query for an iTwin Projects Using the Project Number",children:[]},{id:"6-query-for-an-itwin-projects-using-the-project-number-or-name-wildcard",level:2,title:"6. Query for an iTwin Projects Using the Project Number or Name (wildcard)",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},99846:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create application with Reports Config Widget",tile:{name:"Create application with Reports Config Widget",description:"This tutorial will guide you through the process of creating an application with the Reports Config Widget.",href:"/tutorials/create-application-with-reports-config-widget",durationInMinutes:10,relatedApiIds:["insights","insights/reporting"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("ActionLinkButton"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@itwin/reports-config-widget-react"},"Reports Config widget")," is a UI that simplifies the creation, modification, and extraction of Reports within the Reporting Platform.\nThis tutorial will guide you through some basic steps and provide references to set up a viewer application for Reports Config Widget."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to have an iTwin viewer with quick access to all your reports.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"/tutorials/web-application-quick-start",target:"_blank",title:"iTwin Web Viewer Quick Start Instructions",buttonText:"Go",mdxType:"ActionLinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisite"},"Prerequisite"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Your own local source for the iTwin Web Viewer. Please refer to the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start"},"quick start instructions"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(m,{language:"plaintext",code:"insights:read insights:modify projects:read",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"permissions-and-scopes"},"Permissions and Scopes"),(0,r.kt)("p",null,"The SPA client used by your iTwin viewer must have these additional scopes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"insights:read")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"insights:modify")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"projects:read"))),(0,r.kt)("p",null,"Do not forget to put these values within the ",(0,r.kt)("inlineCode",{parentName:"p"},"IMJS_AUTH_CLIENT_SCOPES")," environment variable."),(0,r.kt)("p",null,"In addition, users must have the ",(0,r.kt)("inlineCode",{parentName:"p"},"imodels_read")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"imodels_write")," ",(0,r.kt)("a",{parentName:"p",href:"/apis/insights/operations/create-mapping/#authorization"},"permissions")," assigned at either the Project or iModel level. Further instruction on how to create roles and assign permissions can be found in the ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/tutorials/"},"iTwin Platform Projects API documentation"),".")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{language:"jsx",code:"useEffect(() => {\n  ReportsConfigWidget.initialize(IModelApp.localization);\n})\n \n<Viewer\n  iTwinId={iTwinId}\n  iModelId={iModelId}\n  authClient={authClient}\n  viewCreatorOptions={viewCreatorOptions}\n  enablePerformanceMonitors={true}\n  uiProviders={[new ReportsConfigProvider()]}\n/>\n",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"adding-the-reports-config-widget"},"Adding the Reports Config Widget"),(0,r.kt)("p",null,"The first step required by the widget is to initialize it before making use of the provider. This will initialize the widget\u2019s localization."),(0,r.kt)("p",null,"Next, you must add the ",(0,r.kt)("inlineCode",{parentName:"p"},"ReportsConfigProvider")," to the list of ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," within the viewer component.\nMore details on adding ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," can be shown in this ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/itwin-viewer-hello-world/#2-your-first-ui-widget"},"tutorial"),"."),(0,r.kt)("p",null,"Congratulations, you should now have the Reports Config widget within your iTwin Viewer application.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"Creating an Insights Report using iModel Data",href:"/tutorials/creating-an-insights-report-using-imodel-data/",description:"A guide on how to create the grouping and mapping required by your reports.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Reporting API Documentation",href:"/apis/insights/",description:"This is the official documentation of Reporting API.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Create a test iModel from a Bentley provided sample",href:"/tutorials/create-test-imodel-sample",description:"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Sample House Model",href:"/tutorials/create-test-imodel-sample/#house-sample",description:"Bentley provided sample of a House for test iModel creation.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"UI Provider",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/",description:"Describes interface of objects that want to provide UI component to the running IModelApp.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"IModelApp",href:"https://www.itwinjs.org/reference/imodeljs-frontend/imodelapp/imodelapp/",description:"Global singleton that connects the user interface with the iTwin.js services.",isExternal:!0,mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisite",level:2,title:"Prerequisite",children:[]},{id:"permissions-and-scopes",level:2,title:"Permissions and Scopes",children:[]},{id:"adding-the-reports-config-widget",level:2,title:"Adding the Reports Config Widget",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},2394:function(e,t,n){"use strict";n.d(t,{Jt:function(){return v},Pu:function(){return s},ZP:function(){return b}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create an empty iModel",tile:{name:"Create an empty iModel",description:"Walk-through how to create an empty iModel which later can be used for synchronization.",href:"/tutorials/create-empty-imodel/",durationInMinutes:5,relatedApiIds:["imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("Alert"),h=p("Title"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T=p("ResourceTile"),w={metadata:s};function b(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"5",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you understand what an iModel is and how to leverage iTwin Platform iModels API for managing it."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to create an empty iModel using iModels API which later on can be used as a destination iModel for your synchronization workflow.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Project created and configured. Instructions on how to create a project can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide"},"here"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{scopes:["realitydata:read","imodels:read","imodels:modify","library:read","storage:read","storage:modify"],clientName:"Create empty iModel tutorial",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iModels"),", ",(0,r.kt)("strong",{parentName:"p"},"Library"),", ",(0,r.kt)("strong",{parentName:"p"},"RealityData")," and ",(0,r.kt)("strong",{parentName:"p"},"Storage")," APIs and has ",(0,r.kt)("inlineCode",{parentName:"p"},"realitydata:read imodels:read imodels:modify library:read storage:read storage:modify")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make request to API user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/synchronization/operations/create-storage-connection/"},"Create Storage Connection")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/imodels HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Body"),(0,r.kt)(k,{language:"json",code:'{\n  "projectId":"PROJECT_ID",\n  "name":"Sun City Renewable-energy Plant",\n  "description":"Overall model of solar farms in Sun City",\n  "extent":{\n    "southWest":{\n      "latitude":46.13267702834806,\n      "longitude":7.672120009938448\n    },\n    "northEast":{\n      "latitude":46.302763954781234,\n      "longitude":7.835541640797823\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json\nLocation: https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "iModel":{\n    "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n    "displayName":"Sun City Renewable-energy Plant",\n    "name":"Sun City Renewable-energy Plant",\n    "description":"Overall model of wind and solar farms in Sun City",\n    "initialized":true,\n    "createdDateTime":"2020-10-20T10:51:33.1700000Z",\n    "projectId":"PROJECT_ID",\n    "extent":{\n      "southWest":{\n        "latitude":46.13267702834806,\n        "longitude":7.672120009938448\n      },\n      "northEast":{\n        "latitude":46.302763954781234,\n        "longitude":7.835541640797823\n      }\n    },\n    "_links":{\n      "creator":{\n        "href":"https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d/users/42101fba-847a-4f4e-85a8-a4bed89065e4"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-an-empty-imodel"},"3. Create an empty iModel"),(0,r.kt)("p",null,"An iModel is a specialized information container for exchanging data associated with the lifecycle of infrastructure assets.\niModels were created to facilitate the sharing and distribution of information regardless of the source and format of the information."),(0,r.kt)("p",null,"iTwin Platform iModels API is based on iModelHub cloud service which enables alignment, accountability and accessibility of infrastructure digital twins.\nIt is the control center for iModels and is responsible for coordinating concurrent access to iModels as well as changes made to them."),(0,r.kt)("p",null,"An empty iModel is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/"},"https://api.bentley.com/imodels/")," endpoint with the payload describing the iModel to be created."),(0,r.kt)("p",null,"There are two required properties for the create iModel payload."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"name")," - iModel name is required which uniquely identifies the iModel within the Project. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"projectId")," - provides Project identifier that created iModel will belong to. Project identifier is required property. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"description")," - free form text field so you could give more information about the iModel. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"extent")," - iModels usually are placed at some location on the Earth.\nThis property allows to specify the maximum rectangular area on the Earth which encloses the iModel.\nThe maximum extent is used to help keep your iModel clean.\nWhen new elements are imported, those outside the extent will be flagged for further processing.\nThis extent will also help to zoom to the area of interest in web viewers."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Note: please replace dynamic parameters (JWT_TOKEN and PROJECT_ID) with relevant values from previous steps."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/create-imodel/"},"Create iModel documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Since an empty iModel does not contain any graphical elements or any data it cannot be opened yet for viewing.\nIn order to bring data to the created iModel you may setup synchronization connection which will transform engineering data from native design formats to iModel.\nOnce the synchronization has been setup and executed, viewing session can be started.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Synchronize a file from iTwin Storage",description:"Walk-through how to synchronize a file from iTwin Storage to an iModel using Synchronization API.",href:"/tutorials/synchronization-storage-tutorial",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(T,{title:"Data Management API documentation",href:"/api-groups/data-management/",description:"An overview and detailed Data Management API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(T,{title:"Overview of iModel",href:"https://www.itwinjs.org/learning/imodels/#imodel-overview",description:"An overview of iModel data structure.",isExternal:!0,mdxType:"ResourceTile"}))))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-create-an-empty-imodel",level:2,title:"3. Create an empty iModel",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},92058:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create Multi-Property Validation Rule",tile:{name:"Create Multi-Property Validation Rule",description:"Walk-through to create a multi-property validation rule.",href:"/tutorials/create-multi-property-validation-rule/",thumbnail:"/unreal-docs-site/static/images/property-validation-thumbnail.png",durationInMinutes:20,relatedApiIds:["validation/propertyValue"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Multi-property validation rules allow you to apply the same validation function to all elements with a property name containing a specified filter string. In this tutorial, you will learn how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Get a list of all property validation rule templates."),(0,r.kt)("li",{parentName:"ul"},"Get a list of all properties in an iModel that contain the specified filter string."),(0,r.kt)("li",{parentName:"ul"},"Create a multi-property validation rule."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/#3-create-an-imodel"},"Access to an iModel")," and the associated projectId and imodelId for that iModel, along with the ",(0,r.kt)("a",{parentName:"li",href:"/apis/imodels/operations/get-imodel-named-version-details/"},"named version ID")," for the version you are testing against"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-request-an-authorization-token-using-one-of-the-methods-below"},"1. Request an authorization token using one of the methods below."),(0,r.kt)("h3",{id:"implement-the-authorization-code-flow-in-the-application"},"Implement the Authorization Code Flow in the application"),(0,r.kt)("p",null,"Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"OAuth2 Authorization")," article to implement an Authorization code workflow in your application. Include the scopes \u201cvalidation:read\u201d and 'validation:modify\u2019."),(0,r.kt)("h3",{id:"retrieve-a-user-token-using-the-api-reference-try-it-out-button"},"Retrieve a user token using the API Reference \u201cTry it out\u201d button."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open ",(0,r.kt)("a",{parentName:"li",href:"/apis/validation/operations/get-validation-propertyvalue-rule-templates/"},"Get property value validation rule templates")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"In the Authorization section, select ",(0,r.kt)("strong",{parentName:"li"},"AuthorizationCode"),"."),(0,r.kt)("li",{parentName:"ol"},"Copy the Authorization token in the Header section for use in this tutorial. It will replace the JWT_TOKEN dynamic parameter in the following steps."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "ruleTemplates": [{\n    "id": "1cKcvg7Ky0e66uT-2u8vpW9vzfUgkKBIp6XGd_WdXPM",\n    "displayName": "MultiPropertyValidation",\n    "description": "Runs a given template on multiple properties in iModel Schema",\n    "prompt": "Runs a given template on multiple properties in iModel Schema",\n    "templateExpression": {\n      "templateId": "a5896553-e248-4619-b7c8-5bcb4878e51c",\n      "functionParameters": {\n        "propertyName": "LastMod"\n      },\n      "schemas": [{\n        "name": "Architecture_rvt_ThreeD_3D",\n        "label": null,\n        "entities": [{\n          "name": "Cameras",\n          "label": null,\n          "properties": [{\n            "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n            "label": "Eye Elevation"\n          }, {\n            "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n            "label": "Far Clip Offset"\n          }, {\n            "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n            "label": "Target Elevation"\n          }]\n        }]\n      }]\n    }\n  }],\n  "_links": {\n    "next": null\n  }\n}\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-property-validation-rule-templates"},"2. Get Property Validation Rule Templates"),(0,r.kt)("p",null,"A property validation rule is used as a basis for verifying the value of a property. A rule can check if the value of a property is defined, within a range of values, matches a pattern, etc."),(0,r.kt)("p",null,"We have provided a variety of property validation rule templates to get you started. An ",(0,r.kt)("code",null,"HTTP GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId%5B&continuationToken%5D%5B&$top%5D"},"https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId[&continuationToken][&$top]"))," request returns all valid property validation rule templates for the given project ID. Choose the template that is best suited for your goals based on the description."),(0,r.kt)("p",null,"For this tutorial we are using the MultiPropertyValidation rule template shown on the right in the response body.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/properties/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000&filter=LENGTH HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "data": {\n    "searchProperty": {\n      "schemas": [\n        {\n          "name": "Architecture_rvt_ThreeD_3D",\n          "label": null,\n          "entities": [\n            {\n              "name": "Cameras",\n              "label": null,\n              "properties": [\n                {\n                  "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Eye Elevation"\n                },\n                {\n                  "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n                  "label": "Far Clip Offset"\n                },\n                {\n                  "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Target Elevation"\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-filtered-validation-properties"},"3. Get Filtered Validation Properties"),(0,r.kt)("p",null,"Before creating a multi-property validation rule, a filtered list of properties may be retrieved for the desired iModel. The hierarchical response contains a list of all schemas in the iModel. Within each schema is a list of all entities and within those are lists of properties."),(0,r.kt)("p",null,"Provide the iModel ID, project ID and filter string in the request."),(0,r.kt)("p",null,"Review the schemas array in the response and then pass it into the request body in Step 4.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/validation/propertyValue/rules HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n  "displayName":"TestRule1",\n  "description":"test rule",\n  "templateId": "0000000000000000000000000000000000000000000",\n  "severity": "high",\n  "ecSchema": "*",\n  "ecClass": "*",\n  "whereClause": "",\n  "dataType": "property",\n  "functionParameters": {\n    "templateId": "0000000000000000000000000000000000000000000",\n    "functionParameters": {\n      "propertyName": "Len"\n    },\n    "schemas": [\n      {\n        "name": "Architecture_rvt_ThreeD_3D",\n        "label": null,\n        "entities": [\n          {\n            "name": "Cameras",\n            "label": null,\n            "properties": [\n              {\n                "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                "label": "Eye Elevation"\n              },\n              {\n                "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n                "label": "Far Clip Offset"\n              },\n              {\n                "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                "label": "Target Elevation"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "rule": {\n    "id": "ZuO3OCC8sUuVcgeXz1Ih_aW46T-rqU1DrOAlAo6t8xc",\n    "displayName": "MultiPropPctAvailRule",\n    "description": "Multi-property percent available test rule",\n    "templateId": "0000000000000000000000000000000000000000000",\n    "severity": "high",\n    "ecSchema": "*",\n    "ecClass": "*",\n    "whereClause": null,\n    "functionParameters": {\n      "templateId": "0000000000000000000000000000000000000000000",\n      "functionParameters": {\n        "propertyName": "Len"\n      },\n      "schemas": [\n        {\n          "name": "Architecture_rvt_ThreeD_3D",\n          "label": null,\n          "entities": [\n            {\n              "name": "Cameras",\n              "label": null,\n              "properties": [\n                {\n                  "name": "Eye__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Eye Elevation"\n                },\n                {\n                  "name": "Far__x0020__Clip__x0020__Offset_PG_VIEW_EXTENTS_Length",\n                  "label": "Far Clip Offset"\n                },\n                {\n                  "name": "Target__x0020__Elevation_PG_VIEW_CAMERA_Length",\n                  "label": "Target Elevation"\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    },\n    "dataType": "property",\n    "_links": {\n      "self": {\n        "href": "https://dev-api.bentley.com/validation/propertyValue/rules/00000000000000000000000000-0000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-creating-a-multi-property-validation-rule"},"4. Creating a Multi-Property Validation Rule"),(0,r.kt)("p",null,"To create a multi-property validation rule, provide a rule name, description, template ID, severity, data type and, optionally, a ",(0,r.kt)("inlineCode",{parentName:"p"},"whereClause"),".\nIn the ",(0,r.kt)("inlineCode",{parentName:"p"},"functionParameters")," object, set the nested template ID, parameters and schemas as described below. They will be used during processing to apply the rule for each of the properties listed."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"templateId"),": The template ID of the MultiPropertyValidation rule template."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ecSchema"),": Should be set to \u201c*\u201d  since it will be set based on the schemas parameter below."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ecClass"),": Should be set to \u201c*\u201d since it will be set based on the schemas parameter below."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"whereClause"),": (Optional) The syntax is: ","[propertyName][comparison operator]"," ","[value]",", ie USER_LABEL = 'Door\u2019, for multiple properties connectors such as AND/OR can be used as well."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"severity"),": The rule severity can be one of four values: 'veryHigh\u2019, 'high\u2019, 'medium\u2019, 'low\u2019."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"dataType"),": Should be set to 'property\u2019."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"functionParameters/templateId"),": This nested template ID determines which additional parameters are required below."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"functionParameters/functionParameters"),": These are the function parameters listed in the templateExpression object of the rule template (specified by the template ID)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"functionParameters/schemas"),": The list of schemas, entities, and properties retrieved in Step 3 are used to set this parameter.")),(0,r.kt)("p",null,"If your rule creation is successful, it will return the rule metadata and a new rule ID. This ID will be used to associate the rule with a test."),(0,r.kt)("p",null,"On the right, you can see an example of creating a multi-property validation rule which calculates the percentage of elements that have their selected property value set.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/results/000000000000000-000000000000000000000000000000000-00000-00000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "result":[\n    {\n      "elementId": "0x16fc",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Roofs:Type__x0020__Comments_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "0"\n    },\n    {\n      "elementId": "0x16fc",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Roofs:FamilyType)",\n      "ruleIndex": 0,\n      "badValue": "100"\n    },\n    {\n      "elementId": "N/A",\n      "elementLabel": "No property found",\n      "ruleIndex": 0,\n      "badValue": "TypeDefinition is not a valid property."\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Door__x0020__Opening_INVALID_Length_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "20"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:OmniClass__x0020__Number_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "10"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Width_INVALID_Length_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "20"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Depth_INVALID_Length_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "20"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Manufacturer_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "40"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Type__x0020__Comments_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "40"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Type__x0020__Mark_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "0"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:OmniClass__x0020__Title_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "40"\n    },\n    {\n      "elementId": "0x1fd7",\n      "elementLabel": "Percent Available (Architecture_rvt_ThreeD_3D:Specialty__x0020__Equipment:Assembly__x0020__Code_PG_IDENTITY_DATA_Text_TYPE)",\n      "ruleIndex": 0,\n      "badValue": "70"\n    }\n  ],\n  "ruleList":[\n    {\n      "id":"0000000000000000000000000000000000000000000",\n      "displayName": "MultiPropPctAvailRule"\n     }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-getting-multi-property-validation-test-results"},"5. Getting Multi-Property Validation Test Results"),(0,r.kt)("p",null,"After creating a test with the multi-property validation rule, it was run to produce the (shortened) list of results on the right."),(0,r.kt)("p",null,"The property validation results are formatted with a \u201cresult\u201d array that reports the calculated percentage of elements with available property values. It also includes a \u201cruleList\u201d array that lists all of the rules associated with the test run."),(0,r.kt)("p",null,"Within each object in the \u201cresult\u201d array:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"elementId"),": the first element id of the set containing the reported property "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"elementLabel"),": the schema:class:property being reported"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ruleIndex"),": the index of the rule within \u201cruleList\u201d that this property validation was based on"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"badValue"),": in this case, instead of containing the \u201cbad\u201d value of a property validation failure, this field simply contains the percentage of elements that have a value available for each matching property.")),(0,r.kt)("p",null,"Within each object in the \u201cruleList\u201d array:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"id"),": the rule ID"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"displayName"),": the rule name")),(0,r.kt)("h2",{id:"6-conclusion"},"6. Conclusion"),(0,r.kt)("p",null,"You are now able to successfully create a multi-property validation rule allowing you to easily validate all elements that have a property name containing a specified filtering string.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-an-authorization-token-using-one-of-the-methods-below",level:2,title:"1. Request an authorization token using one of the methods below.",children:[{id:"implement-the-authorization-code-flow-in-the-application",level:3,title:"Implement the Authorization Code Flow in the application",children:[]},{id:"retrieve-a-user-token-using-the-api-reference-try-it-out-button",level:3,title:"Retrieve a user token using the API Reference \u201cTry it out\u201d button.",children:[]}]},{id:"2-get-property-validation-rule-templates",level:2,title:"2. Get Property Validation Rule Templates",children:[]},{id:"3-get-filtered-validation-properties",level:2,title:"3. Get Filtered Validation Properties",children:[]},{id:"4-creating-a-multi-property-validation-rule",level:2,title:"4. Creating a Multi-Property Validation Rule",children:[]},{id:"5-getting-multi-property-validation-test-results",level:2,title:"5. Getting Multi-Property Validation Test Results",children:[]},{id:"6-conclusion",level:2,title:"6. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},10694:function(e,t,n){"use strict";n.d(t,{Jt:function(){return v},Pu:function(){return s},ZP:function(){return b}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create iModel Named Version",tile:{name:"Create iModel Named Version",description:"Walk-through how to create a new Named Version within existing iModel.",href:"/tutorials/create-named-version/",durationInMinutes:10,relatedApiIds:["imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("Alert"),h=p("Title"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T=p("ResourceTile"),w={metadata:s};function b(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to guide you through the steps to create a new iModel Named Version."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to create a new Named Version within selected iModel using iModels API which later on can be opened with the viewer.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"An empty iModel created.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to create an empty iModel can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-empty-imodel"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Synchronization of design files to the iModel configured and synchronized.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to synchronize a file can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/synchronization-storage-tutorial"},"here")))))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{scopes:["realitydata:read","imodels:read","imodels:modify","library:read","storage:read","storage:modify"],clientName:"Create iModel Named Version tutorial",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iModels"),", ",(0,r.kt)("strong",{parentName:"p"},"Library"),", ",(0,r.kt)("strong",{parentName:"p"},"RealityData")," and ",(0,r.kt)("strong",{parentName:"p"},"Storage")," APIs and has ",(0,r.kt)("inlineCode",{parentName:"p"},"realitydata:read imodels:read imodels:modify library:read storage:read storage:modify")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make request to API user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/imodels/operations/get-project-imodels/"},"Get Project iModels - iModels")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/imodels/?projectId=PROJECT_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:'Content-Type: application/json\nEtag: "P7yWLBoFpMcFbE25CKMLNCqoZ4Q="',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "iModels":[\n    {\n      "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n      "displayName":"Sun City Renewable-energy Plant",\n      "name":"Sun City Renewable-energy Plant",\n      "description":"Overall model of wind and solar farms in Sun City",\n      "initialized":true,\n      "createdDateTime":"2020-10-20T10:51:33.1700000Z",\n      "projectId":"PROJECT_ID",\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d/users/42101fba-847a-4f4e-85a8-a4bed89065e4"\n        },\n        "changesets":{\n          "href":"https://api.bentley.com/imodels/5e19bee0-3aea-4355-a9f0-c6df9989ee7d/changesets"\n        }\n      }\n    },\n    {\n      "id":"e5692781-32b8-473d-8752-908468f46926",\n      "displayName":"Power Town Processing Plant",\n      "name":"Power Town Processing Plant",\n      "description":"Overall model of processing plant in Power town",\n      "initialized":true,\n      "createdDateTime":"2020-10-20T10:51:33.1700000Z",\n      "projectId":"PROJECT_ID",\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/42101fba-847a-4f4e-85a8-a4bed89065e4"\n        },\n        "changesets":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets"\n        }\n      }\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/imodels?projectId=PROJECT_ID&$skip=0&$top=100"\n    },\n    "prev":{\n      "href":"https://api.bentley.com/imodels?projectId=PROJECT_ID&$skip=0&$top=100"\n    },\n    "next":{\n      "href":"https://api.bentley.com/imodels?projectId=PROJECT_ID&$skip=100&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-get-a-list-of-imodels-in-the-project"},"3. Get a list of iModels in the Project"),(0,r.kt)("p",null,"First of all we need to select an iModel where we want to create a Named Version."),(0,r.kt)("p",null,"To retrieve a list of iModels in the project send a HTTP GET request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/?projectId=PROJECT_ID"},"https://api.bentley.com/imodels/?projectId=PROJECT_ID")," and provide projectId query parameter."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Note: please replace dynamic parameters (JWT_TOKEN and PROJECT_ID) with relevant values from previous steps."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/get-project-imodels/"},"Get project iModels documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Response from the server has a list of iModels in the specified project.\nOnce you find an iModel for which you want to create a Named Version you can use the changesets link to retrieve all Changesets of an iModel.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"GET https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:'Content-Type: application/json\nEtag: "20EzIoC8ZD/iWVKQt4AnPlr/Otg="',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "changesets":[\n    {\n      "id":"a1ecbdc8c4f6173004f9f881914a57c5511a362b",\n      "displayName":"1",\n      "description":"Changeset 0",\n      "index":1,\n      "parentId":"",\n      "pushDateTime":"2020-10-21T06:34:45.007Z",\n      "application":{\n        "name":"iTwin Synchronizer"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/ea4dfb9f-7f66-4c6f-82c5-0efad1636a1f"\n        },\n        "namedVersion":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions/a9f63fc0-ecab-440b-ba59-1a617e15f543"\n        }\n      }\n    },\n    {\n      "id":"7caef8ab5afcd99c9e618fb37978c3a03d0409c7",\n      "displayName":"2",\n      "description":"Changeset 1",\n      "index":2,\n      "parentId":"a1ecbdc8c4f6173004f9f881914a57c5511a362b",\n      "pushDateTime":"2020-10-21T06:34:48.123Z",\n      "application":{\n        "name":"iTwin Synchronizer"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/ea4dfb9f-7f66-4c6f-82c5-0efad1636a1f"\n        },\n        "namedVersion":null\n      }\n    },\n    {\n      "id":"a587345859410ce5c2811c7c558d4578938efa00",\n      "displayName":"3",\n      "description":"Changeset 2",\n      "index":3,\n      "parentId":"7caef8ab5afcd99c9e618fb37978c3a03d0409c7",\n      "pushDateTime":"2020-10-21T06:34:51.13Z",\n      "application":{\n        "name":"Synchro Modeler"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/27e3ecc7-ae44-4c9d-b0b5-2f65ec146f1d"\n        },\n        "namedVersion":null\n      }\n    },\n    {\n      "id":"13a61888798b687d41f7c748d7414b428766281f",\n      "displayName":"4",\n      "description":"Changeset 3",\n      "index":4,\n      "parentId":"a587345859410ce5c2811c7c558d4578938efa00",\n      "pushDateTime":"2020-10-21T06:34:54.13Z",\n      "application":{\n        "name":"Synchro Modeler"\n      },\n      "_links":{\n        "creator":{\n          "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/27e3ecc7-ae44-4c9d-b0b5-2f65ec146f1d"\n        },\n        "namedVersion":null\n      }\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets?$skip=100&$top=100"\n    },\n    "prev":{\n      "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets?$skip=0&$top=100"\n    },\n    "next":{\n      "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets?$skip=200&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-get-a-list-of-changesets-in-the-imodel"},"4. Get a list of Changesets in the iModel"),(0,r.kt)("p",null,"By sending a HTTP GET message to changesets link retrieved from previous step (",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets"},"https://api.bentley.com/imodels/e5692781\u201332b8\u2013473d-8752\u2013908468f46926/changesets"),") we can retrieve a list of Changesets in the iModel."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/get-imodel-changesets/"},"Get iModel Changesets documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Response contains a list of Changesets.\nIf the Changeset has a Named Version the response contains a link to it otherwise the link is null. You can see that our example has a Named Version created only for the first Changeset.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(k,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Body"),(0,r.kt)(k,{language:"json",code:'{\n  "name": "Wind farm design",\n  "description": "Finalized wind farm design in Power Town",\n  "changesetId": "13a61888798b687d41f7c748d7414b428766281f"\n}',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(k,{language:"http",code:"Content-Type: application/json\nLocation: https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions/8a7d2fef-9613-47ff-b7e4-9081d51b1716",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(k,{language:"json",code:'{\n  "namedVersion":{\n    "id":"3020441b-e179-4334-a59a-4fb8deb93df1",\n    "displayName":"Wind farm design",\n    "name":"Wind farm design",\n    "description":"Finalized wind farm design in Power Town",\n    "createdDateTime":"2020-10-21T06:42:57.6700000Z",\n    "state":"visible",\n    "_links":{\n      "creator":{\n        "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/users/ea4dfb9f-7f66-4c6f-82c5-0efad1636a1f"\n      },\n      "changeset":{\n        "href":"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/changesets/13a61888798b687d41f7c748d7414b428766281f"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-create-a-named-version"},"5. Create a Named Version"),(0,r.kt)("p",null,"Lets say we want to create a new Named Version on the latest Changeset.\nTo do that we need to send a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/e5692781-32b8-473d-8752-908468f46926/namedversions"},"https://api.bentley.com/imodels/e5692781\u201332b8\u2013473d-8752\u2013908468f46926/namedversions")," endpoint with the payload describing the Named Version to be created."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"name")," - Named Version name is required which uniquely identifies the Named Version within iModel. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"description")," - free form text field so you could give more information about the Named Version.",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"changesetId")," - provides Changeset identifier the Named Version will be created for. If not provided a baseline iModel Named Version will be created.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/create-imodel-named-version/"},"Create iModel Named Version documentation")," page, \u201cTry it\u201d section."),(0,r.kt)("p",null,"Once the Named Version is created you can start viewing session.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"React to iModel events",description:"Guide on how to use the Webhooks REST API to subscribe to iModel events.",href:"/tutorials/react-to-events-using-webhooks",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(T,{title:"Data Management API documentation",href:"/api-groups/data-management/",description:"An overview and detailed Data Management API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(T,{title:"Overview of iModel",href:"https://www.itwinjs.org/learning/imodels/#imodel-overview",description:"An overview of iModel data structure.",isExternal:!0,mdxType:"ResourceTile"}))))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-get-a-list-of-imodels-in-the-project",level:2,title:"3. Get a list of iModels in the Project",children:[]},{id:"4-get-a-list-of-changesets-in-the-imodel",level:2,title:"4. Get a list of Changesets in the iModel",children:[]},{id:"5-create-a-named-version",level:2,title:"5. Create a Named Version",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},97481:function(e,t,n){"use strict";n.d(t,{Jt:function(){return h},Pu:function(){return s},ZP:function(){return m}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Create a test iModel from a Bentley provided sample",tile:{name:"Create a test iModel from a Bentley provided sample",description:"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data.",thumbnail:"/unreal-docs-site/static/images/stadium.png",href:"/tutorials/create-test-imodel-sample/",durationInMinutes:10,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u={metadata:s};function m(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{mdxType:"Introduction"}),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"create-a-test-itwin-and-an-imodel-from-a-bentley-provided-sample"},"Create a Test iTwin and an iModel from a Bentley provided sample"),(0,r.kt)("p",null,"The quickest way to get access to a cloud hosted iModel is by creating a Test iTwin and an iModel seeded with Bentley provided sample data."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com"},"https://developer.bentley.com")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Sign In")," button and sign-in using your Bentley account credentials",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you have not already registered, click ",(0,r.kt)("strong",{parentName:"li"},"Register now")," and complete the registration process."))),(0,r.kt)("li",{parentName:"ol"},"Click on your user icon and navigate to the ",(0,r.kt)("a",{parentName:"li",href:"/my-itwins"},(0,r.kt)("strong",{parentName:"a"},"My iTwins"))," page"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"+ New")," button"),(0,r.kt)("li",{parentName:"ol"},"Give your Test iTwin a name"),(0,r.kt)("li",{parentName:"ol"},"Click Save"),(0,r.kt)("li",{parentName:"ol"},"iModels in the newly created test iTwin will be listed (it will not have any iModels)"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"+ New")," button to create a new iModel"),(0,r.kt)("li",{parentName:"ol"},"Give your test iModel a name"),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Create iModel from Bentley Sample")),(0,r.kt)("li",{parentName:"ol"},"Choose one of templates"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Save")," button and wait until your iModel is created"))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"metrostation-sample"},"Metrostation Sample"),(0,r.kt)("p",null,"A metrostation located in Philadelphia. Contains platform, rails, and subway cars."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/metrostation.png",alt:"stadium"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"stadium"},"Stadium"),(0,r.kt)("p",null,"Soccer stadium in Singapore. Features landscape details and a metro station. This is the largest sample iModel."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/stadium.png",alt:"stadium"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"retail-building-sample"},"Retail Building Sample"),(0,r.kt)("p",null,"Cafe and apartments."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/retail-building-sample.png",alt:"retail-building-sample"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"bay-town-process-plant"},"Bay Town Process Plant"),(0,r.kt)("p",null,"Simple processing plant. This is the smallest sample iModel."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/bay-town-process-plant.png",alt:"bay-town-process-plant"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"house-sample"},"House Sample"),(0,r.kt)("p",null,"Features several 2D drawings and sheets."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/house-sample.png",alt:"house-sample"}))))}m.isMDXComponent=!0;var h=function(){return[{id:"create-a-test-itwin-and-an-imodel-from-a-bentley-provided-sample",level:2,title:"Create a Test iTwin and an iModel from a Bentley provided sample",children:[{id:"metrostation-sample",level:3,title:"Metrostation Sample",children:[]},{id:"stadium",level:3,title:"Stadium",children:[]},{id:"retail-building-sample",level:3,title:"Retail Building Sample",children:[]},{id:"bay-town-process-plant",level:3,title:"Bay Town Process Plant",children:[]},{id:"house-sample",level:3,title:"House Sample",children:[]}]}]}},11678:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Creating a Carbon Report using iModel Data",tile:{name:"Creating a Carbon Report using iModel Data",description:"This tutorial will teach you how to create a carbon report using iModel data with One Click LCA service.",thumbnail:"",href:"/tutorials/creating-a-carbon-report-using-imodel-data",durationInMinutes:30,relatedApiIds:["insights","insights/carbon-calculation"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("NodeJsIcon"),h=p("GitIcon"),k=p("GoogleChromeIcon"),g=p("VSCodeIcon"),y=p("PostmanIcon"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.oneclicklca.com"},"One Click LCA")," is a third-party construction Life Cycle Assessment (LCA)\nand Environmental Product Declaration (EPD) software company. Bentley\u2019s iTwin platform integration with\nOne Click LCA allows you to export Quantity Takeoff Reports created using the iTwin Reporting platform\nto One Click LCA for convenient Life Cycle Analysis for both infrastructure projects\nand buildings. The iTwin Platform enables the incorporation of engineering data created\nby various design tools. A summary of the design data is exported through this integration,\nallowing you to gain insights into the environmental impacts of your infrastructure project.\nThis integration also allows you to work with the ",(0,r.kt)("a",{parentName:"p",href:"https://www.oneclicklca.com/support/faq-and-guidance/documentation/compliancy-and-certifications/"},"third-party certifications and standards"),"."),(0,r.kt)("p",null,"This tutorial will cover all the fundamental steps to create a carbon calculation summary\nbased on an insights report.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-set-up-your-permissions"},"1. Set up your permissions"),(0,r.kt)("p",null,"Use of the Carbon Calculation APIs requires some iModel/Project level permissions.\nFor these permissions, you must be an Organization Administrator for the organization\nthat owns a given project or have ",(0,r.kt)("inlineCode",{parentName:"p"},"administration_manage_roles")," permission assigned at\nthe Project level. If you do not have admin access to the Project or iModel you would\nlike to use, contact a Project Administrator. As a Project Administrator,\nyou can use APIs described in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/manage-project-team-members-guide/"},"Manage Project Team Members"),"\ntutorial to create a role and update it with ",(0,r.kt)("inlineCode",{parentName:"p"},'"permissions": ["REPORTINGVIEW", "REPORTINGEDIT", "CARBONCALCULATE", "imodels_read", "imodels_write"]'),".\nOnce this is done and the role is assigned to you, use any iModel inside your\nproject to finish this tutorial.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://nodejs.org",target:"_blank",title:"Node.js",icon:(0,r.kt)(m,{mdxType:"NodeJsIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://git-scm.com/downloads",target:"_blank",title:"Git",icon:(0,r.kt)(h,{mdxType:"GitIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-required-materials"},"1.1 Required materials"),(0,r.kt)("h5",{id:"a-hrefhttpsnodejsorg-target_blanknodejs-v12-must-be-greater-than-1210xa"},(0,r.kt)("a",{href:"https://nodejs.org",target:"_blank"},"Node.js v12 (must be greater than 12.10.x)")),(0,r.kt)("p",null,"This tool provides the backend JavaScript runtime necessary for your computer to read and\nrender code appropriately. It also allows you to run NPM command line (required for every\niTwin project)."),(0,r.kt)("h5",{id:"a-hrefhttpsgit-scmcomdownloads-target_blankgita"},(0,r.kt)("a",{href:"https://git-scm.com/downloads",target:"_blank"},"Git")),(0,r.kt)("p",null,"This is the source code control system for the iTwin repositories.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(k,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(g,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(y,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-suggested-materials"},"1.2 Suggested materials"),(0,r.kt)("h5",{id:"a-hrefhttpswwwgooglecomchrome-target_blankgoogle-chromea"},(0,r.kt)("a",{href:"https://www.google.com/chrome/",target:"_blank"},"Google Chrome")),(0,r.kt)("p",null,"This software helps you to develop and debug front-end JavaScript problems."),(0,r.kt)("h5",{id:"a-hrefhttpscodevisualstudiocom-target_blankvisual-studio-codea"},(0,r.kt)("a",{href:"https://code.visualstudio.com/",target:"_blank"},"Visual Studio Code")),(0,r.kt)("p",null,"This is our recommended editor and debugger tool for developing iTwin.js applications.\nIt is free, open source and includes a GUI for working with GIT."),(0,r.kt)("h5",{id:"a-hrefhttpswwwpostmancomdownloads-target_blankpostmana"},(0,r.kt)("a",{href:"https://www.postman.com/downloads/",target:"_blank"},"Postman")),(0,r.kt)("p",null,"If you want to test the REST API calls directly, you can use\n",(0,r.kt)("a",{parentName:"p",href:"https://www.postman.com/downloads/"},"Postman")," or any other application capable of sending\nHTTP requests. If you do it this way, you will require an authorization token for the HTTP\nrequests to work."),(0,r.kt)("p",null,"To learn more about how authentication and authorization works in an iTwin powered\napplication, check out the full\n",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"documentation")," on how to obtain\na valid token.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"13-step-by-step-guide-to-create-a-report-through-the-reporting-apis"},"1.3. Step-by-Step Guide to Create a Report through the Reporting APIs"),(0,r.kt)("p",null,"First you will need a report. For guidance on creating a report, see\n",(0,r.kt)("a",{parentName:"p",href:"https://developer.bentley.com/tutorials/creating-an-insights-report-using-imodel-data/"},"Creating an Insights Report using iModel Data"),".\nThe report and associated mapping should contain all the elements and required properties of One Click LCA\u2019s Life Cycle Analysis."),(0,r.kt)("p",null,"Take note of the ",(0,r.kt)("inlineCode",{parentName:"p"},"reportId"),". This will be used later as ",(0,r.kt)("inlineCode",{parentName:"p"},"reportId"),".")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"14-create-one-click-lca-user-account"},"1.4 Create One Click LCA user account"),(0,r.kt)("p",null,"An account with One Click LCA is required to use this integration.\nUser accounts are created at ",(0,r.kt)("a",{parentName:"p",href:"https://oneclicklcaapp.com/app/register"},"One Click LCA"),".\nFor guidance on One Click LCA, please contact One Click LCA support: ",(0,r.kt)("a",{parentName:"p",href:"mailto:support@oneclicklca.com"},"support@oneclicklca.com"),".")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Example HTTP Request to request one click LCA token"),(0,r.kt)(T,{language:"http",code:'POST /app/api/login HTTP/1.1\nContent-Type: application/json\n{\n"username": "username",\n"password": "password"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-one-click-lca-access-token"},"2. Get One Click LCA access token"),(0,r.kt)("p",null,"In order to use One Click LCA APIs for carbon calculation, you need an access token.\nA user token is acquired by sending a POST request to ",(0,r.kt)("inlineCode",{parentName:"p"},"https://oneclicklcaapp.com/app/api/login")," with request body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json","data-language":"json","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token punctuation">{</span>\n  <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"username"</span><span class="token punctuation">,</span>\n  <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"password"</span>\n<span class="token punctuation">}</span>\n'}})),(0,r.kt)("p",null,"Take note of the ",(0,r.kt)("inlineCode",{parentName:"p"},"access_token")," in the response which will be used as ",(0,r.kt)("inlineCode",{parentName:"p"},"token")," later."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Creating a bearer token requires having a valid user account and a license for One Click LCA."))),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Example HTTP Request to create a carbon calculation job"),(0,r.kt)(T,{language:"http",code:'POST https://api.bentley.com/insights/carbon-calculation/oneclicklca/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nAccept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\n{\n    "reportId": "reportId",\n    "token": "token"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-carbon-calculation-job"},"3. Create a carbon calculation job"),(0,r.kt)("p",null,"Next, trigger a carbon calculation job to export your report to One Click LCA with the ",(0,r.kt)("inlineCode",{parentName:"p"},"token")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"reportId")," we have created."),(0,r.kt)("p",null,"Alternatively, use the ",(0,r.kt)("strong",{parentName:"p"},"Try It")," button on the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.bentley.com/apis/carbon-calculation/operations/create-oneclicklca-job/"},"Create One Click LCA Job")," page to execute the request directly."),(0,r.kt)("p",null,"Save ",(0,r.kt)("inlineCode",{parentName:"p"},"jobId")," in the response for progress monitoring.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Example HTTP Request to create a carbon calculation job"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/insights/carbon-calculation/oneclicklca/jobs/{jobId} HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nAccept: application/vnd.bentley.itwin-platform.v1+json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-monitor-carbon-calculation-job-progress"},"4. Monitor carbon calculation job progress"),(0,r.kt)("p",null,"The job might take some time. We provide an endpoint to track the progress of carbon calculation process linked with ",(0,r.kt)("inlineCode",{parentName:"p"},"jobId"),". The response status might be one of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Queued"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Running"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Succeeded")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Failed"),"."),(0,r.kt)("p",null,"Alternatively, use the ",(0,r.kt)("strong",{parentName:"p"},"Try It")," button on the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.bentley.com/apis/carbon-calculation/operations/get-oneclicklca-job-status/"},"Get One Click LCA Job Status")," page to execute the request directly."),(0,r.kt)("p",null,"Once the export is complete, save the ",(0,r.kt)("inlineCode",{parentName:"p"},"job -> _links -> oneclicklca -> href")," link to view the result.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-use-our-ui-interface"},"5. Use our UI interface"),(0,r.kt)("p",null,"We have a public NPM package ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@itwin/one-click-lca-react"},"One Click LCA React"),". Follow the steps in the README file, you will get the same result.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Congratulations on completing this tutorial and running your first carbon calculation report using the APIs.\nNow you can create your own customized groups, group properties and map them to your own customized report and calculate carbon emission based on it.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Carbon Calculation API Documentation",href:"/apis/carbon-calculation/",description:"This is the official documentation of Carbon Calculation API.",mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-set-up-your-permissions",level:2,title:"1. Set up your permissions",children:[{id:"11-required-materials",level:3,title:"1.1 Required materials",children:[]},{id:"12-suggested-materials",level:3,title:"1.2 Suggested materials",children:[]},{id:"13-step-by-step-guide-to-create-a-report-through-the-reporting-apis",level:3,title:"1.3. Step-by-Step Guide to Create a Report through the Reporting APIs",children:[]},{id:"14-create-one-click-lca-user-account",level:3,title:"1.4 Create One Click LCA user account",children:[]}]},{id:"2-get-one-click-lca-access-token",level:2,title:"2. Get One Click LCA access token",children:[]},{id:"3-create-a-carbon-calculation-job",level:2,title:"3. Create a carbon calculation job",children:[]},{id:"4-monitor-carbon-calculation-job-progress",level:2,title:"4. Monitor carbon calculation job progress",children:[]},{id:"5-use-our-ui-interface",level:2,title:"5. Use our UI interface",children:[]},{id:"conclusion",level:2,title:"Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},8996:function(e,t,n){"use strict";n.d(t,{Jt:function(){return b},Pu:function(){return s},ZP:function(){return w}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Creating Your First Issue",tile:{name:"Creating Your First Issue",description:"Learn the basics of the Issues REST API by creating, viewing, and modifying an issue.",thumbnail:null,href:"/tutorials/creating-your-first-issue",durationInMinutes:15,relatedApiIds:["issues"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("ActionLinkButton"),h=p("CodeBlock"),k=p("Alert"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T={metadata:s};function w(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Issues generally represent items of work that come up during a project and often need a particular person/group\u2019s attention by a certain due date. The Issues API lets you create, view, and edit these issues in your project."),(0,r.kt)("p",null,"In this tutorial, you will use the Issues REST API to create, modify, and view an issue. No programming experience is necessary, though familiarity with JSON and HTTP will help. This lesson is meant to begin getting you familiar with the Issues API\u2019s capabilities before you begin writing application code."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"If you haven\u2019t already, please complete the ",(0,r.kt)("a",{parentName:"p",href:"../web-application-quick-start"},"Web Application Quick Start")," tutorial before continuing. This will give you an iModel and a project under which you can create issues. Also, make sure you add the ",(0,r.kt)("strong",{parentName:"p"},"Project Delivery")," API association when ",(0,r.kt)("a",{parentName:"p",href:"/my-apps/"},"registering the application")," on the developer site, or, if you\u2019ve already registered the application, edit it to enable the ",(0,r.kt)("strong",{parentName:"p"},"issues:read")," and ",(0,r.kt)("strong",{parentName:"p"},"issues:modify")," scopes under Issues.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-creating-an-issue"},"1. Creating an Issue")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-project-form-definitions/",target:"_blank",title:"Try the Get Project Form Definitions endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/formDefinitions?projectId=<yourId> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "formDefinitions":[\n    {\n      "id":"e5Ue5Ue5U02hNz19awLcRpwxKq9kmcZEqw123456789",\n      "displayName":"Issue",\n      "type":"Field Data"\n    },\n    {\n      "id":"e5Ue5Ue5U02hNz19awLcRnQIKZ9n-5VNql123456789",\n      "displayName":"Clash Review",\n      "type":"Clash"\n    },\n    {\n      "id":"e5Ue5Ue5U02hNz19awLcRnQIKZ9n-8765l123456789",\n      "displayName":"Data Quality Review",\n      "type":"Data Quality"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-choosing-a-form-definition"},"1.1. Choosing a Form Definition"),(0,r.kt)("p",null,"In order to create an issue, you must associate it with a ",(0,r.kt)("strong",{parentName:"p"},"form definition"),". A form definition simply adds metadata to the issue, including how it should displayed in certain Bentley applications. However, for third-party applications, often the only property that matters is the ",(0,r.kt)("strong",{parentName:"p"},"type"),", as this will determine which type of issue is created."),(0,r.kt)("p",null,"To see all available form definitions in your project, make a request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-project-form-definitions/"},"Get Project Form Definitions")," endpoint as shown under ",(0,r.kt)("strong",{parentName:"p"},"Sample request"),", replacing ",(0,r.kt)("strong",{parentName:"p"},"<","yourId",">")," with the ID of the project you created in a previous step."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"You can try making a request to this endpoint, like any endpoint in the Issues REST API, by clicking the blue Try It Out button on its",(0,r.kt)("a",{href:"/apis/issues-v1/operations/get-project-form-definitions/"},(0,r.kt)("strong",null,"documentation page")),"."),(0,r.kt)("p",null,"This will return a list of form definitions similar to the ",(0,r.kt)("strong",{parentName:"p"},"Sample response"),"."),(0,r.kt)("p",null,"Choose any one of these form definitions returned from your request and note its ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," for the next step.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/create-issue/",target:"_blank",title:"Try the Create Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample method, URL, and headers"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (Copy and use this! Fill in your form ID.)"),(0,r.kt)(h,{language:"json",code:'{\n  "formId":"<your form id>",\n  "subject":"Unspecified material",\n  "description":"The plans do not specify what material this support beam will be made out of.",\n  "dueDate":"2021-07-30T00:00:00Z"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 201 Created\nContent-Type: application/json\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "subject":"Unspecified material",\n    "description":"The plans do not specify what material this support beam will be made out of.",\n    "dueDate":"2021-07-30T00:00:00Z",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-11T18:17:45.4807786Z",\n    "number":"FID-00002",\n    "status":"Draft",\n    "assignee":{\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189",\n      "displayName":"Andrew Menzies"\n    },\n    "assignees":[],\n    "displayName":"FID-00002",\n    "type":"Field Data",\n    "state":"Open"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-posting-the-issue-data"},"1.2. Posting the Issue Data"),(0,r.kt)("p",null,"You can create an issue by making a POST request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/create-issue/"},"Create issue")," endpoint."),(0,r.kt)("h4",{id:"url"},"URL"),(0,r.kt)("p",null,"The URL for creating an issue is always the same: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues")),(0,r.kt)("h4",{id:"body"},"Body"),(0,r.kt)("p",null,"A new issue typically includes a few simple textual properties and, optionally, some metadata properties linking it to an iModel and, potentially, a specific element in that iModel. We\u2019ll go over those metadata properties (anything denoted as ",(0,r.kt)("strong",{parentName:"p"},"\u201cOrigin info\u201d")," on the documentation page) in another tutorial."),(0,r.kt)("p",null,"The only property absolutely required for a new issue request is:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"formId:")," The ID of one of the form definitions in your project, as retrieved from the ",(0,r.kt)("strong",{parentName:"li"},"Get Project Form Definitions")," endpoint.")),(0,r.kt)("p",null,"Other properties that are typically included are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"subject:")," A short descriptive title of the issue, usually less than a sentence."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"description:")," A longer, more detailed explanation of the issue. Can be multiple sentences and can span multiple lines."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"assignee")," or ",(0,r.kt)("strong",{parentName:"li"},"assignees"),": A person, or list of people, respectively, who should review the issue and take action. These must be members of the current project. If neither property is set, ",(0,r.kt)("strong",{parentName:"li"},"assignee")," will default to whoever created the issue, i.e. you."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"dueDate:")," Date by which the assignee(s) should take action on the issue, if applicable. Apps might warn users when an issue is near due or overdue, for instance.")),(0,r.kt)("p",null,"Generally, an app that creates issues would collect these properties from the user, such as by providing a text box for ",(0,r.kt)("strong",{parentName:"p"},"subject"),", a text area for ",(0,r.kt)("strong",{parentName:"p"},"description"),", a dropdown list of project members for ",(0,r.kt)("strong",{parentName:"p"},"assignee"),", and so forth."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Setting ",(0,r.kt)("strong",null,"assignee")," or ",(0,r.kt)("strong",null,"assignees")," requires both a user's display name and ID. These can be obtained using the",(0,r.kt)("a",{href:"/apis/projects/operations/get-project-team-members/"},(0,r.kt)("strong",null,"Get Project Team Members"))," endpoint of the Projects API."),(0,r.kt)("p",null,"Copy the sample body from the pane on the right and visit the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/create-issue/"},"documentation page")," to create your first issue. After you click ",(0,r.kt)("strong",{parentName:"p"},"Try It"),", paste the body into the text area, overwriting any JSON already there. Be sure to replace ",(0,r.kt)("strong",{parentName:"p"},"<","your form id",">")," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," you obtained in Step 1.1."),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"If you\u2019ve made the request correctly, you should receive a response similar to the sample. Note that several properties are automatically filled in by the server, even though you didn\u2019t specify them: ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," is equal to the type of the form definition you chose, and properties such as ",(0,r.kt)("inlineCode",{parentName:"p"},"createdBy")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"createdDateTime")," were automatically set to show who created the issue and when. You will need to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property\u2019s value to make further requests regarding that issue.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-viewing-your-issues"},"2. Viewing Your Issues")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-project-issues/",target:"_blank",title:"Try the Get Project Issues endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample Request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues?projectId=<your-project-ID> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample Response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "issues":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n      "displayName":"FID-00002",\n      "state":"Open",\n      "type":"Field Data",\n      "subject":"Unspecified material"\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/issues?projectId=16298bc6-c7de-4fdb-bdb9-248b3b07c178&$top=1"\n    },\n    "next":{\n      "href":"https://api.bentley.com/issues?projectId=16298bc6-c7de-4fdb-bdb9-248b3b07c178&continuationToken=eyJ0b3AiOjEsInNraXBUb2tlbiI6IntcInRva2VuXCI6XCIrUklEOn5xMEp4QUxUU1ROYmMzZzhBQUFBQURnPT0jUlQ6MSNUUkM6MSNSVEQ6UXRrNDlqVXpNaTdWUElHNElWQUNCVE14TXpJdU1UY3VNakpWTWprN01qZzdOVFl2TlRreE9EZzVOMXNBI0lTVjoyI0lFTzo2NTU1MSNRQ0Y6NyNGUEM6QWdnL0FBQUFBRGdBQUQ4QUFBQUFPQUFBUHdBQUFBQTRBQUFFQU5FZVFCQT1cIixcInJhbmdlXCI6e1wibWluXCI6XCIwNUMxRTlDRDY3MzM5OFwiLFwibWF4XCI6XCIwNUMxRUQ3NTAzOERBQ1wifX0ifQ"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-viewing-all-issues-in-project"},"2.1. Viewing All Issues in Project"),(0,r.kt)("p",null,"Make a request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-project-issues/"},"Get Project Issues")," endpoint to get a summary of all the issues in the project. You must specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"projectId")," in a query parameter, and you can optionally filter by ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," as an additional query parameter."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},'Note: If there are too many issues to be returned in one response, you can request the next "page" of results by making a GET request to the exact URL in'," ",(0,r.kt)("code",null,"next.href"),". (",(0,r.kt)("code",null,"next.href")," will not normally appear if there is just one issue to return, but was included in the sample response for illustrative purposes.)")),(0,r.kt)(c,{subSection:"true",actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-issue-details/",target:"_blank",title:"Try the Get Issue Details endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample Request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-ID> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample Response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "subject":"Unspecified material",\n    "description":"The plans do not specify what material this support beam will be made out of.",\n    "dueDate":"2021-07-30T00:00:00Z",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-11T18:17:45.4807786Z",\n    "number":"FID-00002",\n    "status":"Open",\n    "assignee":{\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189",\n      "displayName":"Andrew Menzies"\n    },\n    "assignees":[\n      \n    ],\n    "displayName":"FID-00002",\n    "type":"Field Data",\n    "state":"Open",\n    "formId":"ZaZaZaYbYav2qwer_-wqer-___wqerqwetaqtewq123"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"22-viewing-a-single-issues-details"},"2.2 Viewing a Single Issue\u2019s Details"),(0,r.kt)("p",null,"To retrieve all properties of an issue, call the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-details/"},"Get issue details")," endpoint."),(0,r.kt)("p",null,"The URL for this request is ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/issues/%3Cid"},"https://api.bentley.com/issues/","<","id"),">"," where ",(0,r.kt)("strong",{parentName:"p"},"<","id",">")," equals the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," property of the issue you want to look up (in this case, the one you created in Step 1.2).")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/modify-issue/",target:"_blank",title:"Try the Update Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample method, URL, and headers"),(0,r.kt)(h,{language:"http",code:"PATCH https://api.bentley.com/issues/<your-issue-ID> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (Copy and use this!)"),(0,r.kt)(h,{language:"json",code:'{\n  "description":"Version 1.2 of the plans does not specify what material this support beam will be made out of."\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "description":"Version 1.2 of the plans does not specify what material this support beam will be made out of.",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-14T17:11:27.3959581Z",\n    "status":"Open",\n    "assignee":{\n      "displayName":"Andrew Menzies",\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189"\n    },\n    "number":"FID-00002",\n    "displayName":"FID-00002",\n    "subject":"Unspecified material",\n    "type":"Field Data",\n    "dueDate":"2021-07-30T00:00:00Z",\n    "state":"Open"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-modifying-an-issue"},"3. Modifying an Issue"),(0,r.kt)("p",null,"Once you\u2019ve created an issue, you can call the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/modify-issue/"},"Update issue")," endpoint to modify its properties. Updating an issue can be done simply by making a PATCH request to the same URL where you retrieved its details (ending in the issue\u2019s ID). Provide a JSON object body containing only the properties you want changed; anything not included will keep its saved values. (Note: Including a property with a value of ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," on the will set that property on the saved issue to ",(0,r.kt)("inlineCode",{parentName:"p"},"null"),"; it is not the same as omitting the property from the request entirely.)"),(0,r.kt)("p",null,"For example, if you wanted to make the description slightly more detailed, you could make a request using the body shown to the right. Be sure to set the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," URL parameter to the ID of your newly created issue."),(0,r.kt)(k,{type:"warning",mdxType:"Alert"},"Be aware that some properties returned in the"," ",(0,r.kt)("strong",null,"Get issue details")," request are read-only. The documentation for ",(0,r.kt)("strong",null,"Update issue")," lists only the properties you are allowed to edit."),(0,r.kt)("h4",{id:"url-format"},"URL format"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<ID-of-issue-to-change>"))),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Adding Attachments and Comments to Your Issue",description:"Upload images and documents, and post comments, to make your issue more detailed.",href:"../adding-attachments-and-comments-to-your-issue",mdxType:"Tile"}),(0,r.kt)(f,{name:"Stepping Through an Issue Workflow",description:"Learn how an issue's status can be set to track its progress.",href:"../stepping-through-an-issue-workflow",mdxType:"Tile"}),(0,r.kt)(f,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",mdxType:"Tile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-creating-an-issue",level:2,title:"1. Creating an Issue",children:[{id:"11-choosing-a-form-definition",level:3,title:"1.1. Choosing a Form Definition",children:[]},{id:"12-posting-the-issue-data",level:3,title:"1.2. Posting the Issue Data",children:[]}]},{id:"2-viewing-your-issues",level:2,title:"2. Viewing Your Issues",children:[{id:"21-viewing-all-issues-in-project",level:3,title:"2.1. Viewing All Issues in Project",children:[]},{id:"22-viewing-a-single-issues-details",level:3,title:"2.2 Viewing a Single Issue\u2019s Details",children:[]}]},{id:"3-modifying-an-issue",level:2,title:"3. Modifying an Issue",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},1962:function(e,t,n){"use strict";n.d(t,{Jt:function(){return v},Pu:function(){return s},ZP:function(){return b}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Export data from an iModel",tile:{name:"Export data from an iModel",description:"This tutorial guides you through exporting data from an iModel to other formats, such as IFC or LandXM using the Export API.",href:"/tutorials/export-data-from-imodel/",durationInMinutes:30,relatedApiIds:["export","imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateSampleAppButton"),m=p("Alert"),h=p("CodeBlock"),k=p("Title"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T=p("ResourceTile"),w={metadata:s};function b(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"30",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you export data from an iModel to different formats like ",(0,r.kt)("a",{parentName:"p",href:"https://www.buildingsmart.org/standards/bsi-standards/industry-foundation-classes/"},"IFC")," or ",(0,r.kt)("a",{parentName:"p",href:"http://www.landxml.org/"},"LandXML")," and store it in the iTwin Storage. Export API works in project and iModel context.\nIn this walk-through, you will be able to start an export.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{scopes:["export:modify","export:read"],clientName:"Export data from an iModel tutorial",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. Use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Export API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"export:modify export:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make requests to the API, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Here you need to use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-out-section"},"Grab a user token from Api reference \u201cTry it out\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/export/operations/startExport/"},"Create Configuration")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it out\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-connection"},"3. Create a Connection"),(0,r.kt)("p",null,"The export process uses connections that link to iModels. For example, you can create multiple connections to an iModel and execute them on-demand multiple times to export changes. So let\u2019s make such a connection in this step.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{language:"http",code:"POST\xa0https://api.bentley.com/export/connections HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"To create a connection, send a ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"export/connections")," endpoint."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authorization\xa0header with a valid Bearer token is required."),(0,r.kt)("li",{parentName:"ol"},"IMODEL_ID of the iModel we want to export."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{language:"json",code:'{\n    "displayName": "Connection1",\n    "iModelId": "IMODEL_ID",\n    "authenticationType": "User"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"displayName")," - a user-friendly name for the connection"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"iModelId")," - The ID of the iModel containing the connection"),(0,r.kt)("li",{parentName:"ul"},"[Optional]"," ",(0,r.kt)("inlineCode",{parentName:"li"},"authenticationType")," - one of ",(0,r.kt)("inlineCode",{parentName:"li"},"User")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"Service"),". The authentication type defaults to ",(0,r.kt)("inlineCode",{parentName:"li"},"User")," and uses a refresh token to get an access token for long exports. For now Export only supports ",(0,r.kt)("inlineCode",{parentName:"li"},"User")," authenticationType."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{language:"json",code:'{\n    "connection": {\n        "id": "CONNECTION_ID",\n        "displayName": "connection1",\n        "iModelId": "IMODEL_ID",\n        "projectId": "PROJECT_ID",\n        "authenticationType": "User",\n        "_links": {\n            "iModel": {\n                "href": "https://api.bentley.com/imodels/IMODEL_ID"\n            },\n            "project": {\n                "href": "https://api.bentley.com/projects/PROJECT_ID"\n            },\n            "lastRun": null\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"The request response contains created connection properties values. Id is needed in next step")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-store-refresh-token-for-user"},"4. Store refresh token for user"),(0,r.kt)("p",null,"The export process usually takes time and is performed in the background. For that, we need to store the user\u2019s refresh token. To get the authorization information, use the Get Authorization Information API. This API will return the current status and a redirect URL where user has to be redirected on the browser if the token has to be renewed.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{mdxType:"Title"},"Get Authorization Information Request Syntax and Headers"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"In order to do that, send a GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL"},"https://api.bentley.com/export/authorizationInformation?redirectUrl=REDIRECT_URL")," request."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ol"},"REDIRECT_URL is a url of where a user should be redirected after successful token renewal."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{mdxType:"Title"},"Get Authorization Information Response Body"),(0,r.kt)(h,{language:"json",code:'{\n    "authorizationInformation": {\n        "isUserAuthorized": true,\n        "_links": {\n            "authorizationUrl": {\n                "href": null\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-if-user-has-a-valid-refresh-token"},"Response if user has a valid refresh token"),(0,r.kt)("p",null,"\u201cisUserAuthorized\u201d with value \u201ctrue\u201d means, user has a valid refresh token and can run long running export.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{mdxType:"Title"},"Get Authorization Information Response Body"),(0,r.kt)(h,{language:"json",code:'{\n    "authorizationInformation": {\n        "isUserAuthorized": false,\n        "_links": {\n            "authorizationUrl": {\n                "href": "https://connect-itwinbridgeportal.bentley.com/authenticate?redirect_url=REDIRECT_URL"\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-if-user-does-not-have-a-valid-refresh-token"},"Response if user does not have a valid refresh token"),(0,r.kt)("p",null,"\u201cisUserAuthorized\u201d with value \u201cfalse\u201d means, user does not have valid refresh token and cannot run long running export. To refresh token user has to be redirected to authorizationUrl from response.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-run-a-connection"},"5. Run a Connection"),(0,r.kt)("p",null,"A run defines a single connection export process. Send a ",(0,r.kt)("inlineCode",{parentName:"p"},"run start")," request to initialize the export process."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"exportType")," is a required property. Valid values are ",(0,r.kt)("inlineCode",{parentName:"p"},"IFC")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"LandXML"),". Additionally, the following optional parameters are also available:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"inputOptions")," -"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"changesetId")," - Changeset Id of the iModel."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mappingFileId")," - User-defined mapping file Id."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"outputOptions")," -"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"folderId")," - Folder Id to store the output file."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"saveLogs")," - Set to save the logs of export."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"replaceOlderFile")," - Set to replace the older file for same imodel."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"location")," - Location type one of \u201cUSER_BLOBS_TORAGE\u201d or 'STORAGE\u2019. Defaults to STORAGE (STORAGE API)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"outputSasUrl")," - Output file SAS url if the location is 'USER_BLOBS_TORAGE\u2019."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"logsSasUrl")," - Logs file SAS url if the location is \u201cUSER_BLOBS_TORAGE\u201d ans saveLogs is set."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"ifcVersion")," - Ifc Version if the export type is \u201cIFC\u201d (One of 'IFC4.3\u2019, 'IFC2x3\u2019, 'IFC2x3 CV 2.0\u2019, 'IFC4 RV 1.2\u2019).")))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{language:"http",code:"POST\xa0https://api.bentley.com/export/connections/CONNECTION_ID/run HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(k,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "exportType": "ExportType",\n  "ifcVersion": "IfcVersion",\n  "projectId": "ProjectId",\n  "inputOptions": {\n        "mappingFileId": "MappingFileId",\n        "changesetId": "ChangesetId"\n    },\n  "outputOptions": {\n        "location": "Location",\n        "outputSasUrl": "OutputSasUrl",\n        "logsSasUrl": "LogsSasUrl",\n        "folderId": "FolderId",\n        "replaceOlderFile": true,\n        "saveLogs": true\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-2"},"Request"),(0,r.kt)("p",null,"Send a ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"export/connections/{connectionId}/runs"),"\xa0endpoint with valid connectionId to run a connection."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ol"},"CONNECTION_ID which should be started for processing. Use the value from previous step response."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{language:"http",code:"HTTP/1.1 202 Accepted",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-1"},"Response"),(0,r.kt)("p",null,"On successful request, operation returns http status code 202/accepted - the request is accepted for processing and will be executed in the background.\nIf there is already an active run in progress for this connection, new run is being added to the queue.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-get-runs-statuses"},"6. Get runs statuses"),(0,r.kt)("p",null,"A run contains export process status. To get runs history and statuses get request has to be made.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{language:"http",code:"POST\xa0https://api.bentley.com/export/connections/CONNECTION_ID/runs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-3"},"Request"),(0,r.kt)("p",null,"Getting Run status requires sending a GET request to the export/connections/{connectionId}/runs\xa0endpoint with valid connectionId."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ol"},"CONNECTION_ID which runs we want to get."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(h,{language:"json",code:'{\n  "runs":[\n    {\n      "id":"41062244-3e62-42a3-8232-9f2b4d31be16",\n      "state":"Completed",\n      "result":"Success"\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/export/connections/CONNECTION_ID/runs?$skip=0&$top=100"\n    },\n    "prev":{\n      "href":"https://api.bentley.com/export/connections/CONNECTION_ID/runs?$skip=0&$top=100"\n    },\n    "next":{\n      "href":"https://api.bentley.com/export/connections/CONNECTION_ID/runs?$skip=100&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h5",{id:"response-2"},"Response"),(0,r.kt)("p",null,"At the end of export, the run state should be ",(0,r.kt)("inlineCode",{parentName:"p"},"Completed"),", and result ",(0,r.kt)("inlineCode",{parentName:"p"},"Success"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-conclusion"},"7. Conclusion"),(0,r.kt)("p",null,"In this tutorial we have gone through a iModel export process:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a connection"),(0,r.kt)("li",{parentName:"ol"},"Run the connection"),(0,r.kt)("li",{parentName:"ol"},"Get run status.")),(0,r.kt)("p",null,"After successful run, output file could be found in the location provided (Storage API by default).")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Synchronize an iModel using Synchronization API",description:"You will learn how to use the synchronization REST API to synchronize data to iModel.",href:"/tutorials/synchronization-storage-tutorial/",mdxType:"Tile"}),(0,r.kt)(f,{name:"Filter an iModel using Transformation API",description:"You will learn how to use the transformation REST API to filter iModel data.",href:"/tutorials/filter-by-view-definition-transformation/",mdxType:"Tile"}),(0,r.kt)(f,{name:"Get started with Storage API",description:"You will learn the main workflows and operations of the storage REST API.",href:"/tutorials/storage-quick-start/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(T,{title:"Export API documentation",href:"/apis/export/overview",description:"An overview and detailed Export API documentation.",mdxType:"ResourceTile"}))))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-out-section",level:3,title:"Grab a user token from Api reference \u201cTry it out\u201d Section",children:[]}]},{id:"3-create-a-connection",level:2,title:"3. Create a Connection",children:[]},{id:"4-store-refresh-token-for-user",level:2,title:"4. Store refresh token for user",children:[]},{id:"5-run-a-connection",level:2,title:"5. Run a Connection",children:[]},{id:"6-get-runs-statuses",level:2,title:"6. Get runs statuses",children:[]},{id:"7-conclusion",level:2,title:"7. Conclusion",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},6937:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Transforming an iModel - Filtering data by a view definition",tile:{name:"Transforming an iModel - Filtering data by a view definition",description:"This tutorial will demonstrate how to filter an iModel by a view definition using iModel Transformations API.",thumbnail:"/unreal-docs-site/static/images/stadium-filtered.png",href:"/tutorials/filter-by-view-definition-transformation/",durationInMinutes:20,relatedApiIds:["transformations"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("VSCodeIcon"),h=p("PostmanIcon"),k=p("CreateSampleAppButton"),g=p("Alert"),y=p("Title"),f=p("CodeBlock"),T=p("ContinueLearningSection"),w=p("TileList"),b=p("Tile"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"20",summaryImageSrc:"/unreal-docs-site/static/images/stadium.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you create your first iModel Transformation.\nIn this walk-through, you will configure and run a transformation, wait for it to complete and view the result.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(m,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(h,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute http calls. These calls can also be made using the ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it out")," button in the API documentation or any other http request tool."),(0,r.kt)("li",{parentName:"ul"},"A created connected project. You can create a project by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"Create a new iTwin Project"),"."),(0,r.kt)("li",{parentName:"ul"},"A source iModel with some data for the transformation. You can create an iModel from Bentley Sample by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/"},"Create an iModel"),"."),(0,r.kt)("li",{parentName:"ul"},"An empty target iModel for the transformation. You can create an empty iModel by following instructions at ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/"},"Create an iModel"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(k,{scopes:["transformations:modify","transformations:read"],clientName:"Filter iModel by view definition",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Transformations API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"transformations:modify transformations:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make requests to the API, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-out-section"},"Grab a user token from Api reference \u201cTry it out\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/apis/transformations/operations/filterbyviewdefinition/"},"Create Configuration")),(0,r.kt)("li",{parentName:"ol"},"Click \u201cTry it out\u201d button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-decide-on-what-data-to-keep-inside-an-imodel"},"3. Decide on what data to keep inside an iModel."),(0,r.kt)("p",null,"Open iModel and take note of data that has to be kept inside an iModel."),(0,r.kt)("p",null,"Easiest way to query for iModel data is by using an iModel Console web application. Open your source iModel by replacing values in this link:\n",(0,r.kt)("a",{parentName:"p",href:"https://imodelconsole.bentley.com/?projectid=%7ByourSourceProjectId%7D&imodelid=%7ByourSourceIModelId%7D"},"https://imodelconsole.bentley.com/?projectid={yourSourceProjectId}&imodelid={yourSourceIModelId}")),(0,r.kt)("h3",{id:"31-a-view-definition"},"3.1 A View definition"),(0,r.kt)("p",null,"A View renders geometry from one or more Models of an iModel in a web browser. iTwin.js applications can embed and interact with Views anywhere on a web page.\nA View is saved in an iModel as an element of the ViewDefinition class. ViewDefinitions hold all the information necessary to show the same content across sessions."),(0,r.kt)("p",null,"A view contains a ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-backend/viewdefinitions/modelselector/"},"model selector")," and a ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-backend/viewdefinitions/categoryselector/"},"category selector"),"\nwhich holds a list of Ids of models and categories that should be displayed in a view. Views are used to hide information in a browser, but the iModel itself holds the full data.\nFilter by view definition transformation relies on the data from model selector and category selector within the view and accepts arrays of Ids to filter on."),(0,r.kt)("h3",{id:"32-query-for-physical-modelspartitions"},"3.2 Query for Physical Models/Partitions"),(0,r.kt)("p",null,"Run ECSQL query:\n",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT ECInstanceId, CodeValue, UserLabel from bis.PhysicalPartition"),"\nTo learn more about ECSQL follow ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/learning/ecsql"},"this")," link."),(0,r.kt)("p",null,"This ECSQL query returns a list of physical partitions inside an iModel. To learn more about iModel internals, follow ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/bis/guide/data-organization/information-hierarchy/#example-information-hierarchy"},"this")," link."),(0,r.kt)("p",null,"Save all ECInstanceId values and remove those that you would like to filter out."),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Note: If parent model element is omitted from the list, all child elements will get filtered out automatically."),(0,r.kt)("h3",{id:"33-query-for-spatial-categories"},"3.3 Query for Spatial categories"),(0,r.kt)("p",null,"Run ECSQL query:\n",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT ECInstanceId, CodeValue, UserLabel from bis.Spatialcategory")),(0,r.kt)("p",null,"This ECSQL query returns a list of spatial categories inside an iModel. Save all ECInstanceId values and remove those that you would like to filter out."),(0,r.kt)(g,{type:"informational",mdxType:"Alert"},"Note: If parent category element is omitted from the list, all child elements will get filtered out automatically.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/transformations/configurations/filterbyviewdefinition HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Body"),(0,r.kt)(f,{language:"json",code:'{\n  "transformName":"Filter stadium by a view definition",\n  "sourceProjectId":"SourceProjectId",\n  "sourceIModelId":"SourceIModelId",\n  "targetProjectId":"TargetProjectId",\n  "targetIModelId":"TargetIModelId",\n  "comment":"Example comment",\n  "transformParameters":{\n    "models":[\n      "specify",\n      "all ECInstanceIds",\n      "of PhysicalPartitions",\n      "that you want to keep"\n    ],\n    "categories":[\n      "specify",\n      "all spatial categories",\n      "that you want to keep"\n    ]\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "configuration":{\n    "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n    "transformName":"Filter stadium by a view definition",\n    "comment":"Example comment",\n    "createdDateTime":"2021-08-02T14:51:33.6133333Z",\n    "createdBy":"00000000-0000-0000-0000-000000000000",\n    "modifiedDateTime":"2021-08-02T14:52:33.6133333Z",\n    "lastModifiedBy":"00000000-0000-0000-0000-000000000000",\n    "transformParameters":{\n      "models":[\n        "specify",\n        "all ECInstanceIds",\n        "of PhysicalPartitions",\n        "that you want to keep"\n      ],\n      "categories":[\n        "specify",\n        "all spatial categories",\n        "that you want to keep"\n      ]\n    },\n    "_links":{\n      "sourceIModel":{\n        "href":"https://api.bentley.com/imodels/00000000-0000-0000-0000-000000000000"\n      },\n      "targetIModel":{\n        "href":"https://api.bentley.com/imodels/00000000-0000-0000-0000-000000000000"\n      },\n      "sourceProject":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000"\n      },\n      "targetProject":{\n        "href":"https://api.bentley.com/projects/00000000-0000-0000-0000-000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-a-configuration"},"4. Create a configuration"),(0,r.kt)("p",null,"A transformation configuration is needed to create an association between source and target iModels with some additional metadata to successfully carry out the transformation.\nCreating a configuration does not start the transformation process itself."),(0,r.kt)("p",null,"A configuration is created by sending a request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations/configurations/filterbyviewdefinition"},"https://api.bentley.com/transformations/configurations/filterbyviewdefinition")," endpoint with the payload describing the source and target iModel association."),(0,r.kt)("p",null,"These are the required properties for the endpoint:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"transformName")," - free form text field so you could name your configuration ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"sourceProjectId")," - source projectId",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"sourceIModelId")," - iModelId of an iModal that is going to be used as a source of the transformation ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"targetProjectId")," - target projectId",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"targetIModelId")," - iModelId of an iModal that is going to be used as a target of the transformation. Initial transformation should always run on an empty target iModel ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"comment")," - a comment of the transformation.\n",(0,r.kt)("strong",{parentName:"p"},"transformData.models")," - an array of ECInstanceIds that specify model elements that should be kept inside an iModel after transformation.\n",(0,r.kt)("strong",{parentName:"p"},"transformData.categories")," - an array of ECInstanceIds that specify category elements that should be kept inside an iModel after transformation."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/filterbyviewdefinition/"},"FilterByViewDefinition")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"After executing the request, save returned Id from the response.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/transformations HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Body"),(0,r.kt)(f,{language:"json",code:'{\n  "configurationId":"your saved configurationId from step number 3."\n}',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "transformation": {\n    "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n    "status":"Created",\n    "errorMessage":"",\n    "processedElementCount":0,\n    "totalElementCount":0,\n    "_links":{\n      "configuration":{\n        "href":"https://api.bentley.com/transformations/configurations/00000000-0000-0000-0000-000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-create-a-transformation"},"5. Create a transformation"),(0,r.kt)("p",null,"A transformation is created by sending a request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations"},"https://api.bentley.com/transformations")," endpoint with the payload indicating which configuration should be used.\nThe request is submitting a transformation job based on the configuration Id value that was provided."),(0,r.kt)("p",null,"You can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/create-transformation/"},"Create transformation")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"Response indicates the current status of the transformation. After submitting a transformation the status is \u201cCreated\u201d which means that the transformation is enqueued and waiting to start.\nPossible status messages:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Created")," - transformation is created and waiting to be started. The transformation should start automatically, no additional actions are needed.\n",(0,r.kt)("strong",{parentName:"p"},"Started")," - transformation is started and waiting to finish.\n",(0,r.kt)("strong",{parentName:"p"},"Succeeded")," - transformation succeeded. You can open target iModel and inspect the results.\n",(0,r.kt)("strong",{parentName:"p"},"Failed")," - transformation failed. Check the errorMessage node for more information on what happened."),(0,r.kt)("p",null,"Transformation response objects additionally stores ",(0,r.kt)("strong",{parentName:"p"},"processedElementCount")," and ",(0,r.kt)("strong",{parentName:"p"},"totalElementCount")," to allow rendering progress bars and indicate progress to the end users."),(0,r.kt)("p",null,"After executing the request, save returned transformation Id from the response.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"GET https://api.bentley.com/transformations/{savedTransformationId} HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n  "transformation": {\n    "id":"5e19bee0-3aea-4355-a9f0-c6df9989ee7d",\n    "status":"Started",\n    "errorMessage":"",\n    "processedElementCount":0,\n    "totalElementCount":120000,\n    "startedDateTime":"0000-00-00T00:00:00.0000000Z",\n    "finishedDateTime":"0000-00-00T00:00:00.0000000Z",\n    "sourceChangeSetId":"0",\n    "_links":{\n      "configuration":{\n        "href":"https://api.bentley.com/transformations/configurations/00000000-0000-0000-0000-000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-waiting-for-transformation-to-finish"},"6. Waiting for transformation to finish"),(0,r.kt)("p",null,"Send a GET request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/transformations/%7ByourTransformationId%7D"},"https://api.bentley.com/transformations/{yourTransformationId}")," endpoint to get an updated transformation status.\nYou can execute the request in ",(0,r.kt)("a",{parentName:"p",href:"/apis/transformations/operations/get-transformation/"},"Get transformation")," page, \u201cTry it out\u201d section."),(0,r.kt)("p",null,"Query for the transformation multiple times until the ",(0,r.kt)("strong",{parentName:"p"},"status")," changes from ",(0,r.kt)("strong",{parentName:"p"},"Created")," to ",(0,r.kt)("strong",{parentName:"p"},"Started")," and eventually to ",(0,r.kt)("strong",{parentName:"p"},"Succeeded"),"."),(0,r.kt)("p",null,"Go to ",(0,r.kt)("a",{parentName:"p",href:"/my-itwins/"},"My iTwins")," section and view the target iModel."),(0,r.kt)("h2",{id:"7-conclusion"},"7. Conclusion"),(0,r.kt)("p",null,"We\u2019ve successfully created a configuration, ran a transformation that filtered iModel data, waited for the transformation to completed and inspected the results.")),(0,r.kt)(T,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(w,{mdxType:"TileList"},(0,r.kt)(b,{name:"React to iModel events using Webhooks API",description:"You will learn how to use the Webhooks REST API to create and manage your webhooks.",href:"/tutorials/react-to-events-using-webhooks/",mdxType:"Tile"}),(0,r.kt)(b,{name:"Changed Elements API Tutorial",description:"The Changed Elements API is a REST API that allows the consumer to inspect what elements have changed in an iModel between two versions of the iModel.",href:"/tutorials/changed-elements-api/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(w,{mdxType:"TileList"},(0,r.kt)(v,{title:"API documentation",href:"/apis/transformations/overview/",description:"iModel Transformations API documentation.",mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-out-section",level:3,title:"Grab a user token from Api reference \u201cTry it out\u201d Section",children:[]}]},{id:"3-decide-on-what-data-to-keep-inside-an-imodel",level:2,title:"3. Decide on what data to keep inside an iModel.",children:[{id:"31-a-view-definition",level:3,title:"3.1 A View definition",children:[]},{id:"32-query-for-physical-modelspartitions",level:3,title:"3.2 Query for Physical Models/Partitions",children:[]},{id:"33-query-for-spatial-categories",level:3,title:"3.3 Query for Spatial categories",children:[]}]},{id:"4-create-a-configuration",level:2,title:"4. Create a configuration",children:[]},{id:"5-create-a-transformation",level:2,title:"5. Create a transformation",children:[]},{id:"6-waiting-for-transformation-to-finish",level:2,title:"6. Waiting for transformation to finish",children:[]},{id:"7-conclusion",level:2,title:"7. Conclusion",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},61810:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Import Users into Project",tile:{name:"Import Users into Project",description:"This tutorial will demonstrate how to add users to a Project from a CSV file.",href:"/tutorials/import-users-to-project/",durationInMinutes:5,relatedApiIds:["projects"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"5",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will demonstrate how to add users to a Project from a CSV file. This tutorial is accompanied by a sample powershell script located ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Administration/Project-Import-Users"},"here"),". Authorization is provided as a separate ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Authorization/New-OidcAuthCodePkceLogin.ps1"},"script"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.1"},"PowerShell")," (Recommended 7.0+ version) installed."),(0,r.kt)("li",{parentName:"ul"},"Access to, or create a new, project to use this sample.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Process of creating a new project is covered in ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"this tutorial")))),(0,r.kt)("li",{parentName:"ul"},"Your own ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," application/client registered on iTwin Platform.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,r.kt)("strong",{parentName:"li"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:read")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"projects:modify")," scopes enabled."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-request-access-token-for-use-in-authorization-header"},"1. Request access token for use in Authorization header"),(0,r.kt)("p",null,"Authorization is required for all iTwin Platform API endpoints. See the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Authorization"},"Authorization README")," for more information.\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Administration/Project-Import-Users/Import-ProjectUsers.ps1"},"This tutorial powershell sample")," already includes code that obtains an authorization token."),(0,r.kt)(u,{mdxType:"Alert"},"These samples require an Authorization Code + PKCE client. Registration of a"," ",(0,r.kt)("strong",null,"Desktop/Mobile")," application/client will give you an Authorization Code + PKCE client.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-read-users-from-csv"},"2. Read users from CSV"),(0,r.kt)("p",null,"Reading users from a CSV is dependent upon your particular development framework and is outside the scope of this tutorial."),(0,r.kt)("p",null,"Users CSV file must be in following format:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-CSV","data-language":"CSV","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Email: Roles\nuser1@example.com: &lt;comma-separated list of project roles&gt;\nuser2@example.com: &lt;comma-separated list of project roles&gt;\n"}}))),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/validation/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-add-each-user-to-the-project"},"3. Add each user to the Project"),(0,r.kt)("p",null,"Adding a team member to a project requires POSTing the request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,r.kt)("h4",{id:"request-headers"},"Request headers"),(0,r.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(m,{mdxType:"Title"},"Example request body"),(0,r.kt)(h,{language:"json",code:'{\n  "email":"john.doe@my-org.com",\n  "roleNames":[\n    "Project Role 1",\n    "Project Role 2"\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request body"),(0,r.kt)("p",null,"The request body is specified as JSON and requires the email and roleNames properties. The API works with one user at a time, thus one ",(0,r.kt)("em",{parentName:"p"},"email"),". Multiple roles may be requested via the ",(0,r.kt)("em",{parentName:"p"},"roleNames")," array.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Administration API group",href:"/api-groups/administration/",description:"Manage the users, projects, and organizations that interact with your iTwin.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Projects API documentation",href:"/apis/projects/",description:"An overview and detailed Projects API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"iTwin Platform API samples",href:"https://github.com/iTwin/platform-api-samples",description:"PowerShell samples demonstrating API endpoints.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-access-token-for-use-in-authorization-header",level:2,title:"1. Request access token for use in Authorization header",children:[]},{id:"2-read-users-from-csv",level:2,title:"2. Read users from CSV",children:[]},{id:"3-add-each-user-to-the-project",level:2,title:"3. Add each user to the Project",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},18171:function(e,t,n){"use strict";n.d(t,{Jt:function(){return b},Pu:function(){return s},ZP:function(){return w}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Controlling your iModel in Unreal",tile:{name:"Controlling your iModel in Unreal",description:"Build a UI to control the animations in your iModel",thumbnail:"/unreal-docs-site/static/images/unreal-ui-featured-thumb.png",href:"/tutorials/itwin-unreal-controlling-your-imodel",durationInMinutes:60,relatedApiIds:["itwin-unreal"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("TitledImage"),m=p("Alert"),h=p("LinkingImage"),k=p("WebMLoop"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("ResourceTile"),T={metadata:s};function w(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Advanced",durationInMinutes:"30",summaryImageSrc:"/unreal-docs-site/static/images/unreal-ui-featured.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial looks at the various blueprint functions in the iTwin Unreal Datasmith Plugin you can use to manipulate your iModel in Unreal\nand builds a simple user interface with a scrubber for users to interact with your schedule animation in real-time.\nIt also focuses on synchronizing the level sequence (used by actors with transform animations) with the ScheduledActor\u2019s animations,\nwhich is necessary when you exported using the ",(0,r.kt)("em",{parentName:"p"},"combine meshes")," option.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Installed ",(0,r.kt)("a",{parentName:"li",href:"https://www.unrealengine.com/download"},"Unreal Engine 4.26.1")," or later"),(0,r.kt)("li",{parentName:"ul"},"In your project already imported Datasmith content that was made with the iTwin Exporter for Datasmith from an iTwin that contains a schedule script. You may\nfollow one of the tutorials below for help exporting your own data.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-combined-meshes/"},"Exporting iModel to Unreal Datasmith as a combined mesh")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-dataprep"},"Processing iModel metadata in Unreal Visual Dataprep")))),(0,r.kt)("li",{parentName:"ul"},"An existing Unreal Engine project with the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-combined-meshes/#3-install-the-itwin-unreal-datasmith-plugin-in-your-unreal-project"},"iTwin Unreal Datasmith Plugin")," installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Depending on your Unreal Engine version, this may require Visual Studio to be installed. The prerequisites section of ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-combined-meshes/#prerequisites"},"Exporting iModel to Unreal Datasmith as a combined mesh"),"\nhas instructions for recompiling the plugin."))),(0,r.kt)("li",{parentName:"ul"},"A reasonable knowledge of blueprint scripting in Unreal Engine"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-preparing-actors-in-your-scene"},"1. Preparing actors in your scene"),(0,r.kt)("p",null,"In the level editor where you see your imported data, you need to add some tags to specific actors so later code can find them easily.\nFrom the ",(0,r.kt)("strong",{parentName:"p"},"World Outliner")," at the top right of the editor, select the datasmith scene actor that was created when you imported your Datasmith content. Then in the ",(0,r.kt)("strong",{parentName:"p"},"Details")," panel,\nsearch for or scroll down to the ",(0,r.kt)("strong",{parentName:"p"},"Actor > Tags")," section and press the plus button to add a new tag, give it a value of \u201cExampleDatasmithScene1\u201d."),(0,r.kt)("p",null,"If you selected the ",(0,r.kt)("em",{parentName:"p"},"combine meshes")," option while exporting, you will have an actor named ScheduleActor as a child of your datasmith scene actor,\nSelect it and give it a new tag with a value of \u201cExampleScheduleActor1\u201d. It is not necessary to have done a combined-mesh export,\nhowever this tutorial will assume you have and write the code to synchronize the exported level sequence with the ScheduleActor\ndriving animations in the combined mesh."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-ui-actor-tags.png",alt:"setting actor tags in the details panel",className:"sample-img-l",mdxType:"TitledImage"}),(0,r.kt)("p",null,"If you have not done so already, in the Content Browser, in the folder where you chose to import your datasmith content, go into the animations subfolder\nand drag-and-drop the ScheduleAnimation asset into the level to add the actor to the scene."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-anim-drag-drop.png",alt:"drag-and-drop-level-sequence",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Make sure the new level sequence actor is selected, and in the ",(0,r.kt)("strong",{parentName:"p"},"Details Panel"),", give it an\nactor tag with a value of \u201cScheduleLevelSequence1\u201d. Still in the ",(0,r.kt)("strong",{parentName:"p"},"Details Panel"),", find the ",(0,r.kt)("strong",{parentName:"p"},"Playback")," settings section, check ",(0,r.kt)("strong",{parentName:"p"},"Auto Play")," and\nset the ",(0,r.kt)("strong",{parentName:"p"},"Loop")," option to ",(0,r.kt)("strong",{parentName:"p"},"Loop Indefinitely"),"."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-ui-set-autoplay.png",alt:"set auto play",className:"sample-img-l",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Using actor tags is one of several ways to make it easy to access actors in the level at runtime in our code. Now that you have them setup,\nyou can use them in the code of the classes that will comprise your user interface.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-setting-up-our-interface-classes"},"2. Setting up our interface classes"),(0,r.kt)("p",null,"In Unreal Engine, ",(0,r.kt)("inlineCode",{parentName:"p"},"HUD")," (Heads Up Display) classes are used to draw the 2-dimensional interface overlaying the rendered scene.\nThe HUD is controlled by the ",(0,r.kt)("inlineCode",{parentName:"p"},"PlayerController")," it is attached to, and both are provisioned by the engine\u2019s active ",(0,r.kt)("inlineCode",{parentName:"p"},"GameMode"),".\nIn this tutorial a basic gamemode setup will be created so when you run your project, the interface will have a scrubber timeline, some\ndisplayed information about the scene, and inputs to control the schedule animation playback."),(0,r.kt)("p",null,"Start by pressing the ",(0,r.kt)("strong",{parentName:"p"},"Add/Import")," button in the Content Browser, and under ",(0,r.kt)("strong",{parentName:"p"},"User Interface")," pick ",(0,r.kt)("strong",{parentName:"p"},"Widget Blueprint")," to create a new\n",(0,r.kt)("em",{parentName:"p"},"Widget Blueprint"),". Name it ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleTimelineWidget"),"."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"The names used in this tutorial are arbitrary. You can use any name as long as you connect the classes correctly."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-ui-createwidgetblueprint.png",alt:"create a widget blueprint by using the add/import button in the Content Browser",className:"sample-img-m",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Next, create a new ",(0,r.kt)("inlineCode",{parentName:"p"},"GameModeBase")," blueprint by pressing the ",(0,r.kt)("strong",{parentName:"p"},"Add/Import")," button in the Content Browser again,\nthis time choosing ",(0,r.kt)("strong",{parentName:"p"},"Blueprint Class")," at the top, under create ",(0,r.kt)("strong",{parentName:"p"},"Create Basic Asset"),". In the ",(0,r.kt)("strong",{parentName:"p"},"Pick Parent Class")," dialog, use the search menu to\nfind the ",(0,r.kt)("inlineCode",{parentName:"p"},"GameModeBase")," class. Some, but not all, classes may also be selected from the ",(0,r.kt)("strong",{parentName:"p"},"Common Classes")," list at the top of the dialog.\nName your new ",(0,r.kt)("inlineCode",{parentName:"p"},"GameModeBase")," subclass ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleGameModeBase"),". In the same way create a new ",(0,r.kt)("inlineCode",{parentName:"p"},"PlayerController")," blueprint, ",(0,r.kt)("inlineCode",{parentName:"p"},"ExamplePlayerController"),",\nand a new ",(0,r.kt)("inlineCode",{parentName:"p"},"HUD")," blueprint, ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleHUD"),", as well. Double-click the newly created ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleHUD")," asset in the content editor to open the blueprint editor."),(0,r.kt)("p",null,"In your HUD\u2019s blueprint event graph, add a ",(0,r.kt)("inlineCode",{parentName:"p"},"Create Widget")," node to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Begin Play")," event and call the ",(0,r.kt)("inlineCode",{parentName:"p"},"Add to Viewport")," function on the created widget reference.\nSet the class parameter of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Create Widget")," node to the blueprint widget class you created, ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleTimelineWidget"),".\nThe resulting node graph for the ",(0,r.kt)("inlineCode",{parentName:"p"},"Begin Play")," event should look as follows."),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-hud-beginplay.png",alt:"screenshot of blueprint code for ExampleHUD class",href:"https://blueprintue.com/blueprint/k0_44j0-/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"sample-img-xl",mdxType:"LinkingImage"}),(0,r.kt)("p",null,"Go back to the Content Browser in the main level editor window and open the ",(0,r.kt)("inlineCode",{parentName:"p"},"ExamplePlayerController")," class. In the ",(0,r.kt)("inlineCode",{parentName:"p"},"Begin Play")," event,\nadd a ",(0,r.kt)("inlineCode",{parentName:"p"},"Get All Actors Of Class with Tag")," node and get all Scheduled Actors with the tag you added earlier, \u201cExampleScheduleActor1\u201d. Get the\nelement at index 0 (the first) element of the array, since we know we have one such actor in the scene, and set it as the value for a new\nvariable, ",(0,r.kt)("inlineCode",{parentName:"p"},"Scene"),". You can drag the output pin of the array indexing ",(0,r.kt)("inlineCode",{parentName:"p"},"Get")," node, and release in the graph space to open the context menu\nand at the top select ",(0,r.kt)("strong",{parentName:"p"},"Promote to variable")," to do this quickly."),(0,r.kt)("p",null,"Then add a ",(0,r.kt)("inlineCode",{parentName:"p"},"Get HUD")," node and a ",(0,r.kt)("inlineCode",{parentName:"p"},"Cast to ExampleHUD")," node after the intialization of ",(0,r.kt)("inlineCode",{parentName:"p"},"Scene"),". Store the ExampleHUD instance in a new variable, ",(0,r.kt)("inlineCode",{parentName:"p"},"PlayerHUD"),"."),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-playercontroller-beginplay.png",alt:"screenshot of player controller's beginplay",href:"https://blueprintue.com/blueprint/02yoz_1_/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"blueprint-img",mdxType:"LinkingImage"}),(0,r.kt)("p",null,"Create a new boolean variable ",(0,r.kt)("inlineCode",{parentName:"p"},"IsMouseCaptured"),", and right-click in the event graph, search in the context menu for \u201cspacebar\u201d to add the\nspace bar input event. Then add the following blueprint code to use spacebar to toggle between controlling our spectator pawn or the mouse."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"See the"," ",(0,r.kt)("a",{href:"https://docs.unrealengine.com/InteractiveExperiences/Input/"},"Unreal Engine input management documentation")," ","for better ways of managing input. Using a direct keyboard event is done for simplicity and there are more robust ways of reacting to input."),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-playercontroller-onspacebar.png",alt:"screenshot of player controller's spacebar event implementation",href:"https://blueprintue.com/blueprint/wdbxp-au/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"blueprint-img",mdxType:"LinkingImage"}),(0,r.kt)("p",null,"Finally, set your world to use these new blueprint classes, so that when the level is played, your widget is\nin the viewport. Click the ",(0,r.kt)("strong",{parentName:"p"},"Settings")," icon in the top bar, and click ",(0,r.kt)("strong",{parentName:"p"},"World Settings")," in its dropdown. In the ",(0,r.kt)("strong",{parentName:"p"},"World Settings")," panel,\nfind the ",(0,r.kt)("strong",{parentName:"p"},"Game Mode")," section. There, see the ",(0,r.kt)("strong",{parentName:"p"},"GameMode Override")," dropdown value to your newly created ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleGameModeBase"),".\nThen expand the ",(0,r.kt)("strong",{parentName:"p"},"Selected GameMode")," options by clicking the arrow to the left of the label, and set the HUD and PlayerController classes to the ones you created."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-ui-gamemode-override.png",alt:"screenshot of gamemode override settings",mdxType:"TitledImage"}),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"In addition to a game mode override for local testing, you may also want to set the default GameMode in the project settings'"," ",(0,r.kt)("strong",null,"Maps & Modes")," section."),(0,r.kt)("p",null,"Now that HUD and widget spawn when play begins, you need to add some controls to your widget to be able to see it, and then you will be able to hook up those controls\nto your iTwin\u2019s animation.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-laying-out-the-hud"},"3. Laying out the HUD"),(0,r.kt)("p",null,"In the Content Browser, double-click the ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleTimelineWidget")," asset you created to open the widget editor. From the ",(0,r.kt)("strong",{parentName:"p"},"Palette")," on the left,\ndrag and drop a ",(0,r.kt)("em",{parentName:"p"},"Slider")," control into the widget designer viewport. Make sure it is selected, and use the scale handles to scale it across the bottom\nedge of the viewport to use as our scrubber. Additionally, place a ",(0,r.kt)("em",{parentName:"p"},"Text")," control at each the left and right end of the slider, and one more above the middle\nof the slider. You will show your iTwin\u2019s schedule start, end, and current time of the animation in these text controls, updating the current time every tick."),(0,r.kt)(k,{src:"/unreal-docs-site/static/images/unreal-ui-widget-building.webm",mdxType:"WebMLoop"}),(0,r.kt)("p",null,"In the ",(0,r.kt)("strong",{parentName:"p"},"Hierarchy")," panel on the left of the editor, rename your newly placed controls respectively to, Scrubber, StartTime, EndTime, and CurrentTime,\nand in the top-right corner of the ",(0,r.kt)("strong",{parentName:"p"},"Details")," panel make sure the ",(0,r.kt)("strong",{parentName:"p"},"Is Variable")," checkbox is checked so you can reference your controls in the event graph."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-ui-isvariable.png",alt:"the location of the Is Variable checkbox in the interface",className:"sample-img-xl",mdxType:"TitledImage"}),(0,r.kt)("p",null,"To start scripting your placed controls, switch to the blueprint graph by pressing the ",(0,r.kt)("strong",{parentName:"p"},"Graph")," button in the top right of the window in the blueprint widget editor.\nOn the widget\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"Construct")," event, first store both the \u201cExampleScheduleActor1\u201d, and the \u201cScheduleLevelSequence1\u201d tagged actors stored to variables in your script.\nThen call the StartTime text control\u2019s ",(0,r.kt)("em",{parentName:"p"},"Set Text")," function and set it to the formatted date text of the ScheduledActor\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"AnimationStartTime"),". Do the same\nfor EndTime but with the ScheduledActor\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"AnimationEndTime"),"."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"If you did not perform an export with the ",(0,r.kt)("em",null,"combine meshes")," option, the ScheduledActor's static blueprint function"," ",(0,r.kt)("a",{href:"/unreal/integration/blueprint-api-reference/#AScheduledActor::GetSeparatedExportSceneData"},(0,r.kt)("code",null,"GetSeparatedExportSceneData"))," ","can be called with your Datasmith Scene Actor to receive the"," ",(0,r.kt)("code",null,"ScheduleStartDateTime"),", ",(0,r.kt)("code",null,"ScheduleEndDateTime"),", and"," ",(0,r.kt)("code",null,"ScheduleTicksPerSecond"),"."),(0,r.kt)("p",null,"Then add a custom event to the event graph by right-clicking in the graph and search\nfor ",(0,r.kt)("strong",{parentName:"p"},"Add Custom Event"),' in the context menu. Name this event "Set Correct Level\nSequence End", and invoke the event after the variables are initialized in the Construct\nevent that you have been building up.'),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-timelinewidget-beginplay.png",alt:"screenshot of timeline widget's construct event",href:"https://blueprintue.com/blueprint/1fqeenu4/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"blueprint-img",mdxType:"LinkingImage"}),(0,r.kt)("p",null,"Before you implement that custom event, in the tick event update the CurrentText control with the current time of the ScheduleActor. If you did not combine meshes during export,\nyou can instead use the static plugin blueprint function ",(0,r.kt)("a",{parentName:"p",href:"/unreal/integration/blueprint-api-reference/#AScheduledActor::GetScheduleDateTimeFromActiveSequence"},(0,r.kt)("inlineCode",{parentName:"a"},"GetScheduleDateTimeFromActiveSequence")),"\nto get the current date given the level sequence actor. Then, after having set the text, calculate the proportion of the animation played and update Scrubber\u2019s value to match, so that it moves along\nwith the animation every tick."),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-timelinewidget-tick.png",alt:"screenshot of timeline widget's tick event",href:"https://blueprintue.com/blueprint/m5zhmaz-/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"blueprint-img",mdxType:"LinkingImage"}),(0,r.kt)("p",null,"Now you should implement the custom event, ",(0,r.kt)("inlineCode",{parentName:"p"},"SetCorrectLevelSequenceEnd"),". This step is necessary to synchronize the exported level sequence with the ScheduledActor,\nbecause the DatasmithSDK does not currently have a way to set the end frame of a level sequence. When an export is created with the combine meshes option, only\ntransform data is put in the level sequence, therefore the true end frame which is typically a non-transform frame (i.e. visibility, color, etc, frame) is lost.\nTo compensate for this, you can calculate the end frame manually from the metadata, and set the correct end time at startup. You could also set the end of the level sequence\nasset itself, but a one-time computation at startup is not expensive and does not need to be recalculated in the event of a re-export of your Datasmith content."),(0,r.kt)("p",null,"To calculate it, divide the schedule date range using the ",(0,r.kt)("inlineCode",{parentName:"p"},"AnimationTicksPerSecondScale")," variable to find how many 24FPS frames occur during the equivalent game time, which\ncan then be used to set the level sequence end frame from. In this example int64 is used in order to have the same resolution as DateTime which is internally a single int64.\nAdditionally, some constants from Unreal\u2019s native ",(0,r.kt)("inlineCode",{parentName:"p"},"ETimespan")," enumeration are reproduced to calculate the amount of ticks from the amount of seconds using only available blueprint nodes."),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-setcorrectlevelsequenceend.png",alt:"screenshot of player timeline widget's custom event 'set correct level sequence end'",href:"https://blueprintue.com/blueprint/aug9_doq/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"blueprint-img",mdxType:"LinkingImage"}),(0,r.kt)("p",null,"Now, when you hit the ",(0,r.kt)("strong",{parentName:"p"},"Play")," button to watch the scene unfold, your animations should play and loop, with the scrubber moving and the date text updating throughout. You should\nalso be able to press the spacebar to get control of the mouse in order to move the scrubber. Moving the scrubber however, won\u2019t do anything. That is your next step.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-scripting-the-scrubber"},"4. Scripting the scrubber"),(0,r.kt)("p",null,"Go back to the widget designer by hitting the ",(0,r.kt)("strong",{parentName:"p"},"Designer")," button at the top-right of the widget blueprint graph. Select your scrubber control in the ",(0,r.kt)("strong",{parentName:"p"},"Hierarchy")," tab,\nand in the ",(0,r.kt)("strong",{parentName:"p"},"Details")," tab scroll all the way to the bottom to the ",(0,r.kt)("strong",{parentName:"p"},"Events")," section. Click the green plus ",(0,r.kt)("strong",{parentName:"p"},"On Mouse Capture Begin"),", ",(0,r.kt)("strong",{parentName:"p"},"On Mouse Capture End"),",\nand ",(0,r.kt)("strong",{parentName:"p"},"On Value Changed")," buttons to add those events. Each time you press one of the buttons, you will be taken to where the event was added in the graph, go back to the\ndesigner each time until all three events have been added."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-ui-widget-add-callbacks.png",alt:"the green plus buttons that let you add callbacks for scrubber controls to the event graph",className:"sample-img-xl",mdxType:"TitledImage"}),(0,r.kt)("p",null,"On mouse capture, pause the animation, so that the scene does not keep playing while a user is trying to scrub through it. In the ",(0,r.kt)("inlineCode",{parentName:"p"},"On Mouse Capture Begin")," event,\nset the ScheduleActor\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"AnimationIsPlaying")," variable to false, and call the ",(0,r.kt)("inlineCode",{parentName:"p"},"Pause")," function on the level sequence. In the ",(0,r.kt)("inlineCode",{parentName:"p"},"On Mouse Capture End")," event, do the opposite,\nsetting ",(0,r.kt)("inlineCode",{parentName:"p"},"AnimationIsPlaying")," to true, and calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"Play")," function on the level sequence."),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-timelinewidget-onmouse.png",alt:"the implementation of On Mouse Capture events for the ExampleTimelineWidget for playback control",href:"https://blueprintue.com/blueprint/vt_82mpw/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"sample-img-xl",mdxType:"LinkingImage"}),(0,r.kt)("p",null,"Finally, you must implement the ",(0,r.kt)("inlineCode",{parentName:"p"},"On Value Changed")," event by converting the scrubber value from between 0 and 1 to the appropriate date in the schedule for setting the\nScheduleActor\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"AnimationTime"),", and you must calculate the proportional time in the level sequence and call its ",(0,r.kt)("inlineCode",{parentName:"p"},"SetPlaybackPosition")," function. The necessary math for\ntransforming from the value between 0 and 1 to the level sequence seconds and schedule date time can be seen in the following blueprint code."),(0,r.kt)(h,{src:"/unreal-docs-site/static/images/unreal-ui-timelinewidget-onvaluechanged.png",alt:"the implementation of On Value Changed for the ExampleTimelineWidget",href:"https://blueprintue.com/blueprint/brwbb3iz/",tooltip:"Click to interact or copy nodes at blueprintue.com",className:"blueprint-img",mdxType:"LinkingImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"With your scene scrubber now working, you should be able to start extending the code with your own inputs and controls,\nsuch as using custom interface control styles, or new inputs like pause buttons, etc. For a full list of available blueprint\nfunctions in the iTwin Unreal Datasmith Plugin, see the ",(0,r.kt)("a",{parentName:"p",href:"/unreal/integration/blueprint-api-reference/"},"Blueprint API reference"),"."),(0,r.kt)("p",null,"If you have an idea for something that could improve your workflow and belongs in the plugin, visit ",(0,r.kt)("a",{parentName:"p",href:"https://itwinplatform.ideas.aha.io/?category=7010781758179112615"},"our ideas portal"),".")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{title:"iTwin Exporter for Datasmith documentation",href:"/unreal/integration/documentation/",description:"Extended functionality and workflow descriptions in iTwin Exporter for Datasmith",mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"The iTwin Unreal Datasmith Plugin Blueprint api reference",href:"/unreal/integration/blueprint-api-reference/",description:"Follow this tutorial to get iModel data into the Datasmith format as a combined mesh",mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Unreal example HUD",href:"https://docs.unrealengine.com/Resources/ContentExamples/Blueprints_HUD/1_1/",description:"See the official example HUD in Unreal to learn some HUD design techniques and best practices",isExternal:!0,mdxType:"ResourceTile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-preparing-actors-in-your-scene",level:2,title:"1. Preparing actors in your scene",children:[]},{id:"2-setting-up-our-interface-classes",level:2,title:"2. Setting up our interface classes",children:[]},{id:"3-laying-out-the-hud",level:2,title:"3. Laying out the HUD",children:[]},{id:"4-scripting-the-scrubber",level:2,title:"4. Scripting the scrubber",children:[]},{id:"conclusion",level:2,title:"Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},55010:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Processing iModel metadata in Unreal Visual Dataprep",tile:{name:"Processing iModel metadata in Unreal Visual Dataprep",description:"Create Unreal Dataprep scripts that use your iTwin data",thumbnail:"/unreal-docs-site/static/images/unreal-export-dataprep-cover-thumb.jpg",href:"/tutorials/itwin-unreal-dataprep",durationInMinutes:10,relatedApiIds:["itwin-unreal"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("WebMLoop"),m=p("TitledImage"),h=p("Alert"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",summaryImageSrc:"/unreal-docs-site/static/images/unreal-export-dataprep-cover.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial guides you through the basics of using Visual Dataprep with iTwin metadata exported using the iTwin Exporter for Datasmith.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.unrealengine.com/download"},"Unreal Engine 4.26.1")," and the ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com/unreal/"},"iTwin Exporter for Datasmith")," installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The full list of prerequisites can be found in the prerequisites section of ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-combined-meshes/#prerequisites"},"Exporting iModel to Unreal Datasmith as a combined mesh"),"."))),(0,r.kt)("li",{parentName:"ul"},"An existing Datasmith export made with the iTwin Exporter for Datasmith. If you need one, you may complete one of the following tutorials:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-combined-meshes/"},"Exporting iModel to Unreal Datasmith as a combined mesh")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-filtering/"},"Exporting an iModel to Unreal with filters")))),(0,r.kt)("li",{parentName:"ul"},"An existing Unreal Engine project with the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-combined-meshes/#3-install-the-itwin-unreal-datasmith-plugin-in-your-unreal-project"},"iTwin Unreal Datasmith Plugin")," installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Depending on your Unreal Engine version, this may require Visual Studio to be installed. The prerequisites section of ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/itwin-unreal-export-combined-meshes/#prerequisites"},"Exporting iModel to Unreal Datasmith as a combined mesh"),"\nhas instructions for recompiling the plugin."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-import-your-datasmith-content-into-a-new-dataprep-recipe"},"1. Import your Datasmith content into a new Dataprep recipe"),(0,r.kt)("p",null,"Create a new Dataprep recipe. Right-click within the content browser. Under ",(0,r.kt)("strong",{parentName:"p"},"Create Advanced Asset"),", select\nthe ",(0,r.kt)("strong",{parentName:"p"},"Dataprep")," asset category, then the ",(0,r.kt)("strong",{parentName:"p"},"Dataprep Asset")," type."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-create-dataprep-asset.webm",mdxType:"WebMLoop"}),(0,r.kt)("p",null,"Double-click the new asset in the content browser to open it in the ",(0,r.kt)("strong",{parentName:"p"},"Dataprep Recipe Editor"),".\nAt the top right in the ",(0,r.kt)("strong",{parentName:"p"},"Inputs")," section, press the plus button, then browse for the ",(0,r.kt)("inlineCode",{parentName:"p"},".udatasmith")," file created during your export.\nThis adds your Datasmith content to the Recipe editor."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-dataprep-add-import-provider.webm",mdxType:"WebMLoop"}),(0,r.kt)("p",null,"When the import is complete, select any actor in the viewport.\nIn the Property Pane on the right side, scroll down to ",(0,r.kt)("strong",{parentName:"p"},"Asset User Data > Datasmith User Data")," to inspect fields that are available to match\non, as well as compare those values on different objects."),(0,r.kt)(m,{src:"/unreal-docs-site/static/images/unreal-export-dataprep-metadata-view.png",alt:"inspect metadata properties in the dataprep editor",mdxType:"TitledImage"}),(0,r.kt)("p",null,"It may be helpful to read the text in read-only entries using the tooltips. To do so, hover over them, or even\nright-click to be able to copy the text. For clarity, the above image has a few sample labels annotated."),(0,r.kt)("p",null,"Alternatively, inspect your element properties in the iTwin Exporter for Datasmith in the ",(0,r.kt)("strong",{parentName:"p"},"Properties")," tab.\nBe aware that names here will not be the same as names in the metadata in Unreal.\nTo avoid name collisions and because Datasmith has specific rules for metadata entry names, we have added prefixes to the names in Unreal.\nBecause of this, it is recommended to find the entry name in Unreal once you have the metadata you intend to match on."),(0,r.kt)(m,{src:"/unreal-docs-site/static/images/unreal-export-app-property-tab.png",alt:"inspect metadata properties in the itwin exporter for Datasmith app",className:"sample-img-xl",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-substitute-a-material"},"2. Substitute a material"),(0,r.kt)("p",null,"Dateprep recipes allow you to programmatically modify your scene.\nFor example, quickly substituting pieces of an imported scene, such as the materials used or placed actors.\nFor demonstration purposes, let\u2019s substitute a default material with one of Unreal\u2019s high-quality starter content materials."),(0,r.kt)("p",null,"Search through your iTwin\u2019s imported metadata for something you want to match on.\nIn our iTwin we found the ",(0,r.kt)("inlineCode",{parentName:"p"},"objectStructualUsage_StructuralMaterial")," metadata property, and see that it has a value of ",(0,r.kt)("inlineCode",{parentName:"p"},"Timber")," for our inspected\nactor, which we will filter on to make sure all \u201cTimber\u201d items use a high-quality wood material.\nAdd a ",(0,r.kt)("em",{parentName:"p"},"Metadata Value")," filter and set the match type to ",(0,r.kt)("em",{parentName:"p"},"Exact Match"),". Then, add a ",(0,r.kt)("em",{parentName:"p"},"Set Material")," operator and choose from any material in your\nproject."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-dataprep-set-mat.webm",mdxType:"WebMLoop"}),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Your metadata will not necessarily match the properties we use here. The metadata in your iTwin is entirely dependent on the source files synchronized to it. If you expect to see specific metadata in your iTwin but do not see it in the viewer's ",(0,r.kt)("strong",null,"Properties")," tab, please ask why at the iTwin.js"," ",(0,r.kt)("a",{href:"https://github.com/iTwin/itwinjs-core/discussions/"},"Github Discussions")," ","page."),(0,r.kt)("p",null,"When you are satisifed with your changes to the Dataprep recipe, press the ",(0,r.kt)("strong",{parentName:"p"},"Execute")," button to run the operator graph and\nmake your material substitution visible in the viewport."),(0,r.kt)(m,{src:"/unreal-docs-site/static/images/unreal-export-dataprep-exec-button.png",alt:"The execute button in the dataprep editor",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-substituting-materials-with-a-table"},"3. Substituting materials with a table"),(0,r.kt)("p",null,"For managing substitution of many materials, it may be useful to use Dataprep\u2019s ",(0,r.kt)("em",{parentName:"p"},"Substitute Material By Table")," operator.\nAdd the operator and in its parameters click the ",(0,r.kt)("strong",{parentName:"p"},"Material Data Table")," parameter\u2019s asset selection.\nUnder the ",(0,r.kt)("strong",{parentName:"p"},"Create New Asset")," section at the top, click ",(0,r.kt)("strong",{parentName:"p"},"Data Table"),".\nIn the ",(0,r.kt)("strong",{parentName:"p"},"Pick Row Structure")," dialog, pick ",(0,r.kt)("em",{parentName:"p"},"MaterialSubstitutionDataTable")," and choose the folder to create the new asset in.\nDouble-click the asset\u2019s thumbnail in the operator parameters to quickly open your new table in the data table editor.\nClick the ",(0,r.kt)("strong",{parentName:"p"},"Add Row")," button to add a material substitution which consists of a search string, search match type, and the target material.\nUnreal also supports loading table rows from CSV and JSON data from the ",(0,r.kt)("strong",{parentName:"p"},"Details Pane")," in the data table editor."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-mat-sub-table.webm",controls:"",mdxType:"WebMLoop"}),(0,r.kt)("p",null,"This concludes our demonstration of using iTwin metadata in Dataprep.\nDataprep has many more operators for common processes like simplifying, decimating, and merging geometry, or populating surfaces with high-quality assets\nsuch as animated foliage assets. You can also create your own Dataprep operators with Unreal\u2019s Blueprints.\nThe full Dataprep documentation from Unreal can be found ",(0,r.kt)("a",{parentName:"p",href:"https://docs.unrealengine.com/WorkingWithContent/Importing/Dataprep/"},"here"),".")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"iTwin Exporter for Datasmith documentation",href:"/unreal/integration/documentation/",description:"Extended functionality and workflow descriptions in iTwin Exporter for Datasmith",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Exporting iModel to Unreal Datasmith as a combined mesh",href:"/tutorials/itwin-unreal-export-combined-meshes/",description:"Follow this tutorial to get iModel data into the Datasmith format as a combined mesh.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Using Unreal Visual Dataprep",href:"https://docs.unrealengine.com/WorkingWithContent/Importing/Dataprep/",description:"Unreal's documentation on Visual Dataprep",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-import-your-datasmith-content-into-a-new-dataprep-recipe",level:2,title:"1. Import your Datasmith content into a new Dataprep recipe",children:[]},{id:"2-substitute-a-material",level:2,title:"2. Substitute a material",children:[]},{id:"3-substituting-materials-with-a-table",level:2,title:"3. Substituting materials with a table",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},84514:function(e,t,n){"use strict";n.d(t,{Jt:function(){return f},Pu:function(){return s},ZP:function(){return y}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Exporting an iModel to Unreal Datasmith as a combined mesh",tile:{name:"Exporting an iModel to Unreal Datasmith as a combined mesh",description:"Follow this tutorial to get iModel data into the Datasmith format as a combined mesh.",thumbnail:"/unreal-docs-site/static/images/unreal-export-app-fullscreen.png",href:"/tutorials/itwin-unreal-export-combined-meshes",durationInMinutes:20,relatedApiIds:["itwin-unreal"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("TitledImage"),m=p("ContinueLearningSection"),h=p("TileList"),k=p("ResourceTile"),g={metadata:s};function y(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",summaryImageSrc:"/unreal-docs-site/static/images/unreal-export-app-fullscreen-wide.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will guide you through exporting your iTwin into the Datasmith format, and then importing that file directly\ninto Unreal Engine.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.unrealengine.com/download"},"Unreal Engine 4.26.1")," or later installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"It is recommended to install Unreal before the iTwin Exporter for Datasmith app because\nthe app requires some components that Unreal will install for you. If you want to install\nthe exporter first anyway, the application will direct you to manually install the\ncomponents that Unreal would install."))),(0,r.kt)("li",{parentName:"ul"},"the iTwin Exporter for Datasmith application installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The installer can be downloaded by clicking \u201cDownload now\u201d ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com/unreal/"},"here"),", and then running the installer will complete the installation."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://visualstudio.microsoft.com/downloads"},"Visual Studio")," installed, and the \u201cGame Development with C++\u201d and \u201c.NET desktop development\u201d workloads installed.\nYou must also have the additional ",(0,r.kt)("inlineCode",{parentName:"li"},"Microsoft.NETCore.App"),", version 3.1.0 component installed, and your Visual Studio build tools must be up to date.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If Visual Studio\u2019s build tools are not up to date, the plugin may fail to compile on later Unreal Engine versions. Be sure to open the Visual Studio installer and update."))),(0,r.kt)("li",{parentName:"ul"},"an Unreal project set up, you can follow Epic\u2019s\n",(0,r.kt)("a",{parentName:"li",href:"https://docs.unrealengine.com/Basics/Projects/Browser/"},"Creating a New Project")," guide if you don\u2019t have one.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"We recommend using the ",(0,r.kt)("em",{parentName:"li"},"Architecture, Engineering ","&"," Construction")," template so the required Datasmith importer plugin is enabled.\nIf you choose not to do this, you will need to enable that plugin yourself in your project\u2019s settings.")))),(0,r.kt)("p",null,"Make sure you install both ",(0,r.kt)("strong",{parentName:"p"},"C++ Game Development")," and ",(0,r.kt)("strong",{parentName:"p"},".NET desktop development")," workloads for Visual Studio, and have recently updated Visual Studio."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-vs-workloads.png",alt:"visual studio required workloads",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-select-your-imodel"},"1. Select your iModel"),(0,r.kt)("p",null,"The iTwin Exporter for Datasmith opens to the sign in page. Hit the ",(0,r.kt)("strong",{parentName:"p"},"Sign In button")," to be prompted to log in through your\ndefault browser. This will bring you to the ",(0,r.kt)("strong",{parentName:"p"},"iModel Select Screen")," of your most recent project."),(0,r.kt)("p",null,"To access other projects, select the project dropdown in the header and choose one of the recent projects or click\n",(0,r.kt)("strong",{parentName:"p"},"See all my projects")," to open the ",(0,r.kt)("strong",{parentName:"p"},"Project Select Screen"),"."),(0,r.kt)("p",null,"Upon entering either of the select screens, the search box in the top-right is focused, so you can immediately type to filter\nby name and find your iModel or project if you have several."),(0,r.kt)("p",null,"To see not only your most recent project\u2019s models, click the ",(0,r.kt)("strong",{parentName:"p"},"See all your projects")," option in the project dropdown"),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-see-all-projects.png",alt:"see all projects button placement",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-export-your-imodel-as-a-combined-mesh"},"2. Export your iModel as a combined-mesh"),(0,r.kt)("p",null,"Once you\u2019ve selected your project and found your iModel, you can perform an export immediately by clicking the ",(0,r.kt)("strong",{parentName:"p"},"Export Button"),"."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-imodel-tile-quick-export.png",alt:"quick 'export' button on the tile",mdxType:"TitledImage"}),(0,r.kt)("p",null,"This will bring up the ",(0,r.kt)("strong",{parentName:"p"},"Advanced Export Dialog"),", from which you can toggle on the ",(0,r.kt)("strong",{parentName:"p"},"Combine All Meshes Toggle"),", and then\npress the ",(0,r.kt)("strong",{parentName:"p"},"Confirm Export Button")," at the bottom of the dialog."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-advanced-dialog-combined.png",alt:"the advanced export dialog as it appears after using the quick export button",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("p",null,"Simply press the button and use your system\u2019s save file dialog to choose under what name and where to save the resulting datasmith\ncontent. Then wait for the export to complete, which is signified by a green success message appearing."),(0,r.kt)("p",null,"You may also click on your iModel card\u2019s image or its ",(0,r.kt)("strong",{parentName:"p"},"View Button"),"\nto enter the viewer, and can run a combined-mesh export with the left-most button in the top-left horizontal toolbar."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/unreal-export-in-viewer-combined-export-button.png",alt:"in-viewer button"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-export-result"},"2.1. Export Result"),(0,r.kt)("p",null,"Once the export has completed,\nyou should have a file as you named it, like ",(0,r.kt)("inlineCode",{parentName:"p"},"myIModelName.udatasmith")," and an ",(0,r.kt)("inlineCode",{parentName:"p"},"_Assets")," folder with the same name as a prefix, for example ",(0,r.kt)("inlineCode",{parentName:"p"},"myIModelName_Assets"),",\nin your chosen export location. You should be able to find them in your file browser."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/unreal-export-result-files-windows.png",alt:"Resulting Datasmith Files"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-install-the-itwin-unreal-datasmith-plugin-in-your-unreal-project"},"3. Install the iTwin Unreal Datasmith Plugin in your Unreal project"),(0,r.kt)("p",null,"Now we can navigate back to the select screen and use the plugin installer button to install the iTwin Unreal Datasmith Plugin to our Unreal project.\nHit the ",(0,r.kt)("strong",{parentName:"p"},"Home Button")," in the top left, or use the project dropdown and press the ",(0,r.kt)("strong",{parentName:"p"},"See all my projects")," option to navigate back to the ",(0,r.kt)("strong",{parentName:"p"},"Project Select Screen"),"."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-nav-home.png",alt:"navigate home button placement",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("p",null,"From the select screen, you can press the blue ",(0,r.kt)("strong",{parentName:"p"},"Install Plugin Button")," at the bottom of the application, and in the file dialog find the ",(0,r.kt)("inlineCode",{parentName:"p"},".uproject")," file belonging\nto your Unreal project you created. Just choose that ",(0,r.kt)("inlineCode",{parentName:"p"},".uproject")," file and the plugin will be installed to that project."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-install-plugin-button.png",alt:"install plugin button placement",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Make sure to close and reopen the Unreal project if it is open. Upon opening the project for the first time since the installation,\nit may prompt to rebuild the plugin. This is normal, and you should just allow it and wait for it to finish.\nIt may also say that it was designed for a different engine version, but you can ignore this and tell it to continue building,\nthe plugin has been tested in Unreal Engine versions 4.26.0 through 5.0.1 as of writing.\nIf the rebuild fails, make sure you\u2019ve met all of the ",(0,r.kt)("a",{parentName:"p",href:"#prerequisites"},"Prerequisites"),"."),(0,r.kt)("img",{alt:"rebuild prompt",src:"/unreal-docs-site/static/images/unreal-export-rebuild-prompt.png",class:"sample-img-m"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-import-your-imodel"},"4. Import your iModel"),(0,r.kt)("p",null,"In the Unreal Engine editor, use the Datasmith import button to open a file system dialog and select your ",(0,r.kt)("inlineCode",{parentName:"p"},".udatasmith")," file\nto import it into the scene."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-editor-import-button.png",alt:"unreal editor's datasmith import button placement",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Choose a folder to place the content imported from Datasmith into in your content browser, then change any other import settings you need,\nsuch as disabling lightmap UV generation if you will only be using dynamic lights to light your scene in Unreal.\nThen just wait for the import process to finish.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"41-enable-transformation-animations-if-your-scene-is-animated"},"4.1. Enable transformation animations if your scene is animated"),(0,r.kt)("p",null,"If your scene has a schedule script or other animations, a Level Sequence\nasset will have been created to control the objects with transform animations. Due to limitations in the Datasmith API, you must manually add\nthe level sequence to the scene. Consult Unreal Engine\u2019s ",(0,r.kt)("a",{parentName:"p",href:"https://docs.unrealengine.com/AnimatingObjects/Sequencer/Overview/"},"Sequencer Overview"),"\nfor more information on level sequences."),(0,r.kt)("p",null,"Open the ",(0,r.kt)("inlineCode",{parentName:"p"},"Animations")," subfolder in the folder where you chose to import. The folder will only exist if you have transformation animations. You can drag and drop\nthe animation asset into the viewport to add it to the scene."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-anim-drag-drop.png",alt:"drag-and-drop-level-sequence",mdxType:"TitledImage"})),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Then, in the properties of the newly spawned Level Sequence Actor, toggle the ",(0,r.kt)("strong",{parentName:"p"},"Auto Play")," checkbox so that it is checked, which matches the default auto play\nset for the ",(0,r.kt)("a",{parentName:"p",href:"/unreal/integration/blueprint-api-reference#AScheduledActor"},"ScheduledActor")," in your combined-mesh scene that controls the non-transformation animations."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/unreal-export-set-autoplay.png",alt:"auto play"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-use-a-realistic-material"},"5. Use a realistic material"),(0,r.kt)("p",null,"Unreal\u2019s starter content comes with a few high-fidelity materials that we can use to test realistic materials on our iModel.\nFor a simple start to applying materials, open ",(0,r.kt)("inlineCode",{parentName:"p"},"StarterContent/Materials")," in the content browser and drag and drop materials\nonto your static meshes."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-start-materials.png",alt:"starter content materials from unreal engine",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("p",null,"We dragged and dropped some glass, concrete, metal, grass, wood, and cobblestone into our scene to see some high-fidelity materials."),(0,r.kt)("p",null,"Our sample scene would particularly have benefited from filtering out the tree and grass models and replacing them with more realistic or\nanimated ones, but that is something to explore in your Unreal project."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/unreal-export-high-quality-materials.png",alt:"scene after drag and drop"}))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"51-opt-in-to-visibility-animation"},"5.1. Opt-in to visibility animation"),(0,r.kt)("p",null,"Materials must opt-in to visibility animation if using the combined-mesh export. You can edit materials attached to your\nmesh by double clicking the material in the material slots of your static mesh actor\u2019s properties."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-material-slots.png",alt:"material slots of combined mesh",mdxType:"TitledImage"})),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Then select the material result node, if it is not already automatically selected as you open the editor, and set your\nmaterial\u2019s blend mode in the details panel to \u201cmasked\u201d, unless it is already \u201ctranslucent\u201d in which case leave it as is.\nFor more information on material blend modes in Unreal, see the documentation article\n",(0,r.kt)("a",{parentName:"p",href:"https://docs.unrealengine.com/RenderingAndGraphics/Materials/MaterialProperties/BlendModes/"},"Material Blend Modes"),"."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-set-material-blend-mode.png",alt:"material editor blend mode dropdown",mdxType:"TitledImage"}),(0,r.kt)("p",null,"Finally, right click in open space to the left of the result node and use the search to place a ",(0,r.kt)("inlineCode",{parentName:"p"},"MaterialFunctionCall")," node. In the details\npanel, you can select a Material Function to use for this node, use ",(0,r.kt)("inlineCode",{parentName:"p"},"MF_SynchroVisibilityAnimate")," which comes with the plugin.\nDrag the output pin of the function to the ",(0,r.kt)("strong",{parentName:"p"},"Opacity Mask")," result pin (or ",(0,r.kt)("strong",{parentName:"p"},"Opacity")," if the material was translucent)."),(0,r.kt)("p",null,"Now save and apply your material in the top left of the material editor, and your material will animate correctly with the visibility of the scene.")),(0,r.kt)(m,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(h,{mdxType:"TileList"},(0,r.kt)(k,{title:"iTwin Exporter for Datasmith documentation",href:"/unreal/integration/documentation/",description:"Extended functionality and workflow descriptions in iTwin Exporter for Datasmith",mdxType:"ResourceTile"}),(0,r.kt)(k,{title:"Importing Datasmith content into Unreal",href:"https://docs.unrealengine.com/WorkingWithContent/Importing/Datasmith/HowTo/ImportingContent/",description:"Unreal's documentation on importing datasmith content",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(k,{title:"Processing iModel metadata in Unreal's Visual Dataprep",href:"/tutorials/itwin-unreal-dataprep/",description:"Create Unreal Dataprep scripts that use your iTwin data",mdxType:"ResourceTile"}))))}y.isMDXComponent=!0;var f=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-select-your-imodel",level:2,title:"1. Select your iModel",children:[]},{id:"2-export-your-imodel-as-a-combined-mesh",level:2,title:"2. Export your iModel as a combined-mesh",children:[{id:"21-export-result",level:3,title:"2.1. Export Result",children:[]}]},{id:"3-install-the-itwin-unreal-datasmith-plugin-in-your-unreal-project",level:2,title:"3. Install the iTwin Unreal Datasmith Plugin in your Unreal project",children:[]},{id:"4-import-your-imodel",level:2,title:"4. Import your iModel",children:[{id:"41-enable-transformation-animations-if-your-scene-is-animated",level:3,title:"4.1. Enable transformation animations if your scene is animated",children:[]}]},{id:"5-use-a-realistic-material",level:2,title:"5. Use a realistic material",children:[{id:"51-opt-in-to-visibility-animation",level:3,title:"5.1. Opt-in to visibility animation",children:[]}]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},9546:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Exporting an iModel to Unreal with filters",tile:{name:"Exporting an iModel to Unreal with filters",description:"Control which parts of an iModel are exported while exporting it to Unreal",thumbnail:"/unreal-docs-site/static/images/unreal-export-filtering-tutorial-featured-thumb.png",href:"/tutorials/itwin-unreal-export-filtering",durationInMinutes:5,relatedApiIds:["itwin-unreal"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("TitledImage"),m=p("WebMLoop"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"5",summaryImageSrc:"/unreal-docs-site/static/images/unreal-export-filtering-tutorial-featured-wide.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial guides you through filtering your iTwin\u2019s content while exporting it to the Datasmith format for use in Unreal."),(0,r.kt)("p",null,"If you encounter problems while using this tutorial, we recommend first completing the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/itwin-unreal-export-combined-meshes/"},"combined-mesh export tutorial")," which\nis more thorough.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.unrealengine.com/download"},"Unreal Engine 4.26.1")," or later installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"We recommend installing Unreal before the iTwin Exporter for Datasmith app.\nUnreal installs components needed by both applications. If you would like to install the iTwin Exporter for Datasmith first,\nyou must install the necessary components manually. Upon startup the application detects if the components are missing and\nprovides you with links to navigate to their installers."))),(0,r.kt)("li",{parentName:"ul"},"the iTwin Exporter for Datasmith application installed.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"To download the installer, please visit the ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com/unreal/"},"iTwin for Unreal")," page and click ",(0,r.kt)("strong",{parentName:"li"},"Download Now"),"."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-view-your-imodel"},"1. View your iModel"),(0,r.kt)("p",null,"Open the iTwin Exporter for Datasmith, sign in, and select your project and iModel. Click the ",(0,r.kt)("strong",{parentName:"p"},"View")," to open the iModel\nand to use the interactive filtering tools."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-model-view-button.png",alt:"See all projects button placement",className:"sample-img-default",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-hide-in-the-tree-view"},"2. Hide in the Tree View"),(0,r.kt)("p",null,"On the right side of the viewport, use the ",(0,r.kt)("strong",{parentName:"p"},"Tree View")," widget to toggle the visibility of portions of your iModel.\nHide models and elements via the ",(0,r.kt)("strong",{parentName:"p"},"Model Tree"),", the ",(0,r.kt)("strong",{parentName:"p"},"Categories"),", or ",(0,r.kt)("strong",{parentName:"p"},"Spatial Containment"),". Below,\nwe hide one model with all of its contained elements."),(0,r.kt)(m,{src:"/unreal-docs-site/static/images/unreal-export-tree-view-hide.webm",mdxType:"WebMLoop"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-hide-by-viewport-selection"},"3. Hide by viewport selection"),(0,r.kt)("p",null,"You may also visually select and hide models and elements. With the default selection tool active,\nleft-click elements to select them, hold control to add to your selection.\nThen use the visibility tools in the top left side to hide your selection among other operations."),(0,r.kt)(m,{src:"/unreal-docs-site/static/images/unreal-export-viewport-hide.webm",mdxType:"WebMLoop"}),(0,r.kt)("p",null,"Make sure to change your selection scope in the bottom-right of the viewport\nif you want to select individual elements, the default is to select top-level assemblies.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-use-a-saved-view"},"4. Use a saved view"),(0,r.kt)("p",null,"You can save the viewport visibility state as a ",(0,r.kt)("em",{parentName:"p"},"Saved View")," using the ",(0,r.kt)("strong",{parentName:"p"},"Saved View")," widget. A ",(0,r.kt)("em",{parentName:"p"},"Saved View")," enables you to load it again\nfor future exports, or load it as a baseline for visibility changes before exporting."),(0,r.kt)(u,{src:"/unreal-docs-site/static/images/unreal-export-create-saved-view.png",alt:"Create a saved view",className:"sample-img-xl",mdxType:"TitledImage"})),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-export-the-current-view"},"5. Export the current view"),(0,r.kt)("p",null,"Press the ",(0,r.kt)("strong",{parentName:"p"},"Advanced Export")," tool button to open the ",(0,r.kt)("strong",{parentName:"p"},"Advanced Export")," dialog. Select ",(0,r.kt)("strong",{parentName:"p"},"View")," in the ",(0,r.kt)("strong",{parentName:"p"},"Filter By"),"\ndropdown. The default ",(0,r.kt)("strong",{parentName:"p"},"View Name")," is the current view. To filter the export using a different view, use the ",(0,r.kt)("strong",{parentName:"p"},"View Name")," dropdown to select it.\nThe ",(0,r.kt)("strong",{parentName:"p"},"View Name")," dropdown lists any ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/core-backend/viewdefinitions/viewdefinition/"},"View Definitions"),"\nor saved views associated with your iModel."),(0,r.kt)(m,{src:"/unreal-docs-site/static/images/unreal-export-filtering-export.webm",mdxType:"WebMLoop"}),(0,r.kt)("h2",{id:"6-additional-filtering-options"},"6. Additional filtering options"),(0,r.kt)("p",null,"Hover over options in the ",(0,r.kt)("strong",{parentName:"p"},"Advanced Export")," dialog for explanatory tooltips for every option.\nAdvanced users may filter by ",(0,r.kt)("em",{parentName:"p"},(0,r.kt)("a",{parentName:"em",href:"https://www.itwinjs.org/learning/ecsql/"},"ECSQL")," Query")," for programmatic control of iModel contents considered for\nexport.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"iTwin Exporter for Datasmith documentation",href:"/unreal/integration/documentation/",description:"Extended functionality and workflow descriptions in iTwin Exporter for Datasmith",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Exporting iModel to Unreal Datasmith as a combined mesh",href:"/tutorials/itwin-unreal-export-combined-meshes/",description:"Follow this tutorial to get iModel data into the Datasmith format as a combined mesh.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Processing iModel metadata in Unreal's Visual Dataprep",href:"/tutorials/itwin-unreal-dataprep/",description:"Create Unreal Dataprep scripts that use your iTwin data",mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-view-your-imodel",level:2,title:"1. View your iModel",children:[]},{id:"2-hide-in-the-tree-view",level:2,title:"2. Hide in the Tree View",children:[]},{id:"3-hide-by-viewport-selection",level:2,title:"3. Hide by viewport selection",children:[]},{id:"4-use-a-saved-view",level:2,title:"4. Use a saved view",children:[]},{id:"5-export-the-current-view",level:2,title:"5. Export the current view",children:[]},{id:"6-additional-filtering-options",level:2,title:"6. Additional filtering options",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},61882:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:'Customizing the iTwin Viewer - "The Basics"',tile:{name:'Customizing the iTwin Viewer - "The Basics"',description:"This tutorial will take you through the first steps of customizing your iTwin Web Viewer. First you will learn how to add a new user interface component. Later you will customize that component to change the background color of your viewer.",thumbnail:"/unreal-docs-site/static/images/itwin-viewer-hello-world-sample-small.png",href:"/tutorials/itwin-viewer-hello-world",durationInMinutes:45,relatedApiIds:["visualization"],showInFirstSteps:!0,firstStepsSequenceNumber:2}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("Tile"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"/unreal-docs-site/static/images/itwin-viewer-hello-world-sample.gif",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the first steps of customizing your ",(0,r.kt)("strong",{parentName:"p"},"iTwin Web Viewer"),". First you will learn ",(0,r.kt)("strong",{parentName:"p"},"how to add a new user interface component"),". Later you will ",(0,r.kt)("strong",{parentName:"p"},"customize that component")," to change the background color of your viewer.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Your own local source for the iTwin Web Viewer based on the template @itwin/web-viewer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions for that can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Configured your local source to open the \u201cHouse Model\u201d sample iModel.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions to use this sample iModel can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-test-imodel-sample"},"here"),"."))))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Return statement of App.tsx where the Viewer component is configured"),(0,r.kt)(m,{language:"jsx",code:'return (\n    <div className="viewer-container">\n      {!accessToken && (\n        <FillCentered>\n          <div className="signin-content">\n            <ProgressLinear indeterminate={true} labels={["Signing in..."]} />\n          </div>\n        </FillCentered>\n      )}\n      <Viewer\n        iTwinId={iTwinId}\n        iModelId={iModelId}\n        authClient={authClient}\n        viewCreatorOptions={viewCreatorOptions}\n        enablePerformanceMonitors={true} // see description in the README (https://www.npmjs.com/package/@itwin/web-viewer-react)\n      />\n    </div>\n  );',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-add-new-itwin-web-viewer-interface-component"},"1. Add new iTwin Web Viewer interface component"),(0,r.kt)("p",null,"The iTwin Web Viewer viewer template generates several files. To start with, let\u2019s take a look at the ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," file. This is where you should start in customizing your iTwin Viewer."),(0,r.kt)("p",null,"To start with ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," contains a single react functional component fittingly called ",(0,r.kt)("inlineCode",{parentName:"p"},"App"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," component is responsible for:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authenticating the user"),(0,r.kt)("li",{parentName:"ol"},"Rendering the ",(0,r.kt)("inlineCode",{parentName:"li"},"Viewer")," component")),(0,r.kt)("p",null,"At the bottom of ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx")," you can see the ",(0,r.kt)("inlineCode",{parentName:"p"},"return")," statement where the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component is configured. Let\u2019s focus on that for now.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},'Viewer component with "Hello World" span'),(0,r.kt)(m,{language:"jsx",code:"<div style={{ height: '100%' }}>\n  <span>\"Hello World\"</span>\n    <Viewer\n      iTwinId={iTwinId}\n      iModelId={iModelId}\n      authClient={authClient}\n      viewCreatorOptions={viewCreatorOptions}\n      enablePerformanceMonitors={true} // see description in the README (https://www.npmjs.com/package/@itwin/web-viewer-react)\n    />\n</div>",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"App")," is just a react component. Like any react component, it returns JSX to tell react how to create HTML for the browser to render. Let\u2019s start off by adding some custom code to our JSX. We can render a \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," above the viewer by simply creating the element above the component. Note that this needs to be surrounded in a ",(0,r.kt)("inlineCode",{parentName:"p"},"div")," per the single parent rule for react.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"11-result"},"1.1 Result"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/hello_world_above.png",alt:"HelloWorldAbove"}))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Passing uiProviders prop to Viewer component"),(0,r.kt)(m,{language:"jsx",code:"<Viewer\n      iTwinId={iTwinId}\n      iModelId={iModelId}\n      authClient={authClient}\n      viewCreatorOptions={viewCreatorOptions}\n      enablePerformanceMonitors={true} // see description in the README (https://www.npmjs.com/package/@itwin/web-viewer-react)\n      uiProviders={[new MyFirstUiProvider()]}\n    />",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-your-first-ui-widget"},"2. Your first UI Widget"),(0,r.kt)("p",null,"So far, we haven\u2019t done anything to change the way the viewer works. We\u2019ve only just added a new ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," element ",(0,r.kt)("em",{parentName:"p"},"above")," the viewer. To add our \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," into the viewer, we need to pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," prop is typed to require an array of objects that implements the ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/"},"UIItemsProvider")," interface. Passing in the array will allow us to extend the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," with custom UI components. To do that, we need to define our ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," class so that it implements the ",(0,r.kt)("inlineCode",{parentName:"p"},"UiItemsProvider")," interface. Our new provider will tell the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," to include our \u201cHello world\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," within the view.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},'"MyFirstUiProvider.tsx" file content'),(0,r.kt)(m,{language:"typescript",code:"import {\n    StagePanelLocation,\n    StagePanelSection,\n    StageUsage,\n    UiItemsProvider,\n    Widget,\n} from '@itwin/appui-react';\n\nexport class MyFirstUiProvider implements UiItemsProvider {\n  public readonly id = 'MyFirstProviderId';\n\n  public provideWidgets(\n      _stageId: string,\n      stageUsage: string,\n      location: StagePanelLocation,\n      section?: StagePanelSection\n    ): ReadonlyArray<Widget> {\n      const widgets: Widget[] = [];\n      if (\n        stageUsage === StageUsage.General &&\n        location === StagePanelLocation.Right &&\n        section === StagePanelSection.Start\n      ) {\n        const helloWidget: Widget = {\n          id: 'HelloWidget',\n          label: 'Hello',\n          content: <span>\"Hello World\"</span>\n        };\n        widgets.push(helloWidget);\n    }\n    return widgets;\n  }\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Create a new file called ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.tsx")," with contents shown in a code snippet."),(0,r.kt)("p",null,"Let\u2019s review that code. We\u2019ve defined our new ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," class. In the new class we\u2019ve defined ",(0,r.kt)("inlineCode",{parentName:"p"},"public readonly id")," which is required to distinguish between different providers. Then notice that we\u2019ve defined just one function called ",(0,r.kt)("inlineCode",{parentName:"p"},"provideWidgets"),". This function will be called several times as the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," is building up the user interface. We will return an empty array except for when the ",(0,r.kt)("inlineCode",{parentName:"p"},"location")," is equal to ",(0,r.kt)("inlineCode",{parentName:"p"},"StagePanelLocation.Right")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"section")," is equal to ",(0,r.kt)("inlineCode",{parentName:"p"},"StagePanelSection.Start"),". In that case, we will return a single widget that will supply our \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span"),"."),(0,r.kt)("p",null,"Our ",(0,r.kt)("inlineCode",{parentName:"p"},"helloWidget")," consists of three attributes:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"id")," - used to uniquely identify the widget"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"label")," - description label for our widget"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"getWidgetContent()")," - returns our custom UI component"))),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"MyFirstUiProvider import"),(0,r.kt)(m,{language:"typescript",code:'import { MyFirstUiProvider } from "./MyFirstUiProvider";',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"At this point we need to import ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," at the top of file ",(0,r.kt)("inlineCode",{parentName:"p"},"App.tsx"),".")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Return statement in App.tsx should look like this:"),(0,r.kt)(m,{language:"typescript",code:'return (\n    <div className="viewer-container">\n      {!accessToken && (\n        <FillCentered>\n          <div className="signin-content">\n            <ProgressLinear indeterminate={true} labels={["Signing in..."]} />\n          </div>\n        </FillCentered>\n      )}\n      <Viewer\n        iTwinId={iTwinId}\n        iModelId={iModelId}\n        authClient={authClient}\n        viewCreatorOptions={viewCreatorOptions}\n        enablePerformanceMonitors={true} // see description in the README (https://www.npmjs.com/package/@itwin/web-viewer-react)\n        uiProviders={[new MyFirstUiProvider()]}\n      />\n    </div>\n  );',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Finally, let\u2019s clean up the ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"div")," that we added directly into the ",(0,r.kt)("inlineCode",{parentName:"p"},"App")," component earlier.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"21-result"},"2.1 Result"),(0,r.kt)("p",null,"Now we have our \u201cHello World\u201d ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," displaying in a panel within the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," component. It should look like this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/hello_world_widget.png",alt:"HelloWorldWidget"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-beyond-hello-world"},"3. Beyond Hello World"),(0,r.kt)("p",null,"Saying hello to the world can be fun but we need to get past that. For this next step we\u2019ll swap out our trivial ",(0,r.kt)("inlineCode",{parentName:"p"},"helloWidget")," with something a little more interactive: a ",(0,r.kt)("a",{parentName:"p",href:"https://itwin.github.io/iTwinUI-react/?path=/docs/input-toggleswitch--basic"},"ToggleSwitch"),". Eventually this toggle will control the background color, so we\u2019ll name our new widget ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundColorWidget"),". Instead of returning a ",(0,r.kt)("inlineCode",{parentName:"p"},"span")," we\u2019ll return a ",(0,r.kt)("inlineCode",{parentName:"p"},"ToggleSwitch"),".")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"ToggleSwitch import"),(0,r.kt)(m,{language:"typescript",code:"import { ToggleSwitch } from '@itwin/itwinui-react';",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Start by navigating back to ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.tsx")," and adding an import for ",(0,r.kt)("inlineCode",{parentName:"p"},"ToggleSwitch")," at the top of the file.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Switch out the helloWidget with the new backgroundColorWidget"),(0,r.kt)(m,{language:"typescript",code:"if (\n  stageUsage === StageUsage.General &&\n  location === StagePanelLocation.Right &&\n  section === StagePanelSection.Start\n) {\n  const backgroundColorWidget: Widget = {\n      id: 'BackgroundColorWidget',\n      label: 'Background Color Toggle',\n      content: <ToggleSwitch />\n  };\n  widgets.push(backgroundColorWidget);\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Next switch out the ",(0,r.kt)("inlineCode",{parentName:"p"},"helloWidget")," with the new ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundColorWidget"),".")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("p",null,"Notice the only significant difference is that ",(0,r.kt)("inlineCode",{parentName:"p"},"getWidgetContent")," is now returning a ",(0,r.kt)("inlineCode",{parentName:"p"},"ToggleSwitch"),". It doesn\u2019t do anything interesting yet, but it should look like this:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/background_color_toggle.png",alt:"Background Color Toggle"}))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Passing the onChange prop to the ToggleSwitch component"),(0,r.kt)(m,{language:"typescript",code:'return (\n  <ToggleSwitch\n    onChange={(e) => {\n      if (MyFirstUiProvider.toggledOnce === false) {\n        MyFirstUiProvider.originalColor =\n          IModelApp.viewManager.selectedView!.displayStyle.backgroundColor.tbgr;\n        MyFirstUiProvider.toggledOnce = true;\n      }\n\n      const color = e.target.checked\n        ? ColorDef.computeTbgrFromString("skyblue")\n        : MyFirstUiProvider.originalColor;\n\n      IModelApp.viewManager.selectedView!.overrideDisplayStyle({\n        backgroundColor: color,\n      });\n    }}\n  />\n);',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-changing-the-background-color"},"4. Changing the background color"),(0,r.kt)("p",null,"For this last step, let\u2019s put our new toggle to work. We want the toggle to control the background color in the view of our house iModel. When the toggle is on, we\u2019ll override the background color to \u201cskyblue\u201d. When the toggle is off, we\u2019ll change the background color back to its original color."),(0,r.kt)("p",null,"To do this, we need to pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"onChange")," prop to the ",(0,r.kt)("inlineCode",{parentName:"p"},"ToggleSwitch")," component.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Adding toggledOnce and originalColor variables to MyFirstUiProvider class"),(0,r.kt)(m,{language:"typescript",code:"export class MyFirstUiProvider implements UiItemsProvider {\n  public readonly id = 'HelloWorldProvider';\n  public static toggledOnce: boolean = false;\n  public static originalColor: number;",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Since we\u2019re using two new static variables here, we need to add this to to our ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider")," class at the beginning of our definition.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Completed MyFirstUiProvider.tsx file"),(0,r.kt)(m,{language:"typescript",code:"import { ColorDef } from '@itwin/core-common';\nimport { IModelApp } from '@itwin/core-frontend';\nimport {\n  StagePanelLocation,\n  StagePanelSection,\n  StageUsage,\n  UiItemsProvider,\n  Widget,\n} from '@itwin/appui-react';\nimport { ToggleSwitch } from \"@itwin/itwinui-react\";\n\nexport class MyFirstUiProvider implements UiItemsProvider {\n  public readonly id = 'HelloWorldProvider';\n  public static toggledOnce: boolean = false;\n  public static originalColor: number;\n\n  public provideWidgets(\n    _stageId: string,\n    stageUsage: string,\n    location: StagePanelLocation,\n    section?: StagePanelSection\n  ): ReadonlyArray<Widget> {\n    const widgets: Widget[] = [];\n    if (\n      stageUsage === StageUsage.General &&\n      location === StagePanelLocation.Right &&\n      section === StagePanelSection.Start\n    ) {\n      const backgroundColorWidget: Widget = {\n        id: 'BackgroundColorWidget',\n        label: 'Background Color Toggle',\n        content: <ToggleSwitch\n          onChange={(e) => {\n            if (MyFirstUiProvider.toggledOnce === false) {\n              MyFirstUiProvider.originalColor =\n                IModelApp.viewManager.selectedView!.displayStyle.backgroundColor.tbgr;\n              MyFirstUiProvider.toggledOnce = true;\n            }\n            const color = e.target.checked\n              ? ColorDef.computeTbgrFromString(\"skyblue\")\n              : MyFirstUiProvider.originalColor;\n\n            IModelApp.viewManager.selectedView!.overrideDisplayStyle({\n              backgroundColor: color,\n            });\n          }}\n        /> \n      };\n      widgets.push(backgroundColorWidget);\n    }\n    return widgets;\n  }\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"The first condition checks for only the first trigger of the toggle using boolean ",(0,r.kt)("inlineCode",{parentName:"p"},"toggledOnce"),". If true, we need to store the original color in static variable ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.originalColor"),". We are using the global singleton ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/imodelapp/imodelapp/"},"IModelApp")," to get to the viewManager that can provide the current ",(0,r.kt)("inlineCode",{parentName:"p"},"backgroundColor"),". We also need to flip variable ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.toggledOnce")," to true to make sure we only store the original color once."),(0,r.kt)("p",null,"Notice we\u2019re using the function ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/views/viewport/overridedisplaystyle/"},"overrideDisplayStyle()")," on the currently selected view. To get the view, we use the same global singleton ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/imodelapp/imodelapp/"},"IModelApp")," to get to the ",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/reference/imodeljs-frontend/views/viewmanager/"},"viewManager"),"."),(0,r.kt)("p",null,"Our completed ",(0,r.kt)("inlineCode",{parentName:"p"},"MyFirstUiProvider.tsx")," file should look similar to the one shown in a code snippet.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"51-result"},"5.1 Result"),(0,r.kt)("p",null,"Result when the toggle is on:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/background_toggled_blue.png",alt:"Background blue"})),(0,r.kt)("p",null,"Result when the toggle is off:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/original_background_color.png",alt:"Background original"}))),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Adding showcase widgets to your iTwin Viewer",thumbnail:"/unreal-docs-site/static/images/view_attributes_ported_results.png",description:"This tutorial will take widgets from the sample showcase and add them into your iTwin Viewer using the `uiProviders` prop.",href:"/tutorials/adding-showcase-widgets-to-your-itwin-viewer/",mdxType:"Tile"}),(0,r.kt)(g,{name:"Start building a Viewer App",thumbnail:"/unreal-docs-site/static/images/retail-tutorial-sample-small.png",description:"This quick start is intended to help you get started with using iTwin Platform visualization components. By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).",href:"/tutorials/web-application-quick-start/",mdxType:"Tile"}),(0,r.kt)(g,{name:"Adding view decorations to your iTwin Viewer",thumbnail:"/unreal-docs-site/static/images/adding-decorators-and-markers.png",description:"This tutorial guides you through customizing your iTwin Viewer application by displaying application-specific graphics, called View Decorations.",href:"/tutorials/adding-decorators-and-markers/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Create a test iModel from a Bentley provided sample",href:"/tutorials/create-test-imodel-sample",description:"The quickest way to get access to a cloud hosted iModel is by creating an iModel seeded with Bentley provided sample data.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Sample House Model",href:"/tutorials/create-test-imodel-sample/#house-sample",description:"Bentley provided sample of a House for test iModel creation.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"UI Provider",href:"https://www.itwinjs.org/reference/ui-abstract/uiitemsprovider/uiitemsprovider/",description:"Describes interface of objects that want to provide UI component to the running IModelApp.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"IModelApp",href:"https://www.itwinjs.org/reference/imodeljs-frontend/imodelapp/imodelapp/",description:"Global singleton that connects the user interface with the iTwin.js services.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Visit the iTwin Code Sandbox",href:"https://www.itwinjs.org/sandboxes/",description:"The iTwin Code Sandbox provides many samples demonstrating options for customizing the iTwin viewer.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-add-new-itwin-web-viewer-interface-component",level:2,title:"1. Add new iTwin Web Viewer interface component",children:[]},{id:"2-your-first-ui-widget",level:2,title:"2. Your first UI Widget",children:[]},{id:"3-beyond-hello-world",level:2,title:"3. Beyond Hello World",children:[]},{id:"4-changing-the-background-color",level:2,title:"4. Changing the background color",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},8567:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Manage Group Members on iTwins",tile:{name:"Manage Group Members on iTwins",description:"This tutorial will guide you through the process of managing iTwin group members",href:"/tutorials/manage-group-members-on-itwins-guide",durationInMinutes:15,relatedApiIds:["accesscontrol"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("Alert"),u=p("TutorialSection"),m=p("LinkButton"),h=p("GoogleChromeIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("CreateSampleAppButton"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)(c,{mdxType:"Alert"},"This tutorial is for the"," ",(0,r.kt)("a",{href:"/apis/access-control-v2/overview/"},"Access Control API V2"),". To control the API version,"," ",(0,r.kt)("a",{href:"/apis/overview/lifecycle/#api-versions"},"see the API versions documentation")),(0,r.kt)("p",null,"This tutorial will take you through the process of adding and retrieving group members for a given iTwin. Members are groups which have been assigned a role, in turn giving them a set of permissions. See ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control-v2/overview/#accesscontrolgroups"},"iTwin Groups")," for more information on managing groups of users. Members can be assigned more than one role and the same role can be assigned to more than one member."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to invite groups to an iTwin, and retrieve the list of iTwin group members.")),(0,r.kt)(u,{actions:[(0,r.kt)(m,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(h,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, the user must be an Organization Administrator to create an iTwin. An Organization Administrator must have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."),(0,r.kt)("li",{parentName:"ul"},"An iTwin role. For more information on creating an iTwin role, see ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-itwin-roles-guide/"},"create and query iTwins roles guide"),"."),(0,r.kt)("li",{parentName:"ul"},"An iTwin group. For more information on creating an iTwin group, see ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-itwin-groups-guide/"},"create and query iTwins groups guide"),"."))),(0,r.kt)(u,{actions:[(0,r.kt)(y,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query iTwins tutorial",scopes:["itwins:modify","itwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:read")," scopes enabled."))),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/access-control/operations/get-iTwin-roles/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(u,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/accesscontrol/itwins/{id}/members/groups HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n    "members": [\n        {\n            "groupId": "149d0860-39e9-4ae9-9b05-0b5dcedd2d4b",\n            "roleId": "85d7734e-d884-4009-bbbe-18bd1e809351"\n        }\n    ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:30:40 GMT\nmas-request-id: 744155a0-f492-44a9-b78d-3a8c516f53ee\nmas-server: Bentley-WSG/4.0.12,Bentley-WebAPI/2.9\npragma: no-cache\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: d1999ea1-62bd-4e84-8e5d-1a8aac040de4\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "members": [\n        {\n            "id": "149d0860-39e9-4ae9-9b05-0b5dcedd2d4b",\n            "groupName": "iTwin Administrators",\n            "groupDescription": "This is a group of Administrators for an iTwin",\n            "roles": [{\n                "id": "0af949d5-af90-4eed-84e0-d4d860f723d0",\n                "displayName": "iTwin Administrator",\n                "assignedDateTime": "2022-08-29T18:05:19.537846"\n            }]\n        }\n    ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-add-itwin-group-member"},"3. Add iTwin Group Member"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/add-iTwin-group-members/"},"Add iTwin group member")," endpoint is used to add group members to a given iTwin."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," is a required parameter. The ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," from an existing Role (see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-and-query-itwin-roles-guide/"},"create and query iTwins roles guide"),") is required to create a add an user member to an iTwin. ",(0,r.kt)("inlineCode",{parentName:"p"},"group id")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will return the added group member(s).")),(0,r.kt)(u,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/accesscontrol/itwins/{id}/members/groups HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 480\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:46:24 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 7a199ff9-317f-4d4f-ba82-70ba25f31d32\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "members": [{\n            "id": "149d0860-39e9-4ae9-9b05-0b5dcedd2d4b",\n            "groupName": "iTwin Administrators",\n            "groupDescription": "This is a group of Administrators for an iTwin",\n            "roles": [{\n                "id": "0af949d5-af90-4eed-84e0-d4d860f723d0",\n                "displayName": "iTwin Administrator",\n                "assignedDateTime": "2022-08-29T18:05:19.537846"\n            }]\n        }, {\n            "id": "149d0860-39e9-4ae9-9b05-0b5dcedd2d4b",\n            "groupName": "iTwin Engineers",\n            "groupDescription": "This is a group of engineers",\n            "roles": [{\n                "id": "0af949d5-af90-4eed-84e0-d4d860f723d0",\n                "displayName": "iTwin Editing",\n                "assignedDateTime": "2022-08-29T18:05:19.537846"\n            }]\n        }],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/accesscontrol/efa557b7-ecd7-4a60-9589-2acce11f6cc9/members/groups?$top=100&$skip=0"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-group-members-using-the-itwin-id"},"4. Query for Group Members using the iTwin Id"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Id")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/get-iTwin-group-members/"},"retrieve a list of group members")," using the ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin Id"),"."),(0,r.kt)("p",null,"The api will return a list of group members for the given iTwin.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Create and Query iTwins Guide",href:"/tutorials/create-and-query-itwins-guide/",description:"Tutorial for creating and querying iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Create and Query iTwins Groups Guide",href:"/tutorials/create-and-query-itwin-groups-guide/",description:"Tutorial for creating and querying iTwin groups.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Create and Query iTwins Roles Guide",href:"/tutorials/create-and-query-itwin-roles-guide/",description:"Tutorial for creating and querying iTwin roles.",isExternal:!1,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-add-itwin-group-member",level:2,title:"3. Add iTwin Group Member",children:[]},{id:"4-query-for-group-members-using-the-itwin-id",level:2,title:"4. Query for Group Members using the iTwin Id",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},16795:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Manage iTwin Owners",tile:{name:"Manage iTwin Owners",description:"This tutorial will guide you through the process of adding and removing owners on an iTwin",href:"/tutorials/manage-itwin-owners-guide",durationInMinutes:10,relatedApiIds:["accesscontrol"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("Alert"),u=p("TutorialSection"),m=p("LinkButton"),h=p("GoogleChromeIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("CreateSampleAppButton"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)(c,{mdxType:"Alert"},"This tutorial is for the"," ",(0,r.kt)("a",{href:"/apis/access-control-v2/overview/"},"Access Control API V2"),". To control the API version,"," ",(0,r.kt)("a",{href:"/apis/overview/lifecycle/#api-versions"},"see the API versions documentation")),(0,r.kt)("p",null,"This tutorial will take you through the process of adding and removing owners for a given iTwin. iTwin owners are the individuals with upmost level of authority on an iTwin; They are implicitly granted all Access Control permissions for the iTwin they own. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/#itwinowner"},"iTwin owner overview documentation"),"."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to add and remove iTwin owners.")),(0,r.kt)(u,{actions:[(0,r.kt)(m,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(h,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"Already created an iTwin. If you have not, follow the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-itwins-guide/"},"Create and Query iTwins Guide"),"."))),(0,r.kt)(u,{actions:[(0,r.kt)(y,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Manage iTwin Owners tutorial",scopes:["iTwins:modify","iTwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"itwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"itwins:read")," scopes enabled."))),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/access-control/operations/get-iTwin-roles/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(u,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/accesscontrol/itwins/{id}/members/owners HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Body"),",",(0,r.kt)(T,{language:"json",code:'{\n  "email": "FirstName.LastName@organization.com"\n}',mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 203\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 17:26:10 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 74e263d7-ded7-45a5-8347-ca1f98ffab86\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(T,{language:"json",code:'{\n  "member": {\n    "id": "d0ec803b-de9a-41cd-9d97-c8edddd4cb0d",\n    "email": "FirstName.LastName@organization.com",\n    "givenName": "FirstName",\n    "surName": "LastName",\n    "organization": "Organization LLC"\n  }\n}',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-add-a-user-as-an-owner"},"3. Add a user as an owner"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/add-itwin-owner-member/"},"Add iTwin Owner")," endpoint is used to add iTwin owners. The user making this request must be an Owner themself. "),(0,r.kt)("p",null,"The iTwin ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," from an existing iTwin (see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-and-query-itwins-guide/"},"create and query iTwins guide"),") is required to manage ownership and the ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," of who is being added as the owner, is also required. "),(0,r.kt)("p",null,"The POST call will return the member object. The returned member ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," will be used in subsequent steps to remove the owner. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," The Account Administrator can also perform this request, and is not required to be an Owner, but that is the only exception to this rule.")),(0,r.kt)(u,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/accesscontrol/itwins/{id}/members/owners HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-type: application/json\ndate: Mon, 29 Aug 2022 19:24:14 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: 260678e5-0244-413d-bc60-f6dac19fd450\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US\nx-rate-limit-limit: 1s\nx-rate-limit-remaining: 49\nx-rate-limit-reset: 2022-08-29T19:24:15.3864257Z",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(T,{language:"json",code:'{\n  "members": [\n    {\n      "id": "d0ec803b-de9a-41cd-9d97-c8edddd4cb0d",\n      "email": "FirstName.LastName@organization.com",\n      "givenName": "FirstName",\n      "surName": "LastName",\n      "organization": "Organization LLC"\n    },\n    {\n      "id": "5665087f-3f44-446d-9ce5-84c5d41af3c5",\n      "email": "Another.Owner@organization.com",\n      "givenName": "Another",\n      "surName": "Owner",\n      "organization": "Organization LLC"\n    }\n  ]\n}',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-an-itwins-owners"},"4. Query for an iTwin\u2019s owners"),(0,r.kt)("p",null,"The iTwin ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/get-itwin-owner-members/"},"retrieve a list of iTwin owners"),"."),(0,r.kt)("p",null,"The API will return a list of owners for a given iTwin.")),(0,r.kt)(u,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(T,{language:"http",code:"DELETE https://api.bentley.com/accesscontrol/itwins/{id}/members/owners/{memberId} HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(T,{language:"http",code:"HTTP/1.1 204 No Content\ncontent-length: 0\ndate: Tue, 27 Jun 2023 17:13:28 GMT\nrequest-context: appId=cid-v1:eed7f349-e7be-4e9c-a631-b40237883d60\nx-correlation-id: 5e8e9dc2-8fb3-4d39-92c8-e807eabe2e13\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: West Central US",mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-remove-an-owner"},"5. Remove an owner"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/remove-itwin-owner-member/"},"Remove iTwin Owner")," endpoint is used to remove iTwin owners. The user making this request must be an Owner themself."),(0,r.kt)("p",null,"The iTwin ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," from an existing iTwin (see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-and-query-itwins-guide/"},"create and query iTwins guide"),") is required to manage ownership and the member ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," of the owner being removed, is also required. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," The Account Administrator can also perform this request, and is not required to be an Owner, but that is the only exception to this rule.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Create and Query iTwins Guide",href:"/tutorials/create-and-query-itwins-guide/",description:"Tutorial for creating and querying iTwins.",isExternal:!1,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-add-a-user-as-an-owner",level:2,title:"3. Add a user as an owner",children:[]},{id:"4-query-for-an-itwins-owners",level:2,title:"4. Query for an iTwin\u2019s owners",children:[]},{id:"5-remove-an-owner",level:2,title:"5. Remove an owner",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},94530:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Manage Project Team Members",tile:{name:"Manage Project Team Members",description:"This tutorial will guide you through the process of managing project team members",href:"/tutorials/manage-project-team-members-guide",durationInMinutes:15,relatedApiIds:["projects"],showInFirstSteps:!1,firstStepsSequenceNumber:3}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("GoogleChromeIcon"),h=p("VSCodeIcon"),k=p("PostmanIcon"),g=p("CreateSampleAppButton"),y=p("Alert"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the process of creating roles, adding team members, and retrieving team members for a given iTwin Project."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to create roles, add & assign permissions to the role, invite users to a project, and retrieve the list of project members.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(m,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(h,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(k,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"Project")),(0,r.kt)("li",{parentName:"ul"},"A tool such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute http calls. These calls can also be made using the ",(0,r.kt)("inlineCode",{parentName:"li"},"TryIt")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, then the user must be an Organization Administrator in order to manage team members for a project. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."))),(0,r.kt)(c,{actions:[(0,r.kt)(g,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Manage Project Team Members tutorial",scopes:["projects:modify","projects:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Projects API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"projects:modify projects:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/projects/operations/get-project-team-members/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},"Try it")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(y,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/projects/{id}/roles/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "displayName":"Project Administrator",\n  "description":"Project Administrator"\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 203\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 17:26:10 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 74e263d7-ded7-45a5-8347-ca1f98ffab86\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "role":{\n    "id":"14b391cf-ce9e-43d3-8fee-c49e57c2680d",\n    "displayName":"Project Administrator",\n    "description":"A description of Project Administrator",\n    "permissions":[\n      \n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-project-role"},"3. Create Project Role"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/create-project-role/"},"Create project role")," endpoint is used to create project roles. After role is created permissions can be assigned."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"project id")," is required to create a role. A ",(0,r.kt)("inlineCode",{parentName:"p"},"display name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"description")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will return a new role instance. The returned ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," along with the ",(0,r.kt)("inlineCode",{parentName:"p"},"project id")," will be used to add permissions in the next step.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"PATCH https://api.bentley.com/projects/{id}/roles/{roleId} HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "permissions":[\n    "administration_invite_member",\n    "administration_manage_roles",\n    "administration_remove_member"\n  ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 324\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 18:17:39 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: f16d2765-4a9c-40a4-995e-bd7c6b8b8d4a\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "role":{\n    "id":"10a2d277-ea41-4e81-b309-f7a9aea09d51",\n    "displayName":"Project Administrator",\n    "description":"A description of Project Administrator",\n    "permissions":[\n      "administration_invite_member",\n      "administration_manage_roles",\n      "administration_remove_member"\n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-update-project-role-using-the-project-id-and-role-id"},"4. Update Project Role Using the Project Id and Role Id"),(0,r.kt)("p",null,"To assign ",(0,r.kt)("inlineCode",{parentName:"p"},"permissions")," Role needs to be ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/update-project-role/"},"updated"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"project id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," are required. The POST body should contain ",(0,r.kt)("inlineCode",{parentName:"p"},"list of permissions"),"."),(0,r.kt)("p",null,"The response will contain the role details along with the list of permissions assigned.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/d9102abc-abfc-4617-b19d-804896064cea/roles HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:'HTTP/1.1 200 OK \ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 18:26:19 GMT\netag: "QosNxHidwaC0+OqsAO9D5HQ9s0g="\nmas-request-id: 280616fa-b078-4276-8cb6-b93b8e38433f\nmas-server: Bentley-WSG/4.0.12,Bentley-WebAPI/2.9\npragma: no-cache\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: 06f3046a-5973-4571-b09b-747cbdddf2c1\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "roles":[\n    {\n      "id":"10a2d277-ea41-4e81-b309-f7a9aea09d51",\n      "displayName":"Project Administrator",\n      "description":"A description of Project Administrator",\n      "permissions":[\n        "administration_invite_member",\n        "administration_manage_roles",\n        "administration_remove_member"\n      ]\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/d9102abc-abfc-4617-b19d-804896064cea/roles?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-roles-using-the-project-id"},"5. Query for Roles using the Project Id"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Project Id")," can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project-roles/"},"retrieve a list of project roles"),"."),(0,r.kt)("p",null,"The api will return a list of roles for a given project.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/projects/2ff085cf-c255-46a9-9c6f-7d88f59bcbf9/members HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "email":"John.Doe@bentley.com",\n  "roleNames":[\n    "Project Administrator"\n  ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:30:40 GMT\nlocation: https://api.bentley.com/projects/2ff085cf-c255-46a9-9c6f-7d88f59bcbf9/members/56c58c0c-28a9-4cd2-b50b-102e33b657f2\nmas-request-id: 744155a0-f492-44a9-b78d-3a8c516f53ee\nmas-server: Bentley-WSG/4.0.12,Bentley-WebAPI/2.9\npragma: no-cache\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: d1999ea1-62bd-4e84-8e5d-1a8aac040de4\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:"NO CONTENT",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-add-project-team-member"},"6. Add Project Team Member"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/add-project-team-member/"},"Add project team member")," endpoint is used to add team members to a given project."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"project id")," is a required parameter. User ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"list of role names")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will only return the headers.")),(0,r.kt)(c,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/projects/{id}/members HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK \ncontent-length: 480\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:46:24 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 7a199ff9-317f-4d4f-ba82-70ba25f31d32\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n  "members":[\n    {\n      "userId":"7caa33e9-9d4d-4446-be0e-4c012071e636",\n      "email":"John.Doe@bentley.com",\n      "givenName":"John",\n      "surname":"Doe",\n      "organization":"Bentley Systems Inc",\n      "roles":[\n        "Team Member",\n        "Project Administrator"\n      ]\n    }\n  ],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/projects/d9102abc-abfc-4617-b19d-804896064cea/roles?$skip=0&$top=100"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-query-for-team-members-using-the-project-id"},"7. Query for Team Members using the Project Id"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Id")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project-team-members/"},"retrieve a list of team members")," using the ",(0,r.kt)("inlineCode",{parentName:"p"},"Project Id"),"."),(0,r.kt)("p",null,"The api will return a list of team members for the given project.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"iTwin Project Sample App",href:"https://github.com/iTwin/iTwin-project-sample-app",description:"Sample application that uses the Projects API to create roles and add users to projects.",isExternal:!0,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-create-project-role",level:2,title:"3. Create Project Role",children:[]},{id:"4-update-project-role-using-the-project-id-and-role-id",level:2,title:"4. Update Project Role Using the Project Id and Role Id",children:[]},{id:"5-query-for-roles-using-the-project-id",level:2,title:"5. Query for Roles using the Project Id",children:[]},{id:"6-add-project-team-member",level:2,title:"6. Add Project Team Member",children:[]},{id:"7-query-for-team-members-using-the-project-id",level:2,title:"7. Query for Team Members using the Project Id",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},52069:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Manage User Members on iTwins",tile:{name:"Manage User Members on iTwins",description:"This tutorial will guide you through the process of managing iTwin user members",href:"/tutorials/manage-user-members-on-itwins-guide",durationInMinutes:15,relatedApiIds:["accesscontrol"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("Alert"),u=p("TutorialSection"),m=p("LinkButton"),h=p("GoogleChromeIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("CreateSampleAppButton"),f=p("Title"),T=p("CodeBlock"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)(c,{mdxType:"Alert"},"This tutorial is for the"," ",(0,r.kt)("a",{href:"/apis/access-control-v2/overview/"},"Access Control API V2"),". To control the API version,"," ",(0,r.kt)("a",{href:"/apis/overview/lifecycle/#api-versions"},"see the API versions documentation")),(0,r.kt)("p",null,"This tutorial will take you through the process of adding and retrieving user members for a given iTwin. Members are users which have been assigned a role, in turn giving them a set of permissions. Members can be assigned more than one role and the same role can be assigned to more than one member."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to invite users to an iTwin, and retrieve the list of iTwin user members.")),(0,r.kt)(u,{actions:[(0,r.kt)(m,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(h,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, the user must be an Organization Administrator to create an iTwin. An Organization Administrator must have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."),(0,r.kt)("li",{parentName:"ul"},"An iTwin role. For more information on creating an iTwin role, please see the tutorial ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-itwin-roles-guide/"},"Create and Query iTwin Roles"),"."))),(0,r.kt)(u,{actions:[(0,r.kt)(y,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query iTwins tutorial",scopes:["itwins:modify","itwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:read")," scopes enabled."))),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/access-control/operations/get-iTwin-roles/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(c,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(u,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"POST https://api.bentley.com/accesscontrol/itwins/{id}/members HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Body"),(0,r.kt)(T,{language:"json",code:'{\n  "members": [\n    {\n    "email": "John.Doe@bentley.com",\n    "roleId": "806ac320-80be-489e-b95d-7d27752776a0"\n    }\n  ]\n}',mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 201 Created\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:30:40 GMT\nmas-request-id: 744155a0-f492-44a9-b78d-3a8c516f53ee\nmas-server: Bentley-WSG/4.0.12,Bentley-WebAPI/2.9\npragma: no-cache\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: d1999ea1-62bd-4e84-8e5d-1a8aac040de4\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "members": [\n      {\n        "id": "08a2ede0-fc7d-4f52-996e-e1047feb27e9",\n        "email": "John.Doe@bentley.com",\n        "givenName": "John",\n        "surname": "Doe",\n        "organization": "Bentley Systems Inc",\n        "roles": [{\n            "id": "0af949d5-af90-4eed-84e0-d4d860f723d0",\n            "displayName": "iTwin Administrator",\n            "assignedDateTime": "2022-08-29T18:05:19.537846"\n        }]\n    }]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-add-itwin-user-member"},"3. Add iTwin User Member"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/add-iTwin-members/"},"Add iTwin user member")," endpoint is used to add user members to a given iTwin."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," is a required parameter. The ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," from an existing Role (see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-and-query-itwin-roles-guide/"},"create and query iTwins roles guide"),") is required to create a add an user member to an iTwin. User ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"role id")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will return the added user member(s).")),(0,r.kt)(u,{actions:[(0,r.kt)(f,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(T,{language:"http",code:"GET https://api.bentley.com/accesscontrol/itwins/{id}/members HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Request Headers"),(0,r.kt)(T,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Headers"),(0,r.kt)(T,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 480\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 19:46:24 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 7a199ff9-317f-4d4f-ba82-70ba25f31d32\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(f,{mdxType:"Title"},"Response Body"),(0,r.kt)(T,{language:"json",code:'{\n    "members": [{\n        "id": "56c58c0c-28a9-4cd2-b50b-102e33b657f2",\n        "email": "Jane.Doe@example.com",\n        "givenName": "Jane",\n        "surname": "Doe",\n        "organization": "Example Inc",\n        "roles": [{\n            "id": "56e96811-6d6e-4418-a78f-a7f5933e6ed4",\n            "displayName": "iTwin owner",\n            "assignedDateTime": "2021-09-14T19:41:29.913"\n        }]\n    }, {\n        "id": "54d1cc67-7900-47cd-8135-b6eaabf5c703",\n        "email": "John.Doe@example.com",\n        "givenName": "John",\n        "surname": "Doe",\n        "organization": "Example Inc",\n        "roles": [{\n            "id": "0af949d5-af90-4eed-84e0-d4d860f723d0",\n            "displayName": "iTwin Administrator",\n            "assignedDateTime": "2022-08-29T18:05:19.537846"\n        }]\n    }],\n  "_links":{\n    "self":{\n      "href":"https://api.bentley.com/accesscontrol/efa557b7-ecd7-4a60-9589-2acce11f6cc9/members?$top=100&$skip=0"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-user-members-using-the-itwin-id"},"4. Query for User Members using the iTwin Id"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Id")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/get-iTwin-members/"},"retrieve a list of user members")," using the ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin Id"),"."),(0,r.kt)("p",null,"The api will return a list of user members for the given iTwin.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Create and Query iTwins Guide",href:"/tutorials/create-and-query-itwins-guide/",description:"Tutorial for creating and querying iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Create and Query iTwins Roles Guide",href:"/tutorials/create-and-query-itwin-roles-guide/",description:"Tutorial for creating and querying iTwin roles.",isExternal:!1,mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-add-itwin-user-member",level:2,title:"3. Add iTwin User Member",children:[]},{id:"4-query-for-user-members-using-the-itwin-id",level:2,title:"4. Query for User Members using the iTwin Id",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},8964:function(e,t,n){"use strict";n.d(t,{Jt:function(){return v},Pu:function(){return s},ZP:function(){return b}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Get started with the iTwin Mobile SDK for iOS",tile:{name:"Get started with the iTwin Mobile SDK for iOS",description:"This tutorial will get you up and running with the iTwin sample app for iOS.",href:"/tutorials/mobile-sdk-ios-gettingstarted/",thumbnail:"/unreal-docs-site/static/images/tutorials/mobile-sdk-ios-getting-started/banner.png",durationInMinutes:30}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("XcodeIcon"),h=p("NodeJsIcon"),k=p("GitIcon"),g=p("VSCodeIcon"),y=p("SignInButton"),f=p("CreateNativeAppButton"),T=p("CodeBlock"),w={metadata:s};function b(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",summaryImageSrc:"/unreal-docs-site/static/images/tutorials/mobile-sdk-ios-getting-started/banner.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial guides you through creating a new iOS app using the iTwin Mobile SDK for iOS. In this walk-through you will be introduced to the ",(0,r.kt)("strong",{parentName:"p"},"iTwin Mobile SDK for iOS")," using ",(0,r.kt)("strong",{parentName:"p"},"Swift Package Manager")," and the ",(0,r.kt)("strong",{parentName:"p"},"SwiftUI")," sample app."),(0,r.kt)("p",null,"By the end of this tutorial, you will have the ",(0,r.kt)("strong",{parentName:"p"},"iTwin sample app for iOS")," running on your iPad or iPhone."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:"),"\nYou must use a Mac capable of running Xcode 13 to complete this tutorial.\nIf using an Intel Mac, you have the option to run the sample app in the Simulator.\nIf using an Apple Silicon Mac, use a physical device to run the sample app."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-set-up-your-environment"},"1. Set up your environment"),(0,r.kt)("p",null,"Before you start this walk-through, download and install the following software on your Mac.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://apps.apple.com/us/app/xcode/id497799835?mt=12",target:"_blank",title:"Xcode",icon:(0,r.kt)(m,{mdxType:"XcodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://nodejs.org",target:"_blank",title:"Node.js",icon:(0,r.kt)(h,{mdxType:"NodeJsIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://git-scm.com/downloads",target:"_blank",title:"Git",icon:(0,r.kt)(k,{mdxType:"GitIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-required-materials"},"1.1 Required materials"),(0,r.kt)("h5",{id:"xcode-13"},(0,r.kt)("a",{parentName:"h5",href:"https://apps.apple.com/us/app/xcode/id497799835?mt=12"},"Xcode 13")),(0,r.kt)("p",null,"Xcode is the development environment you will use for building iOS and macOS apps. Download it from the AppStore. Start Xcode after you install it and allow it to install additional components."),(0,r.kt)("h5",{id:"nodejs-lts-version"},(0,r.kt)("a",{parentName:"h5",href:"https://nodejs.org"},"Node.js (LTS version)")),(0,r.kt)("p",null,"This tool provides the backend JavaScript runtime necessary for your computer to read and render code appropriately. It also allows you to run ",(0,r.kt)("inlineCode",{parentName:"p"},"NPM")," commands at the terminal."),(0,r.kt)("h5",{id:"git"},(0,r.kt)("a",{parentName:"h5",href:"https://git-scm.com/downloads"},"Git")),(0,r.kt)("p",null,"This is the source code control system for the ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin Mobile SDK sample")," repository.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(g,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-suggested-tools"},"1.2 Suggested tools"),(0,r.kt)("h5",{id:"visual-studio-code"},(0,r.kt)("a",{parentName:"h5",href:"https://code.visualstudio.com/"},"Visual Studio Code")),(0,r.kt)("p",null,"This is our recommended editor and debugger tool for developing iTwin.js applications. It is free, open source and includes a GUI for working with GIT."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," Optionally, install the ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," command in your ",(0,r.kt)("inlineCode",{parentName:"p"},"PATH")," by running the ",(0,r.kt)("inlineCode",{parentName:"p"},"install 'code' command in PATH")," command at the command palette in ",(0,r.kt)("strong",{parentName:"p"},"VSCode"),"."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-register-an-application"},"2. Register an application"),(0,r.kt)("p",null,"To begin, register a new client on the iTwin platform developer portal. Once the new client is registered, you are ready to start building your app.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"SignInButton"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"sign-in"},"Sign in"),(0,r.kt)("p",null,"To register an application you need to be signed in.\nIf you are not already, you can do that by clicking the ",(0,r.kt)("strong",{parentName:"p"},"Sign In")," button in the action pane or in the top right corner of the page.")),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(f,{tooltip:"Register a basic Native Application for this tutorial",clientName:"Mobile SDK getting started with iOS",allowedScopes:["projects:read","savedviews:modify","realitydata:read","savedviews:read","imodelaccess:read","itwinjs","imodels:read"],redirectUri:"imodeljs://app/signin-callback",postLogoutRedirectUris:["imodeljs://app/signout-callback"],mdxType:"CreateNativeAppButton"},"Register application"),(0,r.kt)(T,{language:"xcconfig",code:e.clientId&&e.redirectUris&&e.scope?"ITMAPPLICATION_CLIENT_ID = ".concat(e.clientId,"\nITMAPPLICATION_SCOPE = ").concat(e.scope):void 0,mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"register-a-native-application"},"Register a Native Application"),(0,r.kt)("p",null,"All apps connecting to and sending data through the platform must be registered on your account.\nUse the ",(0,r.kt)("strong",{parentName:"p"},"Register application")," button to automatically create your first Native Application.\nThis allows you to configure authentication for your app. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your Native Application"),"."),(0,r.kt)("p",null,"Once the client is generated, a few lines of code are displayed; note these lines. You will add these to the Xcode config file in a later step."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ITMAPPLICATION_CLIENT_ID")," - This is the unique identifier for your application. It is displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ITMAPPLICATION_SCOPE")," - List of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"For future reference:")," Register and configure your application manually following the instructions in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial. Ensure that you select an ",(0,r.kt)("em",{parentName:"p"},"Application type")," of ",(0,r.kt)("strong",{parentName:"p"},"Desktop/Mobile"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(T,{language:"bash",code:"git clone https://github.com/iTwin/mobile-samples.git",mdxType:"CodeBlock"}),(0,r.kt)(T,{language:"bash",code:"code mobile-samples",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-clone-the-sample-repository"},"3. Clone the sample repository"),(0,r.kt)("p",null,"Clone the repository to follow along with this tutorial. In your Terminal, enter ",(0,r.kt)("inlineCode",{parentName:"p"},"cd ~/Desktop"),", then run ",(0,r.kt)("inlineCode",{parentName:"p"},"git clone https://github.com/iTwin/mobile-samples.git"),"."),(0,r.kt)("p",null,"Next, open the ",(0,r.kt)("strong",{parentName:"p"},"mobile-samples")," folder in ",(0,r.kt)("strong",{parentName:"p"},"VS Code"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," If you have the ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," command installed in your path, you can enter ",(0,r.kt)("inlineCode",{parentName:"p"},"code mobile-samples")," in your Terminal."))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"31-directory-structure"},"3.1 Directory structure"),(0,r.kt)("p",null,"This section gives a high-level description of the top-level folders in the sample app."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"iOS")," directory contains all of the code that is specific to the iOS platform. This includes Xcode projects for the Getting Started samples based on SwiftUI (",(0,r.kt)("strong",{parentName:"p"},"SwiftUIStarter"),") and UIKit (",(0,r.kt)("strong",{parentName:"p"},"MobileStarter"),"), and variations that can target local builds of the SDK that can be used for SDK development (PRs are very welcome). The ",(0,r.kt)("strong",{parentName:"p"},"Shared")," directory contains utility files that are used in multiple sample apps. Finally, there are additional sample apps to help you get up and running."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"cross-platform")," directory contains the ",(0,r.kt)("strong",{parentName:"p"},"react-app")," containing all of the user interface code in the sample app. The other directories in ",(0,r.kt)("strong",{parentName:"p"},"cross-platform")," are not used in this sample."),(0,r.kt)("p",null,"Finally, the ",(0,r.kt)("strong",{parentName:"p"},"Snapshot iModels")," directory contains an iModel that you can use when running your sample."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/mobile-sdk-ios-getting-started/file-structure.png",alt:"file-structure"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-xcode"},"4. Xcode"),(0,r.kt)("p",null,"Finally, we\u2019re ready to start diving into the code!")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(T,{language:"bash",code:"open iOS/MobileStarter/MobileStarter.xcodeproj",mdxType:"CodeBlock"}),(0,r.kt)(T,{language:"bash",code:"open iOS/SwiftUIStarter/SwiftUIStarter.xcodeproj",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"41-ui-framework"},"4.1 UI framework"),(0,r.kt)("p",null,"Feel free to choose the project for the UI framework that you prefer. We will be using the SwiftUI starter in this tutorial. If you chose to use UIKit, substitute MobileStarter in all cases throughout the rest of the tutorial."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," All of the app UI in this sample project is written in React, but the iTwin Model Viewer runs in a ",(0,r.kt)("inlineCode",{parentName:"p"},"WKWebView")," and can be integrated into any app.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"UIKit")),(0,r.kt)("p",null,"If you prefer to work with UIKit, open ",(0,r.kt)("inlineCode",{parentName:"p"},"iOS/MobileStarter/MobileStarter.xcodeproj")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"SwiftUI")),(0,r.kt)("p",null,"If you prefer to work with SwiftUI, open ",(0,r.kt)("inlineCode",{parentName:"p"},"iOS/SwiftUIStarter/SwiftUIStarter.xcodeproj"))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"42-swift-package-manager"},"4.2 Swift Package Manager"),(0,r.kt)("p",null,"Swift Package Manager (SPM) downloads several packages as soon as you open the sample. This should only take a couple of minutes, depending on your network speed. Wait for this to finish, then click the project name in the Project navigator."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/mobile-sdk-ios-getting-started/swiftpackages.png",alt:"SPM"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"NOTE"),": You might encounter an error during Swift Package installation or later when you try to run the app. If so, choose ",(0,r.kt)("strong",{parentName:"p"},"File > Packages > Reset Package Caches")," in the Xcode menu."))),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"43-target-configuration"},"4.3 Target configuration"),(0,r.kt)("p",null,"Select ",(0,r.kt)("inlineCode",{parentName:"p"},"SwiftUIStarter")," in the Project Navigator, then select the ",(0,r.kt)("inlineCode",{parentName:"p"},"SwiftUIStarter")," target in the Targets section. Change the Bundle Identifier to ",(0,r.kt)("inlineCode",{parentName:"p"},"com.<myteam>.SwiftUIStarter"),", replacing ",(0,r.kt)("inlineCode",{parentName:"p"},"<myteam>")," with your actual team name."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/mobile-sdk-ios-getting-started/targetconfig-general.png",alt:"target-general"})),(0,r.kt)("p",null,"Next, switch to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Signing & Capabilities")," tab and select your development team from the dropdown."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/mobile-sdk-ios-getting-started/targetconfig-signing.png",alt:"target-signing"}))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(T,{language:"bash",code:"touch iOS/ITMApplication.xcconfig",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"44-xcconfig"},"4.4 Xcconfig"),(0,r.kt)("p",null,"The last thing to do before switching over to VSCode is to create a file called ",(0,r.kt)("inlineCode",{parentName:"p"},"ITMApplication.xcconfig")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"iOS/")," directory. Copy the ",(0,r.kt)("inlineCode",{parentName:"p"},"ITMAPPLICATION_CLIENT_ID")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"ITMAPPLICATION_SCOPE")," code block from the ",(0,r.kt)("inlineCode",{parentName:"p"},"Register a Native Application")," section above and paste it into this file.")),(0,r.kt)(c,{actions:[(0,r.kt)(T,{language:"bash",code:"cd cross-platform/react-app\nnpm install\nnpm run build\nnpm start",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-npm-install"},"5. NPM Install"),(0,r.kt)("p",null,"iTwin.js apps are built using JavaScript, and in order to build and run that side of the codebase, you\u2019ll need to install some dependencies. You should have installed the latest LTS version of Node.js back when you were setting up your environment. Go back and do that now if you skipped that step."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," If you\u2019re using an Apple Silicon Mac, you\u2019ll need to use a Rosetta 2 terminal for this step. Once the install is done you don\u2019t need Rosetta again.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cd")," into ",(0,r.kt)("inlineCode",{parentName:"li"},"cross-platform/react-app")),(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install")),(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run build")),(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"npm start"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," The ",(0,r.kt)("inlineCode",{parentName:"p"},"npm start")," command starts a debug server on your Mac that the iOS app will communicate with. This allows you to debug the JavaScript code using Safari\u2019s Web Inspector. This means that your device needs to be on the same local network as your Mac, and your Mac must not block incoming connections from the local network. In order to run a production-like build, uncomment ",(0,r.kt)("inlineCode",{parentName:"p"},"ITMAPPLICATION_NO_DEBUG_SERVER = YES")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"iOSSamples.xcconfig"),". Note that if you do this you will not be able to use Safari to debug the JavaScript code."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-run-the-app"},"6. Run the app"),(0,r.kt)("p",null,"Now that the React app is built and the debug server is running, or you\u2019ve uncommented ",(0,r.kt)("inlineCode",{parentName:"p"},"ITMAPPLICATION_NO_DEBUG_SERVER = YES")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"iOSSamples.xcconfig"),", it\u2019s time to go back to Xcode."),(0,r.kt)("p",null,"If you\u2019ve followed along with the steps in Section 4, you should be able to simply select your device from the Devices dropdown and run the app (\u2318 R)."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Reminder:")," If you see errors that mention Package resolution, choose ",(0,r.kt)("strong",{parentName:"p"},"File > Packages > Reset Package Caches")," then try to run the app again.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Note:")," You may encounter an error dialog that says ",(0,r.kt)("inlineCode",{parentName:"p"},"Could not connect to React debug server.")," If you see this error, uncomment ",(0,r.kt)("inlineCode",{parentName:"p"},"ITMAPPLICATION_USE_IP = YES")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"iOSSamples.xcconfig")," and try launching the app again.")),(0,r.kt)("p",null,"Once the app is running, you have two ways to open and view an iModel."),(0,r.kt)("p",null,"The first, and easiest, way is to tap ",(0,r.kt)("inlineCode",{parentName:"p"},"Hub iModels")," and open an iModel directly from the iModel Hub. However, this ",(0,r.kt)("em",{parentName:"p"},"does")," require that you have access to a project with an iModel."),(0,r.kt)("p",null,"The other way is to open a snapshot iModel that is loaded onto your device. A simple snapshot iModel is included in the repository at ",(0,r.kt)("inlineCode",{parentName:"p"},"Snapshot iModels/Building Blocks.bim"),". You can copy this onto your device using Finder and then use the ",(0,r.kt)("strong",{parentName:"p"},"Snapshot iModels")," button to open it in the iTwin Sample app."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/mobile-sdk-ios-getting-started/building_blocks.png",alt:"Building blocks iModel"}))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"In this tutorial, you learned how to create a new iTwin mobile client, how an iTwin mobile app is divided between native code and React code, and how to load and view an iModel on your device.")))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-set-up-your-environment",level:2,title:"1. Set up your environment",children:[{id:"11-required-materials",level:3,title:"1.1 Required materials",children:[]},{id:"12-suggested-tools",level:3,title:"1.2 Suggested tools",children:[]}]},{id:"2-register-an-application",level:2,title:"2. Register an application",children:[]},{id:"3-clone-the-sample-repository",level:2,title:"3. Clone the sample repository",children:[{id:"31-directory-structure",level:3,title:"3.1 Directory structure",children:[]}]},{id:"4-xcode",level:2,title:"4. Xcode",children:[{id:"41-ui-framework",level:3,title:"4.1 UI framework",children:[]},{id:"42-swift-package-manager",level:3,title:"4.2 Swift Package Manager",children:[]},{id:"43-target-configuration",level:3,title:"4.3 Target configuration",children:[]},{id:"44-xcconfig",level:3,title:"4.4 Xcconfig",children:[]}]},{id:"5-npm-install",level:2,title:"5. NPM Install",children:[]},{id:"6-run-the-app",level:2,title:"6. Run the app",children:[]},{id:"conclusion",level:2,title:"Conclusion",children:[]}]}},50372:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Property Validation Basics",tile:{name:"Property Validation Basics",description:"Walk-through to create property validation rules and tests and then run them and get the results.",href:"/tutorials/property-validation-basics/",thumbnail:"/unreal-docs-site/static/images/property-validation-thumbnail.png",durationInMinutes:20,relatedApiIds:["validation/propertyValue"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("Alert"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Use Property Validation to check whether property values in an iModel conform to certain rules. The validation is run on user-defined rules for specified property values."),(0,r.kt)("p",null,"In this tutorial, you will learn how to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Get property value rule templates"),(0,r.kt)("li",{parentName:"ul"},"Create/Update/Delete a property validation rule, test, and run"),(0,r.kt)("li",{parentName:"ul"},"Run the property validation test against a specific iModel version"),(0,r.kt)("li",{parentName:"ul"},"Retrieve the property validation test run results"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start/#3-create-an-imodel"},"Access to an iModel")," and the associated project ID and iModel ID for that iModel, along with the ",(0,r.kt)("a",{parentName:"li",href:"/apis/imodels/operations/get-imodel-named-version-details/"},"named version ID")," for the version you want to run the test against."),(0,r.kt)("li",{parentName:"ul"},"Property and schema information for the rules you want to implement.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"For instructions on retrieving schemas for a specific iModel, see ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/retrieve-validation-model-data"},"Retrieve Validation Model Data"),"."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-request-an-authorization-token-using-one-of-the-methods-below"},"1. Request an authorization token using one of the methods below"),(0,r.kt)("h3",{id:"implement-the-authorization-code-flow-in-the-application"},"Implement the Authorization Code Flow in the application"),(0,r.kt)("p",null,"Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"OAuth2 Authorization")," article to implement an Authorization code workflow in your application. Include the scopes \u201cvalidation:read\u201d and 'validation:modify\u2019."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-out-section"},"Grab a user token from API reference \u201cTry it out\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open ",(0,r.kt)("a",{parentName:"li",href:"/apis/validation/operations/get-validation-propertyvalue-rule-templates/"},"Get property value validation rule templates")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"In the Authorization section, select ",(0,r.kt)("strong",{parentName:"li"},"AuthorizationCode"),"."),(0,r.kt)("li",{parentName:"ol"},"Copy the Authorization token in the Header section for use in this tutorial. It will replace the JWT_TOKEN dynamic parameter in the following steps."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "ruleTemplates":{\n    "id":"0000000000000000000000000000000000000000000",\n    "displayName":"PropertyValuePattern",\n    "description":"Checks if the property confirms to the provided pattern",\n    "prompt":"Looks for given pattern in iModel",\n    "templateExpression":{\n      "propertyName": "LastMod",\n      "pattern": "west"\n    }\n  },\n  "_links":{\n    "next":{\n      "href":"https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId=00000000-0000-0000-0000-000000000000"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-property-validation-rule-templates"},"2. Get property validation rule templates"),(0,r.kt)("p",null,"A property validation rule is used as a basis for verifying the value of a property. A rule checks if the value of a property is defined, within a range of values, matches a pattern, etc."),(0,r.kt)("p",null,"We have provided a variety of property validation rule templates to get you started. The ",(0,r.kt)("code",null,"HTTP GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId%5B&continuationToken%5D%5B&$top%5D"},"https://api.bentley.com/validation/propertyValue/ruleTemplates?projectId[&continuationToken][&$top]"))," request returns all property validation rule templates for the given project ID. Choose the template that is best suited for your goals based on the description."),(0,r.kt)("p",null,"In this tutorial, we demonstrate using the PropertyValuePattern template.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/validation/propertyValue/rules HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n  "displayName":"TestRule1",\n  "description":"test rule",\n  "templateId":"0000000000000000000000000000000000000000000",\n  "severity":"high",\n  "ecSchema":"ProcessPhysical",\n  "ecClass":"PUMP",\n  "whereClause":"",\n  "dataType":"property",\n  "functionParameters":{\n    "propertyName":"COMPONENT_NAME",\n    "pattern":"pmp",\n    "flags":"i"\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "rule":{\n    "id": "0000000000000000000000000000000000000000000",\n    "displayName": "PropertyValuePatternRule",\n    "description": "property value pattern rule",\n    "templateId": "0000000000000000000000000000000000000000000",\n    "severity": "high",\n    "ecSchema": "ProcessPhysical",\n    "ecClass": "PUMP",\n    "whereClause": null,\n    "functionParameters": {\n      "propertyName": "COMPONENT_NAME",\n      "pattern": "pmp",\n      "flags": "i"\n    },\n    "dataType": "property",\n    "_links": {\n      "self": {\n          "href": "https://api.bentley.com/validation/propertyValue/rules/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-creating-a-property-validation-rule"},"3. Creating a property validation rule"),(0,r.kt)("p",null,"Configuring the validation rules is the biggest part of creating a property validation test."),(0,r.kt)("p",null,"To create a property validation rule, you need the template ID of a property validation template, a name for the rule, a description, the severity of the rule, and the ",(0,r.kt)("inlineCode",{parentName:"p"},"dataType"),". You will also need a project ID as well as an EC schema and class. Optionally, you can include a conditional ",(0,r.kt)("inlineCode",{parentName:"p"},"whereClause"),". Depending on the template used, you may also need to provide ",(0,r.kt)("inlineCode",{parentName:"p"},"functionParameters"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"severity"),": One of four values: \u201cveryHigh\u2019, 'high\u2019, 'medium\u2019, 'low\u201d"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"dataType"),": One of three values: \u201cproperty\u2019, 'aspect\u2019, 'typeDefinition\u201d"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"functionParameters"),": These are the parameters listed in the templateExpression object of a retrieved template."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"whereClause"),": Syntax for the where clause is as follows: ","[propertyName][comparison operator]"," ","[value]",", ie USER_LABEL = 'Door\u2019, for multiple properties connectors such as AND/OR can be used as well.")),(0,r.kt)("p",null,"In the example on the right, a rule is created to match all PUMP elements with a ",(0,r.kt)("inlineCode",{parentName:"p"},"COMPONENT_NAME")," property containg the pattern \u201cpmp\u201d with the case-insensitive flag specified. The template ID is set to use the PropertyValuePattern template."),(0,r.kt)("p",null,"If your rule is created successfully, it will return the rule metadata and a rule ID. This will be used in the following steps to associate the rule with a test."),(0,r.kt)("h3",{id:"updating-a-property-validation-rule"},"Updating a property validation rule"),(0,r.kt)("p",null,"To update a rule, the request body format is the same, but requires calling the ",(0,r.kt)("code",null,"HTTP PUT ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/rules/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/rules/{id}"))," request with the rule ID. Currently, ",(0,r.kt)("inlineCode",{parentName:"p"},"functionParameters")," cannot be updated. If a change is needed, you must delete the rule and create a new one."),(0,r.kt)("h3",{id:"deleting-a-property-validation-rule"},"Deleting a property validation rule"),(0,r.kt)("p",null,"Deleting a property validation rule requires calling the ",(0,r.kt)("code",null,"HTTP DELETE ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/rules/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/rules/{id}"))," request with the rule ID."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note: At this time, deleting a property validation rule does not automatically delete them from associated tests. Make sure to update the tests in conjunction with the rule deletion to keep things consistent.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/validation/propertyValue/tests HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nPrefer: return=representation\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n  "projectId":"00000000-0000-0000-0000-000000000000",\n  "displayName":"PV test1",\n  "description":"PV test1",\n  "rules":[\n    "0000000000000000000000000000000000000000000"\n  ],\n  "stopExecutionOnFailure":true\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "test":{\n    "id":"0000000000000000000000000000000000000000000",\n    "_links":{\n      "self":{\n        "href":"https://api.bentley.com/validation/propertyValue/tests/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-creating-a-property-validation-test"},"4. Creating a Property Validation Test"),(0,r.kt)("p",null,"The process of creating a property validation test is very basic as the majority of the configuration happens during rule creation."),(0,r.kt)("p",null,"To create a property validation test, you need the ID of the project, a name and description for the test, as well as an array of rule IDs to associate with the test."),(0,r.kt)("p",null,"To get a list of rules and rule IDs created and available for a specific project requires calling the ",(0,r.kt)("code",null,"HTTP GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/rules?projectId%5B&continuationToken%5D%5B&$top%5D"},"https://api.bentley.com/validation/propertyValue/rules?projectId[&continuationToken][&$top]"))," request. The ",(0,r.kt)("inlineCode",{parentName:"p"},"Prefer")," parameter to the header can be used to get a condensed or more detailed list of rules. For more details, see ",(0,r.kt)("a",{parentName:"p",href:"/apis/validation/operations/get-validation-propertyvalue-rules/"},"Get validation PropertyValue rules"),"."),(0,r.kt)("p",null,"For this tutorial, simply set the rules array in the given example request body to the ID of the newly created rule from the previous step. Optionally, call the GET request and add some of the rule IDs that are returned."),(0,r.kt)("h3",{id:"updating-a-property-validation-test"},"Updating a property validation test"),(0,r.kt)("p",null,"To update a test, the request body format remains the same but requires calling the ",(0,r.kt)("code",null,"HTTP PUT ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/tests/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/tests/{id}"))," request with the test ID."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note: This will replace everything. If you are adding new rules, make sure to pass in the full list of rule IDs rather than just the new rule."),(0,r.kt)("h3",{id:"deleting-a-property-validation-test"},"Deleting a property validation test"),(0,r.kt)("p",null,"Deleting a property validation requires calling the ",(0,r.kt)("code",null,"HTTP DELETE ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/tests/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/tests/{id}"))," request with the test ID."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note: Deleting a property validation test does not automatically delete associated test runs.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/propertyValue/runs HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n  "testId":"0000000000000000000000000000000000000000000",\n  "iModelId":"00000000-0000-0000-0000-000000000000",\n  "namedVersionId":"0000000000000000000000000000000000000000"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "run":{\n    "id":"0000000000000000000000000000000000000000000",\n    "_links":{\n      "run":{\n        "href":"https://api.bentley.com/validation/propertyValue/runs/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-run-a-property-validation-test"},"5. Run a Property Validation Test"),(0,r.kt)("p",null,"Triggering a property validation test run requires the test ID from the created test, as well as the iModel ID and Named Version ID of the iModel on which the test is being run."),(0,r.kt)("p",null,"If a test is successfully triggered, the POST request will return the ID of the run triggered with the associated test. The given run ID can be used in the ",(0,r.kt)("code",null,"HTTP GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/runs/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/runs/{id}"))," request to check the status of the run as well as retrieve the test results, which are detailed in the next step.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/runs/C3LRQU_ILkmFYQVClhDuxow-EXGyYdJHrgH5zpcUQ8U HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "run":{\n    "id":"0000000000000000000000000000000000000000000",\n    "displayName":"PropertyValueTest1-10/21/2020 4:07:28 PM",\n    "executedDateTime":"12/1/2020 5:12:50 PM",\n    "count":"27",\n    "userName":"John Johnson",\n    "status":"queued",\n    "_links":{\n      "result":{\n        "href":"https://api.bentley.com/validation/propertyValue/results/0000000000000000000000000000000000000000000000000000000000000000"\n      },\n      "test":{\n        "href":"https://api.bentley.com/validation/propertyValue/tests/0000000000000000000000000000000000000000000"\n      }\n    }\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/validation/propertyValue/results/0000000000000000000000000000000000000000000000000000000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "result":[\n    {\n      "elementId":"0x3000000000d",\n      "elementLabel":" [3-D] ",\n      "ruleIndex":0,\n      "badValue":"Undefined"\n    },\n    {\n      "elementId":"0x3000000000f",\n      "elementLabel":" [3-F] ",\n      "ruleIndex":0,\n      "badValue":"Undefined"\n    },\n    {\n      "elementId":"0x30000000010",\n      "elementLabel":" [3-G] ",\n      "ruleIndex":0,\n      "badValue":"Undefined"\n    }\n  ],\n  "ruleList":[\n    {\n      "id":"0000000000000000000000000000000000000000000",\n      "displayName":"TestRule1"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-getting-property-validation-test-results"},"6. Getting Property Validation Test Results"),(0,r.kt)("p",null,"A results link is provided in the response body of the ",(0,r.kt)("code",null,"HTTP GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/runs/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/runs/{id}"))," request. Retrieving the results can be done by making a GET request using said link which points to the ",(0,r.kt)("code",null,"HTTP GET ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/results/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/results/{id}"))," request."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note: While the results link will always appear in the response body, you will not be able to actually retrieve the results until the status is shown as complete."),(0,r.kt)("p",null,"The property validation results are formatted with a ",(0,r.kt)("inlineCode",{parentName:"p"},"result")," array that holds all the invalid property values as well as a ",(0,r.kt)("inlineCode",{parentName:"p"},"ruleList")," array that holds all of the rules associated with the test run."),(0,r.kt)("p",null,"Within each object in the ",(0,r.kt)("inlineCode",{parentName:"p"},"result")," array:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"elementId"),": the element id of the invalid property"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"elementLabel"),": the element label of the invalid property"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ruleIndex"),": the index of the rule within ",(0,r.kt)("inlineCode",{parentName:"li"},"ruleList")," that this property failed to pass"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"badValue"),": the invalid property value")),(0,r.kt)("p",null,"Within each object in the ",(0,r.kt)("inlineCode",{parentName:"p"},"ruleList")," array:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"id"),": the rule ID"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"displayName"),": the rule name")),(0,r.kt)("p",null,"The given example response body to the right shows what might be returned."),(0,r.kt)("h3",{id:"delete-a-property-validation-test-run"},"Delete a property validation test run"),(0,r.kt)("p",null,"Deleting a property validation test run requires calling the ",(0,r.kt)("code",null,"HTTP DELETE ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/validation/propertyValue/runs/%7Bid%7D"},"https://api.bentley.com/validation/propertyValue/runs/{id}"))," request with the run ID.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"In this tutorial, you learned how to create, update and delete property validation rules and tests. You also learned how to run a property validation test and fetch the results.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"iTwin Validation",href:"/api-groups/validation/",description:"An overview of Validation APIs.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Property Validation Showcase",href:"https://www.itwinjs.org/sample-showcase/?group=iTwin+Platform+APIs&sample=property-validation-sample&imodel=Bay+Town+Process+Plant",description:"This sample demonstrates calling Property Validation APIs to retrieve validation rules and the elements that violate them and present it for review in a viewer app.",isExternal:!0,mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-an-authorization-token-using-one-of-the-methods-below",level:2,title:"1. Request an authorization token using one of the methods below",children:[{id:"implement-the-authorization-code-flow-in-the-application",level:3,title:"Implement the Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-out-section",level:3,title:"Grab a user token from API reference \u201cTry it out\u201d Section",children:[]}]},{id:"2-get-property-validation-rule-templates",level:2,title:"2. Get property validation rule templates",children:[]},{id:"3-creating-a-property-validation-rule",level:2,title:"3. Creating a property validation rule",children:[{id:"updating-a-property-validation-rule",level:3,title:"Updating a property validation rule",children:[]},{id:"deleting-a-property-validation-rule",level:3,title:"Deleting a property validation rule",children:[]}]},{id:"4-creating-a-property-validation-test",level:2,title:"4. Creating a Property Validation Test",children:[{id:"updating-a-property-validation-test",level:3,title:"Updating a property validation test",children:[]},{id:"deleting-a-property-validation-test",level:3,title:"Deleting a property validation test",children:[]}]},{id:"5-run-a-property-validation-test",level:2,title:"5. Run a Property Validation Test",children:[]},{id:"6-getting-property-validation-test-results",level:2,title:"6. Getting Property Validation Test Results",children:[{id:"delete-a-property-validation-test-run",level:3,title:"Delete a property validation test run",children:[]}]},{id:"conclusion",level:2,title:"Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},12888:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"React to events using Webhooks V2 API",tile:{name:"React to events using Webhooks V2 API",description:"This tutorial will teach you how to use Webhooks API to subscribe to iModel events and introduce basic event handling workflows.",href:"/tutorials/react-to-events-using-webhooks-v2/",durationInMinutes:45,relatedApiIds:["webhooks"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("NodeJsIcon"),h=p("GitIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("Title"),f=p("CodeBlock"),T=p("Alert"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"45",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial, you will learn how to use the Webhooks V2 API to create and manage your webhooks. Also you will learn how to validate the webhook signature and process received event messages in your application.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Basic knowledge on ",(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Webhook"},"webhooks")," and how they work."),(0,r.kt)("li",{parentName:"ul"},"Knowledge on web application deployment or experience using ",(0,r.kt)("a",{parentName:"li",href:"https://www.heroku.com/about"},"Heroku"),"/",(0,r.kt)("a",{parentName:"li",href:"https://www.netlify.com/"},"Netlify"),"."),(0,r.kt)("li",{parentName:"ul"},"Already registered your own Service Application on the iTwin Platform.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Steps to follow for registering an Service Application can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/authorize-service/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Make sure that your Service Application is associated with ",(0,r.kt)("strong",{parentName:"li"},"Webhooks API")," and has ",(0,r.kt)("inlineCode",{parentName:"li"},"webhooks:read")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"webhooks:modify")," scopes enabled."),(0,r.kt)("li",{parentName:"ul"},"The Webhooks API V2 can only be called by Service Applications."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-set-up-your-environment"},"1. Set up your environment")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://nodejs.org",target:"_blank",title:"Node.js",icon:(0,r.kt)(m,{mdxType:"NodeJsIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://git-scm.com/downloads",target:"_blank",title:"Git",icon:(0,r.kt)(h,{mdxType:"GitIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-required-materials"},"1.1 Required materials"),(0,r.kt)("h5",{id:"a-hrefhttpsnodejsorg-target_blanknodejs-14x-lts-versiona"},(0,r.kt)("a",{href:"https://nodejs.org",target:"_blank"},"Node.js (14.x LTS version)")),(0,r.kt)("p",null,"This tool provides the backend JavaScript runtime necessary for your computer to read and render code appropriately. It also allows you to run NPM command line."),(0,r.kt)("h5",{id:"a-hrefhttpsgit-scmcomdownloads-target_blankgita"},(0,r.kt)("a",{href:"https://git-scm.com/downloads",target:"_blank"},"Git")),(0,r.kt)("p",null,"This is the common source code control system.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"VS Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-suggested-materials"},"1.2 Suggested materials"),(0,r.kt)("h5",{id:"a-hrefhttpscodevisualstudiocom-target_blankvisual-studio-codea"},(0,r.kt)("a",{href:"https://code.visualstudio.com/",target:"_blank"},"Visual Studio Code")),(0,r.kt)("p",null,"This is our recommended editor and debugger tool for developing iTwin.js applications. It is free, open source and includes a GUI for working with GIT."),(0,r.kt)("h5",{id:"a-hrefhttpswwwpostmancomdownloads-target_blankpostmana"},(0,r.kt)("a",{href:"https://www.postman.com/downloads/",target:"_blank"},"Postman")),(0,r.kt)("p",null,"If you want to test the REST API calls directly, you can use ",(0,r.kt)("a",{parentName:"p",href:"https://www.postman.com/downloads/"},"Postman")," or any other solution capable of sending HTTP requests. If you do it this way, you will require an authorization token for the requests to work."),(0,r.kt)("h5",{id:"a-hrefhttpssignupherokucom-target_blankheroku-accounta"},(0,r.kt)("a",{href:"https://signup.heroku.com/",target:"_blank"},"Heroku account")),(0,r.kt)("p",null,"Heroku will be used to deploy the test application during this tutorial.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-your-application"},"2. Create your application"),(0,r.kt)("p",null,"Since webhooks are sending the events via HTTP requests you need to have an application running that exposes a public HTTP endpoint - callback URL. In this tutorial we are going to use ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en"},"Node.js")," together with ",(0,r.kt)("a",{parentName:"p",href:"https://expressjs.com/"},"Express")," for test application.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Project initialization"),(0,r.kt)(f,{language:"bash",code:"cd your-project\nnpm init -y\nnpm install express\nnpm install -D typescript @types/express\ntsc --init",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"tsconfig.json"),(0,r.kt)(f,{language:"json",code:'"outDir":"dist"',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"package.json"),(0,r.kt)(f,{language:"json",code:'"main":"dist/index.js"',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"json",code:'"scripts":{\n  "start":"tsc && node dist/index.js"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-initialize-the-project"},"2.1 Initialize the project"),(0,r.kt)("p",null,"To start off, create new directory for your application and execute the following initialization commands. These commands will initialize new npm project, install required dependencies and configure typescript. After initialization, update freshly generated ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," file by setting ",(0,r.kt)("inlineCode",{parentName:"p"},"outDir")," property to ",(0,r.kt)("inlineCode",{parentName:"p"},'"dist"'),". Next step will be updating ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file to update the application entry point and ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," script. After that is done, the project is ready for the next step."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},'If you are running into "tsc is not recognized" problems, try installing typescript globally "npm install typescript -g".')),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import express from "express";\n\nconst app = express();\napp.use(express.text({ type: "application/json" }));\n\napp.post("/events", () => {\n  // Handle the event\n});\n\nconst port = 5000;\napp.listen(port, () => {\n  console.log("Application was started.");\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"22-create-express-server"},"2.2 Create express server"),(0,r.kt)("p",null,"Now let\u2019s start implementing the application. At first, create a new file in your project directory ",(0,r.kt)("inlineCode",{parentName:"p"},"src/index.ts"),". This is going to be the application starting point. From example on the side you can see that we are going to have a public HTTP endpoint that will be accepting POST requests ",(0,r.kt)("inlineCode",{parentName:"p"},'app.post("/events", () => {})'),". This is because event messages are sent using POST method. Note that above there is a line ",(0,r.kt)("inlineCode",{parentName:"p"},'app.use(express.text({ type: "application/json" }))')," that makes the server treat the requests with json content as text and not deserialize them initially because raw payload will be required for event authorization in one of the upcoming steps.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import crypto from "crypto";',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"typescript",code:'function validateSignature(payload: string, signatureHeader: string): boolean {\n  // Replace with your own webhook secret later\n  const secret = "4eb25d308ef2a9722ffbd7a2b7e5026f9d1f2feaca5999611d4ef8692b1ad70d";\n\n  const [algorithm, signature] = signatureHeader.split("=");\n  const generated_sig = crypto.createHmac(algorithm, secret).update(payload, "utf-8").digest("hex");\n\n  return generated_sig.toLowerCase() === signature.toLowerCase();\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"23-add-event-authorization"},"2.3 Add event authorization"),(0,r.kt)("p",null,"In order to authorize the event source, we need to add event signature validation. Event signature is ",(0,r.kt)("inlineCode",{parentName:"p"},"HMAC-SHA256")," string that is included in the request ",(0,r.kt)("inlineCode",{parentName:"p"},"Signature")," header. For validation we will be using Node.js ",(0,r.kt)("inlineCode",{parentName:"p"},"crypto")," utility which basically lets us to generate the same type of signature in our end. Generated signature and the signature included in the request should match to pass the authorization. Let\u2019s start adding validation by creating a new function ",(0,r.kt)("inlineCode",{parentName:"p"},"function validateSignature(payload: string, signatureHeader: string)"),". As a first parameter it will to expect raw request payload and as a second parameter it will expect signature header value. This function will also need the webhook ",(0,r.kt)("inlineCode",{parentName:"p"},"secret")," which we are going to add later on we create a webhook. Since, the signature header value also contains the cryptographic algorithm name and the signature value separated by ",(0,r.kt)("inlineCode",{parentName:"p"},"="),", we need to extract these values into separate variables ",(0,r.kt)("inlineCode",{parentName:"p"},'const [algorithm, signature] = signatureHeader.split("=")'),". Then at this point, using all the existing variables we can generate a signature ",(0,r.kt)("inlineCode",{parentName:"p"},'crypto.createHmac(algorithm, secret).update(payload, "utf-8").digest("hex")'),". Lastly, we need to check if both signatures match and return the result.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/models.ts"),(0,r.kt)(f,{language:"typescript",code:"export type Event = {\n  content: iModelDeletedEvent | NamedVersionCreatedEvent;\n  eventType: string;\n  enqueuedDateTime: string;\n  messageId: string;\n  webhookId: string;\n  iTwinId: string;\n};\n\nexport type iModelDeletedEvent = {\n  imodelId: string;\n  userId: string;\n};\n\nexport type MemberAddedEvent = {\n  memberId: string;\n  eventCreatedBy: string;\n  memberType: string;\n  roleId: string;\n  roleName: string;\n}",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"24-define-data-models"},"2.4 Define data models"),(0,r.kt)("p",null,"Before we can start receiving the events, we need to prepare the models for expected data. You can find the schema for the base event and all other available events ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks-v2/events"},"here"),". Create a new file ",(0,r.kt)("inlineCode",{parentName:"p"},"src/models.ts")," and create event types by matching the schema. For this example we will create two event types, ",(0,r.kt)("inlineCode",{parentName:"p"},"iModels.iModelDeleted.v1")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"accessControl.memberAdded.v1"))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import { Event, NamedVersionCreatedEvent } from "./models";',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"typescript",code:'app.post("/events", (req, res) => {\n  const signatureHeader = req.headers["signature"] as string;\n  if (!signatureHeader || !req.body) res.sendStatus(401);\n\n  if (!validateSignature(req.body, signatureHeader)) {\n    res.sendStatus(401);\n  } else {\n    const event = JSON.parse(req.body) as Event;\n    switch (event.eventType) {\n      case "accessControl.memberAdded.v1": {\n        const content = event.content as MemberAddedEvent;\n        console.log(`Member (Id:${content.memberId}) was added to iTwin (${event.iTwinId})!  Member was granted the ${content.roleName} role (Id: ${content.roleId}).`);\n        break;\n      }\n      default:\n        res.sendStatus(400); //Unexpected event type\n    }\n  }\n  res.sendStatus(200);\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"25-event-handling"},"2.5 Event handling"),(0,r.kt)("p",null,"Now that we have everything ready for event handling, we can start implementing it. First we want to validate the request you receive came from our Webhooks Service. You can do this be checking the signature header. If the request either does not contain a signature header or a request body, you can go ahead and return '401 Unauthorized\" ",(0,r.kt)("inlineCode",{parentName:"p"},"if (!signatureHeader || !req.body) res.sendStatus(401)"),". If request does have these components then we can proceed with further processing logic and try to validate the event signature using the function we defined in step 2.3 ",(0,r.kt)("inlineCode",{parentName:"p"},"if (!validateSignature(req.body, signatureHeader)) res.sendStatus(401)"),". If validation fails, we can assume that the event was sent from unexpected source and safely return ",(0,r.kt)("inlineCode",{parentName:"p"},"401 Unauthorized")," as well."),(0,r.kt)("p",null,"If we do not receive a response within 5 seconds we will count that request as failed and start the retry procedure. To avoid any inadvertent timeouts we suggest validating the request, putting any work you will be doing in reaction to the event on a seperate thread, and then return '200 Ok\u2019. More information about the retry procedure can be found ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks-v2/overview/#RetryProcedure"},"here"),".")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"26-deploy"},"2.6 Deploy"),(0,r.kt)("p",null,"For this application to work, you have to deploy it to be publicly accessible. If you have any preferences for the deployment, go ahead and use your own deployment method and platform. If not, you can keep following the tutorial and deploy the application using ",(0,r.kt)("a",{parentName:"p",href:"https://www.heroku.com/about"},"Heroku"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create new Heroku application and empty Heroku Git repository ",(0,r.kt)("a",{parentName:"li",href:"https://devcenter.heroku.com/articles/git#for-a-new-heroku-app"},"https://devcenter.heroku.com/articles/git#for-a-new-heroku-app"),"."),(0,r.kt)("li",{parentName:"ol"},"Deploy by pushing the code ",(0,r.kt)("a",{parentName:"li",href:"https://devcenter.heroku.com/articles/git#deploying-code"},"https://devcenter.heroku.com/articles/git#deploying-code"),"."),(0,r.kt)("li",{parentName:"ol"},"Use ",(0,r.kt)("inlineCode",{parentName:"li"},"heroku logs --tail")," for monitoring the behavior of the application.")),(0,r.kt)("p",null,"Once you have the application deployed and running, we can move on to the webhook creation.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-webhook"},"3. Create a webhook"),(0,r.kt)("p",null,"Webhooks allows you to subscribe to events happening in iTwin Platform. Webhooks are an easy way to automate workflows inside of the iTwin Platform.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},'Example HTTP request for "Create webhook" operation'),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/webhooks HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"31-request"},"3.1 Request"),(0,r.kt)("p",null,"A webhook for iModel events is created by sending a POST request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/webhooks/"},"https://api.bentley.com/webhooks/"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with valid Bearer access token is required."),(0,r.kt)("p",null,"The Webhooks API V2 can only be called by Service Applications. This request requires an ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with a valid Bearer token with the ",(0,r.kt)("inlineCode",{parentName:"p"},"{scope}")," scope. For more information on Service Applications and how to obtain an access token can be found ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/authorize-service/"},"here"),". A list of your Service Applications can be found ",(0,r.kt)("a",{parentName:"p",href:"/my-apps"},"here"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Example request body"),(0,r.kt)(f,{language:"json",code:'{  \n  "callbackUrl":"https://HOSTNAME/events",\n  "scope": "account",\n  "secret": "optional-32-character-value"\n  "eventTypes":[\n    "iModels.iModelDeleted.v1",\n    "accessControl.memberAdded.v1"\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"32-request-body"},"3.2 Request body"),(0,r.kt)("p",null,"Webhook creation properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"callbackUrl")," - a public endpoint of your application where you expect the event to be sent."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"eventTypes")," - a list of event types you want to subscribe to. A full list can be found ",(0,r.kt)("a",{parentName:"li",href:"/apis/webhooks-v2/events"},"here")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"secret")," - (optional) At least 32 character string value. Used to validate the request to the callback url. If no value is given a secret will be generate and returned. For more information, see ",(0,r.kt)("a",{parentName:"li",href:"/apis/webhooks-v2/overview/#Webhooksecret"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope")," - Scope of the events that will be received. Only \u201cAccount\u201d is the accepted value.")),(0,r.kt)("p",null,"For more information see the ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks/operations/create-webhook"},"documentation"),"."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},'Don\'t forget to replace the "HOSTNAME" placeholder value with your deployed application hostname.')),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Example response result"),(0,r.kt)(f,{language:"json",code:'{\n  "webhook":{\n    "id": "00000000-0000-0000-0000-000000000000",\n    "scope": "Account",\n    "scopeId": "00000000-0000-0000-0000-000000000000",\n    "active": false,\n    "callbackUrl":"https://HOSTNAME/events",\n    "secret": "1de62d1611b20e00245c0db2b0805e9f60021b104702a3c227cf6e216f1f153b",\n    "eventTypes": [\n      "iModels.iModelDeleted.v1",\n      "accessControl.memberAdded.v1"\n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"33-response"},"3.3 Response"),(0,r.kt)("p",null,"On the successful response you will get returned the webhook secret if you did not provided one in the request. We will be need it later to validate received events. You will need to store the secret in your application storage in order to prepare for receiving events, but for this tutorial just use it to replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"const secret")," value in ",(0,r.kt)("inlineCode",{parentName:"p"},"function validateSignature")," from step 2.3."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},"Note that the webhook secret should not be shared with anyone and treated as a private key.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-activate-a-webhook"},"4. Activate a webhook"),(0,r.kt)("p",null,"For your webhooks to start receiving events it must first be activated. By default webhooks are created as inactivate. These steps can also be used to reactivate a webhook after a failed retry procedure. More information about the retry procedure can be found ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks-v2/overview/#RetryProcedure"},"here"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},'Example HTTP request for "Update webhook" operation'),(0,r.kt)(f,{language:"http",code:"PATCH https://api.bentley.com/webhooks/{webhookId} HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"41-request"},"4.1 Request"),(0,r.kt)("p",null,"A webhook can be updated by sending a PATCH request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/webhooks/%7BwebhookId%7D"},"https://api.bentley.com/webhooks/{webhookId}"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with valid Bearer access token is required."),(0,r.kt)("p",null,"The Webhooks API V2 can only be called by Service Applications. This request requires an ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with a valid Bearer token with the ",(0,r.kt)("inlineCode",{parentName:"p"},"{scope}")," scope. For more information on Service Applications and how to obtain an access token can be found ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/authorize-service/"},"here"),". A list of your Service Applications can be found ",(0,r.kt)("a",{parentName:"p",href:"/my-apps"},"here"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Example request body"),(0,r.kt)(f,{language:"json",code:'{  \n  "active": true\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"42-request-body"},"4.2 Request body"),(0,r.kt)("p",null,"To activate a webhook you will need to set the \u201cactive\u201d field to 'true\u2019. You can also use the PATCH request to update the following properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"active"),(0,r.kt)("li",{parentName:"ul"},"callbackUrl"),(0,r.kt)("li",{parentName:"ul"},"eventTypes"),(0,r.kt)("li",{parentName:"ul"},"secret")),(0,r.kt)("p",null,"For more information see the ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks/operations/update-webhook"},"documentation"),"."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},"Note that the webhook secret will not be return in the response. We will only return the secret in the response of the webhook creation.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Example response result"),(0,r.kt)(f,{language:"json",code:'{\n  "webhook":{\n    "id": "00000000-0000-0000-0000-000000000000",\n    "scope": "Account",\n    "scopeId": "00000000-0000-0000-0000-000000000000",\n    "active": true,\n    "callbackUrl":"https://HOSTNAME/events",\n    "eventTypes": [\n      "iModels.iModelDeleted.v1",\n      "accessControl.memberAdded.v1"\n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"43-response"},"4.3 Response"),(0,r.kt)("p",null,"On the successful response you will get returned the webhook with the updated values. For this example only the \u201cactive\u201d field is updated."),(0,r.kt)("p",null,"Your webhook is now active. Your application setup in Step 2 will now start to receive events.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Workflow Automation API group documentation",href:"/api-groups/workflow-automation",description:"An overview and detailed Workflow Automation API group documentation.",mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Data Management API group documentation",href:"/api-groups/data-management",description:"An overview and detailed Data Management API group documentation.",mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-set-up-your-environment",level:2,title:"1. Set up your environment",children:[{id:"11-required-materials",level:3,title:"1.1 Required materials",children:[]},{id:"12-suggested-materials",level:3,title:"1.2 Suggested materials",children:[]}]},{id:"2-create-your-application",level:2,title:"2. Create your application",children:[{id:"21-initialize-the-project",level:3,title:"2.1 Initialize the project",children:[]},{id:"22-create-express-server",level:3,title:"2.2 Create express server",children:[]},{id:"23-add-event-authorization",level:3,title:"2.3 Add event authorization",children:[]},{id:"24-define-data-models",level:3,title:"2.4 Define data models",children:[]},{id:"25-event-handling",level:3,title:"2.5 Event handling",children:[]},{id:"26-deploy",level:3,title:"2.6 Deploy",children:[]}]},{id:"3-create-a-webhook",level:2,title:"3. Create a webhook",children:[{id:"31-request",level:3,title:"3.1 Request",children:[]},{id:"32-request-body",level:3,title:"3.2 Request body",children:[]},{id:"33-response",level:3,title:"3.3 Response",children:[]}]},{id:"4-activate-a-webhook",level:2,title:"4. Activate a webhook",children:[{id:"41-request",level:3,title:"4.1 Request",children:[]},{id:"42-request-body",level:3,title:"4.2 Request body",children:[]},{id:"43-response",level:3,title:"4.3 Response",children:[]}]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},83906:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return s},ZP:function(){return C}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"React to iModel events using Webhooks API",tile:{name:"React to iModel events using Webhooks API",description:"This tutorial will teach you how to use Webhooks API to subscribe to iModel events and introduce basic event handling workflows.",href:"/tutorials/react-to-events-using-webhooks/",durationInMinutes:45,relatedApiIds:["webhooks"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("NodeJsIcon"),h=p("GitIcon"),k=p("VSCodeIcon"),g=p("PostmanIcon"),y=p("Title"),f=p("CodeBlock"),T=p("Alert"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),N={metadata:s};function C(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"45",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In this tutorial, you will learn how to use the Webhooks REST API to create and manage your webhooks. Also you will learn how to validate the webhook signature and process received event messages in your application.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Basic knowledge on ",(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Webhook"},"webhooks")," and how they work."),(0,r.kt)("li",{parentName:"ul"},"Knowledge on web application deployment or experience using ",(0,r.kt)("a",{parentName:"li",href:"https://www.heroku.com/about"},"Heroku"),"/",(0,r.kt)("a",{parentName:"li",href:"https://www.netlify.com/"},"Netlify"),"."),(0,r.kt)("li",{parentName:"ul"},"Already registered your own application/client on iTwin Platform.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,r.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,r.kt)("strong",{parentName:"li"},"Webhooks API")," and has ",(0,r.kt)("inlineCode",{parentName:"li"},"webhooks:read")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"webhooks:modify")," scopes enabled."))),(0,r.kt)("li",{parentName:"ul"},"Any existing ",(0,r.kt)("strong",{parentName:"li"},"iModel")," that your application/client has access and contains at least one changeset that has not a named version created on.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"In order to create one you need to run the synchronization for an iModel which is described in this ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/synchronization-storage-tutorial"},"tutorial"),". Or you can ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-test-imodel-sample"},"create a new iModel")," from Bentley provided sample."))),(0,r.kt)("li",{parentName:"ul"},"Knowledge on creating named versions for your iModel.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"A tutorial on how to create a named version can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-named-version"},"here"),"."))))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-set-up-your-environment"},"1. Set up your environment")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://nodejs.org",target:"_blank",title:"Node.js",icon:(0,r.kt)(m,{mdxType:"NodeJsIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://git-scm.com/downloads",target:"_blank",title:"Git",icon:(0,r.kt)(h,{mdxType:"GitIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-required-materials"},"1.1 Required materials"),(0,r.kt)("h5",{id:"a-hrefhttpsnodejsorg-target_blanknodejs-14x-lts-versiona"},(0,r.kt)("a",{href:"https://nodejs.org",target:"_blank"},"Node.js (14.x LTS version)")),(0,r.kt)("p",null,"This tool provides the backend JavaScript runtime necessary for your computer to read and render code appropriately. It also allows you to run NPM command line."),(0,r.kt)("h5",{id:"a-hrefhttpsgit-scmcomdownloads-target_blankgita"},(0,r.kt)("a",{href:"https://git-scm.com/downloads",target:"_blank"},"Git")),(0,r.kt)("p",null,"This is the common source code control system.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"VS Code",icon:(0,r.kt)(k,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(g,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-suggested-materials"},"1.2 Suggested materials"),(0,r.kt)("h5",{id:"a-hrefhttpscodevisualstudiocom-target_blankvisual-studio-codea"},(0,r.kt)("a",{href:"https://code.visualstudio.com/",target:"_blank"},"Visual Studio Code")),(0,r.kt)("p",null,"This is our recommended editor and debugger tool for developing iTwin.js applications. It is free, open source and includes a GUI for working with GIT."),(0,r.kt)("h5",{id:"a-hrefhttpswwwpostmancomdownloads-target_blankpostmana"},(0,r.kt)("a",{href:"https://www.postman.com/downloads/",target:"_blank"},"Postman")),(0,r.kt)("p",null,"If you want to test the REST API calls directly, you can use ",(0,r.kt)("a",{parentName:"p",href:"https://www.postman.com/downloads/"},"Postman")," or any other solution capable of sending HTTP requests. If you do it this way, you will require an authorization token for the requests to work."),(0,r.kt)("h5",{id:"a-hrefhttpssignupherokucom-target_blankheroku-accounta"},(0,r.kt)("a",{href:"https://signup.heroku.com/",target:"_blank"},"Heroku account")),(0,r.kt)("p",null,"Heroku will be used to deploy the test application during this tutorial.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-your-application"},"2. Create your application"),(0,r.kt)("p",null,"Since webhooks are sending the events via HTTP requests you need to have an application running that exposes a public HTTP endpoint - callback URL. In this tutorial we are going to use ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en"},"Node.js")," together with ",(0,r.kt)("a",{parentName:"p",href:"https://expressjs.com/"},"Express")," for test application.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Project initialization"),(0,r.kt)(f,{language:"bash",code:"cd your-project\nnpm init -y\nnpm install express\nnpm install -D typescript @types/express\ntsc --init",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"tsconfig.json"),(0,r.kt)(f,{language:"json",code:'"outDir":"dist"',mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"package.json"),(0,r.kt)(f,{language:"json",code:'"main":"dist/index.js"',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"json",code:'"scripts":{\n  "start":"tsc && node dist/index.js"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"21-initialize-the-project"},"2.1 Initialize the project"),(0,r.kt)("p",null,"To start off, create new directory for your application and execute the following initialization commands. These commands will initialize new npm project, install required dependencies and configure typescript. After initialization, update freshly generated ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," file by setting ",(0,r.kt)("inlineCode",{parentName:"p"},"outDir")," property to ",(0,r.kt)("inlineCode",{parentName:"p"},'"dist"'),". Next step will be updating ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file to update the application entry point and ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," script. After that is done, the project is ready for the next step."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},'If you are running into "tsc is not recognized" problems, try installing typescript globally "npm install typescript -g".')),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import express from "express";\n\nconst app = express();\napp.use(express.text({ type: "application/json" }));\n\napp.post("/events", () => {\n  // Handle the event\n});\n\nconst port = 5000;\napp.listen(port, () => {\n  console.log("Application was started.");\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"22-create-express-server"},"2.2 Create express server"),(0,r.kt)("p",null,"Now let\u2019s start implementing the application. At first, create a new file in your project directory ",(0,r.kt)("inlineCode",{parentName:"p"},"src/index.ts"),". This is going to be the application starting point. From example on the side you can see that we are going to have a public HTTP endpoint that will be accepting POST requests ",(0,r.kt)("inlineCode",{parentName:"p"},'app.post("/events", () => {})'),". This is because event messages are sent using POST method. Note that above there is a line ",(0,r.kt)("inlineCode",{parentName:"p"},'app.use(express.text({ type: "application/json" }))')," that makes the server treat the requests with json content as text and not deserialize them initially because raw payload will be required for event authorization in one of the upcoming steps.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'\napp.options("/events", async (req, res) => {\n  const requestedOrigin = req.headers["webhook-request-origin"] as string;\n\n  res.setHeader("allow", ["POST"]);\n  res.setHeader("webhook-allowed-origin", requestedOrigin);\n  res.sendStatus(200);\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"23-add-callback-validation-handler"},"2.3 Add callback validation handler"),(0,r.kt)("p",null,"Before we start working with event handling, first we need to make sure that newly created webhook gets activated by passing the callback URL validation. To handle this, we need to add one more HTTP endpoint that accepts OPTIONS requests ",(0,r.kt)("inlineCode",{parentName:"p"},'app.options("/events", () => {})')," and performs the validation handshake as described in ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks/#callbackvalidation"},"documentation"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import crypto from "crypto";',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"typescript",code:'function validateSignature(payload: string, signatureHeader: string): boolean {\n  // Replace with your own webhook secret later\n  const secret = "4eb25d308ef2a9722ffbd7a2b7e5026f9d1f2feaca5999611d4ef8692b1ad70d";\n\n  const [algorithm, signature] = signatureHeader.split("=");\n  const generated_sig = crypto.createHmac(algorithm, secret).update(payload, "utf-8").digest("hex");\n\n  return generated_sig.toLowerCase() === signature.toLowerCase();\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"24-add-event-authorization"},"2.4 Add event authorization"),(0,r.kt)("p",null,"In order to authorize the event source, we need to add event signature validation. Event signature is ",(0,r.kt)("inlineCode",{parentName:"p"},"HMAC-SHA256")," string that is included in the request ",(0,r.kt)("inlineCode",{parentName:"p"},"Signature")," header. For validation we will be using Node.js ",(0,r.kt)("inlineCode",{parentName:"p"},"crypto")," utility which basically lets us to generate the same type of signature in our end. Generated signature and the signature included in the request should match to pass the authorization. Let\u2019s start adding validation by creating a new function ",(0,r.kt)("inlineCode",{parentName:"p"},"function validateSignature(payload: string, signatureHeader: string)"),". As a first parameter it will to expect raw request payload and as a second parameter it will expect signature header value. This function will also need the webhook ",(0,r.kt)("inlineCode",{parentName:"p"},"secret")," which we are going to add later on we create a webhook. Since, the signature header value also contains the cryptographic algorithm name and the signature value separated by ",(0,r.kt)("inlineCode",{parentName:"p"},"="),", we need to extract these values into separate variables ",(0,r.kt)("inlineCode",{parentName:"p"},'const [algorithm, signature] = signatureHeader.split("=")'),". Then at this point, using all the existing variables we can generate a signature ",(0,r.kt)("inlineCode",{parentName:"p"},'crypto.createHmac(algorithm, secret).update(payload, "utf-8").digest("hex")'),". Lastly, we need to check if both signatures match and return the result.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/models.ts"),(0,r.kt)(f,{language:"typescript",code:"export type Event = {\n  content: IModelEvent | NamedVersionCreatedEvent;\n  contentType: string;\n  enqueuedDateTime: string;\n  messageId: string;\n  subscriptionId: string;\n};\n\nexport type IModelEvent = {\n  imodelId: string;\n  projectId: string;\n};\n\nexport type NamedVersionCreatedEvent = {\n  changesetId: string;\n  changesetIndex: string;\n  versionId: string;\n  versionName: string;\n} & IModelEvent;",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"25-define-data-models"},"2.5 Define data models"),(0,r.kt)("p",null,"Before we can start receiving the events, we need to prepare the models for expected data. You can find events schema by downloading API definition file from ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks"},"API reference"),". Select preferred schema type on the right and click Export. Now from that point, create a new file ",(0,r.kt)("inlineCode",{parentName:"p"},"src/models.ts")," and create event types by matching the schema.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"src/index.ts"),(0,r.kt)(f,{language:"typescript",code:'import { Event, NamedVersionCreatedEvent } from "./models";',mdxType:"CodeBlock"}),(0,r.kt)(f,{language:"typescript",code:'app.post("/events", (req, res) => {\n  const signatureHeader = req.headers["signature"] as string;\n  if (!signatureHeader || !req.body) res.sendStatus(401);\n\n  if (!validateSignature(req.body, signatureHeader)) {\n    res.sendStatus(401);\n  } else {\n    const event = JSON.parse(req.body) as Event;\n    switch (event.contentType) {\n      case "NamedVersionCreatedEvent": {\n        const content = event.content as NamedVersionCreatedEvent;\n        console.log(`New named version (ID: ${content.versionId}, Name: ${content.versionName}) was created for iModel (ID: ${content.imodelId})`);\n        break;\n      }\n      default:\n        res.sendStatus(400); //Unexpected event type\n    }\n  }\n});',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"26-event-handling"},"2.6 Event handling"),(0,r.kt)("p",null,"Now that we have everything ready for event handling, we can start implementing it. Firstly, we want to return ",(0,r.kt)("inlineCode",{parentName:"p"},"401 Unauthorized")," for any request that does not have a event signature header or any payload, because these are required components for passing the validation ",(0,r.kt)("inlineCode",{parentName:"p"},"if (!signatureHeader || !req.body) res.sendStatus(401)"),". If request does have these components then we can proceed with further processing logic and try to validate the event signature using the function we defined in step 2.3 ",(0,r.kt)("inlineCode",{parentName:"p"},"if (!validateSignature(req.body, signatureHeader)) res.sendStatus(401)"),". If validation fails, we can assume that the event was sent from unexpected source and safely return ",(0,r.kt)("inlineCode",{parentName:"p"},"401 Unauthorized")," as well. In other case, when validation passes, proceed by deserializing the event and react accordingly to its type.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"27-deploy"},"2.7 Deploy"),(0,r.kt)("p",null,"For this application to work, you have to deploy it to be publicly accessible. If you have any preferences for the deployment, go ahead and use your own deployment method and platform. If not, you can keep following the tutorial and deploy the application using ",(0,r.kt)("a",{parentName:"p",href:"https://www.heroku.com/about"},"Heroku"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create new Heroku application and empty Heroku Git repository ",(0,r.kt)("a",{parentName:"li",href:"https://devcenter.heroku.com/articles/git#for-a-new-heroku-app"},"https://devcenter.heroku.com/articles/git#for-a-new-heroku-app"),"."),(0,r.kt)("li",{parentName:"ol"},"Deploy by pushing the code ",(0,r.kt)("a",{parentName:"li",href:"https://devcenter.heroku.com/articles/git#deploying-code"},"https://devcenter.heroku.com/articles/git#deploying-code"),"."),(0,r.kt)("li",{parentName:"ol"},"Use ",(0,r.kt)("inlineCode",{parentName:"li"},"heroku logs --tail")," for monitoring the behavior of the application.")),(0,r.kt)("p",null,"Once you have the application deployed and running, we can move on to the webhook creation.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-webhook"},"3. Create a webhook"),(0,r.kt)("p",null,"Webhooks are one way that apps can send automated messages or information to other apps. In this case, we are going to create a webhook for an existing iModel events.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},'Example HTTP request for "Create iModel events webhook" operation'),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/webhooks/imodels HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"31-request"},"3.1 Request"),(0,r.kt)("p",null,"A webhook for iModel events is created by sending a POST request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/webhooks/imodels"},"https://api.bentley.com/webhooks/imodels"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with valid Bearer access token is required.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},"Example request body"),(0,r.kt)(f,{language:"json",code:'{\n  "imodelId":"IMODEL_ID",\n  "callbackUrl":"https://HOSTNAME/events",\n  "eventTypes":[\n    "NamedVersionCreatedEvent"\n  ],\n  "expirationDateTime":"2021-06-07T08:27:42Z"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"32-request-body"},"3.2 Request body"),(0,r.kt)("p",null,"Webhook creation has 3 required properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"imodelId")," - related iModel ID of which events you want to receive."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"callbackUrl")," - a public endpoint of your application where you expect the event to be sent."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"eventTypes")," - a list of iModel event types you want to subscribe to."),(0,r.kt)("li",{parentName:"ul"},"expirationDateTime - ",(0,r.kt)("em",{parentName:"li"},"(optional)")," date and time when the webhook will not longer be active. If the value is not specified, webhook will expire in 30 days.")),(0,r.kt)("p",null,"For more information see the ",(0,r.kt)("a",{parentName:"p",href:"/apis/webhooks/operations/create-imodels-webhook"},"documentation"),"."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},'Don\'t forget to replace the "IMODEL_ID" placeholder value with an existing iModel ID and "HOSTNAME" placeholder value with your deployed application hostname.')),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(y,{mdxType:"Title"},'Example response "Location" header'),(0,r.kt)(f,{language:"http",code:"Location: https://api.bentley.com/webhooks/f6f3aff5-7e28-4874-a3ff-22dbc62d94c9",mdxType:"CodeBlock"}),(0,r.kt)(y,{mdxType:"Title"},"Example response result"),(0,r.kt)(f,{language:"json",code:'{\n  "webhook":{\n    "id": "b41adbb6-2ecc-4770-a626-1721dff5be1e",\n    "secret":"4eb25d308ef2a9722ffbd7a2b7e5026f9d1f2feaca5999611d4ef8692b1ad70d"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"33-response"},"3.3 Response"),(0,r.kt)("p",null,"On the successful response you will get returned the webhook secret which will be needed later validating received events. The location of created webhook will be included in response ",(0,r.kt)("inlineCode",{parentName:"p"},"Location")," header value. Generally you would need to store both webhook location or ID and secret in your application storage in order to prepare for receiving events, but for this tutorial just use it to replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"const secret")," value in ",(0,r.kt)("inlineCode",{parentName:"p"},"function validateSignature")," from step 2.3."),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},"Note that the webhook secret should not be shared with anyone and treated as a private key.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-trigger-imodel-event"},"4. Trigger iModel event"),(0,r.kt)("p",null,"Since we created the webhook specifically for ",(0,r.kt)("inlineCode",{parentName:"p"},"NamedVersionCreatedEvent")," event type, you will need to trigger this event manually. Use Get iModel Changesets ",(0,r.kt)("a",{parentName:"p",href:"/apis/imodels/operations/create-named-version"},"operation"),". For detailed explanation on how to create a named version see this ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-named-version"},"tutorial"),"."),(0,r.kt)("p",null,"After you create a named version, webhook event will be triggered and sent to your application (callback URL) for further processing. If you have deployed your test application using Heroku, use ",(0,r.kt)("inlineCode",{parentName:"p"},"heroku logs --tail")," command to monitor your application logs and wait for the event to be captured and processed.")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Workflow Automation API group documentation",href:"/api-groups/workflow-automation",description:"An overview and detailed Workflow Automation API group documentation.",mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Data Management API group documentation",href:"/api-groups/data-management",description:"An overview and detailed Data Management API group documentation.",mdxType:"ResourceTile"}))))}C.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-set-up-your-environment",level:2,title:"1. Set up your environment",children:[{id:"11-required-materials",level:3,title:"1.1 Required materials",children:[]},{id:"12-suggested-materials",level:3,title:"1.2 Suggested materials",children:[]}]},{id:"2-create-your-application",level:2,title:"2. Create your application",children:[{id:"21-initialize-the-project",level:3,title:"2.1 Initialize the project",children:[]},{id:"22-create-express-server",level:3,title:"2.2 Create express server",children:[]},{id:"23-add-callback-validation-handler",level:3,title:"2.3 Add callback validation handler",children:[]},{id:"24-add-event-authorization",level:3,title:"2.4 Add event authorization",children:[]},{id:"25-define-data-models",level:3,title:"2.5 Define data models",children:[]},{id:"26-event-handling",level:3,title:"2.6 Event handling",children:[]},{id:"27-deploy",level:3,title:"2.7 Deploy",children:[]}]},{id:"3-create-a-webhook",level:2,title:"3. Create a webhook",children:[{id:"31-request",level:3,title:"3.1 Request",children:[]},{id:"32-request-body",level:3,title:"3.2 Request body",children:[]},{id:"33-response",level:3,title:"3.3 Response",children:[]}]},{id:"4-trigger-imodel-event",level:2,title:"4. Trigger iModel event",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},18808:function(e,t,n){"use strict";n.d(t,{Jt:function(){return b},Pu:function(){return s},ZP:function(){return w}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Get started with the Reality Analysis API",tile:{name:"Get started with the Reality Analysis API",description:"This tutorial is an introduction to Reality Analysis API, explaining the basic workflows.",thumbnail:"/unreal-docs-site/static/images/rda/quick-start-thumb.jpg",href:"/tutorials/realitydataanalysis-api-quick-start/",durationInMinutes:60,relatedApiIds:["realitydataanalysis"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("PostmanIcon"),h=p("CreateSampleAppButton"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("ResourceTile"),T={metadata:s};function w(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"60",summaryImageSrc:"/unreal-docs-site/static/images/rda/quick-start-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"important-notice"},"Important notice"),(0,r.kt)("p",null,"The following tutorial is a step by step detailed description of the low level calls needed for an analysis.\nIt involves using other services, understanding authorizations and creating different json files. It might not be the best way to discover Reality Analysis.\nWe encourage using our Python or TypeScript ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/reality-capture/"},"iTwin Capture SDKs")," and the included examples\nif you plan to develop a Python or TypeScript application or for a first discovery even if you plan to use a different language."),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start tutorial is going to help you work with Reality Analysis."),(0,r.kt)("p",null,"In this tutorial, you will submit a simple job to detect objects in images."),(0,r.kt)("p",null,"It is assumed that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Knowledge of the ",(0,r.kt)("a",{parentName:"li",href:"/apis/reality-management"},"Reality Management API"),"."),(0,r.kt)("li",{parentName:"ul"},"Knowledge of the ",(0,r.kt)("em",{parentName:"li"},"Reality Analysis")," concepts. Check ",(0,r.kt)("a",{parentName:"li",href:"/apis/realitydataanalysis/"},"Reality Analysis")," and read the ",(0,r.kt)("em",{parentName:"li"},"Overview"),", ",(0,r.kt)("em",{parentName:"li"},"Context Scenes"),", ",(0,r.kt)("em",{parentName:"li"},"Context Detectors")," and ",(0,r.kt)("em",{parentName:"li"},"Job Types")," sections."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A small set of photos to analyse."),(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("em",{parentName:"li"},"photo object detector"),". You may download the Coco 2D object detector of the ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/products/3d_imaging_and_point_cloud_software/w/wiki/54656/context-insights-detectors-download-page"},"library page")),(0,r.kt)("li",{parentName:"ul"},"An iTwin and its ID. For instance you can create a project of ID \u201cProjectID\u201d. Check the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"create and query projects guide"),"."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(m,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"suggested-tools"},"Suggested Tools"),(0,r.kt)("h5",{id:"a-hrefhttpswwwpostmancomdownloads-target_blankpostmana"},(0,r.kt)("a",{href:"https://www.postman.com/downloads/",target:"_blank"},"Postman")),(0,r.kt)("p",null,"If you want to test the REST API calls directly, you can use ",(0,r.kt)("a",{parentName:"p",href:"https://www.postman.com/downloads/"},"Postman")," or any other solution capable of sending HTTP requests. If you do it this way, you will require an authorization token for the requests to work. This is covered in the \u201cGet a token\u201d section below.")),(0,r.kt)(c,{actions:[(0,r.kt)(h,{clientName:"Reality Analysis basic tutorial",scopes:["realitydataanalysis:read","realitydataanalysis:modify","realitydata:modify","realitydata:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Reality Modeling API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"realitydataanalysis:read, realitydataanalysis:modify, realitydata:modify, realitydata:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make a request to the API, you need a user token. There are several ways to get it. You can consult the\n",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"Authorization API documentation"),"\nor you can use a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Authorization"},"sample powershell script")," to use in your app."),(0,r.kt)("p",null,"In the following, JWT_TOKEN will stand for this token.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-upload-data"},"3. Upload data"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Upload your photos to Reality Management API as ",(0,r.kt)("em",{parentName:"li"},"CCImageCollection")," attached to your iTwin project using the ",(0,r.kt)("a",{parentName:"li",href:"/apis/reality-management"},"Reality Management API"),"."),(0,r.kt)("li",{parentName:"ul"},"Upload your detector to Reality Management API as ",(0,r.kt)("em",{parentName:"li"},"ContextDetector")," attached to your iTwin project using the ",(0,r.kt)("a",{parentName:"li",href:"/apis/reality-management"},"Reality Management API"),".")),(0,r.kt)("p",null,"In the following, ",(0,r.kt)("em",{parentName:"p"},"ProjectID")," stands for the iTwin project id, ",(0,r.kt)("em",{parentName:"p"},"ImageCollectionID")," for the CCImageCollection entry id and ",(0,r.kt)("em",{parentName:"p"},"DetectorID")," for the ContextDetector entry id."),(0,r.kt)("p",null,"Note that your iTwin project will usually store some detectors and all your ",(0,r.kt)("em",{parentName:"p"},"raw")," reality data (photos, point clouds, etc.).\nThey are not intended to be uploaded for each Reality Analysis jobs. In many cases, they will have been uploaded previously and probably by someone else.")),(0,r.kt)(c,{actions:[(0,r.kt)(k,{language:"json",code:'{\n    "version" : "5.0",\n    "PhotoCollection" : {\n        "Photos" : {\n            "0" : {\n                "ImagePath" : "0:IMAGE_1059.JPG",\n            },\n            "1" : {\n                "ImagePath" : "0:IMAGE_1060.JPG",\n            },\n            "2" : {\n                "ImagePath" : "0:IMAGE_1061.JPG",\n            }\n        }\n    },\n    "References" : {\n        "0" : {\n            "Path" : "rds:ImageCollectionID"\n        }\n    }\n  }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-prepare-job-input"},"4. Prepare job input"),(0,r.kt)("p",null,"You will now chose on which reality data the job will be applied, creating the ",(0,r.kt)("em",{parentName:"p"},"ContextScene")," pointing to them.\nIt will be very simple in our case, a few photos in a CCImageCollection but remember it could be more complex: pointing to several Reality Management API entries, adding metadata like orientation, etc."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create ContextScene file pointing to the photos your want to analyze. It should look like the file besides."),(0,r.kt)("li",{parentName:"ul"},"Upload it to Reality Management API as ",(0,r.kt)("em",{parentName:"li"},"ContextScene")," entry. Remember to name the file ",(0,r.kt)("inlineCode",{parentName:"li"},"ContextScene.json")," as should be any ContextScene uploaded on Reality Management API. In the following, ",(0,r.kt)("em",{parentName:"li"},"PhotosID")," stands for its id."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-create-job"},"5. Create job"),(0,r.kt)("p",null,"Your next step will be to create the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/realitydataanalysis/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request"},"Request"),(0,r.kt)("p",null,"The job is created sending an HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/realitydataanalysis/jobs"},"https://api.bentley.com/realitydataanalysis/jobs")," endpoint with the payload describing the job. Be sure to replace JWT_TOKEN by its value.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "type": "objects2D",\n  "name": "O2D job sample",\n  "iTwinId": "ProjectID",\n  "settings": {\n    "inputs": [\n      {\n        "name": "photos",\n        "realityDataId": "PhotosID"\n      },\n      {\n        "name": "photoObjectDetector",\n        "realityDataId": "DetectorID"\n      }\n    ],\n    "outputs": [\n      "objects2D"\n    ]\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"The request body define the job settings. Be sure to replace ProjectID, PhotosID and DetectorID by their values.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "settings": {\n    "outputs": [\n      {\n        "name": "objects2D"\n      }\n    ],\n    "inputs": [\n      {\n        "name": "photos",\n        "realityDataId": "PhotosID"\n      },\n      {\n        "name": "photoObjectDetector",\n        "realityDataId": "DetectorID"\n      }\n    ]\n  },\n  "state": "unsubmitted",\n  "dataCenter": "EastUs",\n  "createdDateTime": "2022-03-08T10: 55: 24Z",\n  "lastModifiedDateTime": "2022-03-08T10: 55: 24Z",\n  "id": "JobID",\n  "email": "name@bentley.com",\n  "costEstimation": {\n    "estimatedCost": -1.0\n  },\n  "type": "objects2D",\n  "name": "O2D job sample",\n  "iTwinId": "ProjectID"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"response-body"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code if the call is successful.\nThe most important entry of this response is the \u201cid\u201d which you will use to refer to the job in following steps.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-estimate-job-cost"},"6. Estimate job cost"),(0,r.kt)("p",null,"You can optionally provide relevant quantities about the input to get an estimation of the job cost before deciding to submit it.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"PATCH https://api.bentley.com/realitydataanalysis/jobs/JobID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-1"},"Request"),(0,r.kt)("p",null,"Send an HTTP PATCH message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/realitydataanalysis/jobs/JobID"},"https://api.bentley.com/realitydataanalysis/jobs/JobID")," endpoint with the payload describing the quantities.\nBe sure to replace JWT_TOKEN and JobID by their values.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "costEstimation": {\n    "numberOfPhotos": 3,\n    "gigaPixels": 12\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"For an 2D object detection job type, these quantities are the number of photos and the total number of gigapixels that will be analyzed.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "settings": {\n    "outputs": [\n      {\n        "name": "objects2D"\n      }\n    ],\n    "inputs": [\n      {\n        "name": "photos",\n        "realityDataId": "PhotosID"\n      },\n      {\n        "name": "photoObjectDetector",\n        "realityDataId": "DetectorID"\n      }\n    ]\n  },\n  "state": "unsubmitted",\n  "dataCenter": "EastUs",\n  "createdDateTime": "2022-03-08T10: 55: 24Z",\n  "lastModifiedDateTime": "2022-03-08T13: 55: 24Z",\n  "id": "JobID",\n  "email": "name@bentley.com",\n  "costEstimation": {\n    "estimatedCost": 2.4\n  },\n  "type": "objects2D",\n  "name": "O2D job sample",\n  "iTwinId": "ProjectID"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"response-body-1"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"201 Created")," status code if the call is successful.\nThe estimatedCost is now set.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-submit-job"},"7. Submit job"),(0,r.kt)("p",null,"To submit your job, simply change its state to ",(0,r.kt)("em",{parentName:"p"},"active"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"PATCH https://api.bentley.com/realitydataanalysis/jobs/JobID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-2"},"Request"),(0,r.kt)("p",null,"Send an HTTP PATCH message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/realitydataanalysis/jobs/JobID"},"https://api.bentley.com/realitydataanalysis/jobs/JobID")," endpoint with the payload to change its state to ",(0,r.kt)("em",{parentName:"p"},"active"),".\nBe sure to replace JWT_TOKEN and JobID by their values.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "state": "active"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-body-2"},"Request Body"),(0,r.kt)("p",null,"The only entry to patch is the state of the job.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "settings": {\n    "outputs": [\n      {\n        "name": "objects2D"\n      }\n    ],\n    "inputs": [\n      {\n        "name": "photos",\n        "realityDataId": "PhotosID"\n      },\n      {\n        "name": "photoObjectDetector",\n        "realityDataId": "DetectorID"\n      }\n    ]\n  },\n  "state": "active",\n  "executionInformation": {\n    "submissionDateTime": "2022-03-08T13:23:52Z"\n  },\n  "dataCenter": "EastUs",\n  "createdDateTime": "2022-03-08T10: 55: 24Z",\n  "lastModifiedDateTime": "2022-03-08T10: 55: 24Z",\n  "id": "JobID",\n  "email": "name@bentley.com",\n  "costEstimation": {\n    "estimatedCost": 2.4\n  },\n  "type": "objects2D",\n  "name": "O2D job sample",\n  "iTwinId": "ProjectID"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"response-body-2"},"Response body"),(0,r.kt)("p",null,"The API will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"200 OK")," status code if the call is successful.\nThe response indicates that the state has changed to active and adds an ",(0,r.kt)("em",{parentName:"p"},"executionInformation")," section, filled so far with a submission time.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"8-monitor-job"},"8. Monitor job"),(0,r.kt)("p",null,"You will probably want to monitor your job to check its state and advancement.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"PATCH https://api.bentley.com/realitydataanalysis/jobs/JobID/progress HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-3"},"Request"),(0,r.kt)("p",null,"To monitor the job, send an HTTP GET message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/realitydataanalysis/jobs/JobID/progress"},"https://api.bentley.com/realitydataanalysis/jobs/JobID/progress")," endpoint.\nBe sure to replace JWT_TOKEN and JobID by their values.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "progress": {\n    "percentage": 25,\n    "state": "active",\n    "step": "Run_Production"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"response-body-3"},"Response body"),(0,r.kt)("p",null,"The response give you the job advancement, state and a step name.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"9-get-results"},"9. Get results")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"PATCH https://api.bentley.com/realitydataanalysis/jobs/JobID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-4"},"Request"),(0,r.kt)("p",null,"At any time, you can get all job information sending an HTTP GET message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/realitydataanalysis/jobs/JobID"},"https://api.bentley.com/realitydataanalysis/jobs/JobID")," endpoint.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "settings": {\n    "outputs": [\n      {\n        "name": "objects2D",\n        "realityDataId": "SomeIDProvidedByTheService"\n      }\n    ],\n    "inputs": [\n      {\n        "name": "photos",\n        "realityDataId": "PhotosID"\n      },\n      {\n        "name": "photoObjectDetector",\n        "realityDataId": "DetectorID"\n      }\n    ]\n  },\n  "state": "success",\n  "executionInformation": {\n    "exitCode": 0,\n    "estimatedUnits": 3.0,\n    "startedDateTime": "2022-03-08T14:20:44Z",\n    "endedDateTime": "2022-03-08T14:27:31Z",\n    "submissionDateTime": "2022-03-08T13:23:52Z"\n  },\n  "dataCenter": "EastUs",\n  "createdDateTime": "2022-03-08T10: 55: 24Z",\n  "lastModifiedDateTime": "2022-03-08T10: 55: 24Z",\n  "id": "JobID",\n  "email": "name@bentley.com",\n  "costEstimation": {\n    "estimatedCost": 2.4\n  },\n  "type": "objects2D",\n  "name": "O2D job sample",\n  "iTwinId": "ProjectID"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"response-body-4"},"Response body"),(0,r.kt)("p",null,"Once the job is over, your can get its final state and check success.\nThe executionInformation section is also filled with more useful data.\nYour will also get an id in Reality Management API for every output entry. This will allow you to download the results using the ",(0,r.kt)("a",{parentName:"p",href:"/apis/reality-management"},"Reality Management API"),".")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n    "version" : "5.0",\n    "PhotoCollection" : {\n        "Photos" : {\n            "0" : {\n                "ImagePath" : "0:IMAGE_1059.JPG"\n            },\n            "1" : {\n                "ImagePath" : "0:IMAGE_1060.JPG"\n            },\n            "2" : {\n                "ImagePath" : "0:IMAGE_1061.JPG"\n            }\n        }\n    },\n    "Annotations" : {\n        "Labels" : {\n            "3" : {\n                "Name" : "car"\n            },\n            "4" : {\n                "Name" : "motorcycle"\n            }\n        },\n        "Objects2D" : {\n            "0" : {\n                "e256276a-d478-476d-a654-195dbc23d1d9" : {\n                    "LabelInfo" : {\n                        "Confidence" : 0.998534977436066,\n                        "LabelId" : 3\n                    },\n                    "Box2D" : {\n                        "xmin" : 0.0319100245833397,\n                        "ymin" : 0.537032723426819,\n                        "xmax" : 0.374318659305573,\n                        "ymax" : 0.66499537229538\n                    }\n                },\n                "03f2b2e5-5df5-49a0-8515-62d6df7739bd" : {\n                    "LabelInfo" : {\n                        "Confidence" : 0.996562480926514,\n                        "LabelId" : 3\n                    },\n                    "Box2D" : {\n                        "xmin" : 0.877566039562225,\n                        "ymin" : 0.4940065741539,\n                        "xmax" : 1,\n                        "ymax" : 0.62068098783493\n                    }\n                }\n            },\n            "1" : {\n                "b61c36dd-98d2-4a2a-902e-9d12d9472f15" : {\n                    "LabelInfo" : {\n                        "Confidence" : 0.983914494514465,\n                        "LabelId" : 3\n                    },\n                    "Box2D" : {\n                        "xmin" : 0.854629874229431,\n                        "ymin" : 0.483299434185028,\n                        "xmax" : 0.938638925552368,\n                        "ymax" : 0.547508895397186\n                    }\n                },\n                ...',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"output-file"},"Output file"),(0,r.kt)("p",null,"You should obtain a ContextScene file with 2D objects.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"10-other-requests"},"10. Other requests"),(0,r.kt)("p",null,"In this tutorial, you have seen almost all the API requests except two:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"deleting a job: this is only possible if the job has not been submitted yet. The job will be deleted from the service database."),(0,r.kt)("li",{parentName:"ul"},"canceling a job: it can be done while active. The job will stay in the service database but will not be processed anymore.\nPlease refer to the ",(0,r.kt)("a",{parentName:"li",href:"/apis/realitydataanalysis/operations/"},"API Reference"),".")),(0,r.kt)("p",null,"As mentioned in the documentation, Reality Analysis API is batch oriented to allow concurrent analysis on large datasets.\nThis is why the input and output ContextScenes go through an upload/download to/from Reality Management API.\nTo simplify use cases where these files are light enough to go be transferred via the API requests,\nfuture versions will allow direct json transfers as a possible choice.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the Get started with the Reality Analysis API tutorial! You should now be able to detect 2D objects in a set of photos.\nStay tuned for more tutorials. Meanwhile, you might want to try photo segmentation jobs."),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{title:"iTwin Capture SDKs",href:"https://github.com/iTwin/reality-capture/",description:"Python and Typescript SDKs to use iTwin Capture services.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Detector library",href:"https://communities.bentley.com/products/3d_imaging_and_point_cloud_software/w/wiki/54656/context-insights-detectors-download-page",description:"Library of available Context Detectors.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(f,{title:"Reality Management API",href:"/apis/reality-management/",description:"Reality Management API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"important-notice",level:2,title:"Important notice",children:[]},{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[{id:"suggested-tools",level:3,title:"Suggested Tools",children:[]}]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[]},{id:"3-upload-data",level:2,title:"3. Upload data",children:[]},{id:"4-prepare-job-input",level:2,title:"4. Prepare job input",children:[]},{id:"5-create-job",level:2,title:"5. Create job",children:[{id:"request",level:3,title:"Request",children:[]},{id:"request-body",level:3,title:"Request Body",children:[]},{id:"response-body",level:3,title:"Response body",children:[]}]},{id:"6-estimate-job-cost",level:2,title:"6. Estimate job cost",children:[{id:"request-1",level:3,title:"Request",children:[]},{id:"request-body-1",level:3,title:"Request Body",children:[]},{id:"response-body-1",level:3,title:"Response body",children:[]}]},{id:"7-submit-job",level:2,title:"7. Submit job",children:[{id:"request-2",level:3,title:"Request",children:[]},{id:"request-body-2",level:3,title:"Request Body",children:[]},{id:"response-body-2",level:3,title:"Response body",children:[]}]},{id:"8-monitor-job",level:2,title:"8. Monitor job",children:[{id:"request-3",level:3,title:"Request",children:[]},{id:"response-body-3",level:3,title:"Response body",children:[]}]},{id:"9-get-results",level:2,title:"9. Get results",children:[{id:"request-4",level:3,title:"Request",children:[]},{id:"response-body-4",level:3,title:"Response body",children:[]},{id:"output-file",level:3,title:"Output file",children:[]}]},{id:"10-other-requests",level:2,title:"10. Other requests",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},95016:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Register and modify an Application",tile:{name:"Register and modify an Application",description:"Before you can start using iTwin Platform REST APIs you need to create an application. This tutorial covers basic application registration and modification steps.",thumbnail:"",href:"/tutorials/register-and-modify-application/",durationInMinutes:15,relatedApiIds:[]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("Alert"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:s.tile.durationInMinutes,mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Before you can start using iTwin Platform REST APIs you need to create an application. Registered application gives you an ability to access iTwin Platform REST APIs and manage client accesses (scopes). This tutorial covers basic application registration and modification steps.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-sign-in-or-sign-up-for-a-bentley-account"},"1. Sign in or sign up for a Bentley account"),(0,r.kt)("p",null,"Before you register your first application you need to have a Bentley account to Sign In to iTwin Platform Portal. Only signed-in users can create, view, edit or delete applications.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},"Create Your Account form"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/create-account-form.png",alt:"Create Your Account",className:"sample-img-m"}),(0,r.kt)(u,{mdxType:"Title"},"Email Address verification"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/verify-email-address.png",alt:"Verify Email Address",className:"sample-img-m"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-create-your-bentley-account"},"1.1 Create your Bentley account"),(0,r.kt)("p",null,"If you don\u2019t have a Bentley account yet, you can create one by following these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com"},"https://developer.bentley.com")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Sign In")," button. You will be redirected to Sign In page"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Don\u2019t have an account? Register now")," link. You will be redirected to account registration page"),(0,r.kt)("li",{parentName:"ol"},"Fill in the appropriate information for each of the text boxes"),(0,r.kt)("li",{parentName:"ol"},"When the form is complete, click ",(0,r.kt)("strong",{parentName:"li"},"Create Account"),". You will be redirected to email verification page"),(0,r.kt)("li",{parentName:"ol"},"Enter ",(0,r.kt)("strong",{parentName:"li"},"Verification Code"),". You should receive an email from ",(0,r.kt)("inlineCode",{parentName:"li"},"no-reply@bentley.com")," to address you entered in registration form with ",(0,r.kt)("strong",{parentName:"li"},"Verification Code")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Verify"))),(0,r.kt)("p",null,"Now you can ",(0,r.kt)("a",{parentName:"p",href:"#sign-in"},"Sign-in")," using your newly created Bentley account credentials.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},"Sign in page"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/sign-in-page.png",alt:"Sign in",className:"sample-img-m"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-sign-in"},"1.2 Sign in"),(0,r.kt)("p",null,"To Sign In to iTwin Platform Portal you need to:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com"},"https://developer.bentley.com")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Sign In")," button. You will be redirected to Sign In page"),(0,r.kt)("li",{parentName:"ol"},"Sign-in using your Bentley account credentials"))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Application registration form"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/register-your-application-form.png",alt:"Application registration form",className:"sample-img-l"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-register-an-application"},"2. Register an application"),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"To create an application you must Sign in. Only signed-in users can create, view, edit or delete applications."),(0,r.kt)("p",null,"Before you can start using iTwin Platform REST APIs you need to create an application. Registered application gives you an ability to access iTwin Platform REST APIs and manage client accesses (scopes)."),(0,r.kt)("p",null,"To register an application follow these instructions:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to the ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"/my-apps"},"My Apps"))," page"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"+ Register New")," to open new application registration form"),(0,r.kt)("li",{parentName:"ol"},"Give your application a ",(0,r.kt)("strong",{parentName:"li"},"Name")),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"API associations")," you are going to use",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"API association represents set of APIs. Full list of API associations with their APIs you can find on ",(0,r.kt)("a",{parentName:"li",href:"/apis"},"iTwin Platform Documentation")," page."),(0,r.kt)("li",{parentName:"ul"},"Each API endpoint requires certain OAuth scopes. When you select API associations that your application will use, registration form will allow you to chose scopes that are available in these associations."))),(0,r.kt)("li",{parentName:"ol"},"Change the scope list to give your application appropriate accesses",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Make sure you selected correct API associations. You will see only a set of scopes from selected API associations."))),(0,r.kt)("li",{parentName:"ol"},"Select your ",(0,r.kt)("strong",{parentName:"li"},"Application type")," (SPA, Web App, Service or Desktop/Mobile)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Single Page Application (SPA)")," is a web application that runs in a browser and does not require the page to be reloaded."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Web App")," is a traditional web application where every change involves a new request for the server to provide an HTML page."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Service")," represents an automated service with no human interaction."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," is an application that runs on a desktop computer or mobile device.",(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"Make sure you choose valid Application type. You won't be able to change it later.")))),(0,r.kt)("li",{parentName:"ol"},"Enter ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Redirect URI")," specifies the location where the authorization server can send the user once the application has been successfully authorized."),(0,r.kt)("li",{parentName:"ul"},"If you create your application to complete some other tutorial, you can use ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3000/signin-callback")," as a ",(0,r.kt)("strong",{parentName:"li"},"Redirect URI"),"."))),(0,r.kt)("li",{parentName:"ol"},"Enter ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs")," (Optional)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URI")," specifies the location where the authorization server can send the user after a logout."),(0,r.kt)("li",{parentName:"ul"},"If you create your application to complete some other tutorial, you can leave ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs")," empty."))),(0,r.kt)("li",{parentName:"ol"},"Please review and acknowledge the ",(0,r.kt)("a",{parentName:"li",href:"https://connect-agreementportal.bentley.com/AgreementApp/Home/Eula/view/readonly/BentleyConnect"},"Terms of Service"),". By proceeding to register your application, you agree to our ",(0,r.kt)("a",{parentName:"li",href:"https://connect-agreementportal.bentley.com/AgreementApp/Home/Eula/view/readonly/BentleyConnect"},"Terms of Service")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Save")," to submit application creation")),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"After registering a ",(0,r.kt)("strong",null,"Service")," or ",(0,r.kt)("strong",null,"Web App")," ","application, you will see the success dialog with your"," ",(0,r.kt)("strong",null,"Client Secret"),". Make sure you copy and save it. We don't store it and you will not be able to see it again.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"My Apps table"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/my-apps-page.png",alt:"My Apps table",className:"sample-img-l"}),(0,r.kt)(u,{mdxType:"Title"},"Application details page"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/app-details-page.png",alt:"Application details page",className:"sample-img-l"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-view-an-application"},"3. View an application"),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"To view an application you must Sign in. Only signed-in users can create, view, edit or delete applications."),(0,r.kt)("p",null,"Now that you have registered an application, you can see it in My Apps table on ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/my-apps"},"My Apps"))," page. To see all application details:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"/my-apps"},"My Apps"))," page"),(0,r.kt)("li",{parentName:"ol"},"Find application in a table"),(0,r.kt)("li",{parentName:"ol"},"Click on its title link. You will navigate to selected application details page.")),(0,r.kt)("p",null,"This page has all information about your application:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Application name")," - A human-readable name for your application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Application type")," - Type of your application. Cannot be changed."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Client ID")," - A unique identifier for your application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Client email")," (only for ",(0,r.kt)("strong",{parentName:"li"},"Service")," applications) - fake user email, created for role assignment."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Scopes")," - list of accesses granted to the application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Redirect URIs")," (only for ",(0,r.kt)("strong",{parentName:"li"},"SPA"),", ",(0,r.kt)("strong",{parentName:"li"},"Web App"),", ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," applications) - the list of locations where the authorization server can send the user once the application has been successfully authorized."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs")," (only for ",(0,r.kt)("strong",{parentName:"li"},"SPA"),", ",(0,r.kt)("strong",{parentName:"li"},"Web App"),", ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," applications) - the list of locations where the authorization server can send the user after a logout."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Regenerate client secret")," button (only for ",(0,r.kt)("strong",{parentName:"li"},"Service")," and ",(0,r.kt)("strong",{parentName:"li"},"Web App")," applications) - a control to regenerate ",(0,r.kt)("strong",{parentName:"li"},"Client Secret")," if the one given during application registration was missed."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Owners")," - list of users that can view, edit or delete this application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"API associations")," - list of APIs that can be used by your application."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-edit-an-application"},"4. Edit an application"),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"To edit an application you must Sign in. Only signed-in users can create, view, edit or delete applications."),(0,r.kt)("p",null,"As an owner of application you can easily change it anytime. To edit an application you need to:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"/my-apps"},"My Apps"))," page"),(0,r.kt)("li",{parentName:"ol"},"Find application in a table"),(0,r.kt)("li",{parentName:"ol"},"Click on its title link. You will navigate to selected application details page")),(0,r.kt)("p",null,"Application details that can be changed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Application name")," - A human-readable name for your application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Redirect URIs")," (only for ",(0,r.kt)("strong",{parentName:"li"},"SPA"),", ",(0,r.kt)("strong",{parentName:"li"},"Web App"),", ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," applications) - the list of locations where the authorization server can send the user once the application has been successfully authorized."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs")," (only for ",(0,r.kt)("strong",{parentName:"li"},"SPA"),", ",(0,r.kt)("strong",{parentName:"li"},"Web App"),", ",(0,r.kt)("strong",{parentName:"li"},"Desktop/Mobile")," applications) - the list of locations where the authorization server can send the user after a logout."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Owners")," - list of users that can view, edit or delete this application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"API associations")," - list of APIs that can be used by your application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Scopes")," - list of accesses granted to the application.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Application name"),", ",(0,r.kt)("strong",{parentName:"p"},"Redirect URIs"),", ",(0,r.kt)("strong",{parentName:"p"},"Post logout redirect URIs")," can be simply changed by editing their content or adding additional values (for URIs) and clicking ",(0,r.kt)("strong",{parentName:"p"},"Save")," button, but other properties require more manipulations.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},"API associations card"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/api-associations.png",alt:"API associations card",className:"sample-img-m"}),(0,r.kt)(u,{mdxType:"Title"},"Add APIs dialog"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/add-apis-dialog.png",alt:"Add APIs dialog",className:"sample-img-m"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"41-adding-or-removing-apis"},"4.1 Adding or removing APIs"),(0,r.kt)("p",null,"To add or remove API in API associations list, follow these instructions:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Scroll down to API associations card"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Add APIs")," button",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You will see a modal window with list of API groups."))),(0,r.kt)("li",{parentName:"ol"},"Select APIs you want to add by toggling them ON",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Some API groups have more than one API. If you want to select single APIs from group - expand the API list and toggle each API separately."))),(0,r.kt)("li",{parentName:"ol"},"Select APIs you want to remove by toggling them OFF"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Save"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Now you can see that your API associations list has changed and all APIs you have selected are in the list."),(0,r.kt)("li",{parentName:"ul"},"At this point your changes are not submitted yet. If you refresh the page - changes won\u2019t be saved."))),(0,r.kt)("li",{parentName:"ol"},"To submit your changes (if any have been made) you need to click ",(0,r.kt)("strong",{parentName:"li"},"Save")," button at the bottom of the page",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The success toast message will inform that your changes were successfully saved."))))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},'Expanded "Manage your scopes"'),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/api-scopes-expanded.png",alt:"Manage your scopes",className:"sample-img-m"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"42-changing-scopes"},"4.2 Changing scopes"),(0,r.kt)("p",null,"Each API in your API associations list has it\u2019s own list of scopes that can be changed. To manage API scopes that are assigned to your app, follow these instructions:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Scroll down to API associations card"),(0,r.kt)("li",{parentName:"ol"},"Find API for which you want to manage scopes"),(0,r.kt)("li",{parentName:"ol"},"Expand ",(0,r.kt)("strong",{parentName:"li"},"Manage your scopes")," of selected API"),(0,r.kt)("li",{parentName:"ol"},"Toggle ON scopes you want to be granted to your application"),(0,r.kt)("li",{parentName:"ol"},"Toggle OFF scopes you do not want to be granted to your application"),(0,r.kt)("li",{parentName:"ol"},"To submit your changes (if any have been made) you need to click ",(0,r.kt)("strong",{parentName:"li"},"Save")," button at the bottom of the page",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The success toast message will inform that your changes were successfully saved.")))),(0,r.kt)("p",null,"After successful save you can see that your scope list have changed and all scopes you selected are in the list.")),(0,r.kt)(c,{subSection:!0,mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"43-managing-application-owners"},"4.3 Managing application Owners"),(0,r.kt)("p",null,"You can add users with Bentley account as an owners of your application. This will allow them to see, edit or delete your application.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/add-owner.png",alt:"Adding owner",className:"sample-img-m"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"add-application-owner"},"Add application owner"),(0,r.kt)("p",null,"To add an additional owner, follow these instructions:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Add owner")," button. You will get an input for typing an email address"),(0,r.kt)("li",{parentName:"ol"},"Type in an email of user you want to share ownership with"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Add"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The toast message will inform that user is being added to owners list.")))),(0,r.kt)("p",null,"After success toast message you will see that user is now added to application owners list. Now user, who was added to owners list should see your application on ",(0,r.kt)("a",{parentName:"p",href:"/my-apps"},"My Apps")," page.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/remove-owner.png",alt:"Remove application owner",className:"sample-img-m"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"remove-application-owner"},"Remove application owner"),(0,r.kt)("p",null,"To remove an additional owner, follow these instructions:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"x")," (cross) button near user you want to remove from owners list",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The toast message will inform that user is being removed from owners list.")))),(0,r.kt)("p",null,"After success toast message you will see that user is now removed from application owners list. Now user, who was removed from owners list won\u2019t see your application on ",(0,r.kt)("a",{parentName:"p",href:"/my-apps"},"My Apps")," page anymore.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},'Application details with "Regenerate client secret" button'),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/app-details.png",alt:'Application details with "Regenerate client secret" button',className:"sample-img-m"}),(0,r.kt)(u,{mdxType:"Title"},"Client Secret regeneration confirmation dialog"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/regenerate-client-secret-confirm-dialog.png",alt:"Client Secret regeneration confirmation dialog",className:"sample-img-m"}),(0,r.kt)(u,{mdxType:"Title"},"New Client Secret"),(0,r.kt)("img",{src:"/unreal-docs-site/static/images/tutorials/register-and-modify-application/regenerate-client-secret-success-dialog.png",alt:"New Client Secret",className:"sample-img-m"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"44-regenerating-client-secret-only-for-service-and-web-app-applications"},"4.4 Regenerating Client Secret (only for Service and Web App applications)"),(0,r.kt)("p",null,"If you missed your ",(0,r.kt)("strong",{parentName:"p"},"Client Secret")," you can always regenerate it."),(0,r.kt)("p",null,"To regenerate ",(0,r.kt)("strong",{parentName:"p"},"Client Secret"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Regenerate client secret")," button"),(0,r.kt)("li",{parentName:"ol"},"In ",(0,r.kt)("strong",{parentName:"li"},"Confirmation")," dialog click ",(0,r.kt)("strong",{parentName:"li"},"Regenerate")),(0,r.kt)("li",{parentName:"ol"},"Wait for ",(0,r.kt)("strong",{parentName:"li"},"Client Secret")," regeneration process completion"),(0,r.kt)("li",{parentName:"ol"},"In ",(0,r.kt)("strong",{parentName:"li"},"Success!")," dialog you will see new ",(0,r.kt)("strong",{parentName:"li"},"Client Secret"))),(0,r.kt)("p",null,"Make sure you copy and save your new ",(0,r.kt)("strong",{parentName:"p"},"Client Secret"),". We don\u2019t store it and you will not be able to see it again."),(0,r.kt)(m,{type:"informational",mdxType:"Alert"},"After ",(0,r.kt)("strong",null,"Client Secret")," regeneration previous secret becomes invalid. Make sure to replace old ",(0,r.kt)("strong",null,"Client Secret")," by new one.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"Register your application",href:"/register/",description:"New application registration form.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"My Apps",href:"/my-apps/",description:"List of all applications owned by you.",mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-sign-in-or-sign-up-for-a-bentley-account",level:2,title:"1. Sign in or sign up for a Bentley account",children:[{id:"11-create-your-bentley-account",level:3,title:"1.1 Create your Bentley account",children:[]},{id:"12-sign-in",level:3,title:"1.2 Sign in",children:[]}]},{id:"2-register-an-application",level:2,title:"2. Register an application",children:[]},{id:"3-view-an-application",level:2,title:"3. View an application",children:[]},{id:"4-edit-an-application",level:2,title:"4. Edit an application",children:[{id:"41-adding-or-removing-apis",level:3,title:"4.1 Adding or removing APIs",children:[]},{id:"42-changing-scopes",level:3,title:"4.2 Changing scopes",children:[]},{id:"43-managing-application-owners",level:3,title:"4.3 Managing application Owners",children:[]},{id:"44-regenerating-client-secret-only-for-service-and-web-app-applications",level:3,title:"4.4 Regenerating Client Secret (only for Service and Web App applications)",children:[]}]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},88774:function(e,t,n){"use strict";n.d(t,{Jt:function(){return w},Pu:function(){return s},ZP:function(){return T}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Retrieve Validation Model Data",tile:{name:"Retrieve Validation Model Data",description:"Walk-through of retrieving and understanding basic model information needed for various validation functions.",href:"/tutorials/retrieve-validation-model-data/",thumbnail:"/unreal-docs-site/static/images/ClashDetectionSample.png",durationInMinutes:20,relatedApiIds:["clashdetection","validation/propertyValue"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),k=p("ContinueLearningSection"),g=p("TileList"),y=p("ResourceTile"),f={metadata:s};function T(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Model validation functions are used to check a model you\u2019ve created to make sure everything is as expected. In the case of property validation, this means making sure element properties fit specific criteria. In the case of clash detection, this means certain elements are not touching or are within a certain range of each other.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-optional-create-a-test-itwin-and-imodel-for-testing"},"1. (Optional) Create a Test iTwin and iModel for testing"),(0,r.kt)("p",null,"Follow the steps listed ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-test-imodel-sample/"},"here")),(0,r.kt)("p",null,"You will be redirected to the ",(0,r.kt)("inlineCode",{parentName:"p"},'"My iTwins - iModel Home"')," page. Click the ",(0,r.kt)("inlineCode",{parentName:"p"},'"Copy IDs"')," button in the top right. The iTwin ID (also referred to as the project ID) and the iModel ID will be copied to the clipboard. Both of these IDs will be used frequently throughout validation API calls.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make API requests, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application. You will need to include the scopes clashdetection:read and clashdetection:modify."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-api-reference-try-it-out-section"},"Grab a user token from the API reference \u201cTry it out\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/clash-detection/operations/create-clashdetection-tests/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("inlineCode",{parentName:"li"},'"Try it out"')," button."),(0,r.kt)("li",{parentName:"ol"},"On Authorization section select ",(0,r.kt)("inlineCode",{parentName:"li"},'"AuthorizationCode"'),"."),(0,r.kt)("li",{parentName:"ol"},"After popup closes Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save user token value for this tutorial.")),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Use the user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Extraction Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/modelsAndCategories/imodels/00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId": "00000000-0000-0000-0000-000000000000"\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieval Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/modelsAndCategories/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "status":"available",\n  "models":[\n    {\n      "id":"0x21",\n      "displayName":"ProcessPhysicalModel"\n    }\n  ],\n  "categories":[\n    {\n      "id":"0x20000000002",\n      "displayName":"Uncategorized"\n    },\n    {\n      "id":"0x30000000048",\n      "displayName":"PID LineStyle Default"\n    },\n    {\n      "id":"0x3000000004a",\n      "displayName":"Border"\n    },\n    {\n      "id":"0x4000000000d",\n      "displayName":"Tag-Category"\n    },\n    {\n      "id":"0x40000000e71",\n      "displayName":"Structure"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-retrieving-models-and-categories"},"3. Retrieving Models and Categories"),(0,r.kt)("p",null,"For creating any Clash Detection test, you will need a list of the models or categories you wish to check for clashing elements."),(0,r.kt)("p",null,"There are two ways to retrieve these:"),(0,r.kt)("h3",{id:"31-extractionretrieval-request-apis"},"3.1 Extraction/Retrieval Request APIs"),(0,r.kt)("p",null,"First, you can send an HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/modelsAndCategories/imodels/{iModelId}")," using your iModel ID in place of {iModelId}. If model information has not previously been extracted for the iModel, an agent will be started to process the request. A status of 202 is returned if the agent was successfully started."),(0,r.kt)("p",null,"Next, you can repeat calls to ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com//clashdetection/modelsAndCategories/imodels{iModelId}")," until a status of ",(0,r.kt)("inlineCode",{parentName:"p"},"available")," is returned with the response."),(0,r.kt)("p",null,"The response will include a complete list of models and categories, with their respective ids and display names.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Sample Category List widget and provider"),(0,r.kt)(h,{language:"typescript",code:'import { useCallback, useEffect, useMemo, useState } from "react";\nimport { useActiveIModelConnection } from "@itwin/appui-react";\nimport { AbstractWidgetProps, StagePanelLocation, StagePanelSection, UiItemsProvider, WidgetState } from "@itwin/appui-abstract";\nimport { QueryRowFormat } from "@itwin/core-common";\nimport { Table } from "@itwin/itwinui-react";\nexport interface CategoryInfo {\n  id: string;\n  name: string;\n};\nexport type CreateTypeFromInterface<Interface> = {\n  [Property in keyof Interface]: Interface[Property];\n};\nexport type CategoryInfoType = CreateTypeFromInterface<CategoryInfo>;\nconst CategoryListWidget = () => {\n  const [availableCategories, setAvailableCategories] = useState<CategoryInfoType[]>([]);\n  const iModel = useActiveIModelConnection();\n  // Example for querying list of all categories in the iModel\n  const queryCategories = useCallback(async (): Promise<CategoryInfo[]> => {\n    const categories: CategoryInfo[] = [];\n    // Query for list of unique category ids in iModel\n    const selectUsedSpatialCategoryIds = "SELECT DISTINCT Category.Id as id from BisCore.GeometricElement3d WHERE Category.Id IN (SELECT ECInstanceId from BisCore.SpatialCategory)";\n    // Use category ids to query for label and code values\n    const ecsql = "SELECT ECInstanceId as id, UserLabel as label, CodeValue as code FROM BisCore.SpatialCategory WHERE ECInstanceId IN (" + selectUsedSpatialCategoryIds + ")";\n    const rowIterator = iModel?.query(ecsql, undefined, { rowFormat: QueryRowFormat.UseJsPropertyNames });\n    if (rowIterator) {\n        for await (const row of rowIterator) {\n        categories.push({ id: row.id, name: row.label ?? row.code });\n      }\n    }  \n    return categories;\n  }, [iModel]);\n  useEffect(() => {\n    queryCategories()\n      .then((categoryInfos: CategoryInfo[]) => {\n        setAvailableCategories(categoryInfos);\n      })\n      .catch((_e) => {\n        setAvailableCategories([]);\n      });\n  }, [queryCategories]);\n  const columnDefinition = useMemo(() => [\n    {\n      Header: "Table",\n      columns: [\n        {\n          id: "categoryId",\n          Header: "Id",\n          accessor: "id",\n        },\n        {\n          id: "categoryName",\n          Header: "Name",\n          accessor: "name",\n        },\n      ],\n    },\n  ], []);\n  return (\n    <Table\n      data={availableCategories}\n      columns={columnDefinition}\n      emptyTableContent={"No data"}\n      density="extra-condensed"\n      style={{ height: "100%" }} />\n  );\n};\nexport class CategoryListWidgetProvider implements UiItemsProvider {\n  public readonly id: string = "CategoryListWidgetProvider";\n  public provideWidgets(_stageId: string, _stageUsage: string, location: StagePanelLocation, _section?: StagePanelSection): ReadonlyArray<AbstractWidgetProps> {\n    const widgets: AbstractWidgetProps[] = [];\n    if (location === StagePanelLocation.Bottom && _section === StagePanelSection.Start) {\n      widgets.push(\n        {\n          id: "CategorListWidget",\n          label: "Category List",\n          defaultState: WidgetState.Open,\n          getWidgetContent: () => <CategoryListWidget />,\n        }\n      );\n    }\n    return widgets;\n  }\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Sample Model List widget and provider"),(0,r.kt)(h,{language:"typescript",code:'import { useCallback, useEffect, useMemo, useState } from "react";\nimport { AbstractWidgetProps, StagePanelLocation, StagePanelSection, UiItemsProvider, WidgetState } from "@itwin/appui-abstract";\nimport { useActiveIModelConnection } from "@itwin/appui-react";\nimport { Table } from "@itwin/itwinui-react";\nimport type { GeometricModel3dProps, ModelQueryParams } from "@itwin/core-common";\nexport type CreateTypeFromInterface<Interface> = {\n  [Property in keyof Interface]: Interface[Property];\n};\nexport interface ModelInfo {\n  id: string;\n  name: string;\n}\nexport type ModelInfoType = CreateTypeFromInterface<ModelInfo>;\nconst ModelListWidget = () => {\n  const [availableModels, setAvailableModels] = useState<ModelInfoType[]>([]);\n  const iModel = useActiveIModelConnection();\n  // Example for querying list of all 3D models in the iModel\n  const queryModels = useCallback(async (): Promise<ModelInfo[]> => {\n    const queryParams: ModelQueryParams = {\n      from: "BisCore.GeometricModel3d",\n      wantPrivate: false,\n    };\n    const modelProps = await iModel?.models.queryProps(queryParams) ?? [];\n    return modelProps\n      .map(({ id, name }: GeometricModel3dProps) => ({ id, name }))\n      .filter(({ id }) => id) as ModelInfo[];\n  }, [iModel]);\n  useEffect(() => {\n    queryModels()\n      .then((modelInfos: ModelInfo[]) => {\n        setAvailableModels(modelInfos);\n      })\n      .catch((_e) => {\n        setAvailableModels([]);\n      });\n  }, [queryModels]);\n  const columnDefinition = useMemo(() => [\n    {\n      Header: "Table",\n      columns: [\n        {\n          id: "id",\n          Header: "Id",\n          accessor: "id",\n        },\n        {\n          id: "modelName",\n          Header: "Name",\n          accessor: "name",\n        },\n      ],\n    },\n  ], []);\n  return (\n    <Table\n      data={availableModels}\n      columns={columnDefinition}\n      emptyTableContent={"No data"}\n      density="extra-condensed"\n      style={{ height: "100%" }} />\n  );\n};\nexport class ModelListWidgetProvider implements UiItemsProvider {\n  public readonly id: string = "ModelListWidgetProvider";\n  public provideWidgets(_stageId: string, _stageUsage: string, location: StagePanelLocation, _section?: StagePanelSection): ReadonlyArray<AbstractWidgetProps> {\n    const widgets: AbstractWidgetProps[] = [];\n    if (location === StagePanelLocation.Bottom && _section === StagePanelSection.Start) {\n      widgets.push(\n        {\n          id: "ModelListWidget",\n          label: "Model List",\n          defaultState: WidgetState.Open,\n          getWidgetContent: () => <ModelListWidget />,\n        }\n      );\n    }\n    return widgets;\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"32-direct-imodel-query"},"3.2 Direct iModel Query"),(0,r.kt)("p",null,"For applications with access to an iModel, you can directly query for the list of models and categories."),(0,r.kt)("h4",{id:"321-creating-a-sample-app"},"3.2.1 Creating a Sample App"),(0,r.kt)("p",null,"To assist you with implementing this, we have included two sample widgets on the right which can be dropped into an iTwin viewer app."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"For help with creating an iTwin viewer app, see"," ",(0,r.kt)("a",{style:{textDecoration:"underline"},href:"https://developer.bentley.com/tutorials/web-application-quick-start/"},"iTwin Viewer Quick Start"),"."),(0,r.kt)("p",null,"Once you have a sample app ready to test with, you can create a couple new .tsx files called ",(0,r.kt)("inlineCode",{parentName:"p"},"CategoryListWidget.tsx")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"ModelListWidget.tsx")," and copy the sample code into them.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Sample imports for widget providers"),(0,r.kt)(h,{language:"typescript",code:'import { CategoryListWidgetProvider } from "./CategoryListWidget";\nimport { ModelListWidgetProvider } from "./ModelListWidget";',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Sample for adding the CategoryListWidgetProvider and ModelListWidgetProvider to your iTwin viewer app."),(0,r.kt)(h,{language:"jsx",code:'<Viewer\n  iTwinId={iTwinId ?? ""}\n  iModelId={iModelId ?? ""}\n  authClient={authClient}\n  onIModelAppInit={onIModelAppInit}\n  uiProviders={[\n    new CategoryListWidgetProvider(),\n    new ModelListWidgetProvider(),\n  ]}\n/>',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"322-adding-the-widgets-to-the-application"},"3.2.2 Adding the widgets to the application"),(0,r.kt)("p",null,"Once you have the viewer app ready with the sample widgets copied in, you can get them hooked up by adding the provider names to the ",(0,r.kt)("inlineCode",{parentName:"p"},"uiProviders")," property of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Viewer")," react component (as shown on the right)."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"If you want a more in-depth explanation on the usage of providers, see"," ",(0,r.kt)("a",{style:{textDecoration:"underline"},href:"/tutorials/itwin-viewer-hello-world"},"iTwin Viewer Hello World tutorial"),".")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{mdxType:"Title"},"Extraction Request Syntax"),(0,r.kt)(h,{language:"http",code:"POST https://api.bentley.com/clashdetection/schemas/imodels/00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Body"),(0,r.kt)(h,{language:"json",code:'{\n  "projectId": "00000000-0000-0000-0000-000000000000"\n}',mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Retrieval Request Syntax"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/clashdetection/schemas/imodels/00000000-0000-0000-0000-000000000000?projectId=00000000-0000-0000-0000-000000000000 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Request Headers"),(0,r.kt)(h,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(m,{mdxType:"Title"},"Response Body"),(0,r.kt)(h,{language:"json",code:'{\n  "schema":[\n    {\n      "name":"ProcessPhysical",\n      "label":null,\n      "entityClass":[\n        {\n          "name":"PIPING_COMPONENT",\n          "label":"Piping Component",\n          "properties":[\n            {\n              "name":"COMPONENT_NAME",\n              "label":"Component Name"\n            },\n            {\n              "name":"STATE",\n              "label":"Component State"\n            },\n            {\n              "name":"LENGTH_EFFECTIVE",\n              "label":"Length Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_BRANCH_END_EFFECTIVE",\n              "label":"Design Length Center To Branch End Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_OUTLET_END_EFFECTIVE",\n              "label":"Design Length Center To Outlet End Effective"\n            },\n            {\n              "name":"DESIGN_LENGTH_CENTER_TO_RUN_END_EFFECTIVE",\n              "label":"Design Length Center To Run End Effective"\n            },\n            {\n              "name":"WALL_THICKNESS",\n              "label":"Wall Thickness"\n            },\n            {\n              "name":"UPDATE_GRAPHICS",\n              "label":"Update Graphics"\n            },\n            {\n              "name":"NOMINAL_DIAMETER_RUN_END",\n              "label":"Nominal Diameter Run End"\n            },\n            {\n              "name":"Geometry",\n              "label":"Element Geometry"\n            },\n            {\n              "name":"SPOOL_ID",\n              "label":"Spool Id"\n            },\n            {\n              "name":"SPOOL_NUMBER",\n              "label":"Spool Number"\n            },\n            {\n              "name":"OPTION_CODE",\n              "label":"Option Code"\n            },\n            {\n              "name":"NOTES",\n              "label":"Notes"\n            },\n            {\n              "name":"CATALOG_NAME",\n              "label":"Catalog Name"\n            },\n            {\n              "name":"EC_CLASS_NAME",\n              "label":"EC Class Name"\n            },\n            {\n              "name":"UNIT_OF_MEASURE",\n              "label":"Unit Of Measure"\n            },\n            {\n              "name":"PIECE_MARK",\n              "label":"Piece Mark"\n            },\n            {\n              "name":"FABRICATION_CATEGORY",\n              "label":"Fabrication Category"\n            },\n            {\n              "name":"LINENUMBER",\n              "label":"Line Number"\n            },\n            {\n              "name":"INSULATION_THICKNESS",\n              "label":"Insulation Thickness"\n            },\n            {\n              "name":"INSULATION",\n              "label":"Insulation Material"\n            },\n            {\n              "name":"LENGTH",\n              "label":"Length"\n            },\n            {\n              "name":"INSIDE_DIAMETER",\n              "label":"Inside Diameter"\n            },\n            {\n              "name":"NORMAL_OPERATING_PRESSURE",\n              "label":"Normal Operating Pressure"\n            },\n            {\n              "name":"OUTSIDE_DIAMETER",\n              "label":"Outside Diameter"\n            },\n            {\n              "name":"PIPE_FLANGE_TYPE",\n              "label":"Pipe Flange Type"\n            },\n            {\n              "name":"GRADE",\n              "label":"Grade"\n            },\n            {\n              "name":"SHOP_FIELD",\n              "label":"Shop Field"\n            },\n            {\n              "name":"HUB_DEPTH",\n              "label":"Hub Depth"\n            },\n            {\n              "name":"HUB_WIDTH",\n              "label":"Hub Width"\n            },\n            {\n              "name":"TRACING",\n              "label":"Tracing"\n            }\n          ],\n          "aspects":[],\n          "typeDefinitions":[]\n        }\n      ]\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-get-schema-info"},"4. Get Schema Info"),(0,r.kt)("p",null,"For creating Property Validation rules you will need to get all the class/property names in the iModel schemas."),(0,r.kt)("p",null,"First, you can send an HTTP request to ",(0,r.kt)("inlineCode",{parentName:"p"},"POST https://api.bentley.com/clashdetection/schemas/imodels/{iModelId}")," using your iModel ID in place of {iModelId}. If schema information has not previously been extracted for the iModel, an agent will be started to process the request. A status of 202 is returned if the agent was successfully started."),(0,r.kt)("p",null,"Next, you can repeat calls to ",(0,r.kt)("inlineCode",{parentName:"p"},"GET https://api.bentley.com//clashdetection/schemas/imodels{iModelId}")," until a status of ",(0,r.kt)("inlineCode",{parentName:"p"},"available")," is returned with the response."),(0,r.kt)("p",null,"The response will include a complete tree of schemas, classes and associated properties. For creating property validation rules, you will be using the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," values. However, the ",(0,r.kt)("inlineCode",{parentName:"p"},"label")," values may help you identify the correct classes and properties.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-conclusion"},"4. Conclusion"),(0,r.kt)("p",null,"You should be able to successfully retrieve the related IDs and schema info for your model. While this information is of limited value on its own, it is useful and necessary for creating clash detection and property validation tests, so check out the continue learning section to put your new knowledge to use.")),(0,r.kt)(k,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(g,{mdxType:"TileList"},(0,r.kt)(y,{title:"Clash Test Basics",href:"/tutorials/clash-test-basics",description:"A tutorial that covers the basics of the clash detection lifecycle and usage.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Validation API documentation",href:"/api-groups/validation/",description:"An overview and detailed version of Validation API documentation, including both Clash Detection and Property Validation.",mdxType:"ResourceTile"}))))}T.isMDXComponent=!0;var w=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-optional-create-a-test-itwin-and-imodel-for-testing",level:2,title:"1. (Optional) Create a Test iTwin and iModel for testing",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-api-reference-try-it-out-section",level:3,title:"Grab a user token from the API reference \u201cTry it out\u201d Section",children:[]}]},{id:"3-retrieving-models-and-categories",level:2,title:"3. Retrieving Models and Categories",children:[{id:"31-extractionretrieval-request-apis",level:3,title:"3.1 Extraction/Retrieval Request APIs",children:[]},{id:"32-direct-imodel-query",level:3,title:"3.2 Direct iModel Query",children:[]}]},{id:"4-get-schema-info",level:2,title:"4. Get Schema Info",children:[]},{id:"4-conclusion",level:2,title:"4. Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},76715:function(e,t,n){"use strict";n.d(t,{Jt:function(){return b},Pu:function(){return s},ZP:function(){return w}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Stepping Through an Issue Workflow",tile:{name:"Stepping Through an Issue Workflow",description:"Use a workflow to track the status of an issue created through the Issues REST API.",thumbnail:null,href:"/tutorials/stepping-through-an-issue-workflow",durationInMinutes:15,relatedApiIds:["issues"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("ActionLinkButton"),h=p("CodeBlock"),k=p("Alert"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T={metadata:s};function w(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Each issue type by default is associated with a workflow. Workflows help users keep track of which of their issues they have addressed and how far along they are with each."),(0,r.kt)("p",null,"In this tutorial you will learn how to look up the workflow for the issue you created and then step the issue through the workflow\u2019s statuses until it is considered closed (i.e., done)."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"You will need to first complete the tutorial ",(0,r.kt)("a",{parentName:"p",href:"../creating-your-first-issue/"},"Creating Your First Issue")," so that you have an issue to modify."),(0,r.kt)("p",null,"Take note of the issue\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," properties, as you will need them here.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/get-workflow/",title:"Try the Get Workflow endpoint",target:"_blank",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(u,{mdxType:"Title"},"Sample request"),(0,r.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/workflows/<your-issue-type>?projectId=<your-project-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\n\n{\n  "workflow":{\n    "id":"xospFt7H20-9uSSLOwfBeMrXBKJQWpdOqXbvQ8xzG7s",\n    "startStates":["Open"],\n    "type":"Field Data",\n    "states":[\n      {\n        "name":"Open",\n        "color":"#ff0000",\n        "editableProperties":[],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Assigned",\n        "color":"#ff9900",\n        "editableProperties":[\n          "AssignedTo",\n          "AssignedToId",\n          "_DueDate",\n          "_AssignedUsers"\n        ],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Review",\n        "color":"#ffff00",\n        "editableProperties":[\n          "AssignedTo",\n          "AssignedToId",\n          "_DueDate",\n          "_AssignedUsers"\n        ],\n        "stateCategory":"Open"\n      },\n      {\n        "name":"Approved",\n        "color":"#66cc00",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      },\n      {\n        "name":"Rejected",\n        "color":"#990000",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      },\n      {\n        "name":"Voided",\n        "color":"#999999",\n        "editableProperties":["!"],\n        "stateCategory":"Closed"\n      }\n    ],\n    "transitions":[\n      {\n        "displayName":"Assign",\n        "start":"Open",\n        "end":"Assigned",\n        "notes":"None"\n      },\n      {\n        "displayName":"Void",\n        "start":"Open",\n        "end":"Voided",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send for Review",\n        "start":"Assigned",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send back",\n        "start":"Assigned",\n        "end":"Open",\n        "notes":"None"\n      },\n      {\n        "displayName":"Approve",\n        "start":"Review",\n        "end":"Approved",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reject",\n        "start":"Review",\n        "end":"Rejected",\n        "notes":"None"\n      },\n      {\n        "displayName":"Void",\n        "start":"Review",\n        "end":"Voided",\n        "notes":"None"\n      },\n      {\n        "displayName":"Send back",\n        "start":"Review",\n        "end":"Assigned",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Approved",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Rejected",\n        "end":"Review",\n        "notes":"None"\n      },\n      {\n        "displayName":"Reopen",\n        "start":"Voided",\n        "end":"Review",\n        "notes":"None"\n      }\n    ],\n    "startingTransitions":[\n      {\n        "displayName":"Create as Open",\n        "start":null,\n        "end":"Open",\n        "notes":"None"\n      }\n    ],\n    "uninitializedState":{\n      "name":null,\n      "color":null,\n      "editableProperties":[],\n      "stateCategory":null\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-look-up-the-workflow"},"1. Look Up the Workflow"),(0,r.kt)("p",null,"Make a GET request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-workflow/"},"Get Workflow")," endpoint to retrieve the workflow definition."),(0,r.kt)("h4",{id:"url"},"URL"),(0,r.kt)("p",null,"The URL of the request includes a path of ",(0,r.kt)("inlineCode",{parentName:"p"},"/workflows")," followed by your issue type. You must also provide ",(0,r.kt)("strong",{parentName:"p"},"projectId")," as a query string parameter."),(0,r.kt)("p",null,"Format: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/workflows/<type>?projectId=<projectId>")),(0,r.kt)("h4",{id:"understanding-the-workflow-definition"},"Understanding the Workflow Definition"),(0,r.kt)("p",null,"The workflow definition in the response body consists of two main concepts: ",(0,r.kt)("strong",{parentName:"p"},"states")," and ",(0,r.kt)("strong",{parentName:"p"},"transitions"),". States are named statuses that an issue can have as the value of its ",(0,r.kt)("inlineCode",{parentName:"p"},"status")," property. Transitions dictate the possible changes between states; if an issue is in Status A, then it can be changed to Status B if and only if there is a transition with a ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," of A and an ",(0,r.kt)("inlineCode",{parentName:"p"},"end")," of B."),(0,r.kt)("p",null,"Thus, a workflow can be pictured as a flowchart where states are bubbles and transitions are arrows. Below is a visual representation of the workflow shown in the sample response body."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/issue-workflow.png",alt:"Visualized Workflow"})),(0,r.kt)("p",null,"Examine the sample response and note that one of the states in the list of states has a ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," of \u201cOpen\u201d. Also, there are transitions named \u201cAssign\u201d and \u201cVoid\u201d that both have a ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," of \u201cOpen\u201d, and have ",(0,r.kt)("inlineCode",{parentName:"p"},"end")," values of \u201cAssigned\u201d and \u201cVoided\u201d, respectively. Thus, an issue with a ",(0,r.kt)("inlineCode",{parentName:"p"},"status")," of \u201cOpen\u201d can be changed to have a ",(0,r.kt)("inlineCode",{parentName:"p"},"status")," of \u201cAssigned\u201d or \u201cVoided\u201d, but no other values."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Tip for application designers: Usually, a UI element for setting an issue's workflow status consists of a dropdown list. Each transition that's available for the current status (i.e., has the current status as its ",(0,r.kt)("code",null,"start"),") appears as an option in the list with text equal to the transition's ",(0,r.kt)("code",null,"displayName"),". Selecting the option modifies the issue's status to the value of ",(0,r.kt)("code",null,"end")," for that transition.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},(0,r.kt)(m,{href:"/apis/issues-v1/operations/modify-issue/",target:"_blank",title:"Try the Update Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,r.kt)(h,{language:"http",code:"PATCH https://api.bentley.com/issues/<your-issue-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (1)"),(0,r.kt)(h,{language:"json",code:'{\n  "status":"Assigned"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (2)"),(0,r.kt)(h,{language:"json",code:'{\n  "status":"Review"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample body (3)"),(0,r.kt)(h,{language:"json",code:'{\n  "status":"Approved"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Sample response"),(0,r.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\n\n{\n  "issue":{\n    "id":"xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw",\n    "status":"Approved",\n    "createdBy":"Andrew Menzies",\n    "createdDateTime":"2021-06-11T18:17:45.4807786Z",\n    "lastModifiedBy":"Andrew Menzies",\n    "lastModifiedDateTime":"2021-06-21T19:43:55.146858Z",\n    "assignee":{\n      "displayName":"Andrew Menzies",\n      "id":"9e39de83-2457-466d-9de3-8d8a186b4189"\n    },\n    "number":"FID-00002",\n    "displayName":"FID-00002",\n    "subject":"Which Material? With model ID",\n    "description":"Version 1.2 of the plans does not specify what material this support beam will be made out of.",\n    "type":"Field Data",\n    "container":{\n      "id":"2374523948759432"\n    },\n    "item":{\n      "id":"9090096798506970"\n    },\n    "dueDate":"2021-07-30T00:00:00Z",\n    "state":"Closed",\n    "properties":{\n      "_StatusColor":"#66cc00"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-update-the-issues-status"},"2. Update the Issue\u2019s Status"),(0,r.kt)("p",null,"An issue\u2019s ",(0,r.kt)("strong",{parentName:"p"},"status")," property dictates what step of the workflow it\u2019s currently on. When you create an issue, you can set its ",(0,r.kt)("strong",{parentName:"p"},"status")," to one of the strings listed in the ",(0,r.kt)("strong",{parentName:"p"},"startStates")," array. Since you didn\u2019t set a status when creating your issue in the ",(0,r.kt)("strong",{parentName:"p"},"Creating Your First Issue")," tutorial, it was automatically set to the first ",(0,r.kt)("inlineCode",{parentName:"p"},"startState"),", \u201cOpen\u201d."),(0,r.kt)("p",null,"To change the issue\u2019s status, make a PATCH request to the ",(0,r.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/modify-issue/"},"Update Issue")," endpoint, just as you did in the ",(0,r.kt)("strong",{parentName:"p"},"Creating Your First Issue")," tutorial. Include the ",(0,r.kt)("strong",{parentName:"p"},"status")," property, making sure to set its value according to the workflow transitions."),(0,r.kt)("p",null,"For instance, to change your issue from \u201cOpen\u201d to \u201cAssigned\u201d, make a request with the body shown in \u201cSample Body (1)\u201d."),(0,r.kt)("p",null,"To keep stepping the issue through the workflow, make additional Update Issue requests, using \u201cSample Body (2)\u201d and then \u201cSample Body (3)\u201d. This will change the issue from \u201cAssigned\u201d to \u201cReview\u201d and then \u201cApproved\u201d. Once all of these requests are done, you should get the response shown under \u201cSample response\u201d."),(0,r.kt)("p",null,"Note that the \u201cApproved\u201d status in the workflow definition has a ",(0,r.kt)("strong",{parentName:"p"},"stateCategory")," of \u201cClosed\u201d rather than \u201cOpen\u201d. ",(0,r.kt)("inlineCode",{parentName:"p"},"stateCategory")," is a conceptual grouping of workflow states into one of three types: \u201cOpen\u201d, \u201cClosed\u201d, and \u201cDraft\u201d. Conceptually, to users, an issue in an Open state generally requires attention; one in Closed has been taken care of (or deemed not a problem). A Draft issue is being worked on by its creator and may not be ready for review by others yet. In terms of functionality, Open and Draft issues can both be edited like normal, but a Closed issue cannot be edited except to change its ",(0,r.kt)("strong",{parentName:"p"},"status"),"."),(0,r.kt)(k,{mdxType:"Alert"},"Note: The ",(0,r.kt)("strong",null,"state")," property of an issue (not to be confused with"," ",(0,r.kt)("strong",null,"status"),") corresponds to the ",(0,r.kt)("strong",null,"stateCategory")," of the issue's current ",(0,r.kt)("strong",null,"status")," in the workflow definition. The"," ",(0,r.kt)("strong",null,"state")," property is set automatically and cannot be included in the body of ",(0,r.kt)("strong",null,"Create Issue")," or ",(0,r.kt)("strong",null,"Update Issue")," ","requests."),(0,r.kt)("p",null,"Well done! You now understand how to use the Issues REST API to find an issue\u2019s workflow, how the workflow affects updating the issue (the ",(0,r.kt)("strong",{parentName:"p"},"status")," property), and how the issue becomes ",(0,r.kt)("em",{parentName:"p"},"open")," or ",(0,r.kt)("em",{parentName:"p"},"closed")," as a result.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Stepping Through an Issue Workflow",description:"Learn how an issue's status can be set to track its progress.",href:"../stepping-through-an-issue-workflow",mdxType:"Tile"}),(0,r.kt)(f,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",mdxType:"Tile"}))))}w.isMDXComponent=!0;var b=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-look-up-the-workflow",level:2,title:"1. Look Up the Workflow",children:[]},{id:"2-update-the-issues-status",level:2,title:"2. Update the Issue\u2019s Status",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},33846:function(e,t,n){"use strict";n.d(t,{Jt:function(){return v},Pu:function(){return s},ZP:function(){return b}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Synchronize a file from Azure Blob Storage",tile:{name:"Synchronize a file from Azure Blob Storage",description:"Walk-through how to synchronize a file from Azure Blob Storage to an iModel using Synchronization API.",thumbnail:"/unreal-docs-site/static/images/synchronizationThumbnail.png",href:"/tutorials/synchronization-blob-tutorial/",durationInMinutes:30,relatedApiIds:["synchronization","imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CreateServiceAppButton"),m=p("Title"),h=p("HttpSample"),k=p("CodeBlock"),g=p("ContinueLearningSection"),y=p("TileList"),f=p("Tile"),T=p("ResourceTile"),w={metadata:s};function b(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"30",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial guides you through synchronizing a file from Azure Blob Storage to an iModel using the Synchronization API. The Synchronization API works in an iTwin and iModel context. To synchronize a set of files, create a connection between the iModel and files. A Connection is an aggregation of properties such as file metadata, which is needed for synchronization. You can run Connections on-demand converting the specified file to an iModel.")),(0,r.kt)(c,{actions:function(e){return[(0,r.kt)(u,{tooltip:"Register a service application for this tutorial",allowedScopes:["synchronization:read","synchronization:modify","imodels:read","imodels:modify"],clientName:"Synchronization tutorial client",mdxType:"CreateServiceAppButton"},"Register")]},mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-a-service-application"},"1. Register a Service Application"),(0,r.kt)("p",null,"To start the tutorial you will need to register an application to be able to use iTwin Platform APIs.\nTo make your tutorial more interactive please use the ",(0,r.kt)("strong",{parentName:"p"},"Register Application")," button."),(0,r.kt)("p",null,"After you click this button it will register a client and will display these settings."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": the unique identifier for your application. It is displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_secret"),": the secret created and displayed when you created the application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope"),": a list of accesses granted to the application. Displayed on the application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),"."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-access-token"},"2. Get Access Token"),(0,r.kt)("p",null,"In this tutorial, we are using the Client credentials authentication workflow. This workflow allows a web service (confidential client) to use its own credentials instead of impersonating a user to authenticate when calling a web service. Permissions are granted directly to the application itself by an administrator. When the App presents a token to a resource, the resource ensures the App is authorized to perform the action since there is no user involved in the authentication.")),(0,r.kt)(c,{subSection:!0,actions:function(e){var t,n,i;return[(0,r.kt)(m,{mdxType:"Title"},"Request to Token endpoint"),(0,r.kt)(h,{method:"POST",url:"".concat(e.authority,"/connect/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:null!==(t=e.clientId)&&void 0!==t?t:"CLIENT_ID",client_secret:null!==(n=e.clientSecret)&&void 0!==n?n:"CLIENT_SECRET",scope:null!==(i=e.scope)&&void 0!==i?i:"synchronization:read synchronization:modify imodels:read imodels:modify",grant_type:"client_credentials"}).toString(),saveResponseTo:"tokenResponse",canSendRequest:e.clientId&&e.clientSecret&&e.scope,tooltip:"Send a request to get an access token",mdxType:"HttpSample"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-to-token-endpoint"},"Request to Token endpoint"),(0,r.kt)("p",null,"Call the token endpoint with the ",(0,r.kt)("inlineCode",{parentName:"p"},"'Content-Type': 'application/x-www-form-urlencoded'")," header."),(0,r.kt)("p",null,"Request body (with ",(0,r.kt)("a",{parentName:"p",href:"https://www.w3schools.com/tags/ref_urlencode.ASP"},"url encoded")," characters):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_id"),": the unique identifier generated when creating the application; you can find it on the ",(0,r.kt)("a",{parentName:"li",href:"/my-apps"},"My Apps")," page. The ",(0,r.kt)("strong",{parentName:"li"},"client_id")," is displayed in the last step if the App was created during this tutorial."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"client_secret"),": the secret created and displayed when you created the application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"scope"),": space separated scopes (in this tutorial: ",(0,r.kt)("inlineCode",{parentName:"li"},"synchronization:read synchronization:modify imodels:read imodels:modify"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"grant_type"),": ",(0,r.kt)("strong",{parentName:"li"},"client_credentials")," it indicates a authorization flow for service-to-service communication."))),(0,r.kt)(c,{subSection:!0,actions:function(e){return[(0,r.kt)(m,{mdxType:"Title"},"Response from the Token endpoint"),(0,r.kt)(k,{language:"json",code:JSON.stringify(e.tokenResponse||{access_token:"JWT_TOKEN",token_type:"Bearer",expires_in:3599},void 0,2),mdxType:"CodeBlock"})]},mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"Response contains:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"token_type"),": ",(0,r.kt)("strong",{parentName:"li"},"Bearer")," - part of Authorization header that is constructed like ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorize: token_type access_token"),". For more information, see ",(0,r.kt)("a",{parentName:"li",href:"https://www.oauth.com/oauth2-servers/differences-between-oauth-1-2/bearer-tokens/"},"Difference between OAuth 1.0 and OAuth 2.0"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"access_token"),": access token itself (in ",(0,r.kt)("a",{parentName:"li",href:"https://jwt.io"},"JWT")," format) that will be passed into ",(0,r.kt)("strong",{parentName:"li"},"Authorize")," header for api calls as ",(0,r.kt)("strong",{parentName:"li"},"Bearer JWT_TOKEN"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"expires_in"),": lifespan of access token in seconds."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-an-imodel"},"3. Create an iModel"),(0,r.kt)("p",null,"An iModel is a specialized information container for exchanging data associated with the lifecycle of infrastructure assets.\niModels were created to facilitate the sharing and distribution of information regardless of the source and format of the information."),(0,r.kt)("p",null,"The iTwin Platform iModels API is based on iModelHub cloud service which enables alignment, accountability, and accessibility of infrastructure digital twins.\nIt is the control center for iModels and is responsible for coordinating concurrent access to iModels as well as changes made to them.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"POST https://api.bentley.com/imodels HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"An empty iModel is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/imodels/"},"https://api.bentley.com/imodels/")," endpoint with the payload describing the iModel to be created.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n      "iTwinId": "ITWIN_ID",\n      "name": "Sun City Renewable-energy Plant",\n      "description": "Overall model of solar farms in Sun City",\n      "extent": {\n          "southWest": {\n            "latitude": 46.13267702834806,\n            "longitude": 7.672120009938448\n          },\n          "northEast": {\n            "latitude": 46.302763954781234,\n            "longitude": 7.835541640797823\n          }\n        }\n    }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"There are two required properties for the create iModel payload."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"name")," - iModel name is required which uniquely identifies the iModel within the iTwin. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"iTwinId")," - provides the iTwin identifier that created iModel will belong to. The iTwin identifier is a required property. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"description")," - free form text field so you could give more information about the iModel. ",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"extent")," - iModels usually are placed at some location on the Earth.\nThis property allows to specify the maximum rectangular area on the Earth which encloses the iModel.\nThe maximum extent is used to help keep your iModel clean.\nWhen new elements are imported, those outside the extent will be flagged for further processing.\nThis extent will also help to zoom to the area of interest in web viewers.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-get-a-blob-sas-url"},"4. Get a Blob SAS Url"),(0,r.kt)("p",null,"This tutorial shows how to synchronize a file stored on Azure blob storage. Files from Azure blob storage can be accessed through preauthenticated SAS urls."),(0,r.kt)("p",null,"There are two ways to get a SAS url:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/cognitive-services/translator/document-translation/create-sas-tokens?tabs=blobs"},"Create a SAS url for blob manually")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/storage/blobs/sas-service-create?tabs=dotnet"},"Create a SAS url for blob programatically")))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-create-a-connection"},"5. Create a Connection"),(0,r.kt)("p",null,"The synchronization process is based on connections that establish links from design files to iModels. There can be multiple connections for an iModel, and those can be executed on-demand multiple times to synchronize changes. In this step, we will be creating such a connection.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"POST\xa0https://api.bentley.com/synchronization/imodels/manifestConnections HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"To create a connection, send a ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"synchronization/imodels/manifestConnections")," endpoint."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ul"},"IMODEL_ID of created iModel from step 3."),(0,r.kt)("li",{parentName:"ul"},"FILE_ID is used to uniquelly identify a file in an imodel. Synchronizing same file again same file id should be provided."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n    "displayName": "Connection1",\n    "iModelId": "IMODEL_ID",\n    "sourceFiles": [{\n        "sourceFileId": "FILE_ID"\n    }],\n    "authenticationType": "Service"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request Body"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"displayName")," - user facing connection name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"iModelId"),": - id of the iModel that contains the connection"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"sourceFiles")," - information about the source files",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"sourceFileId")," - id of the file from the external document management system"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"authenticationType")," - set the property to ",(0,r.kt)("strong",{parentName:"li"},"Service")," to use the API from server application without user context."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n      "connection": {\n          "iModelId": "IMODEL_ID",\n          "iTwinId": "ITWIN_ID",\n          "authenticationType": "Service",\n          "_links": {\n              "iModel": {\n                  "href": "https://api.bentley.com/imodels/IMODEL_ID"\n              },\n              "iTwin": {\n                  "href": "https://api.bentley.com/itwins/ITWIN_ID"\n              },\n              "lastRun": null\n          },\n          "id": "CONNECTION_ID",\n          "displayName": "Connection to a file"\n      }\n    }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-1"},"Response"),(0,r.kt)("p",null,"Note the Id as you will need it in the next step.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-run-a-connection"},"6. Run a Connection"),(0,r.kt)("p",null,"A Run defines a single connection synchronization process. It can be initialized manually by sending a run start request.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"POST\xa0https://api.bentley.com/synchronization/imodels/manifestConnections/CONNECTION_ID/runs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-2"},"Request"),(0,r.kt)("p",null,"Send a ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"synchronization/imodels/manifestConnections/{connectionId}/runs"),"\xa0endpoint with a valid connection ID to run a connection."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ul"},"CONNECTION_ID which should be started for processing. Use the value from previous step response."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n        "sourceFiles": [{\n        "id": "FILE_ID",\n        "name": "FileName.dgn",\n        "url": "https://myaccount.blob.core.windows.net/files/FileName.dgn?sv=2012-02-12&st=2009-02-09&se=2009-02-10&sr=c&sp=r&si=YWJjZGVmZw%3d%3d&sig=dD80ihBh5jfNpymO5Hg1IdiJIEvHcJpCMiCMnN%2fRnbI%3d",\n        "connector": "MSTN",\n        "documentAttribute ":{\n          "className":"SchemaName:ClassName",\n            "properties":{\n               "Revision":"R01",\n               "Suitability":"S01",\n               "CodeValue":"89c7f032-6dfb-4a0b-8511-983e2d18728a"\n            }\n        }\n    }]\n        "documentAttributeSchemaUrl":""https://blobstoragelocation/documentAttributeSchema.json""\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-2"},"Request Body"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"sourceFiles")," - information about source files"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"id")," - id of the file from external document management system"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name")," - name of a file"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"url")," - valid blob SAS url with read permissions"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"connector")," - identifier of the connector used to process the file. For more information, see ",(0,r.kt)("a",{parentName:"li",href:"/apis/synchronization/supported-formats/"},"Supported formats."))),(0,r.kt)("h3",{parentName:"li",id:"optional-properties"},"Optional Properties"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"documentAttribute")," - A document attribute consists of the following:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"- className - Defines the ECClass in the schema to be used for the associated document. Classes are derived from published BIS schema named documentMetadataClass. The JSON schema for the document metadata is available here (https://cdn.jsdelivr.net/npm/@bentley/document-metadata-schema@1.0.0/DocumentMetadata.ecschema.json)\n- properties - Defines the properties to be set for the associated document. These properties are derived from the above mentioned Class.\n"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"documentAttributeSchemaUrl")," - URL contains a JSON file that has document attribute schema as defined in iTwin.js. For more details on ECSchema please see the iTwin.js documentation (",(0,r.kt)("a",{parentName:"p",href:"https://www.itwinjs.org/v1/bis/ec/ec-schema/"},"https://www.itwinjs.org/v1/bis/ec/ec-schema/"),"). This schema is typically created by the user or a program. A manifest connection passes this information to the connector which will use this schema to store document attributes inside the iModel.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Additional note")," - The schema generation happens as a separate process. Once generated the user stores the schema at a BLOB storage location. This API does not support the generation of the schema, but uses it to support the properties user wants to pass during a connection run.")))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n  "$schema": "https://dev.bentley.com/json_schemas/ec/32/ecschema",\n  "name": "BridgeSpatial",\n  "version": "01.00.00",\n  "alias": "brsp",\n  "description": "Schema modeling the spatial breakdown of Bridges.",\n  "references": [\n    {\n      "name": "CoreCustomAttributes",\n      "version": "01.00.03"\n    },\n    {\n      "name": "BisCore",\n      "version": "01.00.13"\n    },\n    {\n      "name": "SpatialComposition",\n      "version": "01.00.01"\n    },\n    {\n      "name": "LinearReferencing",\n      "version": "02.00.03"\n    }\n  ],\n  "customAttributes": [\n    {\n      "className": "CoreCustomAttributes.ProductionStatus",\n      "SupportedUse": "NotForProduction"\n    }\n  ],\n  "items": {\n    "Bridge": {\n      "schemaItemType": "EntityClass",\n      "label": "Bridge",\n      "description": "TODO",\n      "baseClass": "SpatialComposition.Facility",\n      "mixins": [\n        "LinearReferencing.ILinearLocationElement"\n      ]\n    },\n\t\t"Substructure": {\n\t\t\t"schemaItemType": "EntityClass",\n\t\t\t"label": "SubStructure",\n\t\t\t"description": "TODO",\n\t\t\t"baseClass": "SpatialComposition.FacilityPart"\n\t\t},\n\t\t"Superstructure": {\n\t\t\t"schemaItemType": "EntityClass",\n\t\t\t"label": "SuperStructure",\n\t\t\t"description": "TODO",\n\t\t\t"baseClass": "SpatialComposition.FacilityPart"\n\t\t},\n\t\t"Deck": {\n\t\t\t"schemaItemType": "EntityClass",\n\t\t\t"label": "Deck",\n\t\t\t"description": "TODO",\n\t\t\t"baseClass": "SpatialComposition.FacilityPart"\n\t\t},\n\t\t"Pier": {\n\t\t\t"schemaItemType": "EntityClass",\n\t\t\t"label": "Pier",\n\t\t\t"description": "TODO",\n\t\t\t"baseClass": "SpatialComposition.FacilityPart"\n\t\t},\n\t\t"Abutment": {\n\t\t\t"schemaItemType": "EntityClass",\n\t\t\t"label": "Abutment",\n\t\t\t"description": "TODO",\n\t\t\t"baseClass": "SpatialComposition.FacilityPart"\n\t\t}\n\t}\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Schema generation")," Schema can be generated or edit schemas using ",(0,r.kt)("a",{parentName:"li",href:"https://imodelschemaeditor.bentley.com/?"},"schema editor tool"),". This URL can be updated to include the projectId and iModelId query parameters such as ",(0,r.kt)("a",{parentName:"li",href:"https://imodelschemaeditor.bentley.com/?"},"schema-editor-tool-url"),"projectid=ProjectId&imodelid=iModelId. Following is an example of schema JSON file referenced by the documentAttributeSchemaUrl property."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"HTTP/1.1 202 Accepted",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-2"},"Response"),(0,r.kt)("p",null,"On a successful request, the operation returns http status code 202/accepted - the request is accepted for processing and will be executed in the background.\nIf there is an active run in progress for this connection, a new run is added to the queue. The response includes a location header pointing to the created run.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-get-runs-statuses"},"7. Get runs statuses"),(0,r.kt)("p",null,"A run contains the synchronization process status. To track a run and associated status, make a GET request to a link from previous request response location header.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"http",code:"GET\xa0https://api.bentley.com/synchronization/imodels/manifestConnections/CONNECTION_ID/runs/RUN_ID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-3"},"Request"),(0,r.kt)("p",null,"To get the status of the Run, send a GET request to the synchronization/imodels/manifestConnections/{connectionId}/runs/{runId}\xa0endpoint with a valid connection and run Id. For convenience take a link from previous request response location header."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ul"},"CONNECTION_ID of the run we want to get."),(0,r.kt)("li",{parentName:"ul"},"RUN_ID of the run we want to get."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(k,{language:"json",code:'{\n    "run": {\n        "id": "RUN_ID",\n        "startDateTime": "02/15/2022 08:24:45",\n        "endDateTime": "02/15/2022 08:26:50",\n        "phase": "MasterFile",\n        "jobs": [\n            {\n                "id": "JOB_ID",\n                "startDateTime": "02/15/2022 08:25:58",\n                "endDateTime": "02/15/2022 08:26:28",\n                "state": "Completed",\n                "result": "Success",\n                "connectorType": "MSTN",\n                "tasks": [\n                    {\n                        "id": "TASK_ID",\n                        "startDateTime": "02/15/2022 08:25:58",\n                        "endDateTime": "02/15/2022 08:26:28",\n                        "retryAttempts": 0,\n                        "state": "Completed",\n                        "result": "Success",\n                        "error": null\n                    }\n                ]\n            }\n        ],\n        "state": "Completed",\n        "result": "Success"\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-3"},"Response"),(0,r.kt)("p",null,"At the end of synchronization, the run state should be \u201cCompleted\u201d and result \u201cSuccess\u201d.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"8-synchronize-an-updated-file"},"8. Synchronize an updated file"),(0,r.kt)("p",null,"If a file is changed on Azure Blob Storage, it has to be synchronized again for the iModel to be updated. The workflow should be:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"File is updated on Azure Blob Storage."),(0,r.kt)("li",{parentName:"ol"},"Run the connection again. (See step 6)"),(0,r.kt)("li",{parentName:"ol"},"Get connection run status. (See step 7)"))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"9-conclusion"},"9. Conclusion"),(0,r.kt)("p",null,"In this tutorial we have gone through a file from Azure Blob Storage synchronization process:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create an empty iModel"),(0,r.kt)("li",{parentName:"ul"},"Create a connection"),(0,r.kt)("li",{parentName:"ul"},"Run the connection"),(0,r.kt)("li",{parentName:"ul"},"Get run status.")),(0,r.kt)("p",null,"After a successful run, the iModel now contains the design file changes.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for the completion of your first synchronization! You\u2019ve now know a lot on the subject, but there\u2019s still possibilities to learn more to unleash the platform capabilities."),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(f,{name:"Create iModel Named Version",description:"This quick start is intended to guide you through the steps to create a new iModel Named Version.",href:"/tutorials/create-named-version",mdxType:"Tile"}),(0,r.kt)(f,{name:"Synchronization Configuration API",description:"This tutorial guides you through synchronizing a file using different configurations with the Synchronization API.",href:"/tutorials/synchronization-configurations-api-tutorial",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(y,{mdxType:"TileList"},(0,r.kt)(T,{title:"Synchronization API documentation",href:"/api-groups/synchronization",description:"An overview and detailed Synchronization API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(T,{title:"Synchronization API code sample",href:"https://github.com/iTwin/synchronization-api-sample-app",description:"A working code sample showing how Synchronization API can be integrated into a React application.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(T,{title:"Data Management API documentation",href:"/api-groups/data-management/",description:"An overview and detailed Data Management API documentation.",mdxType:"ResourceTile"}))))}b.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-register-a-service-application",level:2,title:"1. Register a Service Application",children:[]},{id:"2-get-access-token",level:2,title:"2. Get Access Token",children:[]},{id:"3-create-an-imodel",level:2,title:"3. Create an iModel",children:[]},{id:"4-get-a-blob-sas-url",level:2,title:"4. Get a Blob SAS Url",children:[]},{id:"5-create-a-connection",level:2,title:"5. Create a Connection",children:[]},{id:"6-run-a-connection",level:2,title:"6. Run a Connection",children:[]},{id:"7-get-runs-statuses",level:2,title:"7. Get runs statuses",children:[]},{id:"8-synchronize-an-updated-file",level:2,title:"8. Synchronize an updated file",children:[]},{id:"9-conclusion",level:2,title:"9. Conclusion",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},70483:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Get started with Synchronization Configurations API",tile:{name:"Get started with Synchronization Configurations API",description:"An introduction to Synchronization Configurations API explaining main workflows and operations.",thumbnail:"/unreal-docs-site/static/images/synchronizationConfiguration.png",href:"/tutorials/synchronization-configurations-api-tutorial/",durationInMinutes:50,relatedApiIds:["synchronization"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Intermediate",durationInMinutes:"50",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial guides you through synchronizing a file using different configurations with the Synchronization API. Many configurations could be set on three scopes: iTwin, iModel, or Connection. In this example, you will learn how to enable sheets and drawings processing that are not synchronized by default."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Perform all the actions defined in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/synchronization-blob-tutorial/"},"Synchronize a file from Azure Blob Storage")," tutorial, which covers all the fundamental steps to a typical synchronization workflow with various data types. As a result, you will have an iTwin, an iModel, and a Connection created with a successful connection run that did not process 2D data."),(0,r.kt)("p",null,"In this tutorial, we will only cover the workflow for creating and running a connection with a specific ",(0,r.kt)("strong",{parentName:"p"},"enableSheetsAndDrawings")," configuration set. A .dgn or .revit file with sheets or drawings is required to follow the steps."),(0,r.kt)("h2",{id:"1-guide-to-synchronization-configuration-api"},"1. Guide to Synchronization Configuration API"),(0,r.kt)("p",null,"Before diving into the code to apply configurations to your synchronizations, let\u2019s take some time to understand the workflow and the involved API calls."),(0,r.kt)("p",null,"Synchronization Configuration API provides multiple flags which apply to different scopes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"iTwin")," - all supported iTwin scope flags can be found at ",(0,r.kt)("a",{parentName:"li",href:"/apis/synchronization/operations/create-itwin-configuration/"},"Create iTwin configuration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"iModel")," - all supported iModel scope flags can be found at ",(0,r.kt)("a",{parentName:"li",href:"/apis/synchronization/operations/create-imodel-configuration/"},"Create iModel configuration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Connection")," - all supported Connection scope flags can be found at ",(0,r.kt)("a",{parentName:"li",href:"/apis/synchronization/operations/create-connection-configuration/"},"Create Connection configuration"))),(0,r.kt)("h2",{id:"workflow-for-setting-configurations"},"Workflow for setting configurations"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Identify configurations that require the default value changed per your synchronization workflow."),(0,r.kt)("li",{parentName:"ol"},"Create a Connection that establishes links from design files to iModel."),(0,r.kt)("li",{parentName:"ol"},"Depending on the supported scope, use Create Connection Configuration, Create iModel Configurations or Create iTwin Configurations, where you specify how data should be processed."),(0,r.kt)("li",{parentName:"ol"},"Proceed with synchronization by Running a Connection"),(0,r.kt)("li",{parentName:"ol"},"Modify configurations for the next synchronization runs if required.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"In this tutorial, enableSheetsAndDrawings will be used as an example, but the workflow patterns are the same for any configuration.")),(0,r.kt)("h2",{id:"enablesheetsanddrawings"},"enableSheetsAndDrawings"),(0,r.kt)("p",null,"Controls sheets and drawings synchronization. If enabled, all sheet models and\nrelayed drawings will be synchronized to an iModel. The default value is\n",(0,r.kt)("strong",{parentName:"p"},"false"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Typical use case:")," As you are synchronizing Revit files, there could be sheets with multiple drawings on them. You can choose to synchronize those or not. If a file contains drawings not used in any of the sheets, those will not be processed."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-a-configuration-with-the-enablesheetsanddrawings-flag"},"2. Create a configuration with the \u201cenableSheetsAndDrawings\u201d flag"),(0,r.kt)("p",null,"To enable 2D data processing, we need to create a configuration for connection with the ",(0,r.kt)("strong",{parentName:"p"},"enableSheetsAndDrawings")," flag.")),(0,r.kt)(c,{hasTitle:!1,subSection:!0,actions:[(0,r.kt)(u,{mdxType:"Title"},"HTTP request"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/synchronization/configurations/connections/CONNECTION_ID HTTP/1.1\nContentType: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n"enableSheetsAndDrawings": "true"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "configuration": {\n    "scopeId": CONNECTION_ID,\n    "settings": { "enableSheetsAndDrawings": "true" },\n    "resolvedSettings": {\n      "uploadDgnRealityData": "true",\n      "convertDgnTerrainModels": "false",\n      "createRvtDrawings": "false",\n      "squashIntermediateRevisions": "false",\n      "skipRvtReprojection": "false",\n      "convertDgnHyperModelingSections": "true",\n      "clampZExtent": "false",\n      "overrideRvtReprojectionDistance": "0",\n      "reclassifyDgnElements": "false",\n      "ignoreDgnAttachments": "true"\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request"},"Request"),(0,r.kt)("p",null,"A Synchronization connection configuration is created by sending an HTTP POST request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/synchronization/configurations/connections/CONNECTION_ID"},"https://api.bentley.com/synchronization/configurations/connections/CONNECTION_ID")," endpoint. Where CONNECTION_ID is a connection id retrieved from prerequisites connection."),(0,r.kt)("h3",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"There is one required property for the create configuration payload."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"enableSheetsAndDrawings: true")),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("p",null,"All the applicable flags are set and the ",(0,r.kt)("strong",{parentName:"p"},"enableSheetsAndDrawings")," configuration is set to true.")),(0,r.kt)(c,{hasTitle:!1,mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-run-a-configured-connection-with-the-enablesheetsanddrawings-flag-set-to-true"},"3. Run a configured connection with the \u201cenableSheetsAndDrawings\u201d flag set to true"),(0,r.kt)("p",null,"Perform connection run steps defined in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/synchronization-blob-tutorial/"},"Synchronize a file from Azure Blob Storage"),"\nfor the configured connection. The result will be a connection run with 2D data synchronized.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-update-of-configuration-with-enablesheetsanddrawings-flag-to-false-optional"},"4. Update of configuration with \u201cenableSheetsAndDrawings\u201d flag to false (Optional)"),(0,r.kt)("p",null,"If you no longer want to synchronize 2D data, update the configured connection configuration setting enableSheetsAndDrawings flag to false. Next time this connection will run 2D data will not be updated, but existing sheets and drawings processed before will remain in an iModel.")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"HTTP request"),(0,r.kt)(m,{language:"http",code:"PATCH https://api.bentley.com/synchronization/configurations/connections/CONNECTION_ID HTTP/1.1\nContentType: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n"enableSheetsAndDrawings": "false"\n}',mdxType:"CodeBlock"}),(0,r.kt)(u,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n  "configuration": {\n    "scopeId": CONNECTION_ID,\n    "settings": { "enableSheetsAndDrawings": "false" },\n    "resolvedSettings": {\n      "uploadDgnRealityData": "true",\n      "convertDgnTerrainModels": "false",\n      "createRvtDrawings": "false",\n      "squashIntermediateRevisions": "false",\n      "skipRvtReprojection": "false",\n      "convertDgnHyperModelingSections": "true",\n      "clampZExtent": "false",\n      "overrideRvtReprojectionDistance": "0",\n      "reclassifyDgnElements": "false",\n      "ignoreDgnAttachments": "true"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"request-1"},"Request"),(0,r.kt)("p",null,"Synchronization Connection configuration settings are updated by sending an HTTP PATCH request to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/synchronization/configurations/connections/CONNECTION_ID"},"https://api.bentley.com/synchronization/configurations/connections/CONNECTION_ID")," endpoint. Where CONNECTION_ID is a connection id retrieved from prerequisites connection."),(0,r.kt)("h3",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"There is one required property for the create configuration payload."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"enableSheetsAndDrawings: false")),(0,r.kt)("h3",{id:"response-1"},"Response"),(0,r.kt)("p",null,"All the applicable flags are set and the ",(0,r.kt)("strong",{parentName:"p"},"enableSheetsAndDrawings")," configuration is set to false.")),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"5-run-a-configured-connection-with-the-enablesheetsanddrawings-flag-set-to-false-optional"},"5. Run a configured connection with the \u201cenableSheetsAndDrawings\u201d flag set to false (Optional)"),(0,r.kt)("p",null,"Perform connection run steps defined in the ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/synchronization-blob-tutorial/"},"Synchronize a file from Azure Blob Storage")," for the configured connection. The result will be a connection run without 2D data changes synchronized. Sheets and drawings synchronized previously will remain in an iModel."),(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulation on completing the Synchronization Configuration API tutorial! Find more about each ",(0,r.kt)("a",{parentName:"p",href:"/apis/synchronization/operations/create-itwin-configuration/"},"iTwin"),", ",(0,r.kt)("a",{parentName:"p",href:"/apis/synchronization/operations/create-imodel-configuration/"},"iModel"),", and ",(0,r.kt)("a",{parentName:"p",href:"/apis/synchronization/operations/create-connection-configuration/"},"connection")," configuration."),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"iTwins API",href:"/apis/itwins/",description:"The iTwins API provides a full encompassing suite of functionality to manage your digital twins.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Synchronization API",href:"/api-groups/synchronization/",description:"Files can be synchronized to iModel via Synchronization API.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Changed Elements API",href:"/tutorials/changed-elements-api/",description:"The Changed Elements API is a REST API that allows the consumer to inspect what elements have changed in an iModel between two versions of the iModel.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Property Validation Basics",href:"/tutorials/property-validation-basics/",description:"Use Property Validation to check whether property values in an iModel conform to certain rules.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Create iModel Named Version",href:"/tutorials/create-named-version/",description:"This quick start is intended to guide you through the steps to create a new iModel Named Version.",mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-guide-to-synchronization-configuration-api",level:2,title:"1. Guide to Synchronization Configuration API",children:[]},{id:"workflow-for-setting-configurations",level:2,title:"Workflow for setting configurations",children:[]},{id:"enablesheetsanddrawings",level:2,title:"enableSheetsAndDrawings",children:[]},{id:"2-create-a-configuration-with-the-enablesheetsanddrawings-flag",level:2,title:"2. Create a configuration with the \u201cenableSheetsAndDrawings\u201d flag",children:[{id:"request",level:3,title:"Request",children:[]},{id:"request-body",level:3,title:"Request Body",children:[]},{id:"response",level:3,title:"Response",children:[]}]},{id:"3-run-a-configured-connection-with-the-enablesheetsanddrawings-flag-set-to-true",level:2,title:"3. Run a configured connection with the \u201cenableSheetsAndDrawings\u201d flag set to true",children:[]},{id:"4-update-of-configuration-with-enablesheetsanddrawings-flag-to-false-optional",level:2,title:"4. Update of configuration with \u201cenableSheetsAndDrawings\u201d flag to false (Optional)",children:[{id:"request-1",level:3,title:"Request",children:[]},{id:"request-body-1",level:3,title:"Request Body",children:[]},{id:"response-1",level:3,title:"Response",children:[]}]},{id:"5-run-a-configured-connection-with-the-enablesheetsanddrawings-flag-set-to-false-optional",level:2,title:"5. Run a configured connection with the \u201cenableSheetsAndDrawings\u201d flag set to false (Optional)",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},78241:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Unmap an Azure Blob Storage file from an iModel",tile:{name:"Unmap an Azure Blob Storage file from an iModel",description:"Walk-through how to unmap an Azure Blob Storage file from an iModel using Synchronization API.",thumbnail:"/unreal-docs-site/static/images/synchronizationUnmap.png",href:"/tutorials/unmap-blob-file-tutorial/",durationInMinutes:10,relatedApiIds:["synchronization","imodels"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("CodeBlock"),m=p("ContinueLearningSection"),h=p("TileList"),k=p("Tile"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial guides you through deleting the mapping of an Azure Blob Storage file using the Synchronization API. All changes, made by the file, will be removed from an iModel. To delete the mapping of a file, the connection has to be run again with the action set to unmap. That means you should already have a connection.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Since deleting a mapping removes a file from an iModel, the following tasks have to be done before attempting this process:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create an iModel."),(0,r.kt)("li",{parentName:"ul"},"Create a connection."),(0,r.kt)("li",{parentName:"ul"},"Run a connection."),(0,r.kt)("li",{parentName:"ul"},"(Optional) Get connection run status - to confirm that the file is successfully mapped to the iModel.")),(0,r.kt)("p",null,"For a detailed guide, see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/synchronization-blob-tutorial/"},"Synchronization tutorial"),". If you have completed these tasks, the next steps will guide you through the workflow of deleting a mapping.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-run-the-connection-with-unmap-action"},"1. Run the connection with unmap action"),(0,r.kt)("p",null,"This step is similar to simply running the connection for file synchronization, however, the mapping deletion request contains an additional \u201caction\u201d property.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"http",code:"POST\xa0https://api.bentley.com/synchronization/imodels/manifestConnections/CONNECTION_ID/runs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"To delete a file mapping, send a POST request to the synchronization/imodels/manifestConnections/{connectionId}/runs\xa0endpoint with a valid connection ID."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ul"},"CONNECTION_ID which should be started for processing."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"json",code:'{\n    "sourceFiles": [{\n        "id": "FILE_ID",\n        "action": "unmap",\n        "connector": "MSTN"\n    }]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"sourceFiles")," - information about source files",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"id")," - id of the file"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"action")," - setting this property to ",(0,r.kt)("strong",{parentName:"li"},"unmap")," will trigger the connection to run the mapping deletion process instead of synchronization"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"connector")," - file connector identifier."))))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"http",code:"HTTP/1.1 202 Accepted",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("p",null,"On a successful request, the operation returns http status code 202/accepted - the request is accepted for processing and will be executed in the background.\nIf there is an active run in progress for this connection, a new run is added to the queue. The response includes a location header pointing to the created run.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-run-status"},"2. Get run status"),(0,r.kt)("p",null,"The run from the previous step contains the mapping deletion process status. To track a run and associated status, make a GET request to a link from previous request response location header.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"http",code:"GET\xa0https://api.bentley.com/synchronization/imodels/manifestConnections/CONNECTION_ID/runs/RUN_ID HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"To get the status of the run, send a GET request to the synchronization/imodels/manifestConnections/{connectionId}/runs/{runId}\xa0endpoint with a valid connection and run ID. For convenience take a link from previous request response location header."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Authorization\xa0header with valid Bearer token is required."),(0,r.kt)("li",{parentName:"ul"},"CONNECTION_ID of the run we want to get."),(0,r.kt)("li",{parentName:"ul"},"RUN_ID of the run we want to get."))),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{language:"json",code:'{\n    "run": {\n        "id": "RUN_ID",\n        "startDateTime": "02/15/2022 08:24:45",\n        "endDateTime": "02/15/2022 08:26:50",\n        "phase": "MasterFile",\n        "jobs": [\n            {\n                "id": "JOB_ID",\n                "startDateTime": "02/15/2022 08:25:58",\n                "endDateTime": "02/15/2022 08:26:28",\n                "state": "Completed",\n                "result": "Success",\n                "connectorType": "MSTN",\n                "tasks": [\n                    {\n                        "id": "TASK_ID",\n                        "startDateTime": "02/15/2022 08:25:58",\n                        "endDateTime": "02/15/2022 08:26:28",\n                        "retryAttempts": 0,\n                        "state": "Completed",\n                        "result": "Success",\n                        "error": null\n                    }\n                ]\n            }\n        ],\n        "state": "Completed",\n        "result": "Success"\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"response-1"},"Response"),(0,r.kt)("p",null,"After the mapping deletion process is finished, the run state should be \u201cCompleted\u201d and result \u201cSuccess\u201d.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-conclusion"},"3. Conclusion"),(0,r.kt)("p",null,"In this tutorial we have gone through the process of deleting the mapping of an Azure Blob Storage file:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Run the connection with unmap action"),(0,r.kt)("li",{parentName:"ul"},"Get run status.")),(0,r.kt)("p",null,"After a successful run, the iModel should no longer contain the design file.")),(0,r.kt)(m,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations on the completion of your first file mapping deletion process! Now you know a lot on the subject, but there are still possibilities to learn more to unlock the platform capabilities."),(0,r.kt)(h,{mdxType:"TileList"},(0,r.kt)(k,{name:"Create iModel Named Version",description:"This quick start is intended to guide you through the steps to create a new iModel Named Version.",href:"/tutorials/create-named-version",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(h,{mdxType:"TileList"},(0,r.kt)(g,{title:"Synchronization API documentation",href:"/api-groups/synchronization",description:"An overview and detailed Synchronization API documentation.",mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Synchronization API code sample",href:"https://github.com/iTwin/synchronization-api-sample-app",description:"A working code sample showing how Synchronization API can be integrated into a React application.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Data Management API documentation",href:"/api-groups/data-management/",description:"An overview and detailed Data Management API documentation.",mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-run-the-connection-with-unmap-action",level:2,title:"1. Run the connection with unmap action",children:[]},{id:"2-get-run-status",level:2,title:"2. Get run status",children:[]},{id:"3-conclusion",level:2,title:"3. Conclusion",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},21073:function(e,t,n){"use strict";n.d(t,{Jt:function(){return T},Pu:function(){return s},ZP:function(){return f}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Using Thematic Display Mode in Your iTwin Viewer",tile:{name:"Using Thematic Display Mode in Your iTwin Viewer",description:"This tutorial explains how to enable and customize thematic display mode.",thumbnail:"/unreal-docs-site/static/images/tutorials/using-thematic-display-mode/using-thematic-display-3-sm.png",href:"/tutorials/using-thematic-display/",durationInMinutes:15,relatedApiIds:["visualization"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Title"),m=p("CodeBlock"),h=p("ContinueLearningSection"),k=p("TileList"),g=p("ResourceTile"),y={metadata:s};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:"/unreal-docs-site/static/images/tutorials/using-thematic-display-mode/using-thematic-display-sample.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial is about thematic display mode, a mode of display style that uses a color gradient to show certain attributes of the geometry. We will first explain what thematic display is and when it might be useful. Then, we will look at how to apply it in your iTwin Viewer application and customize its settings.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Your own local source for the iTwin Web Viewer based on the template @itwin/web-viewer",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Instructions for that can be found ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start"},"here")))),(0,r.kt)("li",{parentName:"ul"},"Configured your local source to open a sample iModel."))),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Creating a new view state"),(0,r.kt)(m,{language:"typescript",code:"const viewportOptionsThematic = {\n  viewState: async (iModel: IModelConnection) => {\n    const viewState = await iModel.views.load(await iModel.views.queryDefaultViewId());\n    viewState.viewFlags = viewState.viewFlags.copy({\n      thematicDisplay: true,\n      grid: false,\n      renderMode: RenderMode.SmoothShade\n    });\n    return viewState;\n  }\n};",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-turning-on-thematic-display"},"1. Turning on Thematic Display"),(0,r.kt)("p",null,"Thematic display mode is a type of display style that uses a customizeable color gradient to highlight attributes of the geometry in an iModel such as height, surface slope, position of surfaces relative to a sun position, or geometric position relative to a list of sensors. The first step to using it to enhance your iTwin viewer is turning it on in your viewport\u2019s display style settings."),(0,r.kt)("p",null,"The Viewer React component that was created by the template web viewer has a ",(0,r.kt)("inlineCode",{parentName:"p"},"viewportOptions")," property that allows you to affect its view state. This is the best place to change its view flags and turn on thematic display."),(0,r.kt)("p",null,"We can do this by creating a variable ",(0,r.kt)("inlineCode",{parentName:"p"},"viewportOptionsThematic")," that returns a promise to a ",(0,r.kt)("inlineCode",{parentName:"p"},"ViewState")," with adjusted settings. We can start out by retrieving the iModel\u2019s default view state by getting its default view ID with ",(0,r.kt)("inlineCode",{parentName:"p"},"iModel.views.queryDefaultViewId()"),", then passing the result into ",(0,r.kt)("inlineCode",{parentName:"p"},"iModel.views.load()"),". We can then turn on thematic display by setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"thematicDisplay")," flag to true. We will also adjust some other settings that make thematic display easier to see, by setting ",(0,r.kt)("inlineCode",{parentName:"p"},"grid")," to false and ",(0,r.kt)("inlineCode",{parentName:"p"},"renderMode")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"RenderMode.SmoothShade"),".")),(0,r.kt)(c,{hasTitle:!1,actions:[(0,r.kt)(u,{mdxType:"Title"},"Setting the viewport options"),(0,r.kt)(m,{language:"typescript",code:'<Viewer\n  iTwinId={iTwinId ?? ""}\n  iModelId={iModelId ?? ""}\n  authClient={authClient}\n  enablePerformanceMonitors={true} // see description in the README (https://www.npmjs.com/package/@itwin/web-viewer-react)\n  onIModelAppInit={onIModelAppInit}\n  uiProviders={[\n    new ViewerNavigationToolsProvider(),\n    new ViewerContentToolsProvider({\n      vertical: {\n        measureGroup: false,\n      },\n    }),\n    new ViewerStatusbarItemsProvider(),\n    new TreeWidgetUiItemsProvider(),\n    new PropertyGridUiItemsProvider({\n      enableCopyingPropertyText: true,\n    }),\n    new MeasureToolsUiItemsProvider(),\n  ]}\n  viewportOptions={viewportOptionsThematic}\n/>',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"Now for this change to take effect, we just have to set the Viewer\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"viewportOptions")," property to our new view state promise. The code snippet shows what the Viewer component should look like after this change, with ",(0,r.kt)("inlineCode",{parentName:"p"},"viewportOptions")," added at the end.\nWe will also remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"viewCreatorOptions")," property, as it is unnecessary with the view options already being defined by ",(0,r.kt)("inlineCode",{parentName:"p"},"viewportOptions"),".")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"11-before"},"1.1 Before"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/using-thematic-display-mode/using-thematic-display-1-sm.png",alt:"Without thematic display mode",title:"Without thematic display mode"})),(0,r.kt)("p",null,"The iModel without thematic display."),(0,r.kt)("h4",{id:"12-after"},"1.2 After"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/using-thematic-display-mode/using-thematic-display-2-sm.png",alt:"With thematic display mode",title:"With thematic display mode"})),(0,r.kt)("p",null,"The iModel after thematic display is turned on. It appears mostly one color because the range and color scheme have not been adjusted yet.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Creating new ThematicDisplayProps"),(0,r.kt)(m,{language:"typescript",code:"const props: ThematicDisplayProps = {\n    axis: [0.0, 0.0, 1.0],\n    gradientSettings: {\n      colorScheme: ThematicGradientColorScheme.BlueRed,\n      marginColor: ColorDef.white.toJSON(), \n      mode: ThematicGradientMode.SteppedWithDelimiter,\n      stepCount: 10,\n    },\n    displayMode: ThematicDisplayMode.Height,\n    range: [-5, 127],\n};",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-changing-thematic-display-settings"},"2. Changing Thematic Display Settings"),(0,r.kt)("p",null,"Thematic display mode can be customized by creating a new ",(0,r.kt)("inlineCode",{parentName:"p"},"ThematicDisplayProps")," object and updating the viewport\u2019s thematic display settings. First, create the new object and set different properties like the axis and range to apply the gradient to, and details like the gradient\u2019s colors and number of steps. We used a pre-existing color scheme ",(0,r.kt)("inlineCode",{parentName:"p"},"ThematicGradientColorScheme.BlueRed"),", but it\u2019s also possible to set this to use a custom scheme and specify key colors with the ",(0,r.kt)("inlineCode",{parentName:"p"},"customKeys")," property.")),(0,r.kt)(c,{actions:[(0,r.kt)(u,{mdxType:"Title"},"Adjusting the thematic display settings"),(0,r.kt)(m,{language:"typescript",code:"const viewportOptionsThematic = {\n    viewState: async (iModel: IModelConnection) => {\n      const viewState = await iModel.views.load(await iModel.views.queryDefaultViewId());\n      viewState.viewFlags = viewState.viewFlags.copy({\n        thematicDisplay: true,\n        grid: false,\n        renderMode: RenderMode.SmoothShade\n      });\n      if (viewState.is3d()) {\n        const displayStyle = viewState.getDisplayStyle3d();\n        displayStyle.settings.thematic = ThematicDisplay.fromJSON(props);\n      }\n      return viewState;\n    }\n  };",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("p",null,"To apply the new settings we can first make sure the view state is 3D, which is required for thematic display and allows us to adjust the ",(0,r.kt)("inlineCode",{parentName:"p"},"settings.thematic")," property. Finally, we can set this property to a new ",(0,r.kt)("inlineCode",{parentName:"p"},"ThematicDisplay")," object created from our ",(0,r.kt)("inlineCode",{parentName:"p"},"props")," object so the settings are visible in our viewer.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"21-result"},"2.1 Result"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"/unreal-docs-site/static/images/tutorials/using-thematic-display-mode/using-thematic-display-3-sm.png",alt:"Customized thematic display mode",title:"Customized thematic display mode"}))),(0,r.kt)(h,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{title:"Thematic Display",href:"https://www.itwinjs.org/learning/display/thematicdisplay/",description:"Learn more about thematic display and view examples of the different modes.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(g,{title:"Thematic Display Sample App",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Thematic%20Display",description:"A sample sandbox that demonstrates thematic display settings with a UI.",isExternal:!0,mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-turning-on-thematic-display",level:2,title:"1. Turning on Thematic Display",children:[]},{id:"2-changing-thematic-display-settings",level:2,title:"2. Changing Thematic Display Settings",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},70880:function(e,t,n){"use strict";n.d(t,{Jt:function(){return I},Pu:function(){return s},ZP:function(){return x}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),l=["components"],s=(o.createElement,{title:"Get Started!",tile:{name:"Start building a Viewer App",description:"This quick start is intended to help you get started with using iTwin Platform visualization components. By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).",thumbnail:"/unreal-docs-site/static/images/retail-tutorial-sample-small.png",href:"/tutorials/web-application-quick-start/",durationInMinutes:30,relatedApiIds:["visualization"],showInFirstSteps:!0,firstStepsSequenceNumber:1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("LinkButton"),m=p("NodeJsIcon"),h=p("GitIcon"),k=p("GoogleChromeIcon"),g=p("VSCodeIcon"),y=p("CodeBlock"),f=p("CreateSampleAppButton"),T=p("Alert"),w=p("ContinueLearningSection"),b=p("TileList"),v=p("Tile"),N=p("ResourceTile"),C={metadata:s};function x(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:s.tile.durationInMinutes,summaryImageSrc:"/unreal-docs-site/static/images/retail-tutorial-sample.png",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This quick start is intended to help you get started with using iTwin Platform visualization components. In this walk-through, you will be introduced to the ",(0,r.kt)("strong",{parentName:"p"},"iTwin Viewer"),", a customizable viewer that offers basic tooling and widgets for viewing an infrastructure digital twin and can be further extended with iTwin.js extensions."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to build and run a web application for viewing an infrastructure digital twin (iTwin).")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-set-up-your-environment"},"1. Set up your environment"),(0,r.kt)("p",null,"Before you start this walk-through, you will need to download and install the following software on your machine.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://nodejs.org",target:"_blank",title:"Node.js",icon:(0,r.kt)(m,{mdxType:"NodeJsIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://git-scm.com/downloads",target:"_blank",title:"Git",icon:(0,r.kt)(h,{mdxType:"GitIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"11-required-materials"},"1.1 Required materials"),(0,r.kt)("h5",{id:"nodejs-lts-version"},(0,r.kt)("a",{parentName:"h5",href:"https://nodejs.org"},"Node.js (LTS version)")),(0,r.kt)("p",null,"This tool provides the backend JavaScript runtime necessary for your computer to read and render code appropriately. It also allows you to run NPM command line (required for every iTwin project)."),(0,r.kt)("h5",{id:"git"},(0,r.kt)("a",{parentName:"h5",href:"https://git-scm.com/downloads"},"Git")),(0,r.kt)("p",null,"This is the source code control system for the iTwin repositories.")),(0,r.kt)(c,{subSection:!0,actions:[(0,r.kt)(u,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(k,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(u,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(g,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"12-suggested-materials"},"1.2 Suggested materials"),(0,r.kt)("h5",{id:"google-chrome"},(0,r.kt)("a",{parentName:"h5",href:"https://www.google.com/chrome/"},"Google Chrome")),(0,r.kt)("p",null,"This software can help you to develop and debug frontend JavaScript problems."),(0,r.kt)("h5",{id:"visual-studio-code"},(0,r.kt)("a",{parentName:"h5",href:"https://code.visualstudio.com/"},"Visual Studio Code")),(0,r.kt)("p",null,"This is our recommended editor and debugger tool for developing iTwin.js applications. It is free, open source and includes a GUI for working with GIT.")),(0,r.kt)(c,{actions:[(0,r.kt)(y,{language:"bash",code:"npx create-react-app your-app-name --template @itwin/web-viewer --scripts-version @bentley/react-scripts",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-the-code"},"2. Get the code"),(0,r.kt)("p",null,"The iTwin Viewer is available on GitHub at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/iTwin/viewer/tree/master/packages/modules/web-viewer-react"},"link"),". To download the iTwin Viewer code:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open Terminal or a Command Prompt."),(0,r.kt)("li",{parentName:"ol"},"In the terminal, run the following command:\n",(0,r.kt)("inlineCode",{parentName:"li"},"npx create-react-app your-app-name --template @itwin/web-viewer --scripts-version @bentley/react-scripts"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"This will generate a new application based on the iTwin Viewer React component."),(0,r.kt)("li",{parentName:"ul"},"By default, the viewer will be stored in a directory called ",(0,r.kt)("strong",{parentName:"li"},"your-app-name")))))),(0,r.kt)(c,{actions:[(0,r.kt)(f,{clientName:"Web Application Quick Start tutorial",scopes:["imodelaccess:read","imodels:read","realitydata:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-register-an-application"},"3. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to use the iTwin Viewer with the iModel you will generate next."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button. You will need to copy them in the ",(0,r.kt)("strong",{parentName:"p"},".env")," file from the application folder downloaded in the previous step."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"Visualization API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"imodelaccess:read imodels:read realitydata:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-an-imodel"},"4. Create an iModel"),(0,r.kt)("p",null,"To view your engineering design content, you will first need to synchronize your design files into an iModel. An iModel is a distributed relational database holding information about an infrastructure asset defined in a common schema. To learn more, click ",(0,r.kt)("a",{href:"https://www.itwinjs.org/learning/imodel-connectors/?term=connectors",target:"_blank"},"here"),"."),(0,r.kt)("h3",{id:"imodel-creation-process"},"iModel creation process"),(0,r.kt)("p",null,"To create a Test iTwin and iModel:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://developer.bentley.com"},"https://developer.bentley.com")),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Sign In")," button and sign-in using your Bentley account credentials",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you have not already registered, click ",(0,r.kt)("strong",{parentName:"li"},"Register now")," and complete the registration process."))),(0,r.kt)("li",{parentName:"ol"},"Click on your user icon and navigate to the ",(0,r.kt)("strong",{parentName:"li"},"My iTwins")," page"),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Create")," button"),(0,r.kt)("li",{parentName:"ol"},"Give your iModel a name"),(0,r.kt)("li",{parentName:"ol"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Create iModel from Bentley Sample")," and choose the ",(0,r.kt)("strong",{parentName:"li"},"Retail Building Sample")," template",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you have your own engineering design files, you can select ",(0,r.kt)("strong",{parentName:"li"},"Empty")," and then choose the ",(0,r.kt)("strong",{parentName:"li"},"File Synchronization")," tile from iModel Home. From there you will be able to synchronize your design files."))),(0,r.kt)("li",{parentName:"ol"},"Click the ",(0,r.kt)("strong",{parentName:"li"},"Save")," button and wait until your iModel is created")),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},"Note that after completing this step, you will be provided with both an iTwinId and an iModelID which will be required in a later step.")),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-run-the-code"},"5. Run the code"),(0,r.kt)("p",null,"After you have successfully downloaded the code, you are ready to run the sample. To run the sample:"),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},"Note: the following instructions show how to run the code using VS Code, but the same commands can be completed in a terminal."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Launch Visual Studio Code"),(0,r.kt)("li",{parentName:"ol"},"Click File > Open Folder and open the ",(0,r.kt)("strong",{parentName:"li"},"your-app-name")," directory that was created in the previous step.")),(0,r.kt)("p",null,"Next, you will need to configure the application with the client and iModel information that you created in the previous steps or any other SPA ",(0,r.kt)("a",{parentName:"p",href:"/my-apps"},"app")," and ",(0,r.kt)("a",{parentName:"p",href:"/my-itwins"},"iModel")," from your account."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open the .env file"),(0,r.kt)("li",{parentName:"ol"},"Enter the appropriate values for:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID"),": Enter the ClientID for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI"),": Enter the Redirect URI for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI"),": Enter the Post Logout Redirect URI for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES"),": Enter the Scopes for the client you registered during the ",(0,r.kt)("strong",{parentName:"li"},"Register a Client")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_ITWIN_ID"),": Enter the iTwinId that was generated during the ",(0,r.kt)("strong",{parentName:"li"},"Create an iModel")," step"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IMJS_IMODEL_ID"),": Enter the iModelID that was generated during the ",(0,r.kt)("strong",{parentName:"li"},"Create an iModel")," step"))),(0,r.kt)("li",{parentName:"ol"},"Open a terminal from the menu bar View > Terminal."),(0,r.kt)("li",{parentName:"ol"},"In the terminal window, enter ",(0,r.kt)("inlineCode",{parentName:"li"},"npm start"),". This will serve the application with live reloading.")),(0,r.kt)(T,{type:"informational",mdxType:"Alert"},"Note: You can add/update/remove files as needed. If running `npm start` while making changes, your application will automatically recompile and reload."),(0,r.kt)("p",null,"Congratulations, running npm start should launch a web browser and display your iModel in the iTwin Viewer Starter App. If you use your own file, this may take a few minutes to load depending on the file size you used."),(0,r.kt)("p",null,"If the iTwin Viewer does not automatically open, you can open a browser and load the URL ",(0,r.kt)("a",{parentName:"p",href:"https://localhost:3000"},"https://localhost:3000"),".")),(0,r.kt)(w,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for the completion of your first viewer app! You\u2019ve now know a lot on the subject, but there\u2019s still possibilities to learn more to unleash the platform capabilities."),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{name:'Customizing the iTwin Viewer - "The Basics"',thumbnail:"/unreal-docs-site/static/images/itwin-viewer-hello-world-sample-small.png",description:"This tutorial will take you through the first steps of customizing your iTwin Web Viewer. First you will learn how to add a new user interface component. Later you will customize that component to change the background color of your viewer.",href:"/tutorials/itwin-viewer-hello-world",mdxType:"Tile"}),(0,r.kt)(v,{name:"Adding showcase widgets to your iTwin Viewer",thumbnail:"/unreal-docs-site/static/images/view_attributes_ported_results.png",description:"This tutorial will take widgets from the sample showcase and add them into your iTwin Viewer using the `uiProviders` prop.",href:"/tutorials/adding-showcase-widgets-to-your-itwin-viewer/",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(N,{title:"Create React App",href:"https://create-react-app.dev",description:"Set up a modern web app by running one command.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(N,{title:"iTwin Viewer React",href:"https://www.npmjs.com/package/@itwin/web-viewer-react",description:(0,r.kt)(o.Fragment,null,"The iTwin Viewer is a configurable iTwin.js viewer that offers basic tooling and widgets out-of-the-box and can be further extended through the use of ",(0,r.kt)("a",{href:"https://github.com/imodeljs/extension-sample",target:"_blank"},"iTwin.js extensions"),". This package contains the Viewer as a React component and some additional Typescript APIs."),isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(N,{title:"iTwin Viewer Create React App Template",href:"https://www.npmjs.com/package/@itwin/cra-template-web-viewer",description:(0,r.kt)(o.Fragment,null,"This is a template for applications that are based on the ",(0,r.kt)("a",{href:"https://github.com/iTwin/viewer/tree/master/packages/modules/web-viewer-react",target:"_blank"},"iTwin Viewer")," for ",(0,r.kt)("a",{href:"https://github.com/facebook/create-react-app",target:"_blank"},"Create React App"),"."),isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(N,{title:"Bentley React Scripts",href:"https://www.npmjs.com/package/@bentley/react-scripts",description:"This is the iTwin.js fork of react-scripts.",isExternal:!0,mdxType:"ResourceTile"}))))}x.isMDXComponent=!0;var I=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"1-set-up-your-environment",level:2,title:"1. Set up your environment",children:[{id:"11-required-materials",level:3,title:"1.1 Required materials",children:[]},{id:"12-suggested-materials",level:3,title:"1.2 Suggested materials",children:[]}]},{id:"2-get-the-code",level:2,title:"2. Get the code",children:[]},{id:"3-register-an-application",level:2,title:"3. Register an Application",children:[]},{id:"4-create-an-imodel",level:2,title:"4. Create an iModel",children:[{id:"imodel-creation-process",level:3,title:"iModel creation process",children:[]}]},{id:"5-run-the-code",level:2,title:"5. Run the code",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},56110:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var i=n(59499),a=n(36864),o=n(57255),r=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){var t=(0,a.Z)({},e);return(0,r.jsx)(o.Table,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}},10246:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(4730),a=n(16835),o=n(59499),r=n(94184),l=n.n(r),s=n(57255),p=n(41664),d=n.n(p),c=(n(67294),n(5948)),u=n(44930),m=(n(89309),n(52018)),h=n(85893),k=["className"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={h1:function(e){return(0,h.jsx)(s.Headline,y({className:"documentation-headline"},e))},h2:function(e){return(0,h.jsxs)(s.Title,{className:"documentation-title",children:[(0,h.jsx)("a",y({href:"#".concat(e.id)},e)),(0,h.jsx)(c.wM7,{className:"permalink"})]})},h3:function(e){return(0,h.jsxs)(s.Subheading,{className:"documentation-subheading",children:[(0,h.jsx)("a",y({href:"#".concat(e.id)},e)),(0,h.jsx)(c.wM7,{className:"permalink"})]})},h4:function(e){return(0,h.jsxs)(s.Leading,{className:"documentation-leading",children:[(0,h.jsx)("a",y({href:"#".concat(e.id)},e)),(0,h.jsx)(c.wM7,{className:"permalink"})]})},blockquote:function(e){return(0,h.jsx)(s.Body,{className:"documentation-paragraph",children:(0,h.jsx)(s.Blockquote,y({},e))})},code:function(e){return(0,h.jsx)(s.Code,y({},e))},pre:function(e){return(0,h.jsx)(s.Text,{className:"documentation-paragraph",children:(0,h.jsx)("pre",y({className:"documentation-codeblock"},e))})},p:function(e){return(0,h.jsx)(s.Body,y({className:"documentation-paragraph"},e))},a:function(e){var t;return(0,h.jsx)(d(),y(y({},e),{},{children:(0,h.jsx)("a",y(y({},e),{},{target:"#"===(null===(t=e.href)||void 0===t?void 0:t[0])?void 0:"_blank"}))}))},hr:function(e){return(0,h.jsx)("hr",y({className:"documentation-divider hidden"},e))},em:function(e){return(0,h.jsx)("em",y({},e))},ul:function(e){return(0,h.jsx)("ul",y({className:"documentation-ul"},e))},ol:function(e){return(0,h.jsx)("ol",y({className:"documentation-ol"},e))},table:m.Z,tableWithRowProps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=(0,a.Z)(e.children,2),i=n[0],r=n[1],l=Array.isArray(i.props.children)?i.props.children:[i.props.children],p=(0,a.Z)(l,1),d=p[0],c=Array.isArray(r.props.children)?r.props.children:[r.props.children],u=d.props.children,m=c.map((function(e){return e.props.children})),k=u.flatMap((function(e){return e.props.children})),g=m.map((function(e){return e.map((function(e){return e.props.children}))}));return(0,h.jsx)(s.Table,{style:{marginTop:10},columns:[{Header:"Table",columns:k.map((function(e,t){return{id:null!==e&&void 0!==e?e:"",Header:null!==e&&void 0!==e?e:"",accessor:"".concat(t)}}))}],data:g.map((function(e){return e.map((function(e,t){return(0,o.Z)({},"".concat(t),Array.isArray(e)&&e.length>1?(0,h.jsx)("div",{children:e}):e)})).reduce((function(e,t){return y(y({},e),t)}),{})})),rowProps:t,emptyTableContent:"No data."})},TechPreviewBadge:function(e){return(0,h.jsx)("span",y(y({className:"api-badge"},e),{},{children:(0,h.jsx)(u.d,{})}))},img:function(e){var t=e.className,n=(0,i.Z)(e,k);return(0,h.jsx)("img",y({className:l()(["documentation-image",t])},n))}}},94479:function(e,t,n){"use strict";n(67294);var i=n(19444),a=n(10246),o=n(85893);t.Z=function(e){var t=e.mdContent;return t?(0,o.jsx)(i.D,{markdown:t,components:a.Z,options:{tables:!0,emoji:!0,openLinksInNewWindow:!0}}):(0,o.jsx)(o.Fragment,{})}},21017:function(e,t,n){"use strict";var i=n(57255),a=(n(67294),n(61686)),o=n(73351),r=n(75813),l=(n(70123),n(85893));t.Z=function(e){var t=e.tutorialsMetadata,n=e.apis;return(0,l.jsxs)("div",{className:"related-tutorials",children:[(0,l.jsx)(i.Title,{className:"documentation-title",children:"Tutorials"}),(0,l.jsx)("div",{className:"tutorials-list-section",children:t&&t.length>0?(0,l.jsx)(r.Z,{apis:n,tutorialsToShow:t}):(0,l.jsx)(i.Body,{isMuted:!0,children:"This API does not have published tutorials yet."})}),(0,l.jsx)("div",{className:"see-all-tutorials-link",children:(0,l.jsx)(o.Z,{href:a.eU,children:"See all tutorials"})})]})}},75813:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(59499),a=n(57255),o=n(39209),r=n(73351),l=n(61890),s=n(5880),p=(n(47535),n(85893));function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var u=function(e){var t=function(){return c?(0,p.jsx)(p.Fragment,{children:c.map((function(e){return(0,p.jsx)(a.Tooltip,{content:e.displayName,children:(0,p.jsx)("div",{style:{marginRight:8,flexShrink:0,width:20,height:20},children:(0,p.jsx)(l.B,{apiGroupId:e.id,id:e.id,fill:e.color,className:"grid-icon"},e.id)})},e.id)}))}):(0,p.jsx)(p.Fragment,{})},n=function(){return e.durationInMinutes?(0,p.jsx)(a.Badge,{className:"badge no-text-transform",backgroundColor:"#008be1",children:"".concat(e.durationInMinutes," min")}):(0,p.jsx)(p.Fragment,{})},i=function(e){return c&&c[0]?(0,p.jsx)("div",{className:"thumbnail-container",style:{backgroundColor:"".concat(c[0].backgroundColor),width:"100%",height:"100%"},children:(0,p.jsx)(l.B,{apiGroupId:c[0].id,id:c[0].id,fill:c[0].color,className:"group-icon iui-picture"},c[0].id)}):(0,p.jsx)(s.Z,{className:e?"tutorial-tile-thumbnail-placeholder":"tutorial-tile-thumbnail-placeholder-not-clickable"})},c=function(e){var t,n=o.q.apiGroups,i=[],a=d(e);try{var r=function(){var e=t.value,a=n.find((function(t){return t.id===e}));a&&i.push(a)};for(a.s();!(t=a.n()).done;)r()}catch(l){a.e(l)}finally{a.f()}return i}(e.groups);return e.href?(0,p.jsx)(r.Z,{href:e.href,children:(0,p.jsx)(a.Tile,{className:"tutorial-tile",name:e.name,description:(0,p.jsx)(a.Tooltip,{content:e.description,placement:"bottom",children:(0,p.jsx)("div",{children:e.description})}),thumbnail:e.thumbnail?e.thumbnail:i(!0),badge:(0,p.jsx)(n,{}),metadata:(0,p.jsx)(t,{}),isActionable:!0})}):(0,p.jsx)(a.Tile,{className:"tutorial-tile",name:e.name,description:(0,p.jsx)(a.Tooltip,{content:e.description,placement:"bottom",children:(0,p.jsx)("div",{children:e.description})}),thumbnail:e.thumbnail?e.thumbnail:i(!1),badge:(0,p.jsx)(a.Badge,{backgroundColor:"#9ba5ae",className:"badge no-text-transform",children:"Coming soon"}),metadata:(0,p.jsx)(t,{}),isActionable:!0})};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var g=function(e){var t=e.apis,n=e.tutorialsToShow;return(0,p.jsx)("div",{className:"tutorial-tile-list",children:n&&n.filter((function(e){return e&&e.tile})).map((function(e){var n=new Set;if(t){var a,o,r=h(null!==(a=e.tile.relatedApiIds)&&void 0!==a?a:[]);try{var l=function(){var e=o.value,i=t.find((function(t){return(null===t||void 0===t?void 0:t.path)===e}));i&&n.add(i.apiGroupId)};for(r.s();!(o=r.n()).done;)l()}catch(s){r.e(s)}finally{r.f()}}return(0,p.jsx)(u,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({groups:Array.from(n)},e.tile),e.title)}))})}},57706:function(e,t,n){"use strict";n.d(t,{Y:function(){return he}});n(87794);var i=n(35986),a=n(29332),o=n(22544),r=n(94922),l=n(91272),s=n(76737),p=n(20398),d=n(6198),c=n(54625),u=n(90304),m=n(58149),h=n(41905),k=n(115),g=n(68017),y=n(33907),f=n(61876),T=n(93493),w=n(882),b=n(23975),v=n(41744),N=n(96315),C=n(90230),x=n(48530),I=n(99846),S=n(2394),A=n(92058),P=n(10694),M=n(97481),R=n(11678),j=n(78865),_=n(8996),q=n(1962),E=n(6937),D=n(61810),B=n(18171),O=n(55010),L=n(84514),z=n(9546),U=n(61882),H=n(8567),G=n(16795),W=n(94530),V=n(52069),F=n(8964),J=n(50372),K=n(75200),Y=n(83906),Z=n(12888),X=n(15448),Q=n(26100),$=n(18808),ee=n(3939),te=n(95016),ne=n(88774),ie=n(27514),ae=n(76715),oe=n(12485),re=n(33846),le=n(70483),se=n(32053),pe=n(78241),de=n(31086),ce=n(21073),ue=n(70880),me=[a.Pu,i.Pu,o.Pu,d.Pu,f.Pu,x.Pu,C.Pu,G.Pu,S.Pu,P.Pu,M.Pu,_.Pu,D.Pu,U.Pu,W.Pu,Y.Pu,Z.Pu,te.Pu,ae.Pu,oe.Pu,se.Pu,le.Pu,re.Pu,pe.Pu,q.Pu,ue.Pu,y.Pu,g.Pu,h.Pu,k.Pu,Q.Pu,$.Pu,ee.Pu,X.Pu,J.Pu,A.Pu,c.Pu,u.Pu,ne.Pu,R.Pu,j.Pu,ie.Pu,E.Pu,m.Pu,de.Pu,K.Pu,T.Pu,s.Pu,r.Pu,l.Pu,p.Pu,L.Pu,z.Pu,O.Pu,B.Pu,F.Pu,I.Pu,ce.Pu,w.Pu,N.Pu,v.Pu,V.Pu,H.Pu,b.Pu];function he(e){return me.filter((function(t){var n;return t.tile&&(null===(n=t.tile.relatedApiIds)||void 0===n?void 0:n.includes(e))}))}},437:function(){},70123:function(){}}]);