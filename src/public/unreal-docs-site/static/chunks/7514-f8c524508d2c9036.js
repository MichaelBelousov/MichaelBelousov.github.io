"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7514],{27514:function(e,n,t){t.d(n,{Jt:function(){return I},Pu:function(){return c},ZP:function(){return g}});var i=t(36864),o=t(4730),a=t(67294),r=t(3905),l=["components"],c=(a.createElement,{title:"Running the PnID ML Pipeline",tile:{name:"Running the PnID ML Pipeline",description:"Walk-through on how to run the PnID ML Model and get your Results.",href:"/tutorials/running-the-pnid-pipeline/",durationInMinutes:15,relatedApiIds:["synchronization/pnidtoitwin"]}}),p=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",n)}},s=p("Introduction"),d=p("TutorialSection"),u=p("CreateSampleAppButton"),f=p("Alert"),h=p("Title"),m=p("CodeBlock"),y=p("ContinueLearningSection"),T=p("TileList"),k=p("ResourceTile"),b={metadata:c};function g(e){var n=e.components,t=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},b,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)(s,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Use this quick start to help you understand how to create a PnID inference run and retrieve its results."),(0,r.kt)("p",null,"By the end of this walk-through, you will have all the tools you need to take any PnID drawings with piping components and\nrun it through the PnID interface. You will gain familiarity with the workflow and all APIs\ninvolved and be able to integrate the PnID model into your iTwin-Powered\napplications.")),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Created and configured a project. For instructions on creating a project, see\n",(0,r.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide"},"Create and Query Projects"),". You can use an existing Project\nif you have access to one."),(0,r.kt)("li",{parentName:"ul"},"Prepared PnID drawings with piping components."))),(0,r.kt)(d,{actions:[(0,r.kt)(u,{scopes:["synchronization:read","synchronization:modify"],clientName:"Design Element Classification client",mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"PnID API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"synchronization:read synchronization:modify")," scopes enabled."))),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"To make requests to this APIs a valid user token is required. There are several ways to get one."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement the\nAuthorization Code workflow in your application."),(0,r.kt)(f,{type:"informational",mdxType:"Alert"},"Here you can use the Client ID generated from previous application registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-api-reference-try-it-section"},"Grab a user token from Api reference \u201cTry it\u201d Section"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to the ",(0,r.kt)("a",{parentName:"li",href:"/apis/pnid-to-itwin-v2/operations/get-itwin-inferences/"},"API Documentation"),"."),(0,r.kt)("li",{parentName:"ol"},"Click the \u201cTry it\u201d button."),(0,r.kt)("li",{parentName:"ol"},"For Authorization section select \u201cAuthorizationCode\u201d."),(0,r.kt)("li",{parentName:"ol"},"After the login popup closes, the Authorization header with your user token value should be visible."),(0,r.kt)("li",{parentName:"ol"},"Save your user token value to reuse later.")),(0,r.kt)(f,{type:"informational",mdxType:"Alert"},"Use user token to replace the 'JWT_TOKEN' placeholder parameter in the next steps.")),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-choose-available-pnid-model-versions"},"3. Choose available PnID Model versions"),(0,r.kt)("p",null,"Select an existing model version to use for your inference Run. See ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/model-versions/"},"Model versions")," to view the supported PnID model versions."),(0,r.kt)(f,{type:"informational",mdxType:"Alert"},"We recommend using the latest model version; however, if backward compatibility is required, use the appropriate version of the model.")),(0,r.kt)(d,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/synchronization/pnidtoitwin/inferences HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Body"),(0,r.kt)(m,{language:"json",code:'{\n  "modelVersion":"1.3",\n  "iTwinId":"ea9cb5ab-22c5-4cef-807a-df47f07b01f3",\n}',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n    "inference": {\n        "id": "bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3",\n        "modelVersion": "1.3",\n        "lastModifiedDateTime": "2022-01-20T14:45:47.073Z",\n        "createdDateTime": "2022-01-20T14:45:47.073Z",\n        "_links": {\n            "iTwin": {\n                "href": "https://api.bentley.com/itwins/ea9cb5ab-22c5-4cef-807a-df47f07b01f3"\n            },\n            "run": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run"\n            },\n            "inputs": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs"\n            },\n            "results": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run/results"\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-create-a-new-pnid-inference"},"4. Create a new PnID inference"),(0,r.kt)("p",null,"Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/create-inference/"},"Create Inference"),"\nAPI to create PnID inference for the provided project."),(0,r.kt)("p",null,"You have a couple of parameters available for configuring the PnID:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"modelVersion")," - PnID Model version chosen from step 3."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"iTwinId")," - Id of the iTwin that created the PnID Inference.")),(0,r.kt)(f,{type:"informational",mdxType:"Alert"},"Note the inference ID that is returned when creating a Inference will be needed in later steps.")),(0,r.kt)(d,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/inputs HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:'Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/pdf\nContent-Dispposition: attachment; filename="pnid_1.pdf"',mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n    "input": {\n        "id": "cG5pZC5wZGY-",\n        "filename": "pnid.pdf",\n        "size": 100,\n        "_links": {\n            "inputs": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs"\n            },\n            "inference": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3"\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-upload-data-to-pnid-inference-input"},"5. Upload data to PnID Inference Input."),(0,r.kt)("p",null,"Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/upload-inference-input-content/"},"Upload Inference Input Content"),"\nAPI to create or replace one of the PnID Inference Input files on which inference will run.")),(0,r.kt)(d,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"POST https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/run HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n    "run": {\n        "status": "inProgress",\n        "duration": "PT10M",\n        "progress": 0.1,\n        "createdDateTime": "2022-01-20T14:45:47.073Z",\n        "_links": {\n            "inputs": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs"\n            },\n            "results": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/results"\n            },\n            "inference": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3"\n            }\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-starts-pnid-inference-run-after-all-inputs-are-uploaded"},"6. Starts PnID Inference Run after all inputs are uploaded."),(0,r.kt)("p",null,"Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/create-inference-run/"},"Create Inference Run"),"\nAPI to start PnID inference Run after all inputs are uploaded."),(0,r.kt)(f,{type:"informational",mdxType:"Alert"},"Run status may be ",(0,r.kt)("b",null,"Queued")," for a short time while the process kicks off.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/run HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n      "run": {\n          "status": "inProgress",\n          "duration": "PT10M",\n          "progress": 0.1,\n          "createdDateTime": "2022-01-20T14:45:47.073Z",\n          "_links": {\n              "inputs": {\n                  "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs"\n              },\n              "results": {\n                  "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/results"\n              },\n              "inference": {\n                  "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3"\n              }\n          }\n      }\n  }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"query-status"},"Query status"),(0,r.kt)("p",null,"To check the status of a run, use ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/get-inference-run/"},"Get Inference Run Status"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Finished")," - Run has successfully completed. Results are ready to be used."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Canceled")," - Run was canceled by user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Failed")," - Run failed to complete."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"NotStarted")," - Run has not been triggered."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Queued")," - Run was created, but has not started."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"InProgress")," - Run was created and has started. Waiting for completion."))),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"7-retrieve-run-output"},"7. Retrieve Run output"),(0,r.kt)("p",null,"Download the results once a PnID Run has successfully completed.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/run/results HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n    "results": [{\n        "id": "cG5pZF9wZGZfcDAwMDAxLmpzb24-",\n        "filename": "pnid_pdf_p00001.json",\n        "size": 100,\n        "_links": {\n            "content": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run/results/cG5pZF9wZGZfcDAwMDAxLmpzb24-/content"\n            }\n        }\n    }],\n    "_links": {\n        "self": {\n            "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run/results"\n        },\n        "inference": {\n            "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3"\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"get-inference-run-results"},"Get Inference Run Results"),(0,r.kt)("p",null,"Fetch a list of all pipeline results using the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/get-inference-run-results/"},"Get Inference Run Results"),"\nAPI.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/synchronization/pnidtoitwin/inferences/{inferenceId}/run/results/FILE_ID/content HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"get-inference-run-result-content"},"Get Inference Run Result Content"),(0,r.kt)("p",null,"To download a specific file from the Results, use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/get-inference-run-result-content/"},"Get Inference Run Result Content"),"\nAPI.")),(0,r.kt)(d,{actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/synchronization/pnidtoitwin/inferences?iTwinId=ITWIN_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n    "inferences": [{\n        "id": "bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3",\n        "modelVersion": "1.3",\n        "lastModifiedDateTime": "2022-01-20T14:45:47.073Z",\n        "createdDateTime": "2022-01-20T14:45:47.073Z",\n        "_links": {\n            "iTwin": {\n                "href": "https://api.bentley.com/itwins/ea9cb5ab-22c5-4cef-807a-df47f07b01f3"\n            },\n            "run": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run"\n            },\n            "inputs": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs"\n            },\n            "results": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run/results"\n            }\n        }\n    }],\n    "_links": {\n        "next": {\n            "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences?iTwinId=ea9cb5ab-22c5-4cef-807a-df47f07b01f3&$top=100&$continuationToken=eyJOZXh0UGFydGl0aW9uS2V5IjoiMSExMDAhT0RnMll6TmlOMlF0TnpNM1pDMDBOakUwTFRsaE4yTXROV1JsTlRobE5qTm1OVGc0WHpBNFlqZzROVEV3TFdNek1tTXRORGt4WWkwNVpqZGhMVEZpTXpBd016azFPV1F6TlEtLSIsIk5leHRSb3dLZXkiOiIxASD4IU56Y3dNREU1T1RFdFl6UmpZeSAbTUdKaUxUa3dOMlV0WXpPrewtSmhZV0k0WlRBMSIsIk5leHRUYWJsZU5hbWUiOm51bGwsIlLncmdldExvY2F0aW9uIjowfQ--"\n        },\n        "self": {\n            "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences?iTwinId=ea9cb5ab-22c5-4cef-807a-df47f07b01f3&$top=100"\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"8-get-previous-inferences-in-a-itwin"},"8. Get previous inferences in a iTwin"),(0,r.kt)("p",null,"All PnID Runs are associated with a iTwin. To get a history of all Runs\nyou can call the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/get-itwin-inferences/"},"Get iTwin Inferences"),"\nAPI.")),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"9-advanced"},"9. Advanced"),(0,r.kt)("p",null,"We provide some additional APIs that provide a little more control and management over your PnID Inferences Runs.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"DELETE https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/run HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"cancel-execution-of-pnid-inference-run"},"Cancel execution of PnID Inference Run."),(0,r.kt)("p",null,"PnID Runs are complex and can take a long time to complete. Runs can be cancelled using\nthe ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/delete-inference-run/"},"Delete Inference Run")," API\nso you don\u2019t have to waste time waiting for Runs to naturally fail or complete when unnecessary.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"DELETE https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"delete-pnid-inference"},"Delete PnID Inference"),(0,r.kt)("p",null,"We strongly recommend deleting canceled Runs. You might also want to clean up a Project of stale or unnecessary\nhistorical Runs. Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/delete-inference/"},"Delete Inference"),"\nAPI for this."),(0,r.kt)(f,{type:"informational",mdxType:"Alert"},"Only completed Runs can be deleted. Completed Run statuses:"," ",(0,r.kt)("b",null,"Failed, Canceled, Finished"),".")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/inputs HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n    "inputs": [{\n        "id": "cG5pZC5wZGY-",\n        "filename": "pnid.pdf",\n        "size": 100,\n        "_links": {\n            "input": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs/cG5pZC5wZGY-"\n            },\n            "content": {\n                "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs/cG5pZC5wZGY-/content"\n            }\n        }\n    }],\n    "_links": {\n        "self": {\n            "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs"\n        },\n        "inference": {\n            "href": "https://api.bentley.com/synchronization/pnidtoitwin/inferences/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3"\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"get-pnid-inference-inputs"},"Get PnID Inference Inputs"),(0,r.kt)("p",null,"Inference can contain several input files. To see the list of added inputs files use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/get-inference-inputs/"},"Get Inference Inputs"),"\nAPI.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/inputs/FILE_ID/content HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Headers"),(0,r.kt)(m,{language:"http",code:"Content-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"get-pnid-inference-input-content"},"Get PnID Inference Input Content"),(0,r.kt)("p",null,"If there is a need to download the contents of a previously uploaded input file, use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/get-inference-input-content/"},"Get Inference Input Content"),"\nAPI.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"DELETE https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID/inputs/FILE_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"delete-pnid-inference-input"},"Delete PnID Inference Input"),(0,r.kt)("p",null,"If an invalid file was uploaded for inference, it is possible to remove that file. Use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/delete-inference-input/"},"Delete Inference Input"),"\nAPI for this.")),(0,r.kt)(d,{subSection:!0,actions:[(0,r.kt)(h,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(m,{language:"http",code:"GET https://api.bentley.com/synchronization/pnidtoitwin/inferences/INFERENCE_ID HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Request Headers"),(0,r.kt)(m,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(h,{mdxType:"Title"},"Response Body"),(0,r.kt)(m,{language:"json",code:'{\n      "inference": {\n          "id": "bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3",\n          "modelVersion": "1.3",\n          "lastModifiedDateTime": "2022-01-20T14:45:47.073Z",\n          "createdDateTime": "2022-01-20T14:45:47.073Z",\n          "_links": {\n              "iTwin": {\n                  "href": "https://api.bentley.com/projects/ea9cb5ab-22c5-4cef-807a-df47f07b01f3"\n              },\n              "run": {\n                  "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run"\n              },\n              "inputs": {\n                  "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/inputs"\n              },\n              "results": {\n                  "href": "https://api.bentley.com/synchronization/pnidtoitwin/bcbc71d4-c4d8-4cf7-b1fe-aaa194cd61c3/run/results"\n              }\n          }\n      }\n  }',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h3",{id:"get-pnid-inference-by-specified-id"},"Get PnID Inference by specified Id"),(0,r.kt)("p",null,"In order to get some information about already created inference you should use the ",(0,r.kt)("a",{parentName:"p",href:"/apis/pnid-to-itwin-v2/operations/get-inference/"},"Get Inference"),"\nAPI for this.")),(0,r.kt)(d,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"Congratulations on completing this tutorial, at this point you should have been able to create PnID run for PnID drawings with piping components, query run status and finally download run results.")),(0,r.kt)(y,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(T,{mdxType:"TileList"},(0,r.kt)(k,{title:"Reporting & Insights",href:"/api-groups/reporting-and-insights",description:"An overview and detailed Reporting & Insights API group documentation.",mdxType:"ResourceTile"}))))}g.isMDXComponent=!0;var I=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-api-reference-try-it-section",level:3,title:"Grab a user token from Api reference \u201cTry it\u201d Section",children:[]}]},{id:"3-choose-available-pnid-model-versions",level:2,title:"3. Choose available PnID Model versions",children:[]},{id:"4-create-a-new-pnid-inference",level:2,title:"4. Create a new PnID inference",children:[]},{id:"5-upload-data-to-pnid-inference-input",level:2,title:"5. Upload data to PnID Inference Input.",children:[]},{id:"6-starts-pnid-inference-run-after-all-inputs-are-uploaded",level:2,title:"6. Starts PnID Inference Run after all inputs are uploaded.",children:[{id:"query-status",level:3,title:"Query status",children:[]}]},{id:"7-retrieve-run-output",level:2,title:"7. Retrieve Run output",children:[{id:"get-inference-run-results",level:3,title:"Get Inference Run Results",children:[]},{id:"get-inference-run-result-content",level:3,title:"Get Inference Run Result Content",children:[]}]},{id:"8-get-previous-inferences-in-a-itwin",level:2,title:"8. Get previous inferences in a iTwin",children:[]},{id:"9-advanced",level:2,title:"9. Advanced",children:[{id:"cancel-execution-of-pnid-inference-run",level:3,title:"Cancel execution of PnID Inference Run.",children:[]},{id:"delete-pnid-inference",level:3,title:"Delete PnID Inference",children:[]},{id:"get-pnid-inference-inputs",level:3,title:"Get PnID Inference Inputs",children:[]},{id:"get-pnid-inference-input-content",level:3,title:"Get PnID Inference Input Content",children:[]},{id:"delete-pnid-inference-input",level:3,title:"Delete PnID Inference Input",children:[]},{id:"get-pnid-inference-by-specified-id",level:3,title:"Get PnID Inference by specified Id",children:[]}]},{id:"conclusion",level:2,title:"Conclusion",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}}}]);