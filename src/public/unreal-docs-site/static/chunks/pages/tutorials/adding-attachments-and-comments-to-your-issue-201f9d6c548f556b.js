(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7074],{35986:function(e,t,n){"use strict";n.d(t,{Jt:function(){return x},Pu:function(){return l},ZP:function(){return b}});var a=n(36864),i=n(4730),o=n(67294),s=n(3905),r=["components"],l=(o.createElement,{title:"Adding Attachments and Comments to Your Issue",tile:{name:"Adding Attachments and Comments to Your Issue",description:"Use the Issues REST API to add documents, images, and comments to an issue.",thumbnail:null,href:"/tutorials/adding-attachments-and-comments-to-your-issue/",durationInMinutes:15,relatedApiIds:["issues"]}}),d=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.kt)("div",t)}},p=d("Introduction"),u=d("TutorialSection"),m=d("Title"),c=d("ActionLinkButton"),h=d("CodeBlock"),k=d("Alert"),T=d("ContinueLearningSection"),y=d("TileList"),g=d("Tile"),f={metadata:l};function b(e){var t=e.components,n=(0,i.Z)(e,r);return(0,s.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(p,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:null,mdxType:"Introduction"},(0,s.kt)("h2",{id:"introduction"},"Introduction"),(0,s.kt)("p",null,"Attachments and comments provide a great way for your team to discuss and collaborate on solving an issue. Attachments let you provide files with more details about an issue, and comments let multiple people ask questions and talk about an issue without overwriting each others\u2019 changes."),(0,s.kt)("p",null,"In this tutorial, you will learn how to use the Issues REST API to add comments to an already-existing issue and view all of the issue\u2019s comments. You will also use the API to attach a file to the issue and then download it."),(0,s.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,s.kt)("p",null,"You will need to create an issue in your project so that you can add comments and attachments to it. Please complete the tutorial ",(0,s.kt)("a",{parentName:"p",href:"../creating-your-first-issue/"},"Creating Your First Issue")," if you haven\u2019t already."),(0,s.kt)("p",null,"Once you have created an issue, note its ",(0,s.kt)("inlineCode",{parentName:"p"},"id")," property. You will need to use that anytime you see ",(0,s.kt)("strong",{parentName:"p"},"<","your-issue-id",">")," in this tutorial.")),(0,s.kt)(u,{mdxType:"TutorialSection"},(0,s.kt)("h2",{id:"1-comments"},"1. Comments"),(0,s.kt)("p",null,"Comments are simple text posts that are associated with a single issue. Many different users in your project can comment on an issue, and anyone who can view the issue will be able to see who said what and when. They\u2019re a useful tool for asking questions or providing clarification.")),(0,s.kt)(u,{subSection:!0,actions:[(0,s.kt)(m,{mdxType:"Title"},(0,s.kt)(c,{href:"/apis/issues-v1/operations/add-comment-to-issue/",target:"_blank",title:"Try the Add Comment to Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,s.kt)(m,{mdxType:"Title"},"Method, sample URL, and headers"),(0,s.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues/<your-issue-id>/comments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},"Sample body"),(0,s.kt)(h,{language:"json",code:'{\n  "text": "This has been noted and will be fixed in version 1.3."\n}',mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},"Sample response"),(0,s.kt)(h,{language:"http",code:"HTTP/1.1 201 Created",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("h3",{id:"11-creating-a-comment"},"1.1. Creating a Comment"),(0,s.kt)("p",null,"Creating a comment is simple! Make a POST request to the ",(0,s.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/add-comment-to-issue/"},"Add Comment to Issue")," endpoint. The body is a JSON object containing just one property\u2014",(0,s.kt)("inlineCode",{parentName:"p"},"text"),"\u2014whose string value is the contents of the message you want to send. The server will automatically generate and save metadata, including when the comment was posted and who made the request."),(0,s.kt)("h4",{id:"url"},"URL"),(0,s.kt)("p",null,"The path includes your issue ",(0,s.kt)("inlineCode",{parentName:"p"},"id")," followed by ",(0,s.kt)("inlineCode",{parentName:"p"},"/comments"),", i.e. ",(0,s.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<your-issue-id>/comments")),(0,s.kt)("h4",{id:"body"},"Body"),(0,s.kt)("p",null,"Provide a JSON object with a ",(0,s.kt)("inlineCode",{parentName:"p"},"text")," property containing your message, and no other properties."),(0,s.kt)("h4",{id:"response"},"Response"),(0,s.kt)("p",null,"If the request succeeds, the response will just consist of the ",(0,s.kt)("inlineCode",{parentName:"p"},"201 Created")," status code (and some headers) without a body.")),(0,s.kt)(u,{subSection:!0,actions:[(0,s.kt)(m,{mdxType:"Title"},(0,s.kt)(c,{href:"/apis/issues-v1/operations/get-issue-comments/",target:"_blank",title:"Try the Get Issue Comments endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,s.kt)(m,{mdxType:"Title"},"Sample request"),(0,s.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/comments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},"Sample response"),(0,s.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "comments":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeO7IKKXOvh1Nkl344vJ_s_E",\n      "text":"This has been noted and will be fixed in version 1.3.",\n      "authorDisplayName":"Andrew Menzies",\n      "_links":{\n        "author":{\n          "href":"https://api.bentley.com/projects/16ab8bc6-c7de-4fdb-bdb9-248b3b07c178/members/9e543213-2457-466d-9de3-8d8a186b4189"\n        }\n      },\n      "createdDateTime":"2021-06-14T20:34:33.9220455Z"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("h3",{id:"12-viewing-an-issues-comments"},"1.2. Viewing an Issue\u2019s Comments"),(0,s.kt)("p",null,"You can read the comment you added by making a GET request to the ",(0,s.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-comments/"},"Get Issue Comments")," endpoint."),(0,s.kt)("h4",{id:"url-1"},"URL"),(0,s.kt)("p",null,"The URL for this request is exactly the same as it is for creating a comment: ",(0,s.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<your-issue-id>/comments")),(0,s.kt)("h4",{id:"response-1"},"Response"),(0,s.kt)("p",null,"The response consists of an array of comments. For each comment, the author\u2019s display name and the comment\u2019s creation time are provided, even though you didn\u2019t manually set them in your request."),(0,s.kt)("p",null,"Each comment in the response also includes a link that can be followed to request additional information about the comment\u2019s author from the ",(0,s.kt)("a",{parentName:"p",href:"/apis/projects/operations/get-project-team-member-details/"},"Get Project Team Member Details")," endpoint of the ",(0,s.kt)("strong",{parentName:"p"},"Projects")," API, assuming you have access to it.")),(0,s.kt)(u,{mdxType:"TutorialSection"},(0,s.kt)("h2",{id:"2-attachments"},"2. Attachments"),(0,s.kt)("p",null,"The Issues API supports attaching files of many different types to issues\u2014nearly any non-executable file type is supported. These can include documents, images (like a problem at the project\u2019s physical site or a screenshot of an iModel), and even short videos (up to 30MB). Adding an attachment to an issue right after you create it can be an excellent way of providing more context than words alone.")),(0,s.kt)(u,{subSection:!0,actions:[(0,s.kt)(m,{mdxType:"Title"},(0,s.kt)(c,{href:"/apis/issues-v1/operations/add-attachment-to-issue/",target:"_blank",title:"Try the Add Attachment to Issue endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,s.kt)(m,{mdxType:"Title"},"Method, sample URL, and header"),(0,s.kt)(h,{language:"http",code:"POST https://api.bentley.com/issues/<your-issue-id>/attachments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},"Sample body"),(0,s.kt)(h,{language:"json",code:'{\n  "fileName":"ExampleDoc.txt",\n  "caption":"Document related to the issue"\n}',mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},"Sample response"),(0,s.kt)(h,{language:"http",code:"HTTP/1.1 201 Created\nLocation: https://api.bentley.com/issues/xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw/attachments/xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI",mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},(0,s.kt)(c,{href:"/apis/issues-v1/operations/upload-attachment-file/",target:"_blank",title:"Try the Upload Attachment File endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,s.kt)(m,{mdxType:"Title"},"Sample request (you will also need to include the file's bytes)"),(0,s.kt)(h,{language:"http",code:"PUT https://api.bentley.com/issues/xospFt7H20-9uSSLOwfBeBs-UbbpqxhKgAL4wWWajpw/attachments/xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("h3",{id:"21-adding-an-attachment"},"2.1. Adding an Attachment"),(0,s.kt)("p",null,"Adding an attachment is a two-step process. First, make a POST request to the ",(0,s.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/add-attachment-to-issue/"},"Add Attachment to Issue")," endpoint to create metadata for the file you\u2019re about to upload."),(0,s.kt)("h4",{id:"url-2"},"URL"),(0,s.kt)("p",null,"The URL path includes the issue\u2019s ",(0,s.kt)("inlineCode",{parentName:"p"},"id")," property followed by ",(0,s.kt)("inlineCode",{parentName:"p"},"/attachments"),", i.e. ",(0,s.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/issues/<id>/attachments"),"."),(0,s.kt)("h4",{id:"body-1"},"Body"),(0,s.kt)("p",null,"The request body is a JSON object. It must contain a ",(0,s.kt)("strong",{parentName:"p"},"fileName")," property which can be any valid filename (without a directory path). The file extension should be accurate for the type of file you are about to upload to ensure that users who download the file will be able to open it."),(0,s.kt)("p",null,"You may also add a ",(0,s.kt)("strong",{parentName:"p"},"caption")," property. It just contains simple text that can provide additional context to users who look up the issue\u2019s attachments."),(0,s.kt)("h4",{id:"response-2"},"Response"),(0,s.kt)("p",null,"If successful, the response will include a ",(0,s.kt)("strong",{parentName:"p"},"Location")," header with a URL. Now, for the second step: Upload your raw file (plus the Authorization header, as usual) via PUT request to that URL to complete the process."),(0,s.kt)("p",null,"You can upload the file using the ",(0,s.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/upload-attachment-file/"},"Upload Attachment File")," endpoint. The ",(0,s.kt)("inlineCode",{parentName:"p"},"attachmentId")," URL parameter is equal to the final segment of the URL that was returned in the ",(0,s.kt)("inlineCode",{parentName:"p"},"Location")," header. (That is, the segment after ",(0,s.kt)("inlineCode",{parentName:"p"},"/attachments/"),". For example, in the response shown under ",(0,s.kt)("strong",{parentName:"p"},"Sample response"),", the attachment id would be ",(0,s.kt)("inlineCode",{parentName:"p"},"xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI"),", but it\u2019ll be different for your attachment.)"),(0,s.kt)(k,{type:"informational",mdxType:"Alert"},"Note: To upload a file using the Try It feature of our documentation site, choose the ",(0,s.kt)("strong",null,"Binary")," radio button under ",(0,s.kt)("strong",null,"Body"),".")),(0,s.kt)(u,{subSection:!0,actions:[(0,s.kt)(m,{mdxType:"Title"},(0,s.kt)(c,{href:"/apis/issues-v1/operations/get-issue-attachments/",target:"_blank",title:"Try the Get Issue Attachments endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,s.kt)(m,{mdxType:"Title"},"Sample request to get attachment list"),(0,s.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/attachments HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},"Sample attachment list response"),(0,s.kt)(h,{language:"http",code:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n  "attachments":[\n    {\n      "id":"xospFt7H20-9uSSLOwfBeM-a1K5hBDdNtT9MMU6U2dI",\n      "fileName":"ExampleDoc.txt",\n      "createdDateTime":"2021-06-16T19:11:21.2722577Z",\n      "size":405,\n      "caption":"Document related to the issue",\n      "binding":null,\n      "type":"txt"\n    }\n  ]\n}',mdxType:"CodeBlock"}),(0,s.kt)(m,{mdxType:"Title"},(0,s.kt)(c,{href:"/apis/issues-v1/operations/get-attachment-by-id/",target:"_blank",title:"Try the Get Attachment File endpoint",buttonText:"Go",mdxType:"ActionLinkButton"})),(0,s.kt)(m,{mdxType:"Title"},"Sample request to get file"),(0,s.kt)(h,{language:"http",code:"GET https://api.bentley.com/issues/<your-issue-id>/attachments/<your-attachment-id> HTTP/1.1\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("h3",{id:"22-getting-the-issues-attachments"},"2.2. Getting the Issue\u2019s Attachments"),(0,s.kt)("p",null,"Make a GET request to the ",(0,s.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-issue-attachments/"},"Get Issue Attachments")," endpoint, passing your issue\u2019s ",(0,s.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,s.kt)("strong",{parentName:"p"},"id")," parameter, to get a list of all files attached to the issue."),(0,s.kt)("p",null,"This will return a JSON array of attachment metadata, including ",(0,s.kt)("strong",{parentName:"p"},"fileName"),", ",(0,s.kt)("strong",{parentName:"p"},"id"),", and the auto-populated ",(0,s.kt)("strong",{parentName:"p"},"size")," (in bytes) and ",(0,s.kt)("strong",{parentName:"p"},"createdDateTime"),". Find your attachment and take note of its ",(0,s.kt)("inlineCode",{parentName:"p"},"id"),"."),(0,s.kt)("p",null,"Make a GET request to the ",(0,s.kt)("a",{parentName:"p",href:"/apis/issues-v1/operations/get-attachment-by-id/"},"Get Attachment File by ID")," endpoint, passing the same issue ",(0,s.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,s.kt)("strong",{parentName:"p"},"id")," parameter and passing the attachment ",(0,s.kt)("inlineCode",{parentName:"p"},"id")," as the ",(0,s.kt)("strong",{parentName:"p"},"attachmentId")," parameter. This will return the file you uploaded earlier. (If using the Try It feature, our developer site will attempt to display the file\u2019s bytes as text, so it may not work well for images. It might be better to try attaching a plain .txt file for purposes of this tutorial.)")),(0,s.kt)(T,{mdxType:"ContinueLearningSection"},(0,s.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,s.kt)(y,{mdxType:"TileList"},(0,s.kt)(g,{name:"Adding Attachments and Comments to Your Issue",description:"Upload images and documents, and post comments, to make your issue more detailed.",href:"/tutorials/adding-attachments-and-comments-to-your-issue",mdxType:"Tile"}),(0,s.kt)(g,{name:"Model Issues Interactive Sample",description:"See the Issues API in action in an iTwin Viewer app.",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Issues",isExternal:!0,mdxType:"Tile"}))))}b.isMDXComponent=!0;var x=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-comments",level:2,title:"1. Comments",children:[{id:"11-creating-a-comment",level:3,title:"1.1. Creating a Comment",children:[]},{id:"12-viewing-an-issues-comments",level:3,title:"1.2. Viewing an Issue\u2019s Comments",children:[]}]},{id:"2-attachments",level:2,title:"2. Attachments",children:[{id:"21-adding-an-attachment",level:3,title:"2.1. Adding an Attachment",children:[]},{id:"22-getting-the-issues-attachments",level:3,title:"2.2. Getting the Issue\u2019s Attachments",children:[]}]},{id:"continue-learning",level:2,title:"Continue learning",children:[]}]}},72588:function(e,t,n){"use strict";n.r(t);var a=n(3905),i=n(1176),o=n(58822),s=n(35986),r=(n(67294),n(80989)),l=n(85893);n(14473),t.default=function(){var e={headline:s.Pu.title,navigationItems:(0,s.Jt)(),tutorialSteps:(0,l.jsx)(a.Zo,{components:o.d,children:(0,l.jsx)(s.ZP,{})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.d,{title:"".concat(s.Pu.title," - Tutorials | iTwin Platform")}),(0,l.jsx)(i.Z,{tutorial:e})]})}},7446:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/adding-attachments-and-comments-to-your-issue",function(){return n(72588)}])}},function(e){e.O(0,[3714,8670,9734,9102,8764,1706,4009,1610,6638,9774,2888,179],(function(){return t=7446,e(e.s=t);var t}));var t=e.O();_N_E=t}]);