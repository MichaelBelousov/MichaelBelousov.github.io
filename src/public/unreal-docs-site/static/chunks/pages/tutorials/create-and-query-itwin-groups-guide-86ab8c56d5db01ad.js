(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6870],{41744:function(e,t,n){"use strict";n.d(t,{Jt:function(){return N},Pu:function(){return l},ZP:function(){return x}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Create and Query iTwin Groups",tile:{name:"Create and Query iTwin Groups",description:"This tutorial will guide you through the process of creating and querying groups on an iTwin",href:"/tutorials/create-and-query-itwin-groups-guide",durationInMinutes:15,relatedApiIds:["accesscontrol"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),u=p("Alert"),c=p("TutorialSection"),m=p("LinkButton"),g=p("GoogleChromeIcon"),h=p("VSCodeIcon"),k=p("PostmanIcon"),T=p("CreateSampleAppButton"),y=p("Title"),w=p("CodeBlock"),f=p("ContinueLearningSection"),b=p("TileList"),v=p("ResourceTile"),C={metadata:l};function x(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)(u,{mdxType:"Alert"},"This tutorial is for the"," ",(0,r.kt)("a",{href:"/apis/access-control-v2/overview/"},"Access Control API V2"),". To control the API version,"," ",(0,r.kt)("a",{href:"/apis/overview/lifecycle/#api-versions"},"see the API versions documentation")),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and retrieving groups for a given iTwin. iTwin groups provide the ability to manage groups of users at one time. You can create groups on the Account iTwin to manage access across iTwins or create a group for an individual iTwin. Groups created on an individual iTwin are available only on that iTwin. For more information for managing access using the Account iTwin, see ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/#managingaccessusingtheaccountitwin"},"Managing access using the Account iTwin")),(0,r.kt)("p",null,"Groups can contain individual users and can also reference Bentley Identity Management System (IMS) groups. By referencing an IMS group, you can manage groups of individuals in your Active Directory, while providing them access to iTwin Platform using role assignments. IMS groups are created and controlled on the team level, and can be accessed ",(0,r.kt)("a",{parentName:"p",href:"https://usermanagement.bentley.com/management/users"},"here")," through Bentley\u2019s User Management service. Only Accout Administrators, Co-Administrators, and Group Administrators will have access to the User Management Service. More information about creating and maintaining IMS groups can be found ",(0,r.kt)("a",{parentName:"p",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50713/managing-groups"},"here"),"."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints in order to create and retrieve a list of iTwin groups.")),(0,r.kt)(c,{actions:[(0,r.kt)(m,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(g,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(h,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(m,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(k,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, the user must be an Organization Administrator to create an iTwin. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."),(0,r.kt)("li",{parentName:"ul"},"An IMS group. IMS (Identity Management System) groups are created and controlled on the team level, and can be accessed ",(0,r.kt)("a",{parentName:"li",href:"https://usermanagement.bentley.com/management/users"},"here")," through Bentley\u2019s User Management service. Only Accout Administrators, Co-Administrators, and Group Administrators will have access to the User Management Service. More information about creating and maintaining IMS groups can be found ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50713/managing-groups"},"here"),"."))),(0,r.kt)(c,{actions:[(0,r.kt)(T,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query iTwins tutorial",scopes:["itwins:modify","itwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorizesinglepageapplicationsspaanddesktopmobileapplicationsnative"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:read")," scopes enabled."))),(0,r.kt)(c,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/access-control/operations/get-iTwin-roles/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(u,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(c,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(w,{language:"http",code:"POST https://api.bentley.com/accesscontrol/itwins/{id}/groups HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(w,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Request Body"),",",(0,r.kt)(w,{language:"json",code:'{\n        "name": "Engineers",\n        "description": "This is a group for engineers",\n      }',mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(w,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 203\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 17:26:10 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 74e263d7-ded7-45a5-8347-ca1f98ffab86\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(w,{language:"json",code:'{\n            "group": {\n                "id": "d0ec803b-de9a-41cd-9d97-c8edddd4cb0d",\n                "name": "Engineers",\n                "description": "This is a group for engineers",\n                "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n                "users": [],\n                "imsGroups": []\n            }\n        }',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-itwin-group"},"3. Create iTwin Group"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/create-iTwin-groups/"},"Create iTwin group")," endpoint is used to create iTwin groups. After a group is created, users and IMS groups can be added."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," from an existing iTwin (see ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/create-and-query-itwins-guide/"},"create and query iTwins guide"),") is required to create a group. A ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"description")," are required in the POST body."),(0,r.kt)("p",null,"The POST call will return a new group instance. The returned group ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," along with the iTwin ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," will be used to add users and IMS groups in the next step.")),(0,r.kt)(c,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(w,{language:"http",code:"PATCH https://api.bentley.com/accesscontrol/itwins/{id}/groups/{groupId} HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(w,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Request Body"),",",(0,r.kt)(w,{language:"json",code:'{\n        "name": "A new Group name",\n        "description": "A new Group description",\n        "imsGroups": [\n          "IMS Engineers"\n        ],\n        "users": [\n            "John.Doe@bentley.com"\n        ]\n  }',mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(w,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 324\ncontent-type: application/json\ndate: Wed, 30 Jun 2021 18:17:39 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: f16d2765-4a9c-40a4-995e-bd7c6b8b8d4a\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(w,{language:"json",code:'{\n    "group":{\n      "id":"10a2d277-ea41-4e81-b309-f7a9aea09d51",\n      "name": "A new Group name",\n      "description": "A new Group description",\n      "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n      "imsGroups": [\n        "IMS Engineers"\n      ],\n      "users": [\n          "John.Doe@bentley.com"\n      ]\n    }\n  }',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-update-itwins-groups-using-the-itwin-id-and-group-id"},"4. Update iTwins Groups Using the iTwin Id and Group Id"),(0,r.kt)("p",null,"To assign ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"imsGroups"),", the group needs to be ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/update-iTwin-group/"},"updated"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwin id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"group id")," are required. The POST body should contain a list of ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"imsGroups"),"."),(0,r.kt)("p",null,"IMS groups are created and controlled on the team level, and can be accessed ",(0,r.kt)("a",{parentName:"p",href:"https://usermanagement.bentley.com/management/users"},"here")," through Bentley\u2019s User Management service. Only Accout Administrators, Co-Administrators, and Group Administrators will have access to the User Management Service. More information about creating and maintaining IMS groups can be found ",(0,r.kt)("a",{parentName:"p",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50713/managing-groups"},"here"),"."),(0,r.kt)("p",null,"The response will contain the group details along with the list of ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"imsGroups")," added.")),(0,r.kt)(c,{actions:[(0,r.kt)(o.Fragment,null,(0,r.kt)(y,{mdxType:"Title"},"Request Syntax"),",",(0,r.kt)(w,{language:"http",code:"GET https://api.bentley.com/accesscontrol/itwins/{id}/groups HTTP/1.1",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Request Headers"),",",(0,r.kt)(w,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v2+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Response Headers"),",",(0,r.kt)(w,{language:"http",code:"HTTP/1.1 200 OK\ncontent-type: application/json\ndate: Mon, 29 Aug 2022 19:24:14 GMT\nrequest-context: appId=cid-v2:7a353d36-9a8b-423e-965e-9d7f51324584\nvary: Accept-Encoding\nx-correlation-id: 260678e5-0244-413d-bc60-f6dac19fd450\nx-itwinplatform-media-type: bentley.itwin-platform.v2\nx-itwinplatform-region: East US\nx-rate-limit-limit: 1s\nx-rate-limit-remaining: 49\nx-rate-limit-reset: 2022-08-29T19:24:15.3864257Z",mdxType:"CodeBlock"}),",",(0,r.kt)(y,{mdxType:"Title"},"Response Body"),",",(0,r.kt)(w,{language:"json",code:'{\n        "groups": [\n            {\n                "id": "149d0860-39e9-4ae9-9b05-0b5dcedd2d4b",\n                "name": "Engineers",\n                "description": "This is a group of engineers",\n                "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n                "imsGroups": [\n                  "IMS Engineers"\n                ],\n                "users": [\n                    "John.Doe@bentley.com"\n                ]\n            },\n            {\n                "id": "d0ec803b-de9a-41cd-9d97-c8edddd4cb0d",\n                "name": "iTwin Administrators",\n                "description": "This is a group of administrators for the iTwin",\n                "contextId": "a9c999c9-5516-4ea0-adc3-28238c02b18e",\n                "users": [],\n                "imsGroups": ["IMS Admins"]\n            }\n        ]\n    }',mdxType:"CodeBlock"}))],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-groups-using-the-itwin-id"},"5. Query for Groups using the iTwin Id"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"iTwin Id")," can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/access-control/operations/get-iTwin-groups/"},"retrieve a list of iTwin groups"),"."),(0,r.kt)("p",null,"The API will return a list of groups for a given iTwin.")),(0,r.kt)(f,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(v,{title:"Create and Query iTwins Guide",href:"/tutorials/create-and-query-itwins-guide/",description:"Tutorial for creating and querying iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(v,{title:"Manage Group Members on iTwins Guide",href:"/tutorials/manage-group-members-on-itwins-guide",description:"Tutorial for managing group members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}))))}x.isMDXComponent=!0;var N=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-create-itwin-group",level:2,title:"3. Create iTwin Group",children:[]},{id:"4-update-itwins-groups-using-the-itwin-id-and-group-id",level:2,title:"4. Update iTwins Groups Using the iTwin Id and Group Id",children:[]},{id:"5-query-for-groups-using-the-itwin-id",level:2,title:"5. Query for Groups using the iTwin Id",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},30501:function(e,t,n){"use strict";n.r(t);var i=n(41744),a=(n(67294),n(3905)),o=n(1176),r=n(80989),s=n(58822),l=n(85893);n(14473),t.default=function(){var e={headline:i.Pu.title,navigationItems:(0,i.Jt)(),tutorialSteps:(0,l.jsx)(a.Zo,{components:s.d,children:(0,l.jsx)(i.ZP,{})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.d,{title:"".concat(i.Pu.title," - Tutorials | iTwin Platform")}),(0,l.jsx)(o.Z,{tutorial:e})]})}},51925:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/create-and-query-itwin-groups-guide",function(){return n(30501)}])}},function(e){e.O(0,[3714,8670,9734,9102,8764,1706,4009,1610,6638,9774,2888,179],(function(){return t=51925,e(e.s=t);var t}));var t=e.O();_N_E=t}]);