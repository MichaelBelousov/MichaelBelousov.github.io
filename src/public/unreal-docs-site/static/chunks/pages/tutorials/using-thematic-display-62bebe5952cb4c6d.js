(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5700],{21073:function(e,t,i){"use strict";i.d(t,{Jt:function(){return T},Pu:function(){return l},ZP:function(){return k}});var n=i(36864),a=i(4730),o=i(67294),s=i(3905),r=["components"],l=(o.createElement,{title:"Using Thematic Display Mode in Your iTwin Viewer",tile:{name:"Using Thematic Display Mode in Your iTwin Viewer",description:"This tutorial explains how to enable and customize thematic display mode.",thumbnail:"/images/tutorials/using-thematic-display-mode/using-thematic-display-3-sm.png",href:"/tutorials/using-thematic-display/",durationInMinutes:15,relatedApiIds:["visualization"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),m=p("Title"),u=p("CodeBlock"),h=p("ContinueLearningSection"),y=p("TileList"),w=p("ResourceTile"),g={metadata:l};function k(e){var t=e.components,i=(0,a.Z)(e,r);return(0,s.kt)("wrapper",(0,n.Z)({},g,i,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(d,{skillLevel:"Basic",durationInMinutes:"15",summaryImageSrc:"/images/tutorials/using-thematic-display-mode/using-thematic-display-sample.png",mdxType:"Introduction"},(0,s.kt)("h2",{id:"introduction"},"Introduction"),(0,s.kt)("p",null,"This tutorial is about thematic display mode, a mode of display style that uses a color gradient to show certain attributes of the geometry. We will first explain what thematic display is and when it might be useful. Then, we will look at how to apply it in your iTwin Viewer application and customize its settings.")),(0,s.kt)(c,{mdxType:"TutorialSection"},(0,s.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,s.kt)("p",null,"This tutorial assumes that you already have:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Your own local source for the iTwin Web Viewer based on the template @itwin/web-viewer",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Instructions for that can be found ",(0,s.kt)("a",{parentName:"li",href:"/tutorials/web-application-quick-start"},"here")))),(0,s.kt)("li",{parentName:"ul"},"Configured your local source to open a sample iModel."))),(0,s.kt)(c,{actions:[(0,s.kt)(m,{mdxType:"Title"},"Creating a new view state"),(0,s.kt)(u,{language:"typescript",code:"const viewportOptionsThematic = {\n  viewState: async (iModel: IModelConnection) => {\n    const viewState = await iModel.views.load(await iModel.views.queryDefaultViewId());\n    viewState.viewFlags = viewState.viewFlags.copy({\n      thematicDisplay: true,\n      grid: false,\n      renderMode: RenderMode.SmoothShade\n    });\n    return viewState;\n  }\n};",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("h2",{id:"1-turning-on-thematic-display"},"1. Turning on Thematic Display"),(0,s.kt)("p",null,"Thematic display mode is a type of display style that uses a customizeable color gradient to highlight attributes of the geometry in an iModel such as height, surface slope, position of surfaces relative to a sun position, or geometric position relative to a list of sensors. The first step to using it to enhance your iTwin viewer is turning it on in your viewport\u2019s display style settings."),(0,s.kt)("p",null,"The Viewer React component that was created by the template web viewer has a ",(0,s.kt)("inlineCode",{parentName:"p"},"viewportOptions")," property that allows you to affect its view state. This is the best place to change its view flags and turn on thematic display."),(0,s.kt)("p",null,"We can do this by creating a variable ",(0,s.kt)("inlineCode",{parentName:"p"},"viewportOptionsThematic")," that returns a promise to a ",(0,s.kt)("inlineCode",{parentName:"p"},"ViewState")," with adjusted settings. We can start out by retrieving the iModel\u2019s default view state by getting its default view ID with ",(0,s.kt)("inlineCode",{parentName:"p"},"iModel.views.queryDefaultViewId()"),", then passing the result into ",(0,s.kt)("inlineCode",{parentName:"p"},"iModel.views.load()"),". We can then turn on thematic display by setting the ",(0,s.kt)("inlineCode",{parentName:"p"},"thematicDisplay")," flag to true. We will also adjust some other settings that make thematic display easier to see, by setting ",(0,s.kt)("inlineCode",{parentName:"p"},"grid")," to false and ",(0,s.kt)("inlineCode",{parentName:"p"},"renderMode")," to ",(0,s.kt)("inlineCode",{parentName:"p"},"RenderMode.SmoothShade"),".")),(0,s.kt)(c,{hasTitle:!1,actions:[(0,s.kt)(m,{mdxType:"Title"},"Setting the viewport options"),(0,s.kt)(u,{language:"typescript",code:'<Viewer\n  iTwinId={iTwinId ?? ""}\n  iModelId={iModelId ?? ""}\n  authClient={authClient}\n  enablePerformanceMonitors={true} // see description in the README (https://www.npmjs.com/package/@itwin/web-viewer-react)\n  onIModelAppInit={onIModelAppInit}\n  uiProviders={[\n    new ViewerNavigationToolsProvider(),\n    new ViewerContentToolsProvider({\n      vertical: {\n        measureGroup: false,\n      },\n    }),\n    new ViewerStatusbarItemsProvider(),\n    new TreeWidgetUiItemsProvider(),\n    new PropertyGridUiItemsProvider({\n      enableCopyingPropertyText: true,\n    }),\n    new MeasureToolsUiItemsProvider(),\n  ]}\n  viewportOptions={viewportOptionsThematic}\n/>',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("p",null,"Now for this change to take effect, we just have to set the Viewer\u2019s ",(0,s.kt)("inlineCode",{parentName:"p"},"viewportOptions")," property to our new view state promise. The code snippet shows what the Viewer component should look like after this change, with ",(0,s.kt)("inlineCode",{parentName:"p"},"viewportOptions")," added at the end.\nWe will also remove the ",(0,s.kt)("inlineCode",{parentName:"p"},"viewCreatorOptions")," property, as it is unnecessary with the view options already being defined by ",(0,s.kt)("inlineCode",{parentName:"p"},"viewportOptions"),".")),(0,s.kt)(c,{mdxType:"TutorialSection"},(0,s.kt)("h4",{id:"11-before"},"1.1 Before"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"/images/tutorials/using-thematic-display-mode/using-thematic-display-1-sm.png",alt:"Without thematic display mode",title:"Without thematic display mode"})),(0,s.kt)("p",null,"The iModel without thematic display."),(0,s.kt)("h4",{id:"12-after"},"1.2 After"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"/images/tutorials/using-thematic-display-mode/using-thematic-display-2-sm.png",alt:"With thematic display mode",title:"With thematic display mode"})),(0,s.kt)("p",null,"The iModel after thematic display is turned on. It appears mostly one color because the range and color scheme have not been adjusted yet.")),(0,s.kt)(c,{actions:[(0,s.kt)(m,{mdxType:"Title"},"Creating new ThematicDisplayProps"),(0,s.kt)(u,{language:"typescript",code:"const props: ThematicDisplayProps = {\n    axis: [0.0, 0.0, 1.0],\n    gradientSettings: {\n      colorScheme: ThematicGradientColorScheme.BlueRed,\n      marginColor: ColorDef.white.toJSON(), \n      mode: ThematicGradientMode.SteppedWithDelimiter,\n      stepCount: 10,\n    },\n    displayMode: ThematicDisplayMode.Height,\n    range: [-5, 127],\n};",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("h2",{id:"2-changing-thematic-display-settings"},"2. Changing Thematic Display Settings"),(0,s.kt)("p",null,"Thematic display mode can be customized by creating a new ",(0,s.kt)("inlineCode",{parentName:"p"},"ThematicDisplayProps")," object and updating the viewport\u2019s thematic display settings. First, create the new object and set different properties like the axis and range to apply the gradient to, and details like the gradient\u2019s colors and number of steps. We used a pre-existing color scheme ",(0,s.kt)("inlineCode",{parentName:"p"},"ThematicGradientColorScheme.BlueRed"),", but it\u2019s also possible to set this to use a custom scheme and specify key colors with the ",(0,s.kt)("inlineCode",{parentName:"p"},"customKeys")," property.")),(0,s.kt)(c,{actions:[(0,s.kt)(m,{mdxType:"Title"},"Adjusting the thematic display settings"),(0,s.kt)(u,{language:"typescript",code:"const viewportOptionsThematic = {\n    viewState: async (iModel: IModelConnection) => {\n      const viewState = await iModel.views.load(await iModel.views.queryDefaultViewId());\n      viewState.viewFlags = viewState.viewFlags.copy({\n        thematicDisplay: true,\n        grid: false,\n        renderMode: RenderMode.SmoothShade\n      });\n      if (viewState.is3d()) {\n        const displayStyle = viewState.getDisplayStyle3d();\n        displayStyle.settings.thematic = ThematicDisplay.fromJSON(props);\n      }\n      return viewState;\n    }\n  };",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,s.kt)("p",null,"To apply the new settings we can first make sure the view state is 3D, which is required for thematic display and allows us to adjust the ",(0,s.kt)("inlineCode",{parentName:"p"},"settings.thematic")," property. Finally, we can set this property to a new ",(0,s.kt)("inlineCode",{parentName:"p"},"ThematicDisplay")," object created from our ",(0,s.kt)("inlineCode",{parentName:"p"},"props")," object so the settings are visible in our viewer.")),(0,s.kt)(c,{mdxType:"TutorialSection"},(0,s.kt)("h4",{id:"21-result"},"2.1 Result"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"/images/tutorials/using-thematic-display-mode/using-thematic-display-3-sm.png",alt:"Customized thematic display mode",title:"Customized thematic display mode"}))),(0,s.kt)(h,{mdxType:"ContinueLearningSection"},(0,s.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,s.kt)(y,{mdxType:"TileList"},(0,s.kt)(w,{title:"Thematic Display",href:"https://www.itwinjs.org/learning/display/thematicdisplay/",description:"Learn more about thematic display and view examples of the different modes.",isExternal:!0,mdxType:"ResourceTile"}),(0,s.kt)(w,{title:"Thematic Display Sample App",href:"https://www.itwinjs.org/sandboxes/iTwinPlatform/Thematic%20Display",description:"A sample sandbox that demonstrates thematic display settings with a UI.",isExternal:!0,mdxType:"ResourceTile"}))))}k.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-turning-on-thematic-display",level:2,title:"1. Turning on Thematic Display",children:[]},{id:"2-changing-thematic-display-settings",level:2,title:"2. Changing Thematic Display Settings",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},9400:function(e,t,i){"use strict";i.r(t);var n=i(3905),a=i(1176),o=i(58822),s=i(21073),r=(i(67294),i(80989)),l=i(85893);i(14473),t.default=function(){var e={headline:s.Pu.title,navigationItems:(0,s.Jt)(),tutorialSteps:(0,l.jsx)(n.Zo,{components:o.d,children:(0,l.jsx)(s.ZP,{})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.d,{title:"".concat(s.Pu.title," - Tutorials | iTwin Platform")}),(0,l.jsx)(a.Z,{tutorial:e})]})}},6045:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/using-thematic-display",function(){return i(9400)}])}},function(e){e.O(0,[3714,8670,9734,9102,8764,1706,4009,1610,6638,9774,2888,179],(function(){return t=6045,e(e.s=t);var t}));var t=e.O();_N_E=t}]);