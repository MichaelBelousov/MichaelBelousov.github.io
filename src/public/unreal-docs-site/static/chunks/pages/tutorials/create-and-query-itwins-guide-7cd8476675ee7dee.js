(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6953],{90230:function(e,t,n){"use strict";n.d(t,{Jt:function(){return v},Pu:function(){return l},ZP:function(){return N}});var i=n(36864),a=n(4730),o=n(67294),r=n(3905),s=["components"],l=(o.createElement,{title:"Create & Query iTwins",tile:{name:"Create & Query iTwins",description:"This tutorial will guide you through the process of creating and querying iTwins",href:"/tutorials/create-and-query-itwins-guide",durationInMinutes:20,relatedApiIds:["itwins"],showInFirstSteps:!1}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},d=p("Introduction"),u=p("TutorialSection"),c=p("LinkButton"),m=p("GoogleChromeIcon"),T=p("VSCodeIcon"),h=p("PostmanIcon"),y=p("CreateSampleAppButton"),k=p("Alert"),w=p("Title"),f=p("CodeBlock"),g=p("ContinueLearningSection"),b=p("TileList"),C=p("ResourceTile"),x={metadata:l};function N(e){var t=e.components,n=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},x,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(d,{skillLevel:"Basic",durationInMinutes:"20",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This tutorial will take you through the process of creating and querying iTwins."),(0,r.kt)("p",null,"By the end of this walk-through, you will be able to utilize the API endpoints to create or query iTwins.")),(0,r.kt)(u,{actions:[(0,r.kt)(c,{href:"https://www.google.com/chrome/",target:"_blank",title:"Google Chrome",icon:(0,r.kt)(m,{mdxType:"GoogleChromeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(c,{href:"https://code.visualstudio.com/",target:"_blank",title:"Visual Studio Code",icon:(0,r.kt)(T,{mdxType:"VSCodeIcon"}),mdxType:"LinkButton"}),(0,r.kt)(c,{href:"https://www.postman.com/downloads/",target:"_blank",title:"Postman",icon:(0,r.kt)(h,{mdxType:"PostmanIcon"}),mdxType:"LinkButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A tool, such as ",(0,r.kt)("inlineCode",{parentName:"li"},"Postman")," that can be used to execute HTTP calls. These calls can also be made using the ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button in the API documentation."),(0,r.kt)("li",{parentName:"ul"},"If a user is affiliated with an Organization, the user must be an Organization Administrator to create an iTwin. An Organization Administrator\nmust have at least one of the following roles assigned in User Management: Account Administrator, Co-Administrator, or CONNECT Services Administrator. For more information about User Management please visit our Bentley Communities ",(0,r.kt)("a",{parentName:"li",href:"https://communities.bentley.com/communities/other_communities/licensing_cloud_and_web_services/w/wiki/50711/user-management-2-0"},"Licensing, Cloud, and Web Services")," wiki page."))),(0,r.kt)(u,{actions:[(0,r.kt)(y,{tooltip:"Register a basic SPA App for this tutorial",clientName:"Create and Query iTwins tutorial",scopes:["iTwins:modify","iTwins:read"],mdxType:"CreateSampleAppButton"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-register-an-application"},"1. Register an Application"),(0,r.kt)("p",null,"You will need to register an application to use the iTwin Platform APIs. You can use the ",(0,r.kt)("strong",{parentName:"p"},"Register")," button to automatically create your first single page application (SPA). This will allow you to configure ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/#authorize-single-page-applications-spa-and-desktopmobile-applications-native"},"Authorization Code Flow for your SPA application")," and get the correct access token."),(0,r.kt)("p",null,"Once generated, you will be shown a few lines of code under the button."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_CLIENT_ID")," - this is the unique identifier for your application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Client ID"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_REDIRECT_URI")," - specifies where users are redirected after they have chosen whether or not to authenticate your app. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_LOGOUT_URI")," - specifies where users can be returned to after logging out. Displayed on application details page as one of ",(0,r.kt)("strong",{parentName:"li"},"Post logout redirect URIs"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IMJS_AUTH_CLIENT_SCOPES")," - list of accesses granted to the application. Displayed on application details page as ",(0,r.kt)("strong",{parentName:"li"},"Scopes"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Or optionally:")," Register and configure your application manually following instructions in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/register-and-modify-application/"},"Register and modify an Application")," tutorial.\nMake sure that your application is associated with ",(0,r.kt)("strong",{parentName:"p"},"iTwins API")," and has ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:modify")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"iTwins:read")," scopes enabled."))),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-get-a-token"},"2. Get a token"),(0,r.kt)("p",null,"Before you can make a request to the APIs, a user token is needed. There are several ways to get it."),(0,r.kt)("h3",{id:"implement-authorization-code-flow-in-the-application"},"Implement Authorization Code Flow in the application"),(0,r.kt)("p",null,"Follow this ",(0,r.kt)("a",{parentName:"p",href:"/apis/overview/authorization/"},"article")," to implement Authorization code workflow in your application."),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Here you can use Client ID generated from previous registration step."),(0,r.kt)("h3",{id:"grab-a-user-token-from-the-itwins-documentation-page"},"Grab a user token from the iTwins documentation page"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go ",(0,r.kt)("a",{parentName:"li",href:"/apis/itwins/operations/get-my-itwins/"},"here")),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Try it out")," button."),(0,r.kt)("li",{parentName:"ol"},"Under the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," section, select ",(0,r.kt)("inlineCode",{parentName:"li"},"authorizationCode")," from the dropdown."),(0,r.kt)("li",{parentName:"ol"},"After the sign in popup closes, the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," header with token value should be visible beneath the ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP request")," dropdown."),(0,r.kt)("li",{parentName:"ol"},"Copy & paste the ",(0,r.kt)("inlineCode",{parentName:"li"},"Authorization")," value for this tutorial.")),(0,r.kt)(k,{type:"informational",mdxType:"Alert"},"Use user token to replace JWT_TOKEN dynamic parameter in the next steps.")),(0,r.kt)(u,{actions:[(0,r.kt)(w,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"POST https://api.bentley.com/itwins/ HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nContent-Type: application/json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Request Body"),(0,r.kt)(f,{language:"json",code:'{\n    "class": "Endeavor",\n    "subClass": "Project",\n    "type": "Construction Project",\n    "number": "iTwin #",\n    "displayName": "my iTwin 2",\n    "dataCenterLocation": "East US",\n    "status": "Active"\n}',mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"HTTP/1.1 201 Created\ncontent-length: 937\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 14:44:18 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 5262b13f-394e-49b8-95ea-a5361d2513a3\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'\n    {\n      "iTwin": {\n          "id": "eb8ffd43-725c-4f9a-9cbd-3b38b4efe168",\n          "class": "Endeavor",\n          "subClass": "Project",\n          "type": "Construction Project",\n          "number": "ifdsafasdfa",\n          "displayName": "fasfdasdaf",\n          "dataCenterLocation": "East US",\n          "status": "Active",\n          "createdDateTime": "2022-06-09T17:26:11.13",\n          "createdBy": "56c58c0c-28a9-4cd2-b50b-102e33b657f2"\n      }\n    }\n    ',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-create-a-new-itwin"},"3. Create a new iTwin"),(0,r.kt)("p",null,"The iTwins API is used to create and manage iTwins. A POST call to the iTwins endpoint will create a new iTwin."),(0,r.kt)("p",null,"At minimum, ",(0,r.kt)("inlineCode",{parentName:"p"},"class"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"subClass"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," are required for creating a new iTwin. The ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName")," properties must be unique. If you get a Conflict error then you will need to replace them with unique values. See the ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/create-itwin/"},"iTwins API documentation")," for descriptions of the different properties, including default values."),(0,r.kt)("p",null,"The POST call will return a new iTwin instance. The ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," can be used to query for the iTwin. The iTwin Id is also used in many other iTwin APIs. You may want to save this Id to use in other tutorials.")),(0,r.kt)(u,{actions:[(0,r.kt)(w,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"GET https://api.bentley.com/itwins/083004cb-9cc1-4d1b-bc2a-d6329288200e HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Accept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"HTTP/1.1 200 OK\ncontent-length: 936\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:10:04 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: fed95960-ea7c-43b5-a9af-66ab5353d073\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n    "iTwin": {\n        "id": "da5be678-7404-4885-a622-eebf0ab29390",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "Test35353535",\n        "displayName": "Test",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2015-11-05T19:10:42.9712696",\n        "createdBy": null\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"4-query-for-an-itwin-using-the-itwin-id"},"4. Query for an iTwin Using the iTwin Id"),(0,r.kt)("p",null,"The iTwin id can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/get-itwin/"},"query for a specific iTwin"),"."),(0,r.kt)("p",null,"The iTwin will only be returned if you are an Organization Administrator or if you have been added as a member of the iTwin with any role. Only a single iTwin will be returned.")),(0,r.kt)(u,{actions:[(0,r.kt)(w,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"GET https://api.bentley.com/itwins/?number=PWCSDemoTest1 HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Prefer: return=representation\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"HTTP/1.1 200 OK\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:20:43 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: dd4d68c9-614d-4d67-8e51-7147c18513f8\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n    "iTwins": [{\n        "id": "daf96c16-fb0a-4f94-90c5-667742cf35be",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "PWCSDemoTest1",\n        "displayName": "PWCSDemoTest1",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2016-01-27T11:44:06.2602325",\n        "createdBy": null\n    }],\n    "_links": {\n        "self": {\n            "href": " https://api.bentley.com/itwins/?$skip=0&$top=100&subClass=Project&number=PWCSDemoTest1"\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"5-query-for-itwins-using-number"},"5. Query for iTwins Using Number"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/my-itwins/"},"find an iTwin"),". Because this is a query, the response will be a list of iTwins that will usually contain one element. The number is unique for iTwins created in your organization. However, it is possible that you are a member of an iTwin in another organization that has the same number."),(0,r.kt)("p",null,"The api will only return iTwins that you are able to access. If you expect it to return a specific iTwin and it does not then you may not have access to that iTwin.")),(0,r.kt)(u,{actions:[(0,r.kt)(w,{mdxType:"Title"},"Request Syntax"),(0,r.kt)(f,{language:"http",code:"GET https://api.bentley.com/itwins/?$search=Tutorial HTTP/1.1",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Request Headers"),(0,r.kt)(f,{language:"http",code:"Prefer: return=minimal\nAccept: application/vnd.bentley.itwin-platform.v1+json\nAuthorization: Bearer JWT_TOKEN",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Headers"),(0,r.kt)(f,{language:"http",code:"HTTP/1.1 200 OK\ncache-control: must-revalidate, no-cache, private\ncontent-encoding: gzip\ncontent-type: application/json\ndate: Thu, 24 Jun 2021 18:40:47 GMT\nrequest-context: appId=cid-v1:7a353d36-9a8b-423e-965e-9d7f51324584\nx-correlation-id: 86bc760f-d0c4-4292-b72d-97a078ce1c7a\nx-itwinplatform-media-type: bentley.itwin-platform.v1\nx-itwinplatform-region: East US",mdxType:"CodeBlock"}),(0,r.kt)(w,{mdxType:"Title"},"Response Body"),(0,r.kt)(f,{language:"json",code:'{\n    "iTwins": [{\n        "id": "083004cb-9cc1-4d1b-bc2a-d6329288200e",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "Tutorial Project 123",\n        "displayName": "Tutorial Sample Project",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2021-06-24T14:44:19.33",\n        "createdBy": "d27f4f7a-cf24-41fa-8044-c17eaaaccfb5"\n    }, {\n        "id": "0ed7a661-4b7f-44ce-b6c3-f0064bb14c70",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "Project A",\n        "displayName": "A Tutorial Project",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2021-06-24T18:48:34.127",\n        "createdBy": "d27f4f7a-cf24-41fa-8044-c17eaaaccfb5"\n    }, {\n        "id": "bc29f384-bd93-48c9-ae6c-08cb36b40fb0",\n        "class": "Endeavor",\n        "subClass": "Project",\n        "type": null,\n        "number": "tutorial A",\n        "displayName": "A Sample Project",\n        "dataCenterLocation": "East US",\n        "status": "Active",\n        "createdDateTime": "2021-06-24T18:49:50.287",\n        "createdBy": "d27f4f7a-cf24-41fa-8044-c17eaaaccfb5"\n    }],\n    "_links": {\n        "self": {\n            "href": " https://api.bentley.com/itwins/?$skip=0&$top=100&subClass=Project&$search=Tutorial"\n        }\n    }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"6-query-for-itwin-using-the-number-or-name-wildcard"},"6. Query for iTwin Using the Number or Name (wildcard)"),(0,r.kt)("p",null,"The $search query parameter can be used to ",(0,r.kt)("a",{parentName:"p",href:"/apis/itwins/operations/my-itwins/"},"find an iTwin")," using a query string that will search using the ",(0,r.kt)("inlineCode",{parentName:"p"},"number")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"displayName"),". This example will find all iTwins with \u201cTutorial\u201d in the number or displayName. The query is case sensitive and you should not add wildcard characters to the query string. This example is the SQL equivalent of number like \u201c%Tutorial%\u201d OR displayName like '%Tutorial%\u2019."),(0,r.kt)("p",null,"Because this is a query, the response will be a list that could contain many iTwins. Notice that this example is using the prefer header to indicate that only the minimal representation of the iTwins should be returned. This should be used whenever possible to improve performance and reduce the size of the response payload."),(0,r.kt)("p",null,"The api will only return iTwins that you are able to access. If you expect it to return a specific set of iTwins and it does not, you may not have access to those iTwins.")),(0,r.kt)(g,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(b,{mdxType:"TileList"},(0,r.kt)(C,{title:"iTwin Sample App",href:"https://github.com/itwin/itwin-api-sample-app",description:"Sample application that uses the iTwins API to create, update and query for iTwins.",isExternal:!0,mdxType:"ResourceTile"}),(0,r.kt)(C,{title:"Manage User Members on iTwins Guide",href:"/tutorials/manage-user-members-on-itwins-guide",description:"Tutorial for managing user members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}),(0,r.kt)(C,{title:"Manage Group Members on iTwins Guide",href:"/tutorials/manage-group-members-on-itwins-guide",description:"Tutorial for managing group members on your iTwins.",isExternal:!1,mdxType:"ResourceTile"}))))}N.isMDXComponent=!0;var v=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-register-an-application",level:2,title:"1. Register an Application",children:[]},{id:"2-get-a-token",level:2,title:"2. Get a token",children:[{id:"implement-authorization-code-flow-in-the-application",level:3,title:"Implement Authorization Code Flow in the application",children:[]},{id:"grab-a-user-token-from-the-itwins-documentation-page",level:3,title:"Grab a user token from the iTwins documentation page",children:[]}]},{id:"3-create-a-new-itwin",level:2,title:"3. Create a new iTwin",children:[]},{id:"4-query-for-an-itwin-using-the-itwin-id",level:2,title:"4. Query for an iTwin Using the iTwin Id",children:[]},{id:"5-query-for-itwins-using-number",level:2,title:"5. Query for iTwins Using Number",children:[]},{id:"6-query-for-itwin-using-the-number-or-name-wildcard",level:2,title:"6. Query for iTwin Using the Number or Name (wildcard)",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},98495:function(e,t,n){"use strict";n.r(t);var i=n(90230),a=(n(67294),n(3905)),o=n(1176),r=n(80989),s=n(58822),l=n(85893);n(14473),t.default=function(){var e={headline:i.Pu.title,navigationItems:(0,i.Jt)(),tutorialSteps:(0,l.jsx)(a.Zo,{components:s.d,children:(0,l.jsx)(i.ZP,{})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.d,{title:"".concat(i.Pu.title," - Tutorials | iTwin Platform")}),(0,l.jsx)(o.Z,{tutorial:e})]})}},20424:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/create-and-query-itwins-guide",function(){return n(98495)}])}},function(e){e.O(0,[3714,8670,9734,9102,8764,1706,4009,1610,6638,9774,2888,179],(function(){return t=20424,e(e.s=t);var t}));var t=e.O();_N_E=t}]);