(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7937],{61876:function(e,t,o){"use strict";o.d(t,{Jt:function(){return f},Pu:function(){return l},ZP:function(){return g}});var r=o(36864),n=o(4730),i=o(67294),a=o(3905),s=["components"],l=(i.createElement,{title:"Copy Project Team Members and Roles to another Project",tile:{name:"Copy Project Team Members and Roles to another Project",description:"This tutorial will demonstrate how to copy team members and roles from one Project to another.",href:"/tutorials/copy-project-team-members-and-roles-to-another-project/",durationInMinutes:10,relatedApiIds:["projects"]}}),p=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)}},d=p("Introduction"),c=p("TutorialSection"),u=p("Alert"),m=p("Title"),h=p("CodeBlock"),T=p("ContinueLearningSection"),k=p("TileList"),y=p("ResourceTile"),b={metadata:l};function g(e){var t=e.components,o=(0,n.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},b,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)(d,{skillLevel:"Basic",durationInMinutes:"10",mdxType:"Introduction"},(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"This tutorial will demonstrate how to copy team members and roles from one Project to another. This tutorial is accompanied by a sample powershell script located ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Administration/Project-Copy-Users"},"here"),". Authorization is provided as a separate ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Authorization/New-OidcAuthCodePkceLogin.ps1"},"script"),".")),(0,a.kt)(c,{mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"This tutorial assumes that you already have:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.1"},"PowerShell")," (Recommended 7.0+ version) installed."),(0,a.kt)("li",{parentName:"ul"},"Access to, or create a new, two projects to use this sample.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Process of creating a new project is covered in ",(0,a.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"this tutorial")))),(0,a.kt)("li",{parentName:"ul"},"Your own ",(0,a.kt)("strong",{parentName:"li"},"Desktop/Mobile")," application/client registered on iTwin Platform.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,a.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,a.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,a.kt)("strong",{parentName:"li"},"Projects API")," and has ",(0,a.kt)("inlineCode",{parentName:"li"},"projects:read")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"projects:modify")," scopes enabled."))))),(0,a.kt)(c,{mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"1-request-access-token-for-use-in-authorization-header"},"1. Request access token for use in Authorization header"),(0,a.kt)("p",null,"Authorization is required for all iTwin Platform API endpoints. See the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Authorization"},"Authorization README")," for more information.\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Administration/Project-Copy-Users/Copy-ProjectUsers.ps1"},"This tutorial powershell sample")," already includes code that obtains an authorization token."),(0,a.kt)(u,{mdxType:"Alert"},"These samples require an Authorization Code + PKCE client. Registration of a"," ",(0,a.kt)("strong",null,"Desktop/Mobile")," application/client will give you an Authorization Code + PKCE client.")),(0,a.kt)(c,{actions:[(0,a.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,a.kt)(h,{language:"http",code:"GET https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/roles HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"2-get-project-roles-from-the-source-project"},"2. Get project roles from the source project"),(0,a.kt)("p",null,"Getting roles from the source project requires sending a GET request to the ",(0,a.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/roles")," endpoint."),(0,a.kt)("h4",{id:"request-headers"},"Request headers"),(0,a.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,a.kt)(c,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Example response body"),(0,a.kt)(h,{language:"json",code:'{\n  "roles":[\n    {\n      "roleId":"752b5a3d-b9f2-4845-824a-99dd310b4898",\n      "displayName":"Project Reader",\n      "description":"Project Reader description"\n    },\n    {\n      "roleId":"ce5399cc-088c-4c48-9f7b-0bff2d72fc25",\n      "displayName":"Project Contributor",\n      "description":"Project Contributor description"\n    }\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"response-body"},"Response body"),(0,a.kt)("p",null,"On the successful response you will get returned the array of project roles from the source project.")),(0,a.kt)(c,{actions:[(0,a.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,a.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/roles HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"3-add-each-role-to-the-destination-project"},"3. Add each role to the destination project"),(0,a.kt)("p",null,"Adding a role to a project requires sending a POST request to the ",(0,a.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/roles")," endpoint."),(0,a.kt)("h4",{id:"request-headers-1"},"Request headers"),(0,a.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,a.kt)(c,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Example request body"),(0,a.kt)(h,{language:"json",code:'{\n  "displayName":"Sample role",\n  "description":"Sample role description"\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"request-body"},"Request body"),(0,a.kt)("p",null,"The request body is specified as JSON and requires ",(0,a.kt)("em",{parentName:"p"},"displayName")," and ",(0,a.kt)("em",{parentName:"p"},"description")," as properties. The API works with one role at a time.")),(0,a.kt)(c,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Example response body"),(0,a.kt)(h,{language:"json",code:'{\n  "role":{\n    "roleId":"faa3dca1-a901-4659-9da1-d9f29ddcc288",\n    "displayName":"Project Role",\n    "description":"An example project role"\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"response-body-1"},"Response body"),(0,a.kt)("p",null,"The response returns a JSON object that contains displayName, description and roleId properties. This response body could be used to set roleIds for the users we want to copy from the source project to the destination project.")),(0,a.kt)(c,{actions:[(0,a.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,a.kt)(h,{language:"http",code:"GET https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"4-get-project-team-members-from-the-source-project"},"4. Get project team members from the source project"),(0,a.kt)("p",null,"Getting team members from the source projects requires sending a GET request to the ",(0,a.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,a.kt)("h4",{id:"request-headers-2"},"Request headers"),(0,a.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,a.kt)(c,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Example response body"),(0,a.kt)(h,{language:"json",code:'{\n  "members":[\n    {\n      "userId":"99cf5e21-735c-4598-99eb-fe3940f96353",\n      "email":"John.Johnson@org.com",\n      "givenName":"John",\n      "surname":"Johnson",\n      "organization":"Organization Corp.",\n      "roles":[\n        "Read Access",\n        "Write Access"\n      ]\n    },\n    {\n      "userId":"25407933-cad2-41a2-acf4-5a074c83046b",\n      "email":"Maria.Miller@org.com",\n      "givenName":"Maria",\n      "surname":"Miller",\n      "organization":"Organization Corp.",\n      "roles":[\n        "Read Access"\n      ]\n    }\n  ],\n  "_links":{\n    "next":{\n      "href":"https://api.bentley.com/projects/806b19d5-c037-48a4-aa98-e297c81453f1/member?$skip=2&$top=2"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"response-body-2"},"Response body"),(0,a.kt)("p",null,"On the successful response you will get returned the array of project members from the source project.")),(0,a.kt)(c,{actions:[(0,a.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,a.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h2",{id:"5-add-each-team-member-to-the-destination-project"},"5. Add each team member to the destination project"),(0,a.kt)("p",null,"Adding a member to a project requires sending a POST request to the ",(0,a.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,a.kt)("h4",{id:"request-headers-3"},"Request headers"),(0,a.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,a.kt)(c,{subSection:!0,actions:[(0,a.kt)(m,{mdxType:"Title"},"Example request body"),(0,a.kt)(h,{language:"json",code:'{\n  "userId":"john.doe@my-org.com",\n  "roleIds":[\n    "722b866c-ef99-48e7-8d9b-d59953f2231c"\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,a.kt)("h4",{id:"request-body-1"},"Request body"),(0,a.kt)("p",null,"The request body is specified as JSON and requires the userId and roleIds properties. The API works with one user at a time. Multiple roles may be assigned to the user via the roleIds array.")),(0,a.kt)(T,{mdxType:"ContinueLearningSection"},(0,a.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,a.kt)(k,{mdxType:"TileList"},(0,a.kt)(y,{title:"Administration API group",href:"/api-groups/administration/",description:"Manage the users, projects, and organizations that interact with your iTwin.",mdxType:"ResourceTile"}),(0,a.kt)(y,{title:"Projects API documentation",href:"/apis/projects/",description:"An overview and detailed Projects API documentation.",mdxType:"ResourceTile"}),(0,a.kt)(y,{title:"iTwin Platform API samples",href:"https://github.com/iTwin/platform-api-samples",description:"PowerShell samples demonstrating API endpoints.",isExternal:!0,mdxType:"ResourceTile"}))))}g.isMDXComponent=!0;var f=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-access-token-for-use-in-authorization-header",level:2,title:"1. Request access token for use in Authorization header",children:[]},{id:"2-get-project-roles-from-the-source-project",level:2,title:"2. Get project roles from the source project",children:[]},{id:"3-add-each-role-to-the-destination-project",level:2,title:"3. Add each role to the destination project",children:[]},{id:"4-get-project-team-members-from-the-source-project",level:2,title:"4. Get project team members from the source project",children:[]},{id:"5-add-each-team-member-to-the-destination-project",level:2,title:"5. Add each team member to the destination project",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},63271:function(e,t,o){"use strict";o.r(t);var r=o(3905),n=o(1176),i=o(58822),a=o(61876),s=(o(67294),o(80989)),l=o(85893);o(14473),t.default=function(){var e={headline:a.Pu.title,navigationItems:(0,a.Jt)(),tutorialSteps:(0,l.jsx)(r.Zo,{components:i.d,children:(0,l.jsx)(a.ZP,{})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.d,{title:"".concat(a.Pu.title," - Tutorials | iTwin Platform")}),(0,l.jsx)(n.Z,{tutorial:e})]})}},74609:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/copy-project-team-members-and-roles-to-another-project",function(){return o(63271)}])}},function(e){e.O(0,[3714,8670,9734,9102,8764,1706,4009,1610,6638,9774,2888,179],(function(){return t=74609,e(e.s=t);var t}));var t=e.O();_N_E=t}]);