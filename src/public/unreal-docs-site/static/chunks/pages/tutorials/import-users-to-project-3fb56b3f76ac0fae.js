(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5480],{61810:function(e,t,i){"use strict";i.d(t,{Jt:function(){return P},Pu:function(){return l},ZP:function(){return y}});var o=i(36864),r=i(4730),a=i(67294),n=i(3905),s=["components"],l=(a.createElement,{title:"Import Users into Project",tile:{name:"Import Users into Project",description:"This tutorial will demonstrate how to add users to a Project from a CSV file.",href:"/tutorials/import-users-to-project/",durationInMinutes:5,relatedApiIds:["projects"]}}),u=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,n.kt)("div",t)}},p=u("Introduction"),d=u("TutorialSection"),c=u("Alert"),m=u("Title"),h=u("CodeBlock"),k=u("ContinueLearningSection"),T=u("TileList"),f=u("ResourceTile"),g={metadata:l};function y(e){var t=e.components,i=(0,r.Z)(e,s);return(0,n.kt)("wrapper",(0,o.Z)({},g,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)(p,{skillLevel:"Basic",durationInMinutes:"5",mdxType:"Introduction"},(0,n.kt)("h2",{id:"introduction"},"Introduction"),(0,n.kt)("p",null,"This tutorial will demonstrate how to add users to a Project from a CSV file. This tutorial is accompanied by a sample powershell script located ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Administration/Project-Import-Users"},"here"),". Authorization is provided as a separate ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Authorization/New-OidcAuthCodePkceLogin.ps1"},"script"),".")),(0,n.kt)(d,{mdxType:"TutorialSection"},(0,n.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("p",null,"This tutorial assumes that you already have:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.1"},"PowerShell")," (Recommended 7.0+ version) installed."),(0,n.kt)("li",{parentName:"ul"},"Access to, or create a new, project to use this sample.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Process of creating a new project is covered in ",(0,n.kt)("a",{parentName:"li",href:"/tutorials/create-and-query-projects-guide/"},"this tutorial")))),(0,n.kt)("li",{parentName:"ul"},"Your own ",(0,n.kt)("strong",{parentName:"li"},"Desktop/Mobile")," application/client registered on iTwin Platform.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Steps to follow for registering an application can be found ",(0,n.kt)("a",{parentName:"li",href:"/tutorials/register-and-modify-application/"},"here"),"."),(0,n.kt)("li",{parentName:"ul"},"Make sure that your application/client is associated with ",(0,n.kt)("strong",{parentName:"li"},"Projects API")," and has ",(0,n.kt)("inlineCode",{parentName:"li"},"projects:read")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"projects:modify")," scopes enabled."))))),(0,n.kt)(d,{mdxType:"TutorialSection"},(0,n.kt)("h2",{id:"1-request-access-token-for-use-in-authorization-header"},"1. Request access token for use in Authorization header"),(0,n.kt)("p",null,"Authorization is required for all iTwin Platform API endpoints. See the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/tree/main/Authorization"},"Authorization README")," for more information.\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/iTwin/platform-api-samples/blob/main/Administration/Project-Import-Users/Import-ProjectUsers.ps1"},"This tutorial powershell sample")," already includes code that obtains an authorization token."),(0,n.kt)(c,{mdxType:"Alert"},"These samples require an Authorization Code + PKCE client. Registration of a"," ",(0,n.kt)("strong",null,"Desktop/Mobile")," application/client will give you an Authorization Code + PKCE client.")),(0,n.kt)(d,{mdxType:"TutorialSection"},(0,n.kt)("h2",{id:"2-read-users-from-csv"},"2. Read users from CSV"),(0,n.kt)("p",null,"Reading users from a CSV is dependent upon your particular development framework and is outside the scope of this tutorial."),(0,n.kt)("p",null,"Users CSV file must be in following format:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-CSV","data-language":"CSV","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Email: Roles\nuser1@example.com: &lt;comma-separated list of project roles&gt;\nuser2@example.com: &lt;comma-separated list of project roles&gt;\n"}}))),(0,n.kt)(d,{actions:[(0,n.kt)(m,{mdxType:"Title"},"Example HTTP request"),(0,n.kt)(h,{language:"http",code:"POST https://api.bentley.com/projects/validation/38b7e366-bc20-4bb1-9572-0797cf5221f/members HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,n.kt)("h2",{id:"3-add-each-user-to-the-project"},"3. Add each user to the Project"),(0,n.kt)("p",null,"Adding a team member to a project requires POSTing the request to the ",(0,n.kt)("inlineCode",{parentName:"p"},"https://api.bentley.com/projects/{id}/members")," endpoint."),(0,n.kt)("h4",{id:"request-headers"},"Request headers"),(0,n.kt)("p",null,"Two headers are required. An authorization header is needed."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-HTTP","data-language":"HTTP","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"Authorization: Bearer JWT_TOKEN\nContent-Type: application/json\n"}}))),(0,n.kt)(d,{subSection:!0,actions:[(0,n.kt)(m,{mdxType:"Title"},"Example request body"),(0,n.kt)(h,{language:"json",code:'{\n  "email":"john.doe@my-org.com",\n  "roleNames":[\n    "Project Role 1",\n    "Project Role 2"\n  ]\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,n.kt)("h4",{id:"request-body"},"Request body"),(0,n.kt)("p",null,"The request body is specified as JSON and requires the email and roleNames properties. The API works with one user at a time, thus one ",(0,n.kt)("em",{parentName:"p"},"email"),". Multiple roles may be requested via the ",(0,n.kt)("em",{parentName:"p"},"roleNames")," array.")),(0,n.kt)(k,{mdxType:"ContinueLearningSection"},(0,n.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,n.kt)(T,{mdxType:"TileList"},(0,n.kt)(f,{title:"Administration API group",href:"/api-groups/administration/",description:"Manage the users, projects, and organizations that interact with your iTwin.",mdxType:"ResourceTile"}),(0,n.kt)(f,{title:"Projects API documentation",href:"/apis/projects/",description:"An overview and detailed Projects API documentation.",mdxType:"ResourceTile"}),(0,n.kt)(f,{title:"iTwin Platform API samples",href:"https://github.com/iTwin/platform-api-samples",description:"PowerShell samples demonstrating API endpoints.",isExternal:!0,mdxType:"ResourceTile"}))))}y.isMDXComponent=!0;var P=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-request-access-token-for-use-in-authorization-header",level:2,title:"1. Request access token for use in Authorization header",children:[]},{id:"2-read-users-from-csv",level:2,title:"2. Read users from CSV",children:[]},{id:"3-add-each-user-to-the-project",level:2,title:"3. Add each user to the Project",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},83825:function(e,t,i){"use strict";i.r(t);var o=i(3905),r=i(1176),a=i(58822),n=i(61810),s=(i(67294),i(80989)),l=i(85893);i(14473),t.default=function(){var e={headline:n.Pu.title,navigationItems:(0,n.Jt)(),tutorialSteps:(0,l.jsx)(o.Zo,{components:a.d,children:(0,l.jsx)(n.ZP,{})})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.d,{title:"".concat(n.Pu.title," - Tutorials | iTwin Platform")}),(0,l.jsx)(r.Z,{tutorial:e})]})}},84091:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/import-users-to-project",function(){return i(83825)}])}},function(e){e.O(0,[3714,8670,9734,9102,8764,1706,4009,1610,6638,9774,2888,179],(function(){return t=84091,e(e.s=t);var t}));var t=e.O();_N_E=t}]);