(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{68017:function(e,t,a){"use strict";a.d(t,{Jt:function(){return T},Pu:function(){return c},ZP:function(){return f}});var n=a(36864),i=a(4730),o=a(67294),r=a(3905),l=["components"],c=(o.createElement,{title:"Using cache in Reality Modeling API",tile:{name:"Using cache in Reality Modeling API",description:"This tutorial focuses on using cache for faster processing in Reality Modeling",thumbnail:"/images/cccs-cache-thumb.png",href:"/tutorials/contextcapture-api-how-to-use-cache/",durationInMinutes:15,relatedApiIds:["contextcapture"]}}),s=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},p=s("Introduction"),u=s("TutorialSection"),d=s("CodeBlock"),h=s("Alert"),m=s("ContinueLearningSection"),k=s("TileList"),g=s("Tile"),y=s("ResourceTile"),b={metadata:c};function f(e){var t=e.components,a=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,n.Z)({},b,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(p,{skillLevel:"Advanced",durationInMinutes:"15",summaryImageSrc:"/images/cccs-cache-header.jpg",mdxType:"Introduction"},(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The goal of this tutorial is to leverage the caching mechanism of ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling REST API")," in order to speed up your processing."),(0,r.kt)("p",null,"In this tutorial, we will create a job to be cached, then use this cache to export another format without reprocessing the complete data.")),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This tutorial assumes that you already have:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Completed the ",(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start"},"Reality Modeling Quick Start tutorial"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tutorials/contextcapture-api-quick-start/#3-create-a-workspace"},"Created a workspace")),(0,r.kt)("li",{parentName:"ul"},"Uploaded input data (images and orientations)"))))),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"1-cache-re-usage-and-behavior"},"1. Cache re-usage and behavior"),(0,r.kt)("h3",{id:"cache-re-usage"},"Cache re-usage"),(0,r.kt)("p",null,"Before creating jobs, it is important to understand how caching works in ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling"),".\nWhen asked for, a cache will be created if the job is successful. If a job is failed or cancelled, no cache will be created."),(0,r.kt)("p",null,"A created cache can be used for later jobs in order to reuse it (new exports for example). This is the table of possible workflows:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"}),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Calibration"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Reconstruction"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Cached Full"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Calibration"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Reconstruction"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"Full"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c\ufe0f"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f")))),(0,r.kt)("p",null,"A new calibration job based on a cached reconstruction will failed for example."),(0,r.kt)("h3",{id:"cache-behavior"},"Cache behavior"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," considers that cache is the truth, and will use it as much as possible.\nFor example, if you submit a full job with a ",(0,r.kt)("em",{parentName:"p"},"Draft")," mesh quality to produce a 3MX, then use it as cache for a full job with ",(0,r.kt)("em",{parentName:"p"},"Extra")," mesh quality to produce an OBJ, you will have a ",(0,r.kt)("em",{parentName:"p"},"Draft")," OBJ result."),(0,r.kt)("p",null,"Caches are standalone snapshot of a job. They don\u2019t depend on each other. Note that for large projects, cache can be very large:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Cache upload will then slow marginally your job"),(0,r.kt)("li",{parentName:"ul"},"Usage of Reality Data will increase")),(0,r.kt)("p",null,"Cache can be cleaned: they are uploaded in the ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Management")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),".")),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"2-create-a-job-that-will-be-cache"},"2. Create a job that will be cache"),(0,r.kt)("p",null,"In order to tell ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," we want to create a cache of the job, we just need to specify a setting in the job creation payload.")),(0,r.kt)(u,{subSection:!0,actions:[(0,r.kt)(d,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("p",null,"A new job with cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(u,{subSection:!0,actions:[(0,r.kt)(d,{language:"json",code:'{\n  "type": "Full",\n  "name": "My Reality Modeling job to be cached",\n  "workspaceId": "WORKSPACE_ID",\n  "inputs": [\n    {\n      "id": "IMAGECOLLECTION_RD_ID",\n      "description": "Drone ImageCollection"\n    },\n    {\n      "id": "CCORIENTATIONS_RD_ID",\n      "description": "Drone CCOrientations"\n    }\n  ],\n  "settings": {\n    "quality": "Extra",\n    "processingEngines": 0,\n    "outputs": [\n      "OBJ"\n    ],\n    "cacheSettings":\n    {\n      "createCache": true\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a new section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"createCache")," set to ",(0,r.kt)("em",{parentName:"p"},"True"),"."),(0,r.kt)("p",null,"At the end of the job, if it is successful, the cache will be automatically uploaded to ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," workspace reality data on ",(0,r.kt)("em",{parentName:"p"},"Reality Management")," - reality data id is the workspace id, in ",(0,r.kt)("inlineCode",{parentName:"p"},"{JOB_ID}/cache"),"."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"Note the JOB_ID created by this job. It will be useful later for using the cache.")),(0,r.kt)(u,{mdxType:"TutorialSection"},(0,r.kt)("h2",{id:"3-use-a-cached-job"},"3. Use a cached job"),(0,r.kt)("p",null,"If you want to export your data to another format - 3SM for example, we can use the cached job to speed up the processing time.")),(0,r.kt)(u,{subSection:!0,actions:[(0,r.kt)(d,{language:"http",code:"POST https://api.bentley.com/contextcapture/jobs HTTP/1.1\nAuthorization: Bearer JWT_TOKEN\nContent-Type: application/json",mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("p",null,"A new job with using cache is created by sending a HTTP POST message to ",(0,r.kt)("a",{parentName:"p",href:"https://api.bentley.com/contextcapture/jobs"},"https://api.bentley.com/contextcapture/jobs")," endpoint with the payload describing the job.")),(0,r.kt)(u,{subSection:!0,actions:[(0,r.kt)(d,{language:"json",code:'{\n  "type":"Full",\n  "name":"My Reality Modeling job using cache",\n  "workspaceId":"WORKSPACE_ID",\n  "inputs":[\n    {\n      "id":"IMAGECOLLECTION_RD_ID",\n      "description":"Drone ImageCollection"\n    },\n    {\n      "id":"CCORIENTATIONS_RD_ID",\n      "description":"Drone CCOrientations"\n    }\n  ],\n  "settings":{\n    "meshQuality":"Extra",\n    "processingEngines":0,\n    "outputs":[\n      "3SM"\n    ],\n    "cacheSettings":{\n      "useCache":"JOB_ID_OF_CACHED_JOB"\n    }\n  }\n}',mdxType:"CodeBlock"})],mdxType:"TutorialSection"},(0,r.kt)("h4",{id:"request-body-1"},"Request Body"),(0,r.kt)("p",null,"As you can see, we added in the settings a section ",(0,r.kt)("inlineCode",{parentName:"p"},"cacheSettings")," with the property ",(0,r.kt)("inlineCode",{parentName:"p"},"useCache")," set to ",(0,r.kt)("em",{parentName:"p"},"JOB_ID_OF_CACHED_JOB"),".\nThis tells ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," to download and use the cached job.\nThat way, your job will be faster, since geometry was cached and only need to be converted to ",(0,r.kt)("em",{parentName:"p"},"3SM")," format."),(0,r.kt)(h,{type:"informational",mdxType:"Alert"},"It is possible to combine both properties in ",(0,r.kt)("code",null,"cacheSettings"),". For example you may want to use the cache of a ",(0,r.kt)("i",null,"Calibration")," job for a"," ",(0,r.kt)("i",null,"Full")," job, and have the result of this job cached for future exports.")),(0,r.kt)(m,{mdxType:"ContinueLearningSection"},(0,r.kt)("h2",{id:"continue-learning"},"Continue learning"),(0,r.kt)("p",null,"Congratulations for completing the ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," cache tutorial! You should now be able to create and use cached job for faster processing.\nTo go further and use ",(0,r.kt)("em",{parentName:"p"},"Reality Modeling")," to its maximum potential, you can check the following tutorials."),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(g,{name:"Better calibration in Reality Modeling",description:"Learn how to specify calibration settings in Reality Modeling, and download the result of a calibration",thumbnail:"/images/cccs-calibration-thumb.jpg",href:"/tutorials/contextcapture-api-better-calibration",mdxType:"Tile"}),(0,r.kt)(g,{name:"Better production in Reality Modeling",description:"Learn how to specify production settings in Reality Modeling",thumbnail:"/images/cccs-production-thumb.jpg",href:"/tutorials/contextcapture-api-better-production",mdxType:"Tile"})),(0,r.kt)("h2",{id:"more-resources-that-you-may-like"},"More resources that you may like"),(0,r.kt)(k,{mdxType:"TileList"},(0,r.kt)(y,{title:"Projects API",href:"/apis/projects/",description:"Project is necessary for using Reality Modeling API. You can check its possibilities.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Data API",href:"/apis/realitydata/",description:"Reality Data API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}),(0,r.kt)(y,{title:"Reality Management API",href:"/apis/reality-management/",description:"Reality Management API is necessary for uploading inputs for Reality Modeling, and downloading outputs.",mdxType:"ResourceTile"}))))}f.isMDXComponent=!0;var T=function(){return[{id:"introduction",level:2,title:"Introduction",children:[]},{id:"prerequisites",level:2,title:"Prerequisites",children:[]},{id:"1-cache-re-usage-and-behavior",level:2,title:"1. Cache re-usage and behavior",children:[{id:"cache-re-usage",level:3,title:"Cache re-usage",children:[]},{id:"cache-behavior",level:3,title:"Cache behavior",children:[]}]},{id:"2-create-a-job-that-will-be-cache",level:2,title:"2. Create a job that will be cache",children:[]},{id:"3-use-a-cached-job",level:2,title:"3. Use a cached job",children:[]},{id:"continue-learning",level:2,title:"Continue learning",children:[]},{id:"more-resources-that-you-may-like",level:2,title:"More resources that you may like",children:[]}]}},13996:function(e,t,a){"use strict";a.r(t);var n=a(3905),i=a(1176),o=a(58822),r=a(68017),l=(a(67294),a(80989)),c=a(85893);a(14473),t.default=function(){var e={headline:r.Pu.title,navigationItems:(0,r.Jt)(),tutorialSteps:(0,c.jsx)(n.Zo,{components:o.d,children:(0,c.jsx)(r.ZP,{})})};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.d,{title:"".concat(r.Pu.title," - Tutorials | iTwin Platform")}),(0,c.jsx)(i.Z,{tutorial:e})]})}},64709:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorials/contextcapture-api-how-to-use-cache",function(){return a(13996)}])}},function(e){e.O(0,[3714,8670,9734,9102,8764,1706,4009,1610,6638,9774,2888,179],(function(){return t=64709,e(e.s=t);var t}));var t=e.O();_N_E=t}]);