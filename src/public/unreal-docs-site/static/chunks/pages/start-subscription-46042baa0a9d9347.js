(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6269],{58709:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(67294),i=n(80989),s=n(2905),c=n(69338),u=n(20949),o=n(8302),a=n(31993),f=n(85893);var l=function(){var e=(0,c.N)(),t=e.isTermsOfServiceAccepted,n=e.receivedState,i=(0,o.k)(),s=i.fetchSession,l=i.session,d=(0,u.A)(),p=(0,r.useState)(void 0),v=p[0],g=p[1],h=(0,r.useState)(void 0),j=h[0],m=h[1];return(0,r.useEffect)((function(){l&&!l.subscription&&t&&n&&(g("Starting your subscription..."),d.startSubscription().then((function(){m("positive"),s()})).catch((function(){m("negative"),g("Something went wrong. Please try again by refreshing this page.")})))}),[s,l,d,t,n]),(0,f.jsx)(a.b,{isFullPage:!0,message:v,status:j})},d=n(46415),p=n(58475);n(14473);var v=(0,p.h)((function(){return(0,f.jsx)(s.A,{flagName:d.DY,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.d,{title:"iTwin Platform"}),(0,f.jsx)(l,{})]})})}))},80989:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var r=n(9008),i=n.n(r),s=n(85893);function c(e){var t=e.title;return(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:t})})}},2905:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(89026),i=n(212),s=n(31993),c=n(85893);function u(e){var t=e.flagName,n=e.children,u=(0,r.L)();return null==u[t]?(0,c.jsx)(s.b,{isFullPage:!0}):u[t]?n:(0,c.jsx)(i.T,{})}},31993:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var r=n(6227),i=(n(45046),n(51974)),s=n(85893);function c(e){var t=e.isFullPage,n=void 0!==t&&t,c=e.hasSecondaryHeader,u=void 0!==c&&c,o=e.message,a=e.status,f=(0,s.jsxs)("div",{className:"spinner-page-overlay",children:[(0,s.jsx)(i.Z,{children:(0,s.jsx)(r.ProgressRadial,{indeterminate:!0,status:a})}),o?(0,s.jsx)("span",{className:"message",children:o}):null]});return n?(0,s.jsx)("div",{className:u?"full-page-with-secondary-header-overlay-container":"full-page-overlay-container",children:f}):f}},212:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(7811),i=n(51974),s=n(6227),c=n(85893);function u(){return(0,c.jsx)(i.Z,{id:"error-page",children:(0,c.jsx)(s.NonIdealState,{svg:(0,c.jsx)(r.M4,{}),heading:"Page not found",description:"You don't have permissions to this page or this page does not exist."})})}},69338:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(50029),i=n(87794),s=n.n(i),c=n(67294),u=n(28038),o=n(45829);function a(){var e=(0,o.m)(),t=e.user,n=e.isLoggedIn,i=(0,c.useMemo)((function(){return new u.Z(t.accessToken)}),[t]),a=(0,c.useState)(!0),f=a[0],l=a[1],d=(0,c.useState)(!1),p=d[0],v=d[1],g=(0,c.useCallback)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.acceptTermsOfService();case 2:case"end":return e.stop()}}),e)}))),[i]);return(0,c.useEffect)((function(){n?i.getTermsOfServiceState().then((function(e){return l(e)})).catch((function(){return l(!0)})).finally((function(){return v(!0)})):(l(!0),v(!1))}),[i,n]),(0,c.useMemo)((function(){return{isTermsOfServiceAccepted:f,receivedState:p,acceptTermsOfService:g}}),[g,f,p])}},58475:function(e,t,n){"use strict";n.d(t,{h:function(){return p}});var r=n(59499),i=n(11163),s=n.n(i),c=n(67294),u=n(31993),o=n(61686),a=n(99301),f=n(69338),l=n(85893);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(e){return function(t){var n=(0,f.N)().isTermsOfServiceAccepted,i=(0,a.m)(),p=i.isLoaded,v=i.isLoggedIn,g=i.signin,h=v&&n;return(0,c.useEffect)((function(){p&&!h&&(v?n||s().push("".concat(o.sz,"?redirect=").concat(encodeURIComponent(s().asPath))):g())}),[p,v,n,h,g]),h?(0,l.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)):(0,l.jsx)(u.b,{isFullPage:!0})}}},68165:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/start-subscription",function(){return n(58709)}])},45046:function(){}},function(e){e.O(0,[7811,9774,2888,179],(function(){return t=68165,e(e.s=t);var t}));var t=e.O();_N_E=t}]);