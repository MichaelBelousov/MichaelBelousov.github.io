(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6F/Y":function(e,t,a){"use strict";a.r(t);var n,r,o=a("NUIj"),c=a.n(o),i=(a("ItPR"),a("tGGB")),u=a("uG+z"),l=a("nNWW"),d=a.n(l),s=a("VcH2"),p=a("UXM+"),m=a.n(p),f=function(){var e=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=document.createElement("a")).style.display="none",a.href=(n=t.content,void 0===(r=void 0)&&(r="text/plain"),void 0===(o=void 0)&&(o="utf-8"),"data:"+r+";charset="+o+","+encodeURI(n)),t.fileName&&(a.download=t.fileName),t.appendEstimatedFileExtension,document.body.append(a),a.click(),a.remove();case 8:case"end":return e.stop()}var n,r,o}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){var n=document.createElement("div");n.style.display="none",n.innerHTML='<input type="file" id="temp-upload" />';var r=n.children[0];r.onchange=function(){try{var n=r.files[0],o=n,c=new FileReader;c.onloadend=function(t){t.target.readyState===FileReader.DONE&&e({name:n.name,content:t.target.result})},"text"===t.type?c.readAsText(o,"utf8"):c.readAsDataURL(o)}catch(i){a(i)}},r.click()}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=[{id:"1",type:"input",data:{label:"entry"},position:{x:540,y:100}}],b=d.a.createContext(new Proxy({},{get:function(){throw Error("cannot consume null context")}}));!function(e){e.dialogueEntry="dialogueEntry"}(r||(r={}));var v=((n={})[r.dialogueEntry]=function(e){var t=d.a.useContext(b);return d.a.createElement("div",{className:m.a.dialogueEntryNode},d.a.createElement(s.b,{type:"target",position:"top",className:m.a.handle,isConnectable:!0}),d.a.createElement("label",null,"portrait",d.a.createElement("select",{onChange:function(t){return e.data.onChange({portrait:t.currentTarget.value})}},Object(u.a)(t.portraits).map((function(e){var t=e[0];return d.a.createElement("option",{value:t},t)})).concat(d.a.createElement("option",null,"none"))),e.data.portrait&&d.a.createElement("img",{className:m.a.portraitImg,src:t.portraits.get(e.data.portrait),alt:e.data.portrait})),d.a.createElement("label",null,"title",d.a.createElement("input",{className:"nodrag",onChange:function(t){return e.data.onChange(Object.assign({},e.data,{title:t.currentTarget.value}))},defaultValue:e.data.title})),d.a.createElement("label",null,"text",d.a.createElement("textarea",{className:"nodrag",onChange:function(t){return e.data.onChange(Object.assign({},e.data,{text:t.currentTarget.value}))},defaultValue:e.data.text})),d.a.createElement("button",{onClick:e.data.onDelete,className:m.a.deleteButton},"Ã—"),d.a.createElement(s.b,{type:"source",position:"bottom",className:m.a.handle,isConnectable:!0}))},n),h={default:function(e){var t=Object(s.g)(e),a=Object(s.f)(e.arrowHeadType,e.markerEndId);return d.a.createElement(d.a.Fragment,null,d.a.createElement("path",{id:e.id,style:Object.assign({},e.style,{strokeWidth:3}),className:"react-flow__edge-path",d:t,markerEnd:a}))}};t.default=function(){var e=d.a.useState(E),t=e[0],a=e[1],n=d.a.useCallback((function(e){e.preventDefault();var t=""+Math.round(Math.random()*Number.MAX_SAFE_INTEGER);a((function(n){return n.concat({id:t,type:r.dialogueEntry,data:{title:"test title",text:"test text",onChange:function(e){return a((function(a){var n=a.slice(),r=n.findIndex((function(e){return e.id===t})),o=n[r];return n[r]=Object.assign({},o,{data:Object.assign({},o.data,e)}),n}))},onDelete:function(){return a((function(e){return Object(s.i)(e.filter((function(e){return e.id===t})),e)}))}},position:{x:e.clientX-0,y:e.clientY-50}})}))}),[a]),o=d.a.useState(new Map),l=o[0],p=o[1];return d.a.createElement("div",{className:m.a.page,onContextMenu:n},d.a.createElement("div",{className:m.a.toolbar},d.a.createElement("button",{onClick:function(){f({fileName:"out.dialogue.json",content:JSON.stringify(t)})}},"Save"),d.a.createElement("button",{onClick:Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({type:"text"});case 2:t=e.sent,n=JSON.parse(t.content),a(n);case 5:case"end":return e.stop()}}),e)})))},"Load"),d.a.createElement("button",{onClick:Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({type:"dataurl"});case 2:t=e.sent,p((function(e){return new Map([].concat(Object(u.a)(e),[[t.name,t.content]]))}));case 4:case"end":return e.stop()}}),e)})))},"Upload Portrait")),d.a.createElement(b.Provider,{value:{portraits:l}},d.a.createElement("div",{className:m.a.graph},d.a.createElement(s.e,{elements:t,onConnect:function(e){return a((function(t){return Object(s.d)(e,t)}))},onElementsRemove:function(e){return a((function(t){return Object(s.i)(e,t)}))},deleteKeyCode:46,snapToGrid:!0,snapGrid:[15,15],nodeTypes:v,edgeTypes:h,onElementClick:function(e,t){Object(s.h)(t)&&a((function(e){return Object(s.i)([t],e)}))}},d.a.createElement(s.a,null),d.a.createElement(s.c,null)))))}},EndP:function(e,t,a){var n=a("aFhH"),r=Math.hypot,o=Math.abs,c=Math.sqrt;n({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var a,n,r=0,i=0,u=arguments.length,l=0;i<u;)l<(a=o(arguments[i++]))?(r=r*(n=l/a)*n+1,l=a):r+=a>0?(n=a/l)*n:a;return l===1/0?1/0:l*c(r)}})},"UXM+":function(e,t,a){e.exports={toolbar:"DialogueEditor-module--toolbar--2WdIZ",graph:"DialogueEditor-module--graph--1_z-x",deleteButton:"DialogueEditor-module--deleteButton--3ZPhz",dialogueEntryNode:"DialogueEditor-module--dialogueEntryNode--gdaLP",handle:"DialogueEditor-module--handle--2Tk3p",portraitImage:"DialogueEditor-module--portraitImage--3zG46"}},mG8T:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=component---src-pages-dialogue-editor-tsx-668e15d4d3b781ac6cf4.js.map